/*! For license information please see decidim_editor-3f83233670b725a79b2c.js.LICENSE.txt */
!function(){var t={3925:function(t,e,n){var r=n(2204);t.exports=(r.__esModule?r:{default:r}).default},2204:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});var r=n(4683),o=i(n(8280));function i(t){return t&&t.__esModule?t:{default:t}}var a=(0,r.cloneDeep)(o.default.theme)},4683:function(t,e){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t){return Array.isArray(t)?t.map((function(t){return i(t)})):"object"===o(t)&&null!==t?Object.fromEntries(Object.entries(t).map((function(t){var e=n(t,2);return[e[0],i(e[1])]}))):t}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"cloneDeep",{enumerable:!0,get:function(){return i}})},8280:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,n,r){var o;return o=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"==e(o)?o:String(o))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}t.exports={content:[],presets:[],darkMode:"media",theme:{accentColor:function(t){return r(r({},(0,t.theme)("colors")),{},{auto:"auto"})},animation:{none:"none",spin:"spin 1s linear infinite",ping:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite",pulse:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",bounce:"bounce 1s infinite"},aria:{busy:'busy="true"',checked:'checked="true"',disabled:'disabled="true"',expanded:'expanded="true"',hidden:'hidden="true"',pressed:'pressed="true"',readonly:'readonly="true"',required:'required="true"',selected:'selected="true"'},aspectRatio:{auto:"auto",square:"1 / 1",video:"16 / 9"},backdropBlur:function(t){return(0,t.theme)("blur")},backdropBrightness:function(t){return(0,t.theme)("brightness")},backdropContrast:function(t){return(0,t.theme)("contrast")},backdropGrayscale:function(t){return(0,t.theme)("grayscale")},backdropHueRotate:function(t){return(0,t.theme)("hueRotate")},backdropInvert:function(t){return(0,t.theme)("invert")},backdropOpacity:function(t){return(0,t.theme)("opacity")},backdropSaturate:function(t){return(0,t.theme)("saturate")},backdropSepia:function(t){return(0,t.theme)("sepia")},backgroundColor:function(t){return(0,t.theme)("colors")},backgroundImage:{none:"none","gradient-to-t":"linear-gradient(to top, var(--tw-gradient-stops))","gradient-to-tr":"linear-gradient(to top right, var(--tw-gradient-stops))","gradient-to-r":"linear-gradient(to right, var(--tw-gradient-stops))","gradient-to-br":"linear-gradient(to bottom right, var(--tw-gradient-stops))","gradient-to-b":"linear-gradient(to bottom, var(--tw-gradient-stops))","gradient-to-bl":"linear-gradient(to bottom left, var(--tw-gradient-stops))","gradient-to-l":"linear-gradient(to left, var(--tw-gradient-stops))","gradient-to-tl":"linear-gradient(to top left, var(--tw-gradient-stops))"},backgroundOpacity:function(t){return(0,t.theme)("opacity")},backgroundPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},backgroundSize:{auto:"auto",cover:"cover",contain:"contain"},blur:{0:"0",none:"0",sm:"4px",DEFAULT:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},borderColor:function(t){var e=t.theme;return r(r({},e("colors")),{},{DEFAULT:e("colors.gray.200","currentColor")})},borderOpacity:function(t){return(0,t.theme)("opacity")},borderRadius:{none:"0px",sm:"0.125rem",DEFAULT:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},borderSpacing:function(t){return r({},(0,t.theme)("spacing"))},borderWidth:{DEFAULT:"1px",0:"0px",2:"2px",4:"4px",8:"8px"},boxShadow:{sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",DEFAULT:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)",inner:"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)",none:"none"},boxShadowColor:function(t){return(0,t.theme)("colors")},brightness:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5",200:"2"},caretColor:function(t){return(0,t.theme)("colors")},colors:function(t){var e=t.colors;return{inherit:e.inherit,current:e.current,transparent:e.transparent,black:e.black,white:e.white,slate:e.slate,gray:e.gray,zinc:e.zinc,neutral:e.neutral,stone:e.stone,red:e.red,orange:e.orange,amber:e.amber,yellow:e.yellow,lime:e.lime,green:e.green,emerald:e.emerald,teal:e.teal,cyan:e.cyan,sky:e.sky,blue:e.blue,indigo:e.indigo,violet:e.violet,purple:e.purple,fuchsia:e.fuchsia,pink:e.pink,rose:e.rose}},columns:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12","3xs":"16rem","2xs":"18rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem"},container:{},content:{none:"none"},contrast:{0:"0",50:".5",75:".75",100:"1",125:"1.25",150:"1.5",200:"2"},cursor:{auto:"auto",default:"default",pointer:"pointer",wait:"wait",text:"text",move:"move",help:"help","not-allowed":"not-allowed",none:"none","context-menu":"context-menu",progress:"progress",cell:"cell",crosshair:"crosshair","vertical-text":"vertical-text",alias:"alias",copy:"copy","no-drop":"no-drop",grab:"grab",grabbing:"grabbing","all-scroll":"all-scroll","col-resize":"col-resize","row-resize":"row-resize","n-resize":"n-resize","e-resize":"e-resize","s-resize":"s-resize","w-resize":"w-resize","ne-resize":"ne-resize","nw-resize":"nw-resize","se-resize":"se-resize","sw-resize":"sw-resize","ew-resize":"ew-resize","ns-resize":"ns-resize","nesw-resize":"nesw-resize","nwse-resize":"nwse-resize","zoom-in":"zoom-in","zoom-out":"zoom-out"},divideColor:function(t){return(0,t.theme)("borderColor")},divideOpacity:function(t){return(0,t.theme)("borderOpacity")},divideWidth:function(t){return(0,t.theme)("borderWidth")},dropShadow:{sm:"0 1px 1px rgb(0 0 0 / 0.05)",DEFAULT:["0 1px 2px rgb(0 0 0 / 0.1)","0 1px 1px rgb(0 0 0 / 0.06)"],md:["0 4px 3px rgb(0 0 0 / 0.07)","0 2px 2px rgb(0 0 0 / 0.06)"],lg:["0 10px 8px rgb(0 0 0 / 0.04)","0 4px 3px rgb(0 0 0 / 0.1)"],xl:["0 20px 13px rgb(0 0 0 / 0.03)","0 8px 5px rgb(0 0 0 / 0.08)"],"2xl":"0 25px 25px rgb(0 0 0 / 0.15)",none:"0 0 #0000"},fill:function(t){return r({none:"none"},(0,t.theme)("colors"))},flex:{1:"1 1 0%",auto:"1 1 auto",initial:"0 1 auto",none:"none"},flexBasis:function(t){return r(r({auto:"auto"},(0,t.theme)("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%"})},flexGrow:{0:"0",DEFAULT:"1"},flexShrink:{0:"0",DEFAULT:"1"},fontFamily:{sans:["ui-sans-serif","system-ui","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:["ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"]},fontSize:{xs:["0.75rem",{lineHeight:"1rem"}],sm:["0.875rem",{lineHeight:"1.25rem"}],base:["1rem",{lineHeight:"1.5rem"}],lg:["1.125rem",{lineHeight:"1.75rem"}],xl:["1.25rem",{lineHeight:"1.75rem"}],"2xl":["1.5rem",{lineHeight:"2rem"}],"3xl":["1.875rem",{lineHeight:"2.25rem"}],"4xl":["2.25rem",{lineHeight:"2.5rem"}],"5xl":["3rem",{lineHeight:"1"}],"6xl":["3.75rem",{lineHeight:"1"}],"7xl":["4.5rem",{lineHeight:"1"}],"8xl":["6rem",{lineHeight:"1"}],"9xl":["8rem",{lineHeight:"1"}]},fontWeight:{thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},gap:function(t){return(0,t.theme)("spacing")},gradientColorStops:function(t){return(0,t.theme)("colors")},gradientColorStopPositions:{"0%":"0%","5%":"5%","10%":"10%","15%":"15%","20%":"20%","25%":"25%","30%":"30%","35%":"35%","40%":"40%","45%":"45%","50%":"50%","55%":"55%","60%":"60%","65%":"65%","70%":"70%","75%":"75%","80%":"80%","85%":"85%","90%":"90%","95%":"95%","100%":"100%"},grayscale:{0:"0",DEFAULT:"100%"},gridAutoColumns:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridAutoRows:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridColumn:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridColumnEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridColumnStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRow:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridRowEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRowStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridTemplateColumns:{none:"none",subgrid:"subgrid",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},gridTemplateRows:{none:"none",subgrid:"subgrid",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},height:function(t){return r(r({auto:"auto"},(0,t.theme)("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%",full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"})},hueRotate:{0:"0deg",15:"15deg",30:"30deg",60:"60deg",90:"90deg",180:"180deg"},inset:function(t){return r(r({auto:"auto"},(0,t.theme)("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"})},invert:{0:"0",DEFAULT:"100%"},keyframes:{spin:{to:{transform:"rotate(360deg)"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},pulse:{"50%":{opacity:".5"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}}},letterSpacing:{tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeight:{none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},listStyleType:{none:"none",disc:"disc",decimal:"decimal"},listStyleImage:{none:"none"},margin:function(t){return r({auto:"auto"},(0,t.theme)("spacing"))},lineClamp:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6"},maxHeight:function(t){return r(r({},(0,t.theme)("spacing")),{},{none:"none",full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"})},maxWidth:function(t){var e=t.theme,n=t.breakpoints;return r(r({},e("spacing")),{},{none:"none",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem",full:"100%",min:"min-content",max:"max-content",fit:"fit-content",prose:"65ch"},n(e("screens")))},minHeight:function(t){return r(r({},(0,t.theme)("spacing")),{},{full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"})},minWidth:function(t){return r(r({},(0,t.theme)("spacing")),{},{full:"100%",min:"min-content",max:"max-content",fit:"fit-content"})},objectPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},opacity:{0:"0",5:"0.05",10:"0.1",15:"0.15",20:"0.2",25:"0.25",30:"0.3",35:"0.35",40:"0.4",45:"0.45",50:"0.5",55:"0.55",60:"0.6",65:"0.65",70:"0.7",75:"0.75",80:"0.8",85:"0.85",90:"0.9",95:"0.95",100:"1"},order:{first:"-9999",last:"9999",none:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},outlineColor:function(t){return(0,t.theme)("colors")},outlineOffset:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},outlineWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},padding:function(t){return(0,t.theme)("spacing")},placeholderColor:function(t){return(0,t.theme)("colors")},placeholderOpacity:function(t){return(0,t.theme)("opacity")},ringColor:function(t){var e=t.theme;return r({DEFAULT:e("colors.blue.500","#3b82f6")},e("colors"))},ringOffsetColor:function(t){return(0,t.theme)("colors")},ringOffsetWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},ringOpacity:function(t){return r({DEFAULT:"0.5"},(0,t.theme)("opacity"))},ringWidth:{DEFAULT:"3px",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},rotate:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg",45:"45deg",90:"90deg",180:"180deg"},saturate:{0:"0",50:".5",100:"1",150:"1.5",200:"2"},scale:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5"},screens:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},scrollMargin:function(t){return r({},(0,t.theme)("spacing"))},scrollPadding:function(t){return(0,t.theme)("spacing")},sepia:{0:"0",DEFAULT:"100%"},skew:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg"},space:function(t){return r({},(0,t.theme)("spacing"))},spacing:{px:"1px",0:"0px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},stroke:function(t){return r({none:"none"},(0,t.theme)("colors"))},strokeWidth:{0:"0",1:"1",2:"2"},supports:{},data:{},textColor:function(t){return(0,t.theme)("colors")},textDecorationColor:function(t){return(0,t.theme)("colors")},textDecorationThickness:{auto:"auto","from-font":"from-font",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},textIndent:function(t){return r({},(0,t.theme)("spacing"))},textOpacity:function(t){return(0,t.theme)("opacity")},textUnderlineOffset:{auto:"auto",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},transformOrigin:{center:"center",top:"top","top-right":"top right",right:"right","bottom-right":"bottom right",bottom:"bottom","bottom-left":"bottom left",left:"left","top-left":"top left"},transitionDelay:{0:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionDuration:{DEFAULT:"150ms",0:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionProperty:{none:"none",all:"all",DEFAULT:"color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter",colors:"color, background-color, border-color, text-decoration-color, fill, stroke",opacity:"opacity",shadow:"box-shadow",transform:"transform"},transitionTimingFunction:{DEFAULT:"cubic-bezier(0.4, 0, 0.2, 1)",linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)","in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},translate:function(t){return r(r({},(0,t.theme)("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"})},size:function(t){return r(r({auto:"auto"},(0,t.theme)("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",min:"min-content",max:"max-content",fit:"fit-content"})},width:function(t){return r(r({auto:"auto"},(0,t.theme)("spacing")),{},{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",screen:"100vw",svw:"100svw",lvw:"100lvw",dvw:"100dvw",min:"min-content",max:"max-content",fit:"fit-content"})},willChange:{auto:"auto",scroll:"scroll-position",contents:"contents",transform:"transform"},zIndex:{auto:"auto",0:"0",10:"10",20:"20",30:"30",40:"40",50:"50"}},plugins:[]}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.p="/decidim-packs/",function(){"use strict";function t(t){this.content=t}t.prototype={constructor:t,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(e,n,r){var o=r&&r!=e?this.remove(r):this,i=o.find(e),a=o.content.slice();return-1==i?a.push(r||e,n):(a[i+1]=n,r&&(a[i]=r)),new t(a)},remove:function(e){var n=this.find(e);if(-1==n)return this;var r=this.content.slice();return r.splice(n,2),new t(r)},addToStart:function(e,n){return new t([e,n].concat(this.remove(e).content))},addToEnd:function(e,n){var r=this.remove(e).content.slice();return r.push(e,n),new t(r)},addBefore:function(e,n,r){var o=this.remove(n),i=o.content.slice(),a=o.find(e);return i.splice(-1==a?i.length:a,0,n,r),new t(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(e){return(e=t.from(e)).size?new t(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=t.from(e)).size?new t(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var n=this;e=t.from(e);for(var r=0;r<e.content.length;r+=2)n=n.remove(e.content[r]);return n},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},t.from=function(e){if(e instanceof t)return e;var n=[];if(e)for(var r in e)n.push(r,e[r]);return new t(n)};var e=t;function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},i.apply(this,arguments)}function a(t,e,n){return e=f(e),function(t,e){if(e&&("object"===d(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],f(t).constructor):e.apply(t,n))}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function u(t){var e="function"===typeof Map?new Map:void 0;return u=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"===typeof t}}(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(c())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&l(o,n.prototype),o}(t,arguments,f(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)},u(t)}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function m(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:String(e)}function y(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var a=0;o.text[a]==i.text[a];a++)n++;return n}if(o.content.size||i.content.size){var s=y(o.content,i.content,n+1);if(null!=s)return s}n+=o.nodeSize}else n+=o.nodeSize}}function g(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=t.child(--o),s=e.child(--i),u=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:n,b:r};if(a.isText&&a.text!=s.text){for(var c=0,l=Math.min(a.text.length,s.text.length);c<l&&a.text[a.text.length-c-1]==s.text[s.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(a.content.size||s.content.size){var f=g(a.content,s.content,n-1,r-1);if(f)return f}n-=u,r-=u}else n-=u,r-=u}}var b=function(){function t(e,n){if(h(this,t),this.content=e,this.size=n||0,null==n)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize}return m(t,[{key:"nodesBetween",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,a=0;a<e;i++){var s=this.content[i],u=a+s.nodeSize;if(u>t&&!1!==n(s,r+a,o||null,i)&&s.content.size){var c=a+1;s.nodesBetween(Math.max(0,t-c),Math.min(s.content.size,e-c),n,r+c)}a=u}}},{key:"descendants",value:function(t){this.nodesBetween(0,this.size,t)}},{key:"textBetween",value:function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(a,s){var u=a.isText?a.text.slice(Math.max(t,s)-s,e-s):a.isLeaf?r?"function"===typeof r?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(i?i=!1:o+=n),o+=u}),0),o}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new t(o,this.size+e.size)}},{key:"cut",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&n==this.size)return this;var r=[],o=0;if(n>e)for(var i=0,a=0;a<n;i++){var s=this.content[i],u=a+s.nodeSize;u>e&&((a<e||u>n)&&(s=s.isText?s.cut(Math.max(0,e-a),Math.min(s.text.length,n-a)):s.cut(Math.max(0,e-a-1),Math.min(s.content.size,n-a-1))),r.push(s),o+=s.nodeSize),a=u}return new t(r,o)}},{key:"cutByIndex",value:function(e,n){return e==n?t.empty:0==e&&n==this.content.length?this:new t(this.content.slice(e,n))}},{key:"replaceChild",value:function(e,n){var r=this.content[e];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new t(o,i)}},{key:"addToStart",value:function(e){return new t([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new t(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}},{key:"maybeChild",value:function(t){return this.content[t]||null}},{key:"forEach",value:function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}}},{key:"findDiffStart",value:function(t){return y(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}},{key:"findDiffEnd",value:function(t){return g(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.size)}},{key:"findIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==t)return k(0,t);if(t==this.size)return k(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?k(n+1,o):k(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return t.empty;for(var n,r=0,o=0;o<e.length;o++){var i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new t(n||e,r)}},{key:"from",value:function(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),t}();b.empty=new b([],0);var w={index:0,offset:0};function k(t,e){return w.index=t,w.offset=e,w}function x(t,e){if(t===e)return!0;if(!t||"object"!=d(t)||!e||"object"!=d(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!x(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!x(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}var E=function(){function t(e,n){h(this,t),this.type=e,this.attrs=n}return m(t,[{key:"addToSet",value:function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}},{key:"eq",value:function(t){return this==t||this.type==t.type&&x(this.attrs,t.attrs)}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type ".concat(e.type," in this schema"));return n.create(e.attrs)}},{key:"sameSet",value:function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&0==e.length)return t.none;if(e instanceof t)return[e];var n=e.slice();return n.sort((function(t,e){return t.type.rank-e.type.rank})),n}}]),t}();E.none=[];var S=function(t){function e(){return h(this,e),a(this,e,arguments)}return s(e,t),m(e)}(u(Error)),D=function(){function t(e,n,r){h(this,t),this.content=e,this.openStart=n,this.openEnd=r}return m(t,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,n){var r=O(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,n){return new t(C(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new t(b.fromJSON(e,n.content),r,o)}},{key:"maxOpen",value:function(e){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var a=e.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)o++;return new t(e,r,o)}}]),t}();function C(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,a=t.maybeChild(o),s=t.findIndex(n),u=s.index,c=s.offset;if(i==e||a.isText){if(c!=n&&!t.child(u).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=u)throw new RangeError("Removing non-flat range");return t.replaceChild(o,a.copy(C(a.content,e-i-1,n-i-1)))}function O(t,e,n,r){var o=t.findIndex(e),i=o.index,a=o.offset,s=t.maybeChild(i);if(a==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var u=O(s.content,e-a-1,n);return u&&t.replaceChild(i,s.copy(u))}function A(t,e,n){if(n.openStart>t.depth)throw new S("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new S("Inconsistent open depths");return j(t,e,n,0)}function j(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var a=j(t,e,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var s=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(b.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return F(i,N(t,s.start,s.end,e,r))}var u=t.parent,c=u.content;return F(u,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}return F(i,_(t,e,r))}function T(t,e){if(!e.type.compatibleContent(t.type))throw new S("Cannot join "+e.type.name+" onto "+t.type.name)}function M(t,e,n){var r=t.node(n);return T(r,e.node(n)),r}function L(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function P(t,e,n,r){var o=(e||t).node(n),i=0,a=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(L(t.nodeAfter,r),i++));for(var s=i;s<a;s++)L(o.child(s),r);e&&e.depth==n&&e.textOffset&&L(e.nodeBefore,r)}function F(t,e){return t.type.checkContent(e),t.copy(e)}function N(t,e,n,r,o){var i=t.depth>o&&M(t,e,o+1),a=r.depth>o&&M(n,r,o+1),s=[];return P(null,t,o,s),i&&a&&e.index(o)==n.index(o)?(T(i,a),L(F(i,N(t,e,n,r,o+1)),s)):(i&&L(F(i,_(t,e,o+1)),s),P(e,n,o,s),a&&L(F(a,_(n,r,o+1)),s)),P(r,null,o,s),new b(s)}function _(t,e,n){var r=[];(P(null,t,n,r),t.depth>n)&&L(F(M(t,e,n+1),_(t,e,n+1)),r);return P(e,null,n,r),new b(r)}D.empty=new D(b.empty,0,0);var B=function(){function t(e,n,r){h(this,t),this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return m(t,[{key:"resolveDepth",value:function(t){return null==t?this.depth:t<0?this.depth+t:t}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(t){return this.path[3*this.resolveDepth(t)]}},{key:"index",value:function(t){return this.path[3*this.resolveDepth(t)+1]}},{key:"indexAfter",value:function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}},{key:"end",value:function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}},{key:"before",value:function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}},{key:"after",value:function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}},{key:"nodeBefore",get:function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}},{key:"posAtIndex",value:function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var t=this.parent,e=this.index();if(0==t.content.size)return E.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i}},{key:"marksAcross",value:function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}},{key:"blockRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=arguments.length>1?arguments[1]:void 0;if(t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new H(this,t,n);return null}},{key:"sameParent",value:function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}},{key:"max",value:function(t){return t.pos>this.pos?t:this}},{key:"min",value:function(t){return t.pos<this.pos?t:this}},{key:"toString",value:function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}}],[{key:"resolve",value:function(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,a=e;;){var s=a.content.findIndex(i),u=s.index,c=s.offset,l=i-c;if(r.push(a,u,o+c),!l)break;if((a=a.child(u)).isText)break;i=l-1,o+=c+1}return new t(n,r,i)}},{key:"resolveCached",value:function(e,n){for(var r=0;r<I.length;r++){var o=I[r];if(o.pos==n&&o.doc==e)return o}var i=I[R]=t.resolve(e,n);return R=(R+1)%z,i}}]),t}(),I=[],R=0,z=12,H=function(){function t(e,n,r){h(this,t),this.$from=e,this.$to=n,this.depth=r}return m(t,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),t}(),V=Object.create(null),$=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.none;h(this,t),this.type=e,this.attrs=n,this.marks=o,this.content=r||b.empty}return m(t,[{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(t){return this.content.child(t)}},{key:"maybeChild",value:function(t){return this.content.maybeChild(t)}},{key:"forEach",value:function(t){this.content.forEach(t)}},{key:"nodesBetween",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(t,e,n,r,this)}},{key:"descendants",value:function(t){this.nodesBetween(0,this.content.size,t)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(t,e,n,r){return this.content.textBetween(t,e,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}},{key:"sameMarkup",value:function(t){return this.hasMarkup(t.type,t.attrs,t.marks)}},{key:"hasMarkup",value:function(t,e,n){return this.type==t&&x(this.attrs,e||t.defaultAttrs||V)&&E.sameSet(this.marks,n||E.none)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t==e)return D.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new D(s,r.depth-i,o.depth-i)}},{key:"replace",value:function(t,e,n){return A(this.resolve(t),this.resolve(e),n)}},{key:"nodeAt",value:function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}}},{key:"childAfter",value:function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}},{key:"resolve",value:function(t){return B.resolveCached(this,t)}},{key:"resolveNoCache",value:function(t){return B.resolve(this,t)}},{key:"rangeHasMark",value:function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),W(this.marks,t)}},{key:"contentMatchAt",value:function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}},{key:"canReplace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(t).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0}},{key:"canReplaceWith",value:function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd}},{key:"canAppend",value:function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}},{key:"check",value:function(){this.type.checkContent(this.content);for(var t=E.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!E.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(t){return t.type.name}))));this.content.forEach((function(t){return t.check()}))}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=b.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)}}]),t}();$.prototype.text=void 0;var q=function(t){function e(t,n,r,o){var i;if(h(this,e),i=a(this,e,[t,n,null,o]),!r)throw new RangeError("Empty text nodes are not allowed");return i.text=r,i}return s(e,t),m(e,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):W(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(t,e){return this.text.slice(t,e)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)}},{key:"withText",value:function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)}},{key:"cut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}},{key:"eq",value:function(t){return this.sameMarkup(t)&&this.text==t.text}},{key:"toJSON",value:function(){var t=i(f(e.prototype),"toJSON",this).call(this);return t.text=this.text,t}}]),e}($);function W(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var K=function(){function t(e){h(this,t),this.validEnd=e,this.next=[],this.wrapCache=[]}return m(t,[{key:"matchType",value:function(t){for(var e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}},{key:"matchFragment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.childCount,r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var t=0;t<this.next.length;t++){var e=this.next[t].type;if(!e.isText&&!e.hasRequiredAttrs())return e}return null}},{key:"compatible",value:function(t){for(var e=0;e<this.next.length;e++)for(var n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(i,a){var s=i.matchFragment(t,n);if(s&&(!e||s.validEnd))return b.from(a.map((function(t){return t.createAndFill()})));for(var u=0;u<i.next.length;u++){var c=i.next[u],l=c.type,f=c.next;if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(f)){r.push(f);var d=o(f,a.concat(l));if(d)return d}}return null}(this,[])}},{key:"findWrapping",value:function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}},{key:"computeWrapping",value:function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s++){var u=o.next[s],c=u.type,l=u.next;c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!l.validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(t){if(t>=this.next.length)throw new RangeError("There's no ".concat(t,"th edge in this content match"));return this.next[t]}},{key:"toString",value:function(){var t=[];return function e(n){t.push(n);for(var r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o++)r+=(o?", ":"")+e.next[o].type.name+"->"+t.indexOf(e.next[o].next);return r})).join("\n")}}],[{key:"parse",value:function(e,n){var r=new U(e,n);if(null==r.next)return t.empty;var o=G(r);r.next&&r.err("Unexpected trailing text");var i=et(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"!=t.type){if("star"==t.type){var a=n();return r(e,a),o(i(t.expr,a),a),[r(a)]}if("plus"==t.type){var s=n();return o(i(t.expr,e),s),o(i(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,c=0;c<t.min;c++){var l=n();o(i(t.expr,u),l),u=l}if(-1==t.max)o(i(t.expr,u),u);else for(var f=t.min;f<t.max;f++){var d=n();r(u,d),o(i(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(var h=0;;h++){var p=i(t.exprs[h],e);if(h==t.exprs.length-1)return p;o(p,e=n())}}}(o));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s++){var u=o.next[s],c=u.type,l=u.next;a.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}}]),t}();K.empty=new K(!0);var U=function(){function t(e,n){h(this,t),this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}return m(t,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(t){return this.next==t&&(this.pos++||!0)}},{key:"err",value:function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}]),t}();function G(t){var e=[];do{e.push(J(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function J(t){var e=[];do{e.push(Y(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Y(t){for(var e=function(t){if(t.eat("(")){var e=G(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var a=n[i];a.groups.indexOf(e)>-1&&o.push(a)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=X(t,e)}return e}function Z(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function X(t,e){var n=Z(t),r=n;return t.eat(",")&&(r="}"!=t.next?Z(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Q(t,e){return e-t}function tt(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,u=a.to;s||-1!=n.indexOf(u)||e(u)}}(e),n.sort(Q)}function et(t){var e=Object.create(null);return function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){for(var i,a=0;a<o.length;a++)o[a][0]==n&&(i=o[a][1]);tt(t,r).forEach((function(t){i||o.push([n,i=[]]),-1==i.indexOf(t)&&i.push(t)}))}}))}));for(var i=e[r.join(",")]=new K(r.indexOf(t.length-1)>-1),a=0;a<o.length;a++){var s=o[a][1].sort(Q);i.next.push({type:o[a][0],next:e[s.join(",")]||n(s)})}return i}(tt(t,0))}function nt(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function rt(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function ot(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new at(t[n]);return e}var it=function(){function t(e,n,r){h(this,t),this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ot(r.attrs),this.defaultAttrs=nt(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}return m(t,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==K.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(t){return this==t||this.contentMatch.compatible(t.contentMatch)}},{key:"computeAttrs",value:function(t){return!t&&this.defaultAttrs?this.defaultAttrs:rt(this.attrs,t)}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $(this,this.computeAttrs(t),b.from(e),E.setFrom(n))}},{key:"createChecked",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e=b.from(e),this.checkContent(e),new $(this,this.computeAttrs(t),e,E.setFrom(n))}},{key:"createAndFill",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(t=this.computeAttrs(t),(e=b.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e),i=o&&o.fillBefore(b.empty,!0);return i?new $(this,t,e.append(i),E.setFrom(n)):null}},{key:"validContent",value:function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(t){if(!this.validContent(t))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(t.toString().slice(0,50)))}},{key:"allowsMarkType",value:function(t){return null==this.markSet||this.markSet.indexOf(t)>-1}},{key:"allowsMarks",value:function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}},{key:"allowedMarks",value:function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:E.none:t}}],[{key:"compile",value:function(e,n){var r=Object.create(null);e.forEach((function(e,o){return r[e]=new t(e,n,o)}));var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}]),t}(),at=function(){function t(e){h(this,t),this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}return m(t,[{key:"isRequired",get:function(){return!this.hasDefault}}]),t}(),st=function(){function t(e,n,r,o){h(this,t),this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=ot(o.attrs),this.excluded=null;var i=nt(this.attrs);this.instance=i?new E(this,i):null}return m(t,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!t&&this.instance?this.instance:new E(this,rt(this.attrs,t))}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]}},{key:"excludes",value:function(t){return this.excluded.indexOf(t)>-1}}],[{key:"compile",value:function(e,n){var r=Object.create(null),o=0;return e.forEach((function(e,i){return r[e]=new t(e,o++,n,i)})),r}}]),t}(),ut=function(){function t(n){h(this,t),this.cached=Object.create(null);var r=this.spec={};for(var o in n)r[o]=n[o];r.nodes=e.from(n.nodes),r.marks=e.from(n.marks||{}),this.nodes=it.compile(this.spec.nodes,this),this.marks=st.compile(this.spec.marks,this);var i=Object.create(null);for(var a in this.nodes){if(a in this.marks)throw new RangeError(a+" can not be both a node and a mark");var s=this.nodes[a],u=s.spec.content||"",c=s.spec.marks;s.contentMatch=i[u]||(i[u]=K.parse(u,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==c?null:c?ct(this,c.split(" ")):""!=c&&s.inlineContent?null:[]}for(var l in this.marks){var f=this.marks[l],d=f.spec.excludes;f.excluded=null==d?[f]:""==d?[]:ct(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}return m(t,[{key:"node",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof it))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}},{key:"text",value:function(t,e){var n=this.nodes.text;return new q(n,n.defaultAttrs,t,E.setFrom(e))}},{key:"mark",value:function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}},{key:"nodeFromJSON",value:function(t){return $.fromJSON(this,t)}},{key:"markFromJSON",value:function(t){return E.fromJSON(this,t)}},{key:"nodeType",value:function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}]),t}();function ct(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],a=i;if(i)n.push(i);else for(var s in t.marks){var u=t.marks[s];("_"==o||u.spec.group&&u.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}var lt=function(){function t(e,n){var r=this;h(this,t),this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(t){t.tag?r.tags.push(t):t.style&&r.styles.push(t)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}return m(t,[{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new vt(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}},{key:"parseSlice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new vt(this,e,!0);return n.addAll(t,e.from,e.to),D.maxOpen(n.finish())}},{key:"matchTag",value:function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(yt(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],a=i.style;if(!(0!=a.indexOf(t)||i.context&&!n.matchesContext(i.context)||a.length>t.length&&(61!=a.charCodeAt(t.length)||a.slice(t.length+1)!=e))){if(i.getAttrs){var s=i.getAttrs(e);if(!1===s)continue;i.attrs=s||void 0}return i}}}}],[{key:"schemaRules",value:function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=gt(t)),t.mark||t.ignore||t.clearMark||(t.mark=e)}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[e].spec.parseDOM;r&&r.forEach((function(t){n(t=gt(t)),t.node||t.ignore||t.mark||(t.node=e)}))};for(var a in t.nodes)i(a);return e}},{key:"fromSchema",value:function(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}}]),t}(),ft={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},dt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ht={ol:!0,ul:!0};function pt(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}var mt=function(){function t(e,n,r,o,i,a,s){h(this,t),this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=i,this.options=s,this.content=[],this.activeMarks=E.none,this.stashMarks=[],this.match=a||(4&s?null:e.contentMatch)}return m(t,[{key:"findWrapping",value:function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(b.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}},{key:"finish",value:function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];if(n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length))}}var o=b.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(b.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"popFromStashMark",value:function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}},{key:"applyPending",value:function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):bt(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!ft.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}]),t}(),vt=function(){function t(e,n,r){h(this,t),this.parser=e,this.options=n,this.isOpen=r,this.open=0;var o,i=n.topNode,a=pt(null,n.preserveWhitespace,0)|(r?4:0);o=i?new mt(i.type,i.attrs,E.none,E.none,!0,n.topMatch||i.type.contentMatch,a):new mt(r?null:e.schema.topNodeType,null,E.none,E.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}return m(t,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(t){3==t.nodeType?this.addTextNode(t):1==t.nodeType&&this.addElement(t)}},{key:"withStyleRules",value:function(t,e){var n=t.getAttribute("style");if(!n)return e();var o=this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(n));if(o){for(var i=r(o,2),a=i[0],s=i[1],u=this.top,c=0;c<s.length;c++)this.removePendingMark(s[c],u);for(var l=0;l<a.length;l++)this.addPendingMark(a[l]);e();for(var f=0;f<a.length;f++)this.removePendingMark(a[f],u);for(var d=0;d<s.length;d++)this.addPendingMark(s[d])}}},{key:"addTextNode",value:function(t){var e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}},{key:"addElement",value:function(t,e){var n,r=this,o=t.nodeName.toLowerCase();ht.hasOwnProperty(o)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&ht.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:dt.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var a,s=this.top,u=this.needsBlock;if(ft.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),a=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);i&&i.skip?this.addAll(t):this.withStyleRules(t,(function(){return r.addAll(t)})),a&&this.sync(s),this.needsBlock=u}else this.withStyleRules(t,(function(){r.addElementByRule(t,i,!1===i.consuming?n:void 0)}))}},{key:"leafFallback",value:function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}},{key:"ignoreFallback",value:function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(t){for(var e=this,n=E.none,r=E.none,o=0;o<t.length;o+=2)for(var i,a=function(i){var a=e.parser.matchStyle(t[o],t[o+1],e,i);return a?a.ignore?{v:null}:(a.clearMark?e.top.pendingMarks.concat(e.top.activeMarks).forEach((function(t){a.clearMark(t)&&(r=t.addToSet(r))})):n=e.parser.schema.marks[a.mark].create(a.attrs).addToSet(n),!1!==a.consuming?(s=i,0):void(s=i=a)):(s=i,0)},s=void 0;0!==(i=a(s));)if(i)return i.v;return[n,r]}},{key:"addElementByRule",value:function(t,e,n){var r,o,i,a=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs||null,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var s=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return a.insertNode(t)}));else{var u=t;"string"==typeof e.contentElement?u=t.querySelector(e.contentElement):"function"==typeof e.contentElement?u=e.contentElement(t):e.contentElement&&(u=e.contentElement),this.findAround(t,u,!0),this.addAll(u)}r&&this.sync(s)&&this.open--,i&&this.removePendingMark(i,s)}},{key:"addAll",value:function(t,e,n){for(var r=e||0,o=e?t.childNodes[e]:t.firstChild,i=null==n?null:t.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(o);this.findAtPoint(t,r)}},{key:"findPlace",value:function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var a=0;a<e.length;a++)this.enterInner(e[a],null,!1);return!0}},{key:"insertNode",value:function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}},{key:"enter",value:function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}},{key:"enterInner",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t);var i=pt(t,r,o.options);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new mt(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}},{key:"closeExtra",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t}},{key:"findAtPoint",value:function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}},{key:"findAround",value:function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}},{key:"findInText",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}},{key:"matchesContext",value:function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(a,s){for(;a>=0;a--){var u=n[a];if(""==u){if(a==n.length-1||0==a)continue;for(;s>=i;s--)if(t(a-1,s))return!0;return!1}var c=s>0||0==s&&o?e.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!c||c.name!=u&&-1==c.groups.indexOf(u))return!1;s--}return!0}(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}},{key:"addPendingMark",value:function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}}}]),t}();function yt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function gt(t){var e={};for(var n in t)e[n]=t[n];return e}function bt(t,e){var n,r=e.schema.nodes,o=function(){var n=r[i];if(!n.allowsMarkType(t))return 0;var o=[];return function t(n){o.push(n);for(var r=0;r<n.edgeCount;r++){var i=n.edge(r),a=i.type,s=i.next;if(a==e)return!0;if(o.indexOf(s)<0&&t(s))return!0}}(n.contentMatch)?{v:!0}:void 0};for(var i in r)if(0!==(n=o())&&n)return n.v}var wt=function(){function t(e,n){h(this,t),this.nodes=e,this.marks=n}return m(t,[{key:"serializeFragment",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=xt(n).createDocumentFragment());var o=r,i=[];return t.forEach((function(t){if(i.length||t.marks.length){for(var r=0,a=0;r<i.length&&a<t.marks.length;){var s=t.marks[a];if(e.marks[s.type.name]){if(!s.eq(i[r][0])||!1===s.type.spec.spanning)break;r++,a++}else a++}for(;r<i.length;)o=i.pop()[1];for(;a<t.marks.length;){var u=t.marks[a++],c=e.serializeMark(u,t.isInline,n);c&&(i.push([u,o]),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(e.serializeNodeInner(t,n))})),r}},{key:"serializeNodeInner",value:function(e,n){var r=t.renderSpec(xt(n),this.nodes[e.type.name](e)),o=r.dom,i=r.contentDOM;if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return o}},{key:"serializeNode",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.marks[e.type.name];return o&&t.renderSpec(xt(r),o(e,n))}}],[{key:"renderSpec",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof n)return{dom:e.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;var o,i=n[0],a=i.indexOf(" ");a>0&&(r=i.slice(0,a),i=i.slice(a+1));var s=r?e.createElementNS(r,i):e.createElement(i),u=n[1],c=1;if(u&&"object"==d(u)&&null==u.nodeType&&!Array.isArray(u))for(var l in c=2,u)if(null!=u[l]){var f=l.indexOf(" ");f>0?s.setAttributeNS(l.slice(0,f),l.slice(f+1),u[l]):s.setAttribute(l,u[l])}for(var h=c;h<n.length;h++){var p=n[h];if(0===p){if(h<n.length-1||h>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var m=t.renderSpec(e,p,r),v=m.dom,y=m.contentDOM;if(s.appendChild(v),y){if(o)throw new RangeError("Multiple content holes");o=y}}return{dom:s,contentDOM:o}}},{key:"fromSchema",value:function(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(t){var e=kt(t.nodes);return e.text||(e.text=function(t){return t.text}),e}},{key:"marksFromSchema",value:function(t){return kt(t.marks)}}]),t}();function kt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function xt(t){return t.document||window.document}function Et(t){var e="function"===typeof Map?new Map:void 0;return function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"===typeof t}}(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Dt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&At(o,n.prototype),o}(t,arguments,Ct(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),At(n,t)},Et(t)}function St(t,e,n){return e=Ct(e),function(t,e){if(e&&("object"===jt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dt()?Reflect.construct(e,n||[],Ct(t).constructor):e.apply(t,n))}function Dt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dt=function(){return!!t})()}function Ct(t){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ct(t)}function Ot(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}function At(t,e){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},At(t,e)}function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Lt(t,e,n){return e&&Mt(t.prototype,e),n&&Mt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pt(t){var e=function(t,e){if("object"!=jt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jt(e)?e:String(e)}var Ft=Math.pow(2,16);function Nt(t){return 65535&t}var _t=function(){function t(e,n,r){Tt(this,t),this.pos=e,this.delInfo=n,this.recover=r}return Lt(t,[{key:"deleted",get:function(){return(8&this.delInfo)>0}},{key:"deletedBefore",get:function(){return(5&this.delInfo)>0}},{key:"deletedAfter",get:function(){return(6&this.delInfo)>0}},{key:"deletedAcross",get:function(){return(4&this.delInfo)>0}}]),t}(),Bt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Tt(this,t),this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}return Lt(t,[{key:"recover",value:function(t){var e=0,n=Nt(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/Ft}(t)}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!0)}},{key:"_map",value:function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>t)break;var u=this.ranges[a+o],c=this.ranges[a+i],l=s+u;if(t<=l){var f=s+r+((u?t==s?-1:t==l?1:e:e)<0?0:c);if(n)return f;var d=t==(e<0?s:l)?null:a/3+(t-s)*Ft,h=t==s?2:t==l?1:4;return(e<0?t!=s:t!=l)&&(h|=8),new _t(f,h,d)}r+=c-u}return n?t+r:new _t(t+r,0,null)}},{key:"touches",value:function(t,e){for(var n=0,r=Nt(e),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(s>t)break;var u=this.ranges[a+o];if(t<=s+u&&a==3*r)return!0;n+=this.ranges[a+i]-u}return!1}},{key:"forEach",value:function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),u=this.ranges[r+e],c=this.ranges[r+n];t(a,a+u,s,s+c),o+=c-u}}},{key:"invert",value:function(){return new t(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(e){return 0==e?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}}]),t}();Bt.empty=new Bt([]);var It=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;Tt(this,t),this.maps=e,this.mirror=n,this.from=r,this.to=o}return Lt(t,[{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new t(this.maps,this.mirror,e,n)}},{key:"copy",value:function(){return new t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}},{key:"appendMapping",value:function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}},{key:"getMirror",value:function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}},{key:"setMirror",value:function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}},{key:"appendMappingInverted",value:function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}},{key:"invert",value:function(){var e=new t;return e.appendMappingInverted(this),e}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"_map",value:function(t,e,n){for(var r=0,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,t=this.maps[a].recover(i.recover);continue}}r|=i.delInfo,t=i.pos}return n?t:new _t(t,r,null)}}]),t}(),Rt=Object.create(null),zt=function(){function t(){Tt(this,t)}return Lt(t,[{key:"getMap",value:function(){return Bt.empty}},{key:"merge",value:function(t){return null}}],[{key:"fromJSON",value:function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Rt[e.stepType];if(!n)throw new RangeError("No step type ".concat(e.stepType," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in Rt)throw new RangeError("Duplicate use of step JSON ID "+t);return Rt[t]=e,e.prototype.jsonID=t,e}}]),t}(),Ht=function(){function t(e,n){Tt(this,t),this.doc=e,this.failed=n}return Lt(t,null,[{key:"ok",value:function(e){return new t(e,null)}},{key:"fail",value:function(e){return new t(null,e)}},{key:"fromReplace",value:function(e,n,r,o){try{return t.ok(e.replace(n,r,o))}catch(i){if(i instanceof S)return t.fail(i.message);throw i}}}]),t}();function Vt(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(Vt(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return b.fromArray(r)}var $t=function(t){function e(t,n,r){var o;return Tt(this,e),(o=St(this,e)).from=t,o.to=n,o.mark=r,o}return Ot(e,t),Lt(e,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new D(Vt(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return Ht.fromReplace(t,this.from,this.to,i)}},{key:"invert",value:function(){return new qt(this.from,this.to,this.mark)}},{key:"map",value:function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}}]),e}(zt);zt.jsonID("addMark",$t);var qt=function(t){function e(t,n,r){var o;return Tt(this,e),(o=St(this,e)).from=t,o.to=n,o.mark=r,o}return Ot(e,t),Lt(e,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=new D(Vt(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))}),t),n.openStart,n.openEnd);return Ht.fromReplace(t,this.from,this.to,r)}},{key:"invert",value:function(){return new $t(this.from,this.to,this.mark)}},{key:"map",value:function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}}]),e}(zt);zt.jsonID("removeMark",qt);var Wt=function(t){function e(t,n){var r;return Tt(this,e),(r=St(this,e)).pos=t,r.mark=n,r}return Ot(e,t),Lt(e,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return Ht.fail("No node at mark step's position");var n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return Ht.fromReplace(t,this.pos,this.pos+1,new D(b.from(n),0,e.isLeaf?0:1))}},{key:"invert",value:function(t){var n=t.nodeAt(this.pos);if(n){var r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(var o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new e(this.pos,n.marks[o]);return new e(this.pos,this.mark)}}return new Kt(this.pos,this.mark)}},{key:"map",value:function(t){var n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}}]),e}(zt);zt.jsonID("addNodeMark",Wt);var Kt=function(t){function e(t,n){var r;return Tt(this,e),(r=St(this,e)).pos=t,r.mark=n,r}return Ot(e,t),Lt(e,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return Ht.fail("No node at mark step's position");var n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return Ht.fromReplace(t,this.pos,this.pos+1,new D(b.from(n),0,e.isLeaf?0:1))}},{key:"invert",value:function(t){var e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new Wt(this.pos,this.mark):this}},{key:"map",value:function(t){var n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}}]),e}(zt);zt.jsonID("removeNodeMark",Kt);var Ut=function(t){function e(t,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Tt(this,e),(o=St(this,e)).from=t,o.to=n,o.slice=r,o.structure=i,o}return Ot(e,t),Lt(e,[{key:"apply",value:function(t){return this.structure&&Jt(t,this.from,this.to)?Ht.fail("Structure replace would overwrite content"):Ht.fromReplace(t,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new Bt([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}},{key:"map",value:function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)}},{key:"merge",value:function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?D.empty:new D(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?D.empty:new D(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,D.fromJSON(t,n.slice),!!n.structure)}}]),e}(zt);zt.jsonID("replace",Ut);var Gt=function(t){function e(t,n,r,o,i,a){var s,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return Tt(this,e),(s=St(this,e)).from=t,s.to=n,s.gapFrom=r,s.gapTo=o,s.slice=i,s.insert=a,s.structure=u,s}return Ot(e,t),Lt(e,[{key:"apply",value:function(t){if(this.structure&&(Jt(t,this.from,this.gapFrom)||Jt(t,this.gapTo,this.to)))return Ht.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Ht.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Ht.fromReplace(t,this.from,this.to,n):Ht.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new Bt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,D.fromJSON(t,n.slice),n.insert,!!n.structure)}}]),e}(zt);function Jt(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function Yt(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Zt(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!Yt(r,o,i))break}return null}function Xt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:e).contentMatch,u=r;s&&u<o;u++)s=s.matchType(n.child(u).type);return s&&s.validEnd?a:null}(r,e);return i?o.map(Qt).concat({type:e,attrs:n}).concat(i.map(Qt)):null}function Qt(t){return{type:t,attrs:null}}function te(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=t.resolve(e),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,u=n-2;s>i;s--,u--){var c=o.node(s),l=o.index(s);if(c.type.spec.isolating)return!1;var f=c.content.cutByIndex(l,c.childCount),d=r&&r[u+1];d&&(f=f.replaceChild(0,d.type.create(d.attrs)));var h=r&&r[u]||c;if(!c.canReplace(l+1,c.childCount)||!h.type.validContent(f))return!1}var p=o.indexAfter(i),m=r&&r[0];return o.node(i).canReplaceWith(p,p,m?m.type:o.node(i+1).type)}function ee(t,e){var n=t.resolve(e),r=n.index();return ne(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ne(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function re(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t.resolve(e),o=r.depth;;o--){var i=void 0,a=void 0,s=r.index(o);if(o==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(o+1),s++,a=r.node(o).maybeChild(s)):(i=r.node(o).maybeChild(s-1),a=r.node(o+1)),i&&!i.isTextblock&&ne(i,a)&&r.node(o).canReplace(s,s+1))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function oe(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var u=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(u>0?1:0),l=r.node(s),f=!1;if(1==a)f=l.canReplace(c,c,o);else{var d=l.contentMatchAt(c).findWrapping(o.firstChild.type);f=d&&l.canReplaceWith(c,c,d[0])}if(f)return 0==u?r.pos:u<0?r.before(s+1):r.after(s+1)}return null}function ie(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:D.empty;if(e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return ae(o,i,r)?new Ut(e,n,r):new se(o,i,r).fit()}function ae(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}zt.jsonID("replaceAround",Gt);var se=function(){function t(e,n,r){Tt(this,t),this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=b.empty;for(var o=0;o<=e.depth;o++){var i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(var a=e.depth;a>0;a--)this.placed=b.from(e.node(a).copy(this.placed))}return Lt(t,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,a=r.depth,s=o.depth;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;var u=new D(i,a,s);return e>-1?new Gt(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Ut(r.pos,o.pos,u):null}},{key:"findFittable",value:function(){for(var t=this.unplaced.openStart,e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){var o=e.firstChild;if(e.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){t=n;break}e=o.content}for(var i=1;i<=2;i++)for(var a=1==i?t:this.unplaced.openStart;a>=0;a--)for(var s=null,u=(a?(s=le(this.unplaced.content,a-1).firstChild).content:this.unplaced.content).firstChild,c=this.depth;c>=0;c--){var l=this.frontier[c],f=l.type,d=l.match,h=void 0,p=null;if(1==i&&(u?d.matchType(u.type)||(p=d.fillBefore(b.from(u),!1)):s&&f.compatibleContent(s.type)))return{sliceDepth:a,frontierDepth:c,parent:s,inject:p};if(2==i&&u&&(h=d.findWrapping(u.type)))return{sliceDepth:a,frontierDepth:c,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}},{key:"openMore",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=le(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new D(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}},{key:"dropNode",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=le(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new D(ue(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new D(ue(e,n,1),n,r)}},{key:"placeNodes",value:function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var s=this.unplaced,u=r?r.content:s.content,c=s.openStart-e,l=0,f=[],d=this.frontier[n],h=d.match,p=d.type;if(o){for(var m=0;m<o.childCount;m++)f.push(o.child(m));h=h.matchFragment(o)}for(var v=u.size+e-(s.content.size-s.openEnd);l<u.childCount;){var y=u.child(l),g=h.matchType(y.type);if(!g)break;(++l>1||0==c||y.content.size)&&(h=g,f.push(fe(y.mark(p.allowedMarks(y.marks)),1==l?c:0,l==u.childCount?v:-1)))}var w=l==u.childCount;w||(v=-1),this.placed=ce(this.placed,n,b.from(f)),this.frontier[n].match=h,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var k=0,x=u;k<v;k++){var E=x.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),x=E.content}this.unplaced=w?0==e?D.empty:new D(ue(s.content,e-1,1),e-1,v<0?s.openEnd:e-1):new D(ue(s.content,e,l),s.openStart,s.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!de(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=de(t,e,o,r,i);if(a){for(var s=e-1;s>=0;s--){var u=this.frontier[s],c=u.match,l=de(t,s,u.type,c,!0);if(!l||l.childCount)continue t}return{depth:e,fit:a,move:i?t.doc.resolve(t.after(e+1)):t}}}}},{key:"close",value:function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=ce(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t}},{key:"openFrontierNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=ce(this.placed,this.depth,b.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}},{key:"closeFrontierNode",value:function(){var t=this.frontier.pop().match.fillBefore(b.empty,!0);t.childCount&&(this.placed=ce(this.placed,this.frontier.length,t))}}]),t}();function ue(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ue(t.firstChild.content,e-1,n)))}function ce(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ce(t.lastChild.content,e-1,n)))}function le(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function fe(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,fe(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(b.empty,!0)))),t.copy(r)}function de(t,e,n,r,o){var i=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==i.childCount&&!n.compatibleContent(i.type))return null;var s=r.fillBefore(i.content,!0,a);return s&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,a)?s:null}function he(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(he(i.content,e+1,n,r,i)))}if(e>r){var a=o.contentMatchAt(0),s=a.fillBefore(t).append(t);t=s.append(a.matchFragment(s).fillBefore(b.empty,!0))}return t}function pe(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&n.push(r)}return n}var me=function(t){function e(t,n,r){var o;return Tt(this,e),(o=St(this,e)).pos=t,o.attr=n,o.value=r,o}return Ot(e,t),Lt(e,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return Ht.fail("No node at attribute step's position");var n=Object.create(null);for(var r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;var o=e.type.create(n,null,e.marks);return Ht.fromReplace(t,this.pos,this.pos+1,new D(b.from(o),0,e.isLeaf?0:1))}},{key:"getMap",value:function(){return Bt.empty}},{key:"invert",value:function(t){return new e(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(t){var n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new e(n.pos,n.attr,n.value)}}]),e}(zt);zt.jsonID("attr",me);var ve=function(t){function e(t,n){var r;return Tt(this,e),(r=St(this,e)).attr=t,r.value=n,r}return Ot(e,t),Lt(e,[{key:"apply",value:function(t){var e=Object.create(null);for(var n in t.attrs)e[n]=t.attrs[n];e[this.attr]=this.value;var r=t.type.create(e,t.content,t.marks);return Ht.ok(r)}},{key:"getMap",value:function(){return Bt.empty}},{key:"invert",value:function(t){return new e(this.attr,t.attrs[this.attr])}},{key:"map",value:function(t){return this}},{key:"toJSON",value:function(){return{stepType:"docAttr",attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(t,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new e(n.attr,n.value)}}]),e}(zt);zt.jsonID("docAttr",ve);var ye=Error;((ye=function t(e){var n=Error.call(this,e);return n.__proto__=t.prototype,n}).prototype=Object.create(Error.prototype)).constructor=ye,ye.prototype.name="TransformError";var ge=function(){function t(e){Tt(this,t),this.doc=e,this.steps=[],this.docs=[],this.mapping=new It}return Lt(t,[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(t){var e=this.maybeStep(t);if(e.failed)throw new ye(e.failed);return this}},{key:"maybeStep",value:function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}},{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D.empty,r=ie(this.doc,t,e,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(t,e,n){return this.replace(t,e,new D(b.from(n),0,0))}},{key:"delete",value:function(t,e){return this.replace(t,e,D.empty)}},{key:"insert",value:function(t,e){return this.replaceWith(t,t,e)}},{key:"replaceRange",value:function(t,e,n){return function(t,e,n,r){if(!r.size)return t.deleteRange(e,n);var o=t.doc.resolve(e),i=t.doc.resolve(n);if(ae(o,i,r))return t.step(new Ut(e,n,r));var a=pe(o,t.doc.resolve(n));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var u=o.depth,c=o.pos-1;u>0;u--,c--){var l=o.node(u).type.spec;if(l.defining||l.definingAsContext||l.isolating)break;a.indexOf(u)>-1?s=u:o.before(u)==c&&a.splice(1,0,-u)}for(var f,d=a.indexOf(s),h=[],p=r.openStart,m=r.content,v=0;;v++){var y=m.firstChild;if(h.push(y),v==r.openStart)break;m=y.content}for(var g=p-1;g>=0;g--){var b=h[g],w=(f=b.type).spec.defining||f.spec.definingForContent;if(w&&!b.sameMarkup(o.node(Math.abs(s)-1)))p=g;else if(w||!b.type.isTextblock)break}for(var k=r.openStart;k>=0;k--){var x=(k+p+1)%(r.openStart+1),E=h[x];if(E)for(var S=0;S<a.length;S++){var C=a[(S+d)%a.length],O=!0;C<0&&(O=!1,C=-C);var A=o.node(C-1),j=o.index(C-1);if(A.canReplaceWith(j,j,E.type,E.marks))return t.replace(o.before(C),O?i.after(C):n,new D(he(r.content,0,r.openStart,x),x,r.openEnd))}}for(var T=t.steps.length,M=a.length-1;M>=0&&(t.replace(e,n,r),!(t.steps.length>T));M--){var L=a[M];L<0||(e=o.before(L),n=i.after(L))}}(this,t,e,n),this}},{key:"replaceRangeWith",value:function(t,e,n){return function(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){var o=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}return null}(t.doc,e,r.type);null!=o&&(e=n=o)}t.replaceRange(e,n,new D(b.from(r),0,0))}(this,t,e,n),this}},{key:"deleteRange",value:function(t,e){return function(t,e,n){for(var r=t.doc.resolve(e),o=t.doc.resolve(n),i=pe(r,o),a=0;a<i.length;a++){var s=i[a],u=a==i.length-1;if(u&&0==s||r.node(s).type.contentMatch.validEnd)return t.delete(r.start(s),o.end(s));if(s>0&&(u||r.node(s-1).canReplace(r.index(s-1),o.indexAfter(s-1))))return t.delete(r.before(s),o.after(s))}for(var c=1;c<=r.depth&&c<=o.depth;c++)if(e-r.start(c)==r.depth-c&&n>r.end(c)&&o.end(c)-n!=o.depth-c)return t.delete(r.before(c),n);t.delete(e,n)}(this,t,e),this}},{key:"lift",value:function(t,e){return function(t,e,n){for(var r=e.$from,o=e.$to,i=e.depth,a=r.before(i+1),s=o.after(i+1),u=a,c=s,l=b.empty,f=0,d=i,h=!1;d>n;d--)h||r.index(d)>0?(h=!0,l=b.from(r.node(d).copy(l)),f++):u--;for(var p=b.empty,m=0,v=i,y=!1;v>n;v--)y||o.after(v+1)<o.end(v)?(y=!0,p=b.from(o.node(v).copy(p)),m++):c++;t.step(new Gt(u,c,a,s,new D(l.append(p),f,m),l.size-f,!0))}(this,t,e),this}},{key:"join",value:function(t){return function(t,e,n){var r=new Ut(e-n,e+n,D.empty,!0);t.step(r)}(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}},{key:"wrap",value:function(t,e){return function(t,e,n){for(var r=b.empty,o=n.length-1;o>=0;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=b.from(n[o].type.create(n[o].attrs,r))}var a=e.start,s=e.end;t.step(new Gt(a,s,a,s,new D(r,0,0),n.length,!0))}(this,t,e),this}},{key:"setBlockType",value:function(t){return function(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=t.steps.length;t.doc.nodesBetween(e,n,(function(e,n){if(e.isTextblock&&!e.hasMarkup(r,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(t.doc,t.mapping.slice(i).map(n),r)){t.clearIncompatible(t.mapping.slice(i).map(n,1),r);var a=t.mapping.slice(i),s=a.map(n,1),u=a.map(n+e.nodeSize,1);return t.step(new Gt(s,u,s+1,u-1,new D(b.from(r.create(o,null,e.marks)),0,0),1,!0)),!1}}))}(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}},{key:"setNodeMarkup",value:function(t,e){return function(t,e,n,r,o){var i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);var a=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,a);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Gt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new D(b.from(a),0,0),1,!0))}(this,t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}},{key:"setNodeAttribute",value:function(t,e,n){return this.step(new me(t,e,n)),this}},{key:"setDocAttribute",value:function(t,e){return this.step(new ve(t,e)),this}},{key:"addNodeMark",value:function(t,e){return this.step(new Wt(t,e)),this}},{key:"removeNodeMark",value:function(t,e){if(!(e instanceof E)){var n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(n.marks)))return this}return this.step(new Kt(t,e)),this}},{key:"split",value:function(t){return function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=t.doc.resolve(e),i=b.empty,a=b.empty,s=o.depth,u=o.depth-n,c=n-1;s>u;s--,c--){i=b.from(o.node(s).copy(i));var l=r&&r[c];a=b.from(l?l.type.create(l.attrs,a):o.node(s).copy(a))}t.step(new Ut(e,e,new D(i.append(a),n,n),!0))}(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}},{key:"addMark",value:function(t,e,n){return function(t,e,n,r){var o,i,a=[],s=[];t.doc.nodesBetween(e,n,(function(t,u,c){if(t.isInline){var l=t.marks;if(!r.isInSet(l)&&c.type.allowsMarkType(r.type)){for(var f=Math.max(u,e),d=Math.min(u+t.nodeSize,n),h=r.addToSet(l),p=0;p<l.length;p++)l[p].isInSet(h)||(o&&o.to==f&&o.mark.eq(l[p])?o.to=d:a.push(o=new qt(f,d,l[p])));i&&i.to==f?i.to=d:s.push(i=new $t(f,d,r))}}})),a.forEach((function(e){return t.step(e)})),s.forEach((function(e){return t.step(e)}))}(this,t,e,n),this}},{key:"removeMark",value:function(t,e,n){return function(t,e,n,r){var o=[],i=0;t.doc.nodesBetween(e,n,(function(t,a){if(t.isInline){i++;var s=null;if(r instanceof st)for(var u,c=t.marks;u=r.isInSet(c);)(s||(s=[])).push(u),c=u.removeFromSet(c);else r?r.isInSet(t.marks)&&(s=[r]):s=t.marks;if(s&&s.length)for(var l=Math.min(a+t.nodeSize,n),f=0;f<s.length;f++){for(var d=s[f],h=void 0,p=0;p<o.length;p++){var m=o[p];m.step==i-1&&d.eq(o[p].style)&&(h=m)}h?(h.to=l,h.step=i):o.push({style:d,from:Math.max(a,e),to:l,step:i})}}})),o.forEach((function(e){return t.step(new qt(e.from,e.to,e.style))}))}(this,t,e,n),this}},{key:"clearIncompatible",value:function(t,e,n){return function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=t.doc.nodeAt(e),i=[],a=e+1,s=0;s<o.childCount;s++){var u=o.child(s),c=a+u.nodeSize,l=r.matchType(u.type);if(l){r=l;for(var f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new qt(a,c,u.marks[f]));if(u.isText&&!n.spec.code)for(var d=void 0,h=/\r?\n|\r/g,p=void 0;d=h.exec(u.text);)p||(p=new D(b.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),i.push(new Ut(a+d.index,a+d.index+d[0].length,p))}else i.push(new Ut(a,c,D.empty));a=c}if(!r.validEnd){var m=r.fillBefore(b.empty,!0);t.replace(a,a,new D(m,0,0))}for(var v=i.length-1;v>=0;v--)t.step(i[v])}(this,t,e,n),this}}]),t}();function be(t,e,n){return e=xe(e),function(t,e){if(e&&("object"===De(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,we()?Reflect.construct(e,n||[],xe(t).constructor):e.apply(t,n))}function we(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(we=function(){return!!t})()}function ke(){return ke="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xe(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ke.apply(this,arguments)}function xe(t){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xe(t)}function Ee(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,je(r.key),r)}}function Ae(t,e,n){return e&&Oe(t.prototype,e),n&&Oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function je(t){var e=function(t,e){if("object"!=De(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==De(e)?e:String(e)}var Te=Object.create(null),Me=function(){function t(e,n,r){Ce(this,t),this.$anchor=e,this.$head=n,this.ranges=r||[new Le(e.min(n),e.max(n))]}return Ae(t,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.empty,n=e.content.lastChild,r=null,o=0;o<e.openEnd;o++)r=n,n=n.lastChild;for(var i=t.steps.length,a=this.ranges,s=0;s<a.length;s++){var u=a[s],c=u.$from,l=u.$to,f=t.mapping.slice(i);t.replaceRange(f.map(c.pos),f.map(l.pos),s?D.empty:e),0==s&&Ve(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,u=t.mapping.slice(n),c=u.map(a.pos),l=u.map(s.pos);o?t.deleteRange(c,l):(t.replaceRangeWith(c,l,e),Ve(t,n,e.isInline?-1:1))}}},{key:"getBookmark",value:function(){return Ne.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.parent.inlineContent?new Ne(t):He(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?He(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):He(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}return null}},{key:"near",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(t,e)||this.findFrom(t,-e)||new Re(t.node(0))}},{key:"atStart",value:function(t){return He(t,t,0,0,1)||new Re(t)}},{key:"atEnd",value:function(t){return He(t,t,t.content.size,t.childCount,-1)||new Re(t)}},{key:"fromJSON",value:function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Te[e.type];if(!n)throw new RangeError("No selection type ".concat(e.type," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in Te)throw new RangeError("Duplicate use of selection JSON ID "+t);return Te[t]=e,e.prototype.jsonID=t,e}}]),t}();Me.prototype.visible=!0;var Le=Ae((function t(e,n){Ce(this,t),this.$from=e,this.$to=n})),Pe=!1;function Fe(t){Pe||t.parent.inlineContent||(Pe=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var Ne=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return Ce(this,e),Fe(t),Fe(n),be(this,e,[t,n])}return Ee(e,t),Ae(e,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(t,n){var r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Me.near(r);var o=t.resolve(n.map(this.anchor));return new e(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.empty;if(ke(xe(e.prototype),"replace",this).call(this,t,n),n==D.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}},{key:"eq",value:function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head}},{key:"getBookmark",value:function(){return new _e(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))}},{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}},{key:"between",value:function(t,n,r){var o=t.pos-n.pos;if(r&&!o||(r=o>=0?1:-1),!n.parent.inlineContent){var i=Me.findFrom(n,r,!0)||Me.findFrom(n,-r,!0);if(!i)return Me.near(n,r);n=i.$head}return t.parent.inlineContent||(0==o||(t=(Me.findFrom(t,-r,!0)||Me.findFrom(t,r,!0)).$anchor).pos<n.pos!=o<0)&&(t=n),new e(t,n)}}]),e}(Me);Me.jsonID("text",Ne);var _e=function(){function t(e,n){Ce(this,t),this.anchor=e,this.head=n}return Ae(t,[{key:"map",value:function(e){return new t(e.map(this.anchor),e.map(this.head))}},{key:"resolve",value:function(t){return Ne.between(t.resolve(this.anchor),t.resolve(this.head))}}]),t}(),Be=function(t){function e(t){var n;Ce(this,e);var r=t.nodeAfter,o=t.node(0).resolve(t.pos+r.nodeSize);return(n=be(this,e,[t,o])).node=r,n}return Ee(e,t),Ae(e,[{key:"map",value:function(t,n){var r=n.mapResult(this.anchor),o=r.deleted,i=r.pos,a=t.resolve(i);return o?Me.near(a):new e(a)}},{key:"content",value:function(){return new D(b.from(this.node),0,0)}},{key:"eq",value:function(t){return t instanceof e&&t.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new Ie(this.anchor)}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))}},{key:"create",value:function(t,n){return new e(t.resolve(n))}},{key:"isSelectable",value:function(t){return!t.isText&&!1!==t.type.spec.selectable}}]),e}(Me);Be.prototype.visible=!1,Me.jsonID("node",Be);var Ie=function(){function t(e){Ce(this,t),this.anchor=e}return Ae(t,[{key:"map",value:function(e){var n=e.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new _e(o,o):new t(o)}},{key:"resolve",value:function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&Be.isSelectable(n)?new Be(e):Me.near(e)}}]),t}(),Re=function(t){function e(t){return Ce(this,e),be(this,e,[t.resolve(0),t.resolve(t.content.size)])}return Ee(e,t),Ae(e,[{key:"replace",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.empty;if(n==D.empty){t.delete(0,t.doc.content.size);var r=Me.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else ke(xe(e.prototype),"replace",this).call(this,t,n)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(t){return new e(t)}},{key:"eq",value:function(t){return t instanceof e}},{key:"getBookmark",value:function(){return ze}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}(Me);Me.jsonID("all",Re);var ze={map:function(){return this},resolve:function(t){return new Re(t)}};function He(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.inlineContent)return Ne.create(t,n);for(var a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){var s=e.child(a);if(s.isAtom){if(!i&&Be.isSelectable(s))return Be.create(t,n-(o<0?s.nodeSize:0))}else{var u=He(t,s,n+o,o<0?s.childCount:0,o,i);if(u)return u}n+=s.nodeSize*o}return null}function Ve(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,i=t.steps[r];if(i instanceof Ut||i instanceof Gt)t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(Me.near(t.doc.resolve(o),n))}}var $e=function(t){function e(t){var n;return Ce(this,e),(n=be(this,e,[t.doc])).curSelectionFor=0,n.updated=0,n.meta=Object.create(null),n.time=Date.now(),n.curSelection=t.selection,n.storedMarks=t.storedMarks,n}return Ee(e,t),Ae(e,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(1&this.updated)>0}},{key:"setStoredMarks",value:function(t){return this.storedMarks=t,this.updated|=2,this}},{key:"ensureMarks",value:function(t){return E.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}},{key:"addStoredMark",value:function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(2&this.updated)>0}},{key:"addStep",value:function(t,n){ke(xe(e.prototype),"addStep",this).call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(t){return this.time=t,this}},{key:"replaceSelection",value:function(t){return this.selection.replace(this,t),this}},{key:"replaceSelectionWith",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||E.none))),n.replaceWith(this,t),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(t,e,n){var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(Me.near(this.selection.$to)),this}},{key:"setMeta",value:function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}},{key:"getMeta",value:function(t){return this.meta["string"==typeof t?t:t.key]}},{key:"isGeneric",get:function(){for(var t in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"scrolledIntoView",get:function(){return(4&this.updated)>0}}]),e}(ge);function qe(t,e){return e&&t?t.bind(e):t}var We=Ae((function t(e,n,r){Ce(this,t),this.name=e,this.init=qe(n.init,r),this.apply=qe(n.apply,r)})),Ke=[new We("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new We("selection",{init:function(t,e){return t.selection||Me.atStart(e.doc)},apply:function(t){return t.selection}}),new We("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new We("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],Ue=Ae((function t(e,n){var r=this;Ce(this,t),this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Ke.slice(),n&&n.forEach((function(t){if(r.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");r.plugins.push(t),r.pluginsByKey[t.key]=t,t.spec.state&&r.fields.push(new We(t.key,t.spec.state,t))}))})),Ge=function(){function t(e){Ce(this,t),this.config=e}return Ae(t,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(t){return this.applyTransaction(t).state}},{key:"filterTransaction",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0}},{key:"applyTransaction",value:function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,u=r?r[i].state:this,c=s<e.length&&a.spec.appendTransaction.call(a,s?e.slice(s):e,u,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<i?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}}},{key:"applyInner",value:function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new t(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}},{key:"tr",get:function(){return new $e(this)}},{key:"reconfigure",value:function(e){for(var n=new Ue(this.schema,e.plugins),r=n.fields,o=new t(n),i=0;i<r.length;i++){var a=r[i].name;o[a]=this.hasOwnProperty(a)?this[a]:r[i].init(e,o)}return o}},{key:"toJSON",value:function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==De(t))for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e}}],[{key:"create",value:function(e){for(var n=new Ue(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new t(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}},{key:"fromJSON",value:function(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new Ue(e.schema,e.plugins),i=new t(o);return o.fields.forEach((function(t){if("doc"==t.name)i.doc=$.fromJSON(e.schema,n.doc);else if("selection"==t.name)i.selection=Me.fromJSON(i.doc,n.selection);else if("storedMarks"==t.name)n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(var o in r){var a=r[o],s=a.spec.state;if(a.key==t.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(i[t.name]=s.fromJSON.call(a,e,n[o],i))}i[t.name]=t.init(e,i)}})),i}}]),t}();function Je(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=Je(o,e,{})),n[r]=o}return n}var Ye=function(){function t(e){Ce(this,t),this.spec=e,this.props={},e.props&&Je(e.props,this,this.props),this.key=e.key?e.key.key:Xe("plugin")}return Ae(t,[{key:"getState",value:function(t){return t[this.key]}}]),t}(),Ze=Object.create(null);function Xe(t){return t in Ze?t+"$"+ ++Ze[t]:(Ze[t]=0,t+"$")}var Qe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";Ce(this,t),this.key=Xe(e)}return Ae(t,[{key:"get",value:function(t){return t.config.pluginsByKey[this.key]}},{key:"getState",value:function(t){return t[this.key]}}]),t}();function tn(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return en(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function en(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nn(t,e,n){return e=sn(e),function(t,e){if(e&&("object"===ln(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return on(t)}(t,rn()?Reflect.construct(e,n||[],sn(t).constructor):e.apply(t,n))}function rn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rn=function(){return!!t})()}function on(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function an(){return an="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},an.apply(this,arguments)}function sn(t){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sn(t)}function un(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cn(t,e)}function cn(t,e){return cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cn(t,e)}function ln(t){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(t)}function fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pn(r.key),r)}}function hn(t,e,n){return e&&dn(t.prototype,e),n&&dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pn(t){var e=function(t,e){if("object"!=ln(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ln(e)?e:String(e)}var mn=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},vn=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},yn=null,gn=function(t,e,n){var r=yn||(yn=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},bn=function(t,e,n,r){return n&&(kn(t,e,n,r,-1)||kn(t,e,n,r,1))},wn=/^(img|br|input|textarea|hr)$/i;function kn(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:xn(t))){var i=t.parentNode;if(!i||1!=i.nodeType||En(t)||wn.test(t.nodeName)||"false"==t.contentEditable)return!1;e=mn(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?xn(t):0}}}function xn(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function En(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var Sn=function(t){return t.focusNode&&bn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Dn(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}var Cn="undefined"!=typeof navigator?navigator:null,On="undefined"!=typeof document?document:null,An=Cn&&Cn.userAgent||"",jn=/Edge\/(\d+)/.exec(An),Tn=/MSIE \d/.exec(An),Mn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(An),Ln=!!(Tn||Mn||jn),Pn=Tn?document.documentMode:Mn?+Mn[1]:jn?+jn[1]:0,Fn=!Ln&&/gecko\/(\d+)/i.test(An);Fn&&(/Firefox\/(\d+)/.exec(An)||[0,0])[1];var Nn=!Ln&&/Chrome\/(\d+)/.exec(An),_n=!!Nn,Bn=Nn?+Nn[1]:0,In=!Ln&&!!Cn&&/Apple Computer/.test(Cn.vendor),Rn=In&&(/Mobile\/\w+/.test(An)||!!Cn&&Cn.maxTouchPoints>2),zn=Rn||!!Cn&&/Mac/.test(Cn.platform),Hn=!!Cn&&/Win/.test(Cn.platform),Vn=/Android \d/.test(An),$n=!!On&&"webkitFontSmoothing"in On.documentElement.style,qn=$n?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Wn(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Kn(t,e){return"number"==typeof t?t:t[e]}function Un(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Gn(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,a=n||t.dom;a;a=vn(a))if(1==a.nodeType){var s=a,u=s==i.body,c=u?Wn(i):Un(s),l=0,f=0;if(e.top<c.top+Kn(r,"top")?f=-(c.top-e.top+Kn(o,"top")):e.bottom>c.bottom-Kn(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+Kn(o,"top")-c.top:e.bottom-c.bottom+Kn(o,"bottom")),e.left<c.left+Kn(r,"left")?l=-(c.left-e.left+Kn(o,"left")):e.right>c.right-Kn(r,"right")&&(l=e.right-c.right+Kn(o,"right")),l||f)if(u)i.defaultView.scrollBy(l,f);else{var d=s.scrollLeft,h=s.scrollTop;f&&(s.scrollTop+=f),l&&(s.scrollLeft+=l);var p=s.scrollLeft-d,m=s.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(u||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function Jn(t){for(var e=[],n=t.ownerDocument,r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=vn(r));return e}function Yn(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,a=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=a&&(o.scrollLeft=a)}}var Zn=null;function Xn(t,e){for(var n,r,o,i,a=2e8,s=0,u=e.top,c=e.top,l=t.firstChild,f=0;l;l=l.nextSibling,f++){var d=void 0;if(1==l.nodeType)d=l.getClientRects();else{if(3!=l.nodeType)continue;d=gn(l).getClientRects()}for(var h=0;h<d.length;h++){var p=d[h];if(p.top<=u&&p.bottom>=c){u=Math.max(p.bottom,u),c=Math.min(p.top,c);var m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<a){n=l,a=m,r=m&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==l.nodeType&&m&&(s=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!o&&p.left<=e.left&&p.right>=e.left&&(o=l,i={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=f+1)}}return!n&&o&&(n=o,r=i,a=0),n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=rr(r,1);if(i.top!=i.bottom&&Qn(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||a&&1==n.nodeType?{node:t,offset:s}:Xn(n,r)}function Qn(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function tr(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var a=t.childNodes[i];if(1==a.nodeType)for(var s=a.getClientRects(),u=0;u<s.length;u++){var c=s[u];if(Qn(e,c))return tr(a,e,c)}if((i=(i+1)%r)==o)break}return t}function er(t,e){var n,r=t.dom.ownerDocument,o=0,i=function(t,e,n){if(t.caretPositionFromPoint)try{var r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(sg){}if(t.caretRangeFromPoint){var o=t.caretRangeFromPoint(e,n);if(o)return{node:o.startContainer,offset:o.startOffset}}}(r,e.left,e.top);i&&(n=i.node,o=i.offset);var a,s=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top);if(!s||!t.dom.contains(1!=s.nodeType?s.parentNode:s)){var u=t.dom.getBoundingClientRect();if(!Qn(e,u))return null;if(!(s=tr(t.dom,e,u)))return null}if(In)for(var c=s;n&&c;c=vn(c))c.draggable&&(n=void 0);if(s=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(s,e),n){if(Fn&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length){var l,f=n.childNodes[o];"IMG"==f.nodeName&&(l=f.getBoundingClientRect()).right<=e.left&&l.bottom>e.top&&o++}var d;$n&&o&&1==n.nodeType&&1==(d=n.childNodes[o-1]).nodeType&&"false"==d.contentEditable&&d.getBoundingClientRect().top>=e.top&&o--,n==t.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(a=function(t,e,n,r){for(var o=-1,i=e,a=!1;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(1==s.dom.nodeType&&(s.node.isBlock&&s.parent&&!a||!s.contentDOM)){var u=s.dom.getBoundingClientRect();if(s.node.isBlock&&s.parent&&!a&&(a=!0,u.left>r.left||u.top>r.top?o=s.posBefore:(u.right<r.left||u.bottom<r.top)&&(o=s.posAfter)),!s.contentDOM&&o<0&&!s.node.isText)return(s.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?s.posBefore:s.posAfter}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}(t,n,o,e))}null==a&&(a=function(t,e,n){var r=Xn(e,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(o,i,a)}(t,s,e));var h=t.docView.nearestDesc(s,!0);return{pos:a,inside:h?h.posAtStart-h.border:-1}}function nr(t){return t.top<t.bottom||t.left<t.right}function rr(t,e){var n=t.getClientRects();if(n.length){var r=n[e<0?0:n.length-1];if(nr(r))return r}return Array.prototype.find.call(n,nr)||t.getBoundingClientRect()}var or=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ir(t,e,n){var r=t.docView.domFromPos(e,n<0?-1:1),o=r.node,i=r.offset,a=r.atom,s=$n||Fn;if(3==o.nodeType){if(!s||!or.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var u=i,c=i,l=n<0?1:-1;return n<0&&!i?(c++,l=-1):n>=0&&i==o.nodeValue.length?(u--,l=1):n<0?u--:c++,ar(rr(gn(o,u,c),l),l<0)}var f=rr(gn(o,i,i),n);if(Fn&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var d=rr(gn(o,i-1,i-1),-1);if(d.top==f.top){var h=rr(gn(o,i,i+1),-1);if(h.top!=f.top)return ar(h,h.left<d.left)}}return f}if(!t.state.doc.resolve(e-(a||0)).parent.inlineContent){if(null==a&&i&&(n<0||i==xn(o))){var p=o.childNodes[i-1];if(1==p.nodeType)return sr(p.getBoundingClientRect(),!1)}if(null==a&&i<xn(o)){var m=o.childNodes[i];if(1==m.nodeType)return sr(m.getBoundingClientRect(),!0)}return sr(o.getBoundingClientRect(),n>=0)}if(null==a&&i&&(n<0||i==xn(o))){var v=o.childNodes[i-1],y=3==v.nodeType?gn(v,xn(v)-(s?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(y)return ar(rr(y,1),!1)}if(null==a&&i<xn(o)){for(var g=o.childNodes[i];g.pmViewDesc&&g.pmViewDesc.ignoreForCoords;)g=g.nextSibling;var b=g?3==g.nodeType?gn(g,0,s?0:1):1==g.nodeType?g:null:null;if(b)return ar(rr(b,-1),!0)}return ar(rr(3==o.nodeType?gn(o):o,-n),n>=0)}function ar(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function sr(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ur(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}var cr=/[\u0590-\u08ac]/;var lr=null,fr=null,dr=!1;function hr(t,e,n){return lr==e&&fr==n?dr:(lr=e,fr=n,dr="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$from:r.$to;return ur(t,e,(function(){for(var e=t.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.contentDOM||r.dom;break}e=r.dom.parentNode}for(var i=ir(t,o.pos,1),a=e.firstChild;a;a=a.nextSibling){var s=void 0;if(1==a.nodeType)s=a.getClientRects();else{if(3!=a.nodeType)continue;s=gn(a,0,a.nodeValue.length).getClientRects()}for(var u=0;u<s.length;u++){var c=s[u];if(c.bottom>c.top+1&&("up"==n?i.top-c.top>2*(c.bottom-i.top):c.bottom-i.bottom>2*(i.bottom-c.top)))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=t.domSelection();return cr.test(r.parent.textContent)&&s.modify?ur(t,e,(function(){var e=t.domSelectionRange(),o=e.focusNode,i=e.focusOffset,a=e.anchorNode,u=e.anchorOffset,c=s.caretBidiLevel;s.modify("move",n,"character");var l=r.depth?t.docView.domAfterPos(r.before()):t.dom,f=t.domSelectionRange(),d=f.focusNode,h=f.focusOffset,p=d&&!l.contains(1==d.nodeType?d:d.parentNode)||o==d&&i==h;try{s.collapse(a,u),o&&(o!=a||i!=u)&&s.extend&&s.extend(o,i)}catch(sg){}return null!=c&&(s.caretBidiLevel=c),p})):"left"==n||"backward"==n?i:a}(t,e,n))}var pr=function(){function t(e,n,r,o){fn(this,t),this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=0,r.pmViewDesc=this}return hn(t,[{key:"matchesWidget",value:function(t){return!1}},{key:"matchesMark",value:function(t){return!1}},{key:"matchesNode",value:function(t,e,n){return!1}},{key:"matchesHack",value:function(t){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(t){return!1}},{key:"size",get:function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var t=0;t<this.children.length;t++)this.children[t].destroy()}},{key:"posBeforeChild",value:function(t){for(var e=0,n=this.posAtStart;;e++){var r=this.children[e];if(r==t)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,a;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(a=i.pmViewDesc)||a.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var s;if(t==this.dom&&this.contentDOM)s=e>mn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var u=t;;u=u.parentNode){if(u==this.dom){s=!1;break}if(u.previousSibling)break}if(null==s&&e==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){s=!0;break}if(c.nextSibling)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r),i=void 0;if(o&&(!e||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==t.nodeType?t:t.parentNode):i==t))return o;n=!1}}}},{key:"getDesc",value:function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e}},{key:"posFromDOM",value:function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1}},{key:"descAt",value:function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}}},{key:"domFromPos",value:function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};for(var n,r=0,o=0,i=0;r<this.children.length;r++){var a=this.children[r],s=i+a.size;if(s>t||a instanceof kr){o=t-i;break}i=s}if(o)return this.children[r].domFromPos(o-this.children[r].border,e);for(;r&&!(n=this.children[r-1]).size&&n instanceof mr&&n.side>=0;r--);if(e<=0){for(var u,c=!0;(u=r?this.children[r-1]:null)&&u.dom.parentNode!=this.contentDOM;r--,c=!1);return u&&e&&c&&!u.border&&!u.domAtom?u.domFromPos(u.size,e):{node:this.contentDOM,offset:u?mn(u.dom)+1:0}}for(var l,f=!0;(l=r<this.children.length?this.children[r]:null)&&l.dom.parentNode!=this.contentDOM;r++,f=!1);return l&&f&&!l.border&&!l.domAtom?l.domFromPos(0,e):{node:this.contentDOM,offset:l?mn(l.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,a=0;;a++){var s=this.children[a],u=i+s.size;if(-1==r&&t<=u){var c=i+s.border;if(t>=c&&e<=u-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(t,e,c);t=i;for(var l=a;l>0;l--){var f=this.children[l-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=mn(f.dom)+1;break}t-=f.size}-1==r&&(r=0)}if(r>-1&&(u>e||a==this.children.length-1)){e=u;for(var d=a+1;d<this.children.length;d++){var h=this.children[d];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=mn(h.dom);break}e+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}}},{key:"emptyChildAt",value:function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}},{key:"domAfterPos",value:function(t){var e=this.domFromPos(t,0),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}},{key:"setSelection",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(t,e),i=Math.max(t,e),a=0,s=0;a<this.children.length;a++){var u=this.children[a],c=s+u.size;if(o>s&&i<c)return u.setSelection(t-s-u.border,e-s-u.border,n,r);s=c}var l=this.domFromPos(t,t?-1:1),f=e==t?l:this.domFromPos(e,e?-1:1),d=n.getSelection(),h=!1;if((Fn||In)&&t==e){var p=l,m=p.node,v=p.offset;if(3==m.nodeType){if((h=!(!v||"\n"!=m.nodeValue[v-1]))&&v==m.nodeValue.length)for(var y,g=m;g;g=g.parentNode){if(y=g.nextSibling){"BR"==y.nodeName&&(l=f={node:y.parentNode,offset:mn(y)+1});break}var b=g.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{var w=m.childNodes[v-1];h=w&&("BR"==w.nodeName||"false"==w.contentEditable)}}if(Fn&&d.focusNode&&d.focusNode!=f.node&&1==d.focusNode.nodeType){var k=d.focusNode.childNodes[d.focusOffset];k&&"false"==k.contentEditable&&(r=!0)}if(r||h&&In||!bn(l.node,l.offset,d.anchorNode,d.anchorOffset)||!bn(f.node,f.offset,d.focusNode,d.focusOffset)){var x=!1;if((d.extend||t==e)&&!h){d.collapse(l.node,l.offset);try{t!=e&&d.extend(f.node,f.offset),x=!0}catch(sg){}}if(!x){if(t>e){var E=l;l=f,f=E}var S=document.createRange();S.setEnd(f.node,f.offset),S.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(S)}}}},{key:"ignoreMutation",value:function(t){return!this.contentDOM&&"selection"!=t.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var a=n+o.border,s=i-o.border;if(t>=a&&e<=s)return this.dirty=t==n||e==i?2:1,void(t!=a||e!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-a,e-a):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}}]),t}(),mr=function(t){function e(t,n,r,o){var i;fn(this,e);var a,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var u=document.createElement("span");u.appendChild(s),s=u}s.contentEditable="false",s.classList.add("ProseMirror-widget")}return(i=nn(this,e,[t,[],s,null])).widget=n,i.widget=n,a=on(i),i}return un(e,t),hn(e,[{key:"matchesWidget",value:function(t){return 0==this.dirty&&t.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)}},{key:"ignoreMutation",value:function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),an(sn(e.prototype),"destroy",this).call(this)}},{key:"domAtom",get:function(){return!0}},{key:"side",get:function(){return this.widget.type.side}}]),e}(pr),vr=function(t){function e(t,n,r,o){var i;return fn(this,e),(i=nn(this,e,[t,[],n,null])).textDOM=r,i.text=o,i}return un(e,t),hn(e,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}},{key:"domFromPos",value:function(t){return{node:this.textDOM,offset:t}}},{key:"ignoreMutation",value:function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}]),e}(pr),yr=function(t){function e(t,n,r,o){var i;return fn(this,e),(i=nn(this,e,[t,[],r,o])).mark=n,i}return un(e,t),hn(e,[{key:"parseRule",value:function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(t){return 3!=this.dirty&&this.mark.eq(t)}},{key:"markDirty",value:function(t,n){if(an(sn(e.prototype),"markDirty",this).call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,a=this.size;n<a&&(i=Fr(i,n,a,r)),t>0&&(i=Fr(i,0,t,r));for(var s=0;s<i.length;s++)i[s].parent=o;return o.children=i,o}}],[{key:"create",value:function(t,n,r,o){var i=o.nodeViews[n.type.name],a=i&&i(n,o,r);return a&&a.dom||(a=wt.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)}}]),e}(pr),gr=function(t){function e(t,n,r,o,i,a,s,u,c){var l;return fn(this,e),(l=nn(this,e,[t,[],i,a])).node=n,l.outerDeco=r,l.innerDeco=o,l.nodeDOM=s,l}return un(e,t),hn(e,[{key:"parseRule",value:function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;n>=0;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=function(){return b.empty})}else e.contentElement=this.contentDOM;else e.getContent=function(){return t.node.content};return e}},{key:"matchesNode",value:function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&Tr(e,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(t,e){var n=this,r=this.node.inlineContent,o=e,i=t.composing?this.localCompositionInfo(t,e):null,a=i&&i.pos>-1?i:null,s=i&&i.pos<0,u=new Lr(this,a&&a.node,t);!function(t,e,n,r){var o=e.locals(t),i=0;if(0==o.length){for(var a=0;a<t.childCount;a++){var s=t.child(a);r(s,o,e.forChild(i,s),a),i+=s.nodeSize}return}for(var u=0,c=[],l=null,f=0;;){for(var d=void 0,h=void 0;u<o.length&&o[u].to==i;){var p=o[u++];p.widget&&(d?(h||(h=[d])).push(p):d=p)}if(d)if(h){h.sort(Pr);for(var m=0;m<h.length;m++)n(h[m],f,!!l)}else n(d,f,!!l);var v=void 0,y=void 0;if(l)y=-1,v=l,l=null;else{if(!(f<t.childCount))break;y=f,v=t.child(f++)}for(var g=0;g<c.length;g++)c[g].to<=i&&c.splice(g--,1);for(;u<o.length&&o[u].from<=i&&o[u].to>i;)c.push(o[u++]);var b=i+v.nodeSize;if(v.isText){var w=b;u<o.length&&o[u].from<w&&(w=o[u].from);for(var k=0;k<c.length;k++)c[k].to<w&&(w=c[k].to);w<b&&(l=v.cut(w-i),v=v.cut(0,w-i),b=w,y=-1)}else for(;u<o.length&&o[u].to<b;)u++;r(v,v.isInline&&!v.isLeaf?c.filter((function(t){return!t.inline})):c.slice(),e.forChild(i,v),y),i=b}}(this.node,this.innerDeco,(function(e,i,a){e.spec.marks?u.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&u.syncToMarks(i==n.node.childCount?E.none:n.node.child(i).marks,r,t),u.placeWidget(e,t,o)}),(function(e,n,a,c){var l;u.syncToMarks(e.marks,r,t),u.findNodeMatch(e,n,a,c)||s&&t.state.selection.from>o&&t.state.selection.to<o+e.nodeSize&&(l=u.findIndexWithChild(i.node))>-1&&u.updateNodeAt(e,n,a,l,t)||u.updateNextNode(e,n,a,t,c,o)||u.addNode(e,n,a,t,o),o+=e.nodeSize})),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),Er(this.contentDOM,this.children,t),Rn&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))}},{key:"localCompositionInfo",value:function(t,e){var n=t.state.selection,r=n.from,o=n.to;if(!(t.state.selection instanceof Ne)||r<e||o>e+this.node.content.size)return null;var i=t.domSelectionRange(),a=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=xn(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(i.focusNode,i.focusOffset);if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){var s=a.nodeValue,u=function(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var a=t.child(o++),s=i;if(i+=a.nodeSize,a.isText){for(var u=a.text;o<t.childCount;){var c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;u+=c.text}if(i>=n){if(i>=r&&u.slice(r-e.length-s,r-s)==e)return r-e.length;var l=s<r?u.lastIndexOf(e,r-s-1):-1;if(l>=0&&l+e.length+s>=n)return s+l;if(n==r&&u.length>=r+e.length-s&&u.slice(r-s,r-s+e.length)==e)return r}}}return-1}(this.node.content,s,r-e,o-e);return u<0?null:{node:a,pos:u,text:s}}return{node:a,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}var a=new vr(this,i,n,o);t.input.compositionNodes.push(a),this.children=Fr(this.children,r,r+o.length,t,a)}}},{key:"update",value:function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)}},{key:"updateInner",value:function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(t){if(!Tr(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Or(this.dom,this.nodeDOM,Cr(this.outerDeco,this.node,e),Cr(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(t,n,r,o,i,a){var s,u=i.nodeViews[n.type.name],c=u&&u(n,i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a}),r,o),l=c&&c.dom,f=c&&c.contentDOM;if(n.isText)if(l){if(3!=l.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else l=document.createTextNode(n.text);else if(!l){var d=wt.renderSpec(document,n.type.spec.toDOM(n));l=d.dom,f=d.contentDOM}f||n.isText||"BR"==l.nodeName||(l.hasAttribute("contenteditable")||(l.contentEditable="false"),n.type.spec.draggable&&(l.draggable=!0));var h=l;return l=jr(l,r,n),c?s=new xr(t,n,r,o,l,f||null,h,c,i,a+1):n.isText?new wr(t,n,r,o,l,h,i):new e(t,n,r,o,l,f||null,h,i,a+1)}}]),e}(pr);function br(t,e,n,r,o){jr(r,e,t);var i=new gr(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}var wr=function(t){function e(t,n,r,o,i,a,s){return fn(this,e),nn(this,e,[t,n,r,o,i,null,a,s,0])}return un(e,t),hn(e,[{key:"parseRule",value:function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}},{key:"update",value:function(t,e,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)}},{key:"inParent",value:function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}},{key:"domFromPos",value:function(t){return{node:this.nodeDOM,offset:t}}},{key:"localPosFromDOM",value:function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):an(sn(e.prototype),"localPosFromDOM",this).call(this,t,n,r)}},{key:"ignoreMutation",value:function(t){return"characterData"!=t.type&&"selection"!=t.type}},{key:"slice",value:function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}},{key:"markDirty",value:function(t,n){an(sn(e.prototype),"markDirty",this).call(this,t,n),this.dom==this.nodeDOM||0!=t&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)}},{key:"domAtom",get:function(){return!1}}]),e}(gr),kr=function(t){function e(){return fn(this,e),nn(this,e,arguments)}return un(e,t),hn(e,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(t){return 0==this.dirty&&this.dom.nodeName==t}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}]),e}(pr),xr=function(t){function e(t,n,r,o,i,a,s,u,c,l){var f;return fn(this,e),(f=nn(this,e,[t,n,r,o,i,a,s,c,l])).spec=u,f}return un(e,t),hn(e,[{key:"update",value:function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&an(sn(e.prototype),"update",this).call(this,t,n,r,o)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():an(sn(e.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():an(sn(e.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):an(sn(e.prototype),"setSelection",this).call(this,t,n,r,o)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),an(sn(e.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}},{key:"ignoreMutation",value:function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):an(sn(e.prototype),"ignoreMutation",this).call(this,t)}}]),e}(gr);function Er(t,e,n){for(var r=t.firstChild,o=!1,i=0;i<e.length;i++){var a=e[i],s=a.dom;if(s.parentNode==t){for(;s!=r;)r=Mr(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(s,r);if(a instanceof yr){var u=r?r.previousSibling:t.lastChild;Er(a.contentDOM,a.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=Mr(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}var Sr=function(t){t&&(this.nodeName=t)};Sr.prototype=Object.create(null);var Dr=[new Sr];function Cr(t,e,n){if(0==t.length)return Dr;for(var r=n?Dr[0]:new Sr,o=[r],i=0;i<t.length;i++){var a=t[i].type.attrs;if(a)for(var s in a.nodeName&&o.push(r=new Sr(a.nodeName)),a){var u=a[s];null!=u&&(n&&1==o.length&&o.push(r=new Sr(e.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+u:"style"==s?r.style=(r.style?r.style+";":"")+u:"nodeName"!=s&&(r[s]=u))}}return o}function Or(t,e,n,r){if(n==Dr&&r==Dr)return e;for(var o=e,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var u=void 0;s&&s.nodeName==a.nodeName&&o!=t&&(u=o.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||((u=document.createElement(a.nodeName)).pmIsDeco=!0,u.appendChild(o),s=Dr[0]),o=u}Ar(o,s||Dr[0],a)}return o}function Ar(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" ").filter(Boolean):[],a=n.class?n.class.split(" ").filter(Boolean):[],s=0;s<i.length;s++)-1==a.indexOf(i[s])&&t.classList.remove(i[s]);for(var u=0;u<a.length;u++)-1==i.indexOf(a[u])&&t.classList.add(a[u]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style)for(var c,l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=l.exec(e.style);)t.style.removeProperty(c[1]);n.style&&(t.style.cssText+=n.style)}}function jr(t,e,n){return Or(t,t,Dr,Cr(e,n,1!=t.nodeType))}function Tr(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Mr(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var Lr=function(){function t(e,n,r){fn(this,t),this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(t,e){var n=e,r=n.children.length,o=t.childCount,i=new Map,a=[];t:for(;o>0;){for(var s=void 0;;)if(r){var u=n.children[r-1];if(!(u instanceof yr)){s=u,r--;break}n=u,r=u.children.length}else{if(n==e)break t;r=n.parent.children.indexOf(n),n=n.parent}var c=s.node;if(c){if(c!=t.child(o-1))break;--o,i.set(s,o),a.push(s)}}return{index:o,matched:i,matches:a.reverse()}}(e.node.content,e)}return hn(t,[{key:"destroyBetween",value:function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var a=-1,s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){var u=this.top.children[s];if(u.matchesMark(t[o])&&!this.isLocked(u.dom)){a=s;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var c=yr.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}},{key:"findNodeMatch",value:function(t,e,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(t,e,n))i=this.top.children.indexOf(o,this.index);else for(var a=this.index,s=Math.min(this.top.children.length,a+5);a<s;a++){var u=this.top.children[a];if(u.matchesNode(t,e,n)&&!this.preMatch.matched.has(u)){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}},{key:"updateNodeAt",value:function(t,e,n,r,o){var i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(t,e,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}},{key:"findIndexWithChild",value:function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var n=t.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}t=e}}},{key:"updateNextNode",value:function(t,e,n,r,o,i){for(var a=this.index;a<this.top.children.length;a++){var s=this.top.children[a];if(s instanceof gr){var u=this.preMatch.matched.get(s);if(null!=u&&u!=o)return!1;var c=s.dom,l=void 0,f=this.isLocked(c)&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&Tr(e,s.outerDeco));if(!f&&s.update(t,e,n,r))return this.destroyBetween(this.index,a),s.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(l=this.recreateWrapper(s,t,e,n,r,i)))return this.top.children[this.index]=l,l.contentDOM&&(l.dirty=2,l.updateChildren(r,i+1),l.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(t,e,n,r,o,i){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content))return null;var a=gr.create(this.top,e,n,r,o,i);if(a.contentDOM){a.children=t.children,t.children=[];var s,u=tn(a.children);try{for(u.s();!(s=u.n()).done;){s.value.parent=a}}catch(c){u.e(c)}finally{u.f()}}return t.destroy(),a}},{key:"addNode",value:function(t,e,n,r,o){var i=gr.create(this.top,t,e,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}},{key:"placeWidget",value:function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new mr(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){for(var t=this.top.children[this.index-1],e=this.top;t instanceof yr;)t=(e=t).children[e.children.length-1];(!t||!(t instanceof wr)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((In||_n)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{var n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");var r=new kr(this.top,[],n,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}},{key:"isLocked",value:function(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}]),t}();function Pr(t,e){return t.type.side-e.type.side}function Fr(t,e,n,r,o){for(var i=[],a=0,s=0;a<t.length;a++){var u=t[a],c=s,l=s+=u.size;c>=n||l<=e?i.push(u):(c<e&&i.push(u.slice(0,e-c,r)),o&&(i.push(o),o=void 0),l>n&&i.push(u.slice(n-c,u.size,r)))}return i}function Nr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;var o=t.docView.nearestDesc(n.focusNode),i=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;var s,u,c=r.resolve(a);if(Sn(n)){for(s=c;o&&!o.node;)o=o.parent;var l=o.node;if(o&&l.isAtom&&Be.isSelectable(l)&&o.parent&&(!l.isInline||!function(t,e,n){for(var r=0==e,o=e==xn(t);r||o;){if(t==n)return!0;var i=mn(t);if(!(t=t.parentNode))return!1;r=r&&0==i,o=o&&i==xn(t)}}(n.focusNode,n.focusOffset,o.dom))){var f=o.posBefore;u=new Be(a==f?c:r.resolve(f))}}else{var d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null;s=r.resolve(d)}u||(u=qr(t,s,c,"pointer"==e||t.state.selection.head<c.pos&&!i?1:-1));return u}function _r(t){return t.editable?t.hasFocus():Kr(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Br(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.state.selection;if(Vr(t,n),_r(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&_n){var r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&bn(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,mn(r)+1):n.setEnd(r,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&Ln&&Pn<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var i,a,s=n.anchor,u=n.head;!Ir||n instanceof Ne||(n.$from.parent.inlineContent||(i=Rr(t,n.from)),n.empty||n.$from.parent.inlineContent||(a=Rr(t,n.to))),t.docView.setSelection(s,u,t.root,e),Ir&&(i&&Hr(i),a&&Hr(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);var n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((function(){_r(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}var Ir=In||_n&&Bn<63;function Rr(t,e){var n=t.docView.domFromPos(e,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(In&&i&&"false"==i.contentEditable)return zr(i);if((!i||"false"==i.contentEditable)&&(!a||"false"==a.contentEditable)){if(i)return zr(i);if(a)return zr(a)}}function zr(t){return t.contentEditable="true",In&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Hr(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Vr(t,e){if(e instanceof Be){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&($r(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else $r(t)}function $r(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function qr(t,e,n,r){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||Ne.between(e,n,r)}function Wr(t){return!(t.editable&&!t.hasFocus())&&Kr(t)}function Kr(t){var e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(sg){return!1}}function Ur(t,e){var n=t.selection,r=n.$anchor,o=n.$head,i=e>0?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return a&&Me.findFrom(a,e)}function Gr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Jr(t,e,n){var r=t.state.selection;if(!(r instanceof Ne)){if(r instanceof Be&&r.node.isInline)return Gr(t,new Ne(e>0?r.$to:r.$from));var o=Ur(t.state,e);return!!o&&Gr(t,o)}if(n.indexOf("s")>-1){var i=r.$head,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;var s=t.state.doc.resolve(i.pos+a.nodeSize*(e<0?-1:1));return Gr(t,new Ne(r.$anchor,s))}if(!r.empty)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){var u=Ur(t.state,e);return!!(u&&u instanceof Be)&&Gr(t,u)}if(!(zn&&n.indexOf("m")>-1)){var c,l=r.$head,f=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!f||f.isText)return!1;var d=e<0?l.pos-f.nodeSize:l.pos;return!!(f.isAtom||(c=t.docView.descAt(d))&&!c.contentDOM)&&(Be.isSelectable(f)?Gr(t,new Be(e<0?t.state.doc.resolve(l.pos-f.nodeSize):l)):!!$n&&Gr(t,new Ne(t.state.doc.resolve(e<0?d:d+f.nodeSize))))}}function Yr(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Zr(t,e){var n=t.pmViewDesc;return n&&0==n.size&&(e<0||t.nextSibling||"BR"!=t.nodeName)}function Xr(t,e){return e<0?function(t){var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;var o,i,a=!1;Fn&&1==n.nodeType&&r<Yr(n)&&Zr(n.childNodes[r],-1)&&(a=!0);for(;;)if(r>0){if(1!=n.nodeType)break;var s=n.childNodes[r-1];if(Zr(s,-1))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}else{if(Qr(n))break;for(var u=n.previousSibling;u&&Zr(u,-1);)o=n.parentNode,i=mn(u),u=u.previousSibling;if(u)r=Yr(n=u);else{if((n=n.parentNode)==t.dom)break;r=0}}a?to(t,n,r):o&&to(t,o,i)}(t):function(t){var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;for(var o,i,a=Yr(n);;)if(r<a){if(1!=n.nodeType)break;if(!Zr(n.childNodes[r],1))break;o=n,i=++r}else{if(Qr(n))break;for(var s=n.nextSibling;s&&Zr(s,1);)o=s.parentNode,i=mn(s)+1,s=s.nextSibling;if(s)r=0,a=Yr(n=s);else{if((n=n.parentNode)==t.dom)break;r=a=0}}o&&to(t,o,i)}(t)}function Qr(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function to(t,e,n){var r,o;3!=e.nodeType&&((o=function(t,e){for(;t&&e==t.childNodes.length&&!En(t);)e=mn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){var n=t.childNodes[e];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=n,e=0}}(e,n))?(e=o,n=0):(r=function(t,e){for(;t&&!e&&!En(t);)e=mn(t),t=t.parentNode;for(;t&&e;){var n=t.childNodes[e-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=(t=n).childNodes.length}}(e,n))&&(e=r,n=r.nodeValue.length));var i=t.domSelection();if(Sn(i)){var a=document.createRange();a.setEnd(e,n),a.setStart(e,n),i.removeAllRanges(),i.addRange(a)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();var s=t.state;setTimeout((function(){t.state==s&&Br(t)}),50)}function eo(t,e){var n=t.state.doc.resolve(e);if(!_n&&!Hn&&n.parent.inlineContent){var r=t.coordsAtPos(e);if(e>n.start()){var o=t.coordsAtPos(e-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){var a=t.coordsAtPos(e+1),s=(a.top+a.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(a.left-r.left)>1)return a.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(t.dom).direction?"rtl":"ltr"}function no(t,e,n){var r=t.state.selection;if(r instanceof Ne&&!r.empty||n.indexOf("s")>-1)return!1;if(zn&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var a=Ur(t.state,e);if(a&&a instanceof Be)return Gr(t,a)}if(!o.parent.inlineContent){var s=e<0?o:i,u=r instanceof Re?Me.near(s,e):Me.findFrom(s,e);return!!u&&Gr(t,u)}return!1}function ro(t,e){if(!(t.state.selection instanceof Ne))return!0;var n=t.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var s=t.state.tr;return e<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),t.dispatch(s),!0}return!1}function oo(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function io(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);if(8==n||zn&&72==n&&"c"==r)return ro(t,-1)||Xr(t,-1);if(46==n&&!e.shiftKey||zn&&68==n&&"c"==r)return ro(t,1)||Xr(t,1);if(13==n||27==n)return!0;if(37==n||zn&&66==n&&"c"==r){var o=37==n?"ltr"==eo(t,t.state.selection.from)?-1:1:-1;return Jr(t,o,r)||Xr(t,o)}if(39==n||zn&&70==n&&"c"==r){var i=39==n?"ltr"==eo(t,t.state.selection.from)?1:-1:1;return Jr(t,i,r)||Xr(t,i)}return 38==n||zn&&80==n&&"c"==r?no(t,-1,r)||Xr(t,-1):40==n||zn&&78==n&&"c"==r?function(t){if(!In||t.state.selection.$head.parentOffset>0)return!1;var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;oo(t,o,"true"),setTimeout((function(){return oo(t,o,"false")}),20)}return!1}(t)||no(t,1,r)||Xr(t,1):r==(zn?"m":"c")&&(66==n||73==n||89==n||90==n)}function ao(t,e){t.someProp("transformCopied",(function(n){e=n(e,t)}));for(var n=[],r=e,o=r.content,i=r.openStart,a=r.openEnd;i>1&&a>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,a--;var s=o.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),o=s.content}var u=t.someProp("clipboardSerializer")||wt.fromSchema(t.state.schema),c=yo(),l=c.createElement("div");l.appendChild(u.serializeFragment(o,{document:c}));for(var f,d=l.firstChild,h=0;d&&1==d.nodeType&&(f=mo[d.nodeName.toLowerCase()]);){for(var p=f.length-1;p>=0;p--){for(var m=c.createElement(f[p]);l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),h++}d=l.firstChild}d&&1==d.nodeType&&d.setAttribute("data-pm-slice","".concat(i," ").concat(a).concat(h?" -".concat(h):""," ").concat(JSON.stringify(n)));var v=t.someProp("clipboardTextSerializer",(function(n){return n(e,t)}))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:l,text:v}}function so(t,e,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!e)return null;var u=e&&(r||s||!n);if(u){if(t.someProp("transformPastedText",(function(n){e=n(e,s||r,t)})),s)return e?new D(b.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):D.empty;var c=t.someProp("clipboardTextParser",(function(n){return n(e,o,r,t)}));if(c)a=c;else{var l=o.marks(),f=t.state.schema,d=wt.fromSchema(f);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((function(t){var e=i.appendChild(document.createElement("p"));t&&e.appendChild(d.serializeNode(f.text(t,l)))}))}}else t.someProp("transformPastedHTML",(function(e){n=e(n,t)})),i=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=yo().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);(n=o&&mo[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""));if(r.innerHTML=t,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),$n&&function(t){for(var e=t.querySelectorAll(_n?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<e.length;n++){var r=e[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}(i);var h=i&&i.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(var m=+p[3];m>0;m--){for(var v=i.firstChild;v&&1!=v.nodeType;)v=v.nextSibling;if(!v)break;i=v}if(!a){var y=t.someProp("clipboardParser")||t.someProp("domParser")||lt.fromSchema(t.state.schema);a=y.parseSlice(i,{preserveWhitespace:!(!u&&!p),context:o,ruleFromNode:function(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||uo.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(p)a=function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(c){return t}for(var o=t.content,i=t.openStart,a=t.openEnd,s=n.length-2;s>=0;s-=2){var u=r.nodes[n[s]];if(!u||u.hasRequiredAttrs())break;o=b.from(u.create(n[s+1],o)),i++,a++}return new D(o,i,a)}(po(a,+p[1],+p[2]),p[4]);else if(a=D.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n,r=function(){var n,r=e.node(o).contentMatchAt(e.index(o)),i=[];if(t.forEach((function(t){if(i){var e,o=r.findWrapping(t.type);if(!o)return i=null;if(e=i.length&&n.length&&lo(o,n,t,i[i.length-1],0))i[i.length-1]=e;else{i.length&&(i[i.length-1]=fo(i[i.length-1],n.length));var a=co(t,o);i.push(a),r=r.matchType(a.type),n=o}}})),i)return{v:b.from(i)}},o=e.depth;o>=0;o--)if(n=r())return n.v;return t}(a.content,o),!0),a.openStart||a.openEnd){for(var g=0,w=0,k=a.content.firstChild;g<a.openStart&&!k.type.spec.isolating;g++,k=k.firstChild);for(var x=a.content.lastChild;w<a.openEnd&&!x.type.spec.isolating;w++,x=x.lastChild);a=po(a,g,w)}return t.someProp("transformPasted",(function(e){a=e(a,t)})),a}var uo=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function co(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.length-1;r>=n;r--)t=e[r].create(null,b.from(t));return t}function lo(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var i=lo(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(b.from(co(n,t,o+1))))}}function fo(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,fo(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(b.empty,!0);return t.copy(n.append(r))}function ho(t,e,n,r,o,i){var a=e<0?t.firstChild:t.lastChild,s=a.content;return t.childCount>1&&(i=0),o<r-1&&(s=ho(s,e,n,r,o+1,i)),o>=n&&(s=e<0?a.contentMatchAt(0).fillBefore(s,i<=o).append(s):s.append(a.contentMatchAt(a.childCount).fillBefore(b.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(s))}function po(t,e,n){return e<t.openStart&&(t=new D(ho(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new D(ho(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var mo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},vo=null;function yo(){return vo||(vo=document.implementation.createHTMLDocument("title"))}var go={},bo={},wo={touchstart:!0,touchmove:!0},ko=hn((function t(){fn(this,t),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}));function xo(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Eo(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=function(e){return So(t,e)})}))}function So(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function Do(t){return{left:t.clientX,top:t.clientY}}function Co(t,e,n,r,o){if(-1==r)return!1;for(var i,a=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>a.depth?e(t,n,a.nodeAfter,a.before(r),o,!0):e(t,n,a.node(r),a.before(r),o,!1)})))return{v:!0}},u=a.depth+1;u>0;u--)if(i=s(u))return i.v;return!1}function Oo(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Ao(t,e,n,r,o){return Co(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?function(t,e){if(-1==e)return!1;var n,r,o=t.state.selection;o instanceof Be&&(n=o.node);for(var i=t.state.doc.resolve(e),a=i.depth+1;a>0;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(Be.isSelectable(s)){r=n&&o.$from.depth>0&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(Oo(t,Be.create(t.state.doc,r),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&Be.isSelectable(r))&&(Oo(t,new Be(n),"pointer"),!0)}(t,n))}function jo(t,e,n,r){return Co(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function To(t,e,n,r){return Co(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||function(t,e,n){if(0!=n.button)return!1;var r=t.state.doc;if(-1==e)return!!r.inlineContent&&(Oo(t,Ne.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(e),i=o.depth+1;i>0;i--){var a=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(a.inlineContent)Oo(t,Ne.create(r,s+1,s+1+a.content.size),"pointer");else{if(!Be.isSelectable(a))continue;Oo(t,Be.create(r,s),"pointer")}return!0}}(t,n,r)}function Mo(t){return Io(t)}bo.keydown=function(t,e){var n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!Fo(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!Vn||!_n||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!Rn||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(function(e){return e(t,n)}))||io(t,n)?n.preventDefault():xo(t,"key");else{var r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout((function(){t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",(function(e){return e(t,Dn(13,"Enter"))})),t.input.lastIOSEnter=0)}),200)}},bo.keyup=function(t,e){16==e.keyCode&&(t.input.shiftKey=!1)},bo.keypress=function(t,e){var n=e;if(!(Fo(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||zn&&n.metaKey))if(t.someProp("handleKeyPress",(function(e){return e(t,n)})))n.preventDefault();else{var r=t.state.selection;if(!(r instanceof Ne)||!r.$from.sameParent(r.$to)){var o=String.fromCharCode(n.charCode);/[\r\n]/.test(o)||t.someProp("handleTextInput",(function(e){return e(t,r.$from.pos,r.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}}};var Lo=zn?"metaKey":"ctrlKey";go.mousedown=function(t,e){var n=e;t.input.shiftKey=n.shiftKey;var r=Mo(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(n,t.input.lastClick)&&!n[Lo]&&("singleClick"==t.input.lastClick.type?i="doubleClick":"doubleClick"==t.input.lastClick.type&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};var a=t.posAtCoords(Do(n));a&&("singleClick"==i?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Po(t,a,n,!!r)):("doubleClick"==i?jo:To)(t,a.pos,a.inside,n)?n.preventDefault():xo(t,"pointer"))};var Po=function(){function t(e,n,r,o){var i,a,s=this;if(fn(this,t),this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Lo],this.allowDefault=r.shiftKey,n.inside>-1)i=e.state.doc.nodeAt(n.inside),a=n.inside;else{var u=e.state.doc.resolve(n.pos);i=u.parent,a=u.depth?u.before():0}var c=o?null:r.target,l=c?e.docView.nearestDesc(c,!0):null;this.target=l?l.dom:null;var f=e.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||f instanceof Be&&f.from<=a&&f.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Fn||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.input.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),xo(e,"pointer")}return hn(t,[{key:"done",value:function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return Br(t.view)})),this.view.input.mouseDown=null}},{key:"up",value:function(t){if(this.done(),this.view.dom.contains(t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Do(t))),this.updateAllowDefault(t),this.allowDefault||!e?xo(this.view,"pointer"):Ao(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||In&&this.mightDrag&&!this.mightDrag.node.isAtom||_n&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Oo(this.view,Me.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):xo(this.view,"pointer")}}},{key:"move",value:function(t){this.updateAllowDefault(t),xo(this.view,"pointer"),0==t.buttons&&this.done()}},{key:"updateAllowDefault",value:function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}]),t}();function Fo(t,e){return!!t.composing||!!(In&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}go.touchstart=function(t){t.input.lastTouch=Date.now(),Mo(t),xo(t,"pointer")},go.touchmove=function(t){t.input.lastTouch=Date.now(),xo(t,"pointer")},go.contextmenu=function(t){return Mo(t)};var No=Vn?5e3:-1;function _o(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((function(){return Io(t)}),e))}function Bo(t){var e;for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=((e=document.createEvent("Event")).initEvent("event",!0,!0),e.timeStamp));t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Io(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(Vn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Bo(t),e||t.docView&&t.docView.dirty){var n=Nr(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}bo.compositionstart=bo.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),Io(t,!0),t.markCursor=null;else if(Io(t),Fn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.domSelectionRange(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){t.domSelection().collapse(a,a.nodeValue.length);break}o=a,i=-1}t.input.composing=!0}_o(t,No)},bo.compositionend=function(t,e){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionPendingChanges&&Promise.resolve().then((function(){return t.domObserver.flush()})),t.input.compositionID++,_o(t,20))};var Ro=Ln&&Pn<15||Rn&&qn<604;function zo(t,e,n,r,o){var i=so(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,o,i||D.empty)})))return!0;if(!i)return!1;var a=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),s=a?t.state.tr.replaceSelectionWith(a,r):t.state.tr.replaceSelection(i);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Ho(t){var e=t.getData("text/plain")||t.getData("Text");if(e)return e;var n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}go.copy=bo.cut=function(t,e){var n=e,r=t.state.selection,o="cut"==n.type;if(!r.empty){var i=Ro?null:n.clipboardData,a=ao(t,r.content()),s=a.dom,u=a.text;i?(n.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",u)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,s),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},bo.paste=function(t,e){var n=e;if(!t.composing||Vn){var r=Ro?null:n.clipboardData,o=t.input.shiftKey&&45!=t.input.lastKeyCode;r&&zo(t,Ho(r),r.getData("text/html"),o,n)?n.preventDefault():function(t,e){if(t.dom.parentNode){var n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();var o=t.input.shiftKey&&45!=t.input.lastKeyCode;setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?zo(t,r.value,null,o,e):zo(t,r.textContent,r.innerHTML,o,e)}),50)}}(t,n)}};var Vo=hn((function t(e,n,r){fn(this,t),this.slice=e,this.move=n,this.node=r})),$o=zn?"altKey":"ctrlKey";for(var qo in go.dragstart=function(t,e){var n=e,r=t.input.mouseDown;if(r&&r.done(),n.dataTransfer){var o,i=t.state.selection,a=i.empty?null:t.posAtCoords(Do(n));if(a&&a.pos>=i.from&&a.pos<=(i instanceof Be?i.to-1:i.to));else if(r&&r.mightDrag)o=Be.create(t.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){var s=t.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=t.docView&&(o=Be.create(t.state.doc,s.posBefore))}var u=(o||t.state.selection).content(),c=ao(t,u),l=c.dom,f=c.text;n.dataTransfer.clearData(),n.dataTransfer.setData(Ro?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ro||n.dataTransfer.setData("text/plain",f),t.dragging=new Vo(u,!n[$o],o)}},go.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},bo.dragover=bo.dragenter=function(t,e){return e.preventDefault()},bo.drop=function(t,e){var n=e,r=t.dragging;if(t.dragging=null,n.dataTransfer){var o=t.posAtCoords(Do(n));if(o){var i=t.state.doc.resolve(o.pos),a=r&&r.slice;a?t.someProp("transformPasted",(function(e){a=e(a,t)})):a=so(t,Ho(n.dataTransfer),Ro?null:n.dataTransfer.getData("text/html"),!1,i);var s=!(!r||n[$o]);if(t.someProp("handleDrop",(function(e){return e(t,n,a||D.empty,s)})))n.preventDefault();else if(a){n.preventDefault();var u=a?oe(t.state.doc,i.pos,a):i.pos;null==u&&(u=i.pos);var c=t.state.tr;if(s){var l=r.node;l?l.replace(c):c.deleteSelection()}var f=c.mapping.map(u),d=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,h=c.doc;if(d?c.replaceRangeWith(f,f,a.content.firstChild):c.replaceRange(f,f,a),!c.doc.eq(h)){var p=c.doc.resolve(f);if(d&&Be.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))c.setSelection(new Be(p));else{var m=c.mapping.map(u);c.mapping.maps[c.mapping.maps.length-1].forEach((function(t,e,n,r){return m=r})),c.setSelection(qr(t,p,c.doc.resolve(m)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}}}}},go.focus=function(t){t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Br(t)}),20))},go.blur=function(t,e){var n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},go.beforeinput=function(t,e){if(_n&&Vn&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();var n=t.input.domChangeCount;setTimeout((function(){if(t.input.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,Dn(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},bo)go[qo]=bo[qo];function Wo(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var Ko=function(){function t(e,n){fn(this,t),this.toDOM=e,this.spec=n||Zo,this.side=this.spec.side||0}return hn(t,[{key:"map",value:function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Jo(i-n,i-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(e){return this==e||e instanceof t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Wo(this.spec,e.spec))}},{key:"destroy",value:function(t){this.spec.destroy&&this.spec.destroy(t)}}]),t}(),Uo=function(){function t(e,n){fn(this,t),this.attrs=e,this.spec=n||Zo}return hn(t,[{key:"map",value:function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Jo(o,i,this)}},{key:"valid",value:function(t,e){return e.from<e.to}},{key:"eq",value:function(e){return this==e||e instanceof t&&Wo(this.attrs,e.attrs)&&Wo(this.spec,e.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(e){return e.type instanceof t}}]),t}(),Go=function(){function t(e,n){fn(this,t),this.attrs=e,this.spec=n||Zo}return hn(t,[{key:"map",value:function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Jo(o.pos-n,i.pos-n,this)}},{key:"valid",value:function(t,e){var n,r=t.content.findIndex(e.from),o=r.index,i=r.offset;return i==e.from&&!(n=t.child(o)).isText&&i+n.nodeSize==e.to}},{key:"eq",value:function(e){return this==e||e instanceof t&&Wo(this.attrs,e.attrs)&&Wo(this.spec,e.spec)}},{key:"destroy",value:function(){}}]),t}(),Jo=function(){function t(e,n,r){fn(this,t),this.from=e,this.to=n,this.type=r}return hn(t,[{key:"copy",value:function(e,n){return new t(e,n,this.type)}},{key:"eq",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}},{key:"map",value:function(t,e,n){return this.type.map(t,this,e,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Uo}},{key:"widget",get:function(){return this.type instanceof Ko}}],[{key:"widget",value:function(e,n,r){return new t(e,e,new Ko(n,r))}},{key:"inline",value:function(e,n,r,o){return new t(e,n,new Uo(r,o))}},{key:"node",value:function(e,n,r,o){return new t(e,n,new Go(r,o))}}]),t}(),Yo=[],Zo={},Xo=function(){function t(e,n){fn(this,t),this.local=e.length?e:Yo,this.children=n.length?n:Yo}return hn(t,[{key:"find",value:function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}},{key:"findInner",value:function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=e&&a.to>=t&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<e&&this.children[s+1]>t){var u=this.children[s]+1;this.children[s+2].findInner(t-u,e-u,n,r+u,o)}}},{key:"map",value:function(t,e,n){return this==Qo||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Zo)}},{key:"mapInner",value:function(e,n,r,o,i){for(var a,s=0;s<this.local.length;s++){var u=this.local[s].map(e,r,o);u&&u.type.valid(n,u)?(a||(a=[])).push(u):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?ei(this.children,a||[],e,n,r,o,i):a?new t(a.sort(ai),Yo):Qo}},{key:"add",value:function(e,n){return n.length?this==Qo?t.create(e,n):this.addInner(e,n,0):this}},{key:"addInner",value:function(e,n,r){var o,i=this,a=0;e.forEach((function(t,e){var s,u=e+r;if(s=ri(n,t,u)){for(o||(o=i.children.slice());a<o.length&&o[a]<e;)a+=3;o[a]==e?o[a+2]=o[a+2].addInner(t,s,u+1):o.splice(a,0,e,e+t.nodeSize,ii(s,t,u+1,Zo)),a+=3}}));for(var s=ni(a?oi(n):n,-r),u=0;u<s.length;u++)s[u].type.valid(e,s[u])||s.splice(u--,1);return new t(s.length?this.local.concat(s).sort(ai):this.local,o||this.children)}},{key:"remove",value:function(t){return 0==t.length||this==Qo?this:this.removeInner(t,0)}},{key:"removeInner",value:function(e,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var a,s=void 0,u=r[i]+n,c=r[i+1]+n,l=0;l<e.length;l++)(a=e[l])&&a.from>u&&a.to<c&&(e[l]=null,(s||(s=[])).push(a));if(s){r==this.children&&(r=this.children.slice());var f=r[i+2].removeInner(s,u+1);f!=Qo?r[i+2]=f:(r.splice(i,3),i-=3)}}if(o.length)for(var d,h=0;h<e.length;h++)if(d=e[h])for(var p=0;p<o.length;p++)o[p].eq(d,n)&&(o==this.local&&(o=this.local.slice()),o.splice(p--,1));return r==this.children&&o==this.local?this:o.length||r.length?new t(o,r):Qo}},{key:"forChild",value:function(e,n){if(this==Qo)return this;if(n.isLeaf)return t.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(r=this.children[i+2]);break}for(var a=e+1,s=a+n.content.size,u=0;u<this.local.length;u++){var c=this.local[u];if(c.from<s&&c.to>a&&c.type instanceof Uo){var l=Math.max(a,c.from)-a,f=Math.min(s,c.to)-a;l<f&&(o||(o=[])).push(c.copy(l,f))}}if(o){var d=new t(o.sort(ai),Yo);return r?new ti([d,r]):d}return r||Qo}},{key:"eq",value:function(e){if(this==e)return!0;if(!(e instanceof t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}},{key:"locals",value:function(t){return si(this.localsInner(t))}},{key:"localsInner",value:function(t){if(this==Qo)return Yo;if(t.inlineContent||!this.local.some(Uo.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Uo||e.push(this.local[n]);return e}}],[{key:"create",value:function(t,e){return e.length?ii(e,t,0,Zo):Qo}}]),t}();Xo.empty=new Xo([],[]),Xo.removeOverlap=si;var Qo=Xo.empty,ti=function(){function t(e){fn(this,t),this.members=e}return hn(t,[{key:"map",value:function(e,n){var r=this.members.map((function(t){return t.map(e,n,Zo)}));return t.from(r)}},{key:"forChild",value:function(e,n){if(n.isLeaf)return Xo.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(e,n);i!=Qo&&(i instanceof t?r=r.concat(i.members):r.push(i))}return t.from(r)}},{key:"eq",value:function(e){if(!(e instanceof t)||e.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}},{key:"locals",value:function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?si(n?e:e.sort(ai)):Yo}}],[{key:"from",value:function(e){switch(e.length){case 0:return Qo;case 1:return e[0];default:return new t(e.every((function(t){return t instanceof Xo}))?e:e.reduce((function(t,e){return t.concat(e instanceof Xo?e:e.members)}),[]))}}}]),t}();function ei(t,e,n,r,o,i,a){for(var s=t.slice(),u=function(t){var e=0;n.maps[c].forEach((function(n,r,o,i){for(var a=i-o-(r-n),u=0;u<s.length;u+=3){var c=s[u+1];if(!(c<0||n>c+t-e)){var l=s[u]+t-e;r>=l?s[u+1]=n<=l?-2:-1:n>=t&&a&&(s[u]+=a,s[u+1]+=a)}}e+=a})),t=n.maps[c].map(t,-1),l=t},c=0,l=i;c<n.maps.length;c++)u(l);for(var f=!1,d=0;d<s.length;d+=3)if(s[d+1]<0){if(-2==s[d+1]){f=!0,s[d+1]=-1;continue}var h=n.map(t[d]+i),p=h-o;if(p<0||p>=r.content.size){f=!0;continue}var m=n.map(t[d+1]+i,-1)-o,v=r.content.findIndex(p),y=v.index,g=v.offset,b=r.maybeChild(y);if(b&&g==p&&g+b.nodeSize==m){var w=s[d+2].mapInner(n,b,h+1,t[d]+i+1,a);w!=Qo?(s[d]=p,s[d+1]=m,s[d+2]=w):(s[d+1]=-2,f=!0)}else f=!0}if(f){var k=function(t,e,n,r,o,i,a){function s(t,e){for(var i=0;i<t.local.length;i++){var u=t.local[i].map(r,o,e);u?n.push(u):a.onRemove&&a.onRemove(t.local[i].spec)}for(var c=0;c<t.children.length;c+=3)s(t.children[c+2],t.children[c]+e+1)}for(var u=0;u<t.length;u+=3)-1==t[u+1]&&s(t[u+2],e[u]+i+1);return n}(s,t,e,n,o,i,a),x=ii(k,r,0,a);e=x.local;for(var E=0;E<s.length;E+=3)s[E+1]<0&&(s.splice(E,3),E-=3);for(var S=0,D=0;S<x.children.length;S+=3){for(var C=x.children[S];D<s.length&&s[D]<C;)D+=3;s.splice(D,0,x.children[S],x.children[S+1],x.children[S+2])}}return new Xo(e.sort(ai),s)}function ni(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new Jo(o.from+e,o.to+e,o.type))}return n}function ri(t,e,n){if(e.isLeaf)return null;for(var r,o=n+e.nodeSize,i=null,a=0;a<t.length;a++)(r=t[a])&&r.from>n&&r.to<o&&((i||(i=[])).push(r),t[a]=null);return i}function oi(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function ii(t,e,n,r){var o=[],i=!1;e.forEach((function(e,a){var s=ri(t,e,a+n);if(s){i=!0;var u=ii(s,e,n+a+1,r);u!=Qo&&o.push(a,a+e.nodeSize,u)}}));for(var a=ni(i?oi(t):t,-n).sort(ai),s=0;s<a.length;s++)a[s].type.valid(e,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new Xo(a,o):Qo}function ai(t,e){return t.from-e.from||t.to-e.to}function si(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),ui(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),ui(e,o+1,i.copy(r.to,i.to)))}}return e}function ui(t,e,n){for(;e<t.length&&ai(n,t[e])>0;)e++;t.splice(e,0,n)}function ci(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Qo&&e.push(r)})),t.cursorWrapper&&e.push(Xo.create(t.state.doc,[t.cursorWrapper.deco])),ti.from(e)}var li={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},fi=Ln&&Pn<=11,di=function(){function t(){fn(this,t),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return hn(t,[{key:"set",value:function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}]),t}(),hi=function(){function t(e,n){var r=this;fn(this,t),this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new di,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)r.queue.push(t[e]);Ln&&Pn<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?r.flushSoon():r.flush()})),fi&&(this.onCharData=function(t){r.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}return hn(t,[{key:"flushSoon",value:function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,li)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if(Wr(this.view)){if(this.suppressingSelectionUpdates)return Br(this.view);if(Ln&&Pn<=11&&!this.view.state.selection.empty){var t=this.view.domSelectionRange();if(t.focusNode&&bn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(t){if(!t.focusNode)return!0;for(var e,n=new Set,r=t.focusNode;r;r=vn(r))n.add(r);for(var o=t.anchorNode;o;o=vn(o))if(n.has(o)){e=o;break}var i=e&&this.view.docView.nearestDesc(e);return i&&i.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}},{key:"pendingRecords",value:function(){if(this.observer){var t,e=tn(this.observer.takeRecords());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.queue.push(n)}}catch(r){e.e(r)}finally{e.f()}}return this.queue}},{key:"flush",value:function(){var t=this.view;if(t.docView&&!(this.flushingSoon>-1)){var e=this.pendingRecords();e.length&&(this.queue=[]);var n=t.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Wr(t)&&!this.ignoreSelectionChange(n),o=-1,i=-1,a=!1,s=[];if(t.editable)for(var u=0;u<e.length;u++){var c=this.registerMutation(e[u],s);c&&(o=o<0?c.from:Math.min(c.from,o),i=i<0?c.to:Math.max(c.to,i),c.typeOver&&(a=!0))}if(Fn&&s.length>1){var l=s.filter((function(t){return"BR"==t.nodeName}));if(2==l.length){var f=l[0],d=l[1];f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}}var h=null;o<0&&r&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Sn(n)&&(h=Nr(t))&&h.eq(Me.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Br(t),this.currentSelection.set(n),t.scrollToSelection()):(o>-1||r)&&(o>-1&&(t.docView.markDirty(o,i),function(t){if(pi.has(t))return;if(pi.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)){if(t.requiresGeckoHackNode=Fn,mi)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),mi=!0}}(t)),this.handleDOMChange(o,i,a,s),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Br(t),this.currentSelection.set(n))}}},{key:"registerMutation",value:function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var r=0;r<t.addedNodes.length;r++)e.push(t.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var o=t.previousSibling,i=t.nextSibling;if(Ln&&Pn<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var s=t.addedNodes[a],u=s.previousSibling,c=s.nextSibling;(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(o=u),(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(i=c)}var l=o&&o.parentNode==t.target?mn(o)+1:0,f=n.localPosFromDOM(t.target,l,-1),d=i&&i.parentNode==t.target?mn(i):t.target.childNodes.length;return{from:f,to:n.localPosFromDOM(t.target,d,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}]),t}(),pi=new WeakMap,mi=!1;function vi(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(In&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||In&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}var yi=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function gi(t,e,n,r,o){var i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){var a=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,s=Nr(t,a);if(s&&!t.state.selection.eq(s)){if(_n&&Vn&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(function(e){return e(t,Dn(13,"Enter"))})))return;var u=t.state.tr.setSelection(s);"pointer"==a?u.setMeta("pointer",!0):"key"==a&&u.scrollIntoView(),i&&u.setMeta("composition",i),t.dispatch(u)}}else{var c=t.state.doc.resolve(e),l=c.sharedDepth(n);e=c.before(l+1),n=t.state.doc.resolve(n).after(l+1);var f,d,h=t.state.selection,p=function(t,e,n){var r,o=t.docView.parseRange(e,n),i=o.node,a=o.fromOffset,s=o.toOffset,u=o.from,c=o.to,l=t.domSelectionRange(),f=l.anchorNode;if(f&&t.dom.contains(1==f.nodeType?f:f.parentNode)&&(r=[{node:f,offset:l.anchorOffset}],Sn(l)||r.push({node:l.focusNode,offset:l.focusOffset})),_n&&8===t.input.lastKeyCode)for(var d=s;d>a;d--){var h=i.childNodes[d-1],p=h.pmViewDesc;if("BR"==h.nodeName&&!p){s=d;break}if(!p||p.size)break}var m=t.state.doc,v=t.someProp("domParser")||lt.fromSchema(t.state.schema),y=m.resolve(u),g=null,b=v.parse(i,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:a,to:s,preserveWhitespace:"pre"!=y.parent.type.whitespace||"full",findPositions:r,ruleFromNode:vi,context:y});if(r&&null!=r[0].pos){var w=r[0].pos,k=r[1]&&r[1].pos;null==k&&(k=w),g={anchor:w+u,head:k+u}}return{doc:b,sel:g,from:u,to:c}}(t,e,n),m=t.state.doc,v=m.slice(p.from,p.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,d="end"):(f=t.state.selection.from,d="start"),t.input.lastKeyCode=null;var y=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var a=t.findDiffEnd(e,n+t.size,n+e.size),s=a.a,u=a.b;if("end"==o){r-=s+Math.max(0,i-Math.min(s,u))-i}if(s<i&&t.size<e.size){var c=r<=i&&r>=s?i-r:0;(i-=c)&&i<e.size&&ki(e.textBetween(i-1,i+1))&&(i+=c?1:-1),u=i+(u-s),s=i}else if(u<i){var l=r<=i&&r>=u?i-r:0;(i-=l)&&i<t.size&&ki(t.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-u),u=i}return{start:i,endA:s,endB:u}}(v.content,p.doc.content,p.from,f,d);if((Rn&&t.input.lastIOSEnter>Date.now()-225||Vn)&&o.some((function(t){return 1==t.nodeType&&!yi.test(t.nodeName)}))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",(function(e){return e(t,Dn(13,"Enter"))})))t.input.lastIOSEnter=0;else{if(!y){if(!(r&&h instanceof Ne&&!h.empty&&h.$head.sameParent(h.$anchor))||t.composing||p.sel&&p.sel.anchor!=p.sel.head){if(p.sel){var g=bi(t,t.state.doc,p.sel);if(g&&!g.eq(t.state.selection)){var w=t.state.tr.setSelection(g);i&&w.setMeta("composition",i),t.dispatch(w)}}return}y={start:h.from,endA:h.to,endB:h.to}}if(_n&&t.cursorWrapper&&p.sel&&p.sel.anchor==t.cursorWrapper.deco.from&&p.sel.head==p.sel.anchor){var k=y.endB-y.start;p.sel={anchor:p.sel.anchor+k,head:p.sel.anchor+k}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof Ne&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=p.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=p.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),Ln&&Pn<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>p.from&&" \xa0"==p.doc.textBetween(y.start-p.from-1,y.start-p.from+1)&&(y.start--,y.endA--,y.endB--);var x,E=p.doc.resolveNoCache(y.start-p.from),S=p.doc.resolveNoCache(y.endB-p.from),D=m.resolve(y.start),C=E.sameParent(S)&&E.parent.inlineContent&&D.end()>=y.endA;if((Rn&&t.input.lastIOSEnter>Date.now()-225&&(!C||o.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!C&&E.pos<p.doc.content.size&&!E.sameParent(S)&&(x=Me.findFrom(p.doc.resolve(E.pos+1),1,!0))&&x.head==S.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,Dn(13,"Enter"))})))t.input.lastIOSEnter=0;else if(t.state.selection.anchor>y.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||wi(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=t.resolve(wi(i,!0,!0));return!(!a.parent.isTextblock||a.pos>n||wi(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(m,y.start,y.endA,E,S)&&t.someProp("handleKeyDown",(function(e){return e(t,Dn(8,"Backspace"))})))Vn&&_n&&t.domObserver.suppressSelectionUpdates();else{_n&&Vn&&y.endB==y.start&&(t.input.lastAndroidDelete=Date.now()),Vn&&!C&&E.start()!=S.start()&&0==S.parentOffset&&E.depth==S.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==y.endA&&(y.endB-=2,S=p.doc.resolveNoCache(y.endB-p.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,Dn(13,"Enter"))}))}),20));var O,A,j,T=y.start,M=y.endA;if(C)if(E.pos==S.pos)Ln&&Pn<=11&&0==E.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Br(t)}),20)),O=t.state.tr.delete(T,M),A=m.resolve(y.start).marksAcross(m.resolve(y.endA));else if(y.endA==y.endB&&(j=function(t,e){for(var n,r,o,i=t.firstChild.marks,a=e.firstChild.marks,s=i,u=a,c=0;c<a.length;c++)s=a[c].removeFromSet(s);for(var l=0;l<i.length;l++)u=i[l].removeFromSet(u);if(1==s.length&&0==u.length)r=s[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=s.length||1!=u.length)return null;r=u[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var f=[],d=0;d<e.childCount;d++)f.push(o(e.child(d)));if(b.from(f).eq(t))return{mark:r,type:n}}(E.parent.content.cut(E.parentOffset,S.parentOffset),D.parent.content.cut(D.parentOffset,y.endA-D.start()))))O=t.state.tr,"add"==j.type?O.addMark(T,M,j.mark):O.removeMark(T,M,j.mark);else if(E.parent.child(E.index()).isText&&E.index()==S.index()-(S.textOffset?0:1)){var L=E.parent.textBetween(E.parentOffset,S.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,T,M,L)})))return;O=t.state.tr.insertText(L,T,M)}if(O||(O=t.state.tr.replace(T,M,p.doc.slice(y.start-p.from,y.endB-p.from))),p.sel){var P=bi(t,O.doc,p.sel);P&&!(_n&&Vn&&t.composing&&P.empty&&(y.start!=y.endB||t.input.lastAndroidDelete<Date.now()-100)&&(P.head==T||P.head==O.mapping.map(M)-1)||Ln&&P.empty&&P.head==T)&&O.setSelection(P)}A&&O.ensureMarks(A),i&&O.setMeta("composition",i),t.dispatch(O.scrollIntoView())}}}}function bi(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:qr(t,e.resolve(n.anchor),e.resolve(n.head))}function wi(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function ki(t){if(2!=t.length)return!1;var e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}var xi=function(){function t(e,n){var r=this;fn(this,t),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ko,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Oi),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Di(this),Si(this),this.nodeViews=Ci(this),this.docView=br(this.state.doc,Ei(this),ci(this),this.dom,this),this.domObserver=new hi(this,(function(t,e,n,o){return gi(r,t,e,n,o)})),this.domObserver.start(),function(t){var e=function(){var e=go[n];t.dom.addEventListener(n,t.input.eventHandlers[n]=function(n){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,n)||So(t,n)||!t.editable&&n.type in bo||e(t,n)},wo[n]?{passive:!0}:void 0)};for(var n in go)e();In&&t.dom.addEventListener("input",(function(){return null})),Eo(t)}(this),this.updatePluginViews()}return hn(t,[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props}},{key:"update",value:function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Eo(this);var e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Oi),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}},{key:"setProps",value:function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)}},{key:"updateState",value:function(t){this.updateStateInner(t,this._props)}},{key:"updateStateInner",value:function(t,e){var n,r=this.state,o=!1,i=!1;t.storedMarks&&this.composing&&(Bo(this),i=!0),this.state=t;var a=r.plugins!=t.plugins||this._props.plugins!=e.plugins;if(a||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){var s=Ci(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(s,this.nodeViews)&&(this.nodeViews=s,o=!0)}(a||e.handleDOMEvents!=this._props.handleDOMEvents)&&Eo(this),this.editable=Di(this),Si(this);var u=ci(this),c=Ei(this),l=r.plugins==t.plugins||r.doc.eq(t.doc)?t.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",f=o||!this.docView.matchesNode(t.doc,c,u);!f&&t.selection.eq(r.selection)||(i=!0);var d,h,p,m,v,y,g,b,w,k,x,E="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,a=o+1;a<Math.min(innerHeight,r.bottom);a+=5){var s=t.root.elementFromPoint(i,a);if(s&&s!=t.dom&&t.dom.contains(s)){var u=s.getBoundingClientRect();if(u.top>=o-20){e=s,n=u.top;break}}}return{refDOM:e,refTop:n,stack:Jn(t.dom)}}(this);if(i){this.domObserver.stop();var S=f&&(Ln||_n)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&(m=r.selection,v=t.selection,y=Math.min(m.$anchor.sharedDepth(m.head),v.$anchor.sharedDepth(v.head)),m.$anchor.start(y)!=v.$anchor.start(y));if(f){var D=_n?this.trackWrites=this.domSelectionRange().focusNode:null;!o&&this.docView.update(t.doc,c,u,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=br(t.doc,c,u,this.dom,this)),D&&!this.trackWrites&&(S=!0)}S||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(d=this,h=d.docView.domFromPos(d.state.selection.anchor,0),p=d.domSelectionRange(),bn(h.node,h.offset,p.anchorNode,p.anchorOffset)))?Br(this,S):(Vr(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():E&&(b=(g=E).refDOM,w=g.refTop,k=g.stack,x=b?b.getBoundingClientRect().top:0,Yn(k,0==x?0:x-w))}},{key:"scrollToSelection",value:function(){var t=this,e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(function(e){return e(t)})));else if(this.state.selection instanceof Be){var n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&Gn(this,n.getBoundingClientRect(),e)}else Gn(this,this.coordsAtPos(this.state.selection.head,1),e)}},{key:"destroyPluginViews",value:function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()}},{key:"updatePluginViews",value:function(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var a=this.state.plugins[i];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}}},{key:"updateDraggedNode",value:function(t,e){var n=t.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{var o=n.from+(this.state.doc.content.size-e.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==n.node&&(r=o)}this.dragging=new Vo(t.slice,t.move,r<0?void 0:Be.create(this.state.doc,r))}},{key:"someProp",value:function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[t];if(null!=i&&(n=e?e(i):i))return n}var a=this.state.plugins;if(a)for(var s=0;s<a.length;s++){var u=a[s].props[t];if(null!=u&&(n=e?e(u):u))return n}}},{key:"hasFocus",value:function(){if(Ln){var t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(Zn)return t.focus(Zn);var e=Jn(t);t.focus(null==Zn?{get preventScroll(){return Zn={preventScroll:!0},!0}}:void 0),Zn||(Zn=!1,Yn(e,0))}(this.dom),Br(this),this.domObserver.start()}},{key:"root",get:function(){var t=this,e=this._root;if(null==e)for(var n,r=function(e){if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return e.ownerDocument.getSelection()}),{v:t._root=e}},o=this.dom.parentNode;o;o=o.parentNode)if(n=r(o))return n.v;return e||document}},{key:"updateRoot",value:function(){this._root=null}},{key:"posAtCoords",value:function(t){return er(this,t)}},{key:"coordsAtPos",value:function(t){return ir(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"domAtPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(t,e)}},{key:"nodeDOM",value:function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null}},{key:"posAtDOM",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(t,e){return hr(this,e||this.state,t)}},{key:"pasteHTML",value:function(t,e){return zo(this,"",t,!1,e||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(t,e){return zo(this,t,null,!0,e||new ClipboardEvent("paste"))}},{key:"destroy",value:function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ci(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(t){return function(t,e){So(t,e)||!go[e.type]||!t.editable&&e.type in bo||go[e.type](t,e)}(this,t)}},{key:"dispatch",value:function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}},{key:"domSelectionRange",value:function(){return In&&11===this.root.nodeType&&function(t){for(var e=t.activeElement;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom?function(t){var e;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);var r=e.startContainer,o=e.startOffset,i=e.endContainer,a=e.endOffset,s=t.domAtPos(t.state.selection.anchor);if(bn(s.node,s.offset,i,a)){var u=[i,a,r,o];r=u[0],o=u[1],i=u[2],a=u[3]}return{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:a}}(this):this.domSelection()}},{key:"domSelection",value:function(){return this.root.getSelection()}}]),t}();function Ei(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:"style"==r?e.style=(e.style?e.style+";":"")+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),e.translate||(e.translate="no"),[Jo.node(0,t.state.doc.content.size,e)]}function Si(t){if(t.markCursor){var e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Jo.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Di(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Ci(t){var e=Object.create(null);function n(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Oi(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Ai={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ji={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ti="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Mi="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Li=0;Li<10;Li++)Ai[48+Li]=Ai[96+Li]=String(Li);for(Li=1;Li<=24;Li++)Ai[Li+111]="F"+Li;for(Li=65;Li<=90;Li++)Ai[Li]=String.fromCharCode(Li+32),ji[Li]=String.fromCharCode(Li);for(var Pi in Ai)ji.hasOwnProperty(Pi)||(ji[Pi]=Ai[Pi]);var Fi="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Ni(t){var e,n,r,o,i=t.split(/-(?!$)/),a=i[i.length-1];"Space"==a&&(a=" ");for(var s=0;s<i.length-1;s++){var u=i[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);Fi?o=!0:n=!0}}return e&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function _i(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Bi(t){var e=function(t){var e=Object.create(null);for(var n in t)e[Ni(n)]=t[n];return e}(t);return function(t,n){var r,o=function(t){var e=!(Ti&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Mi&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?ji:Ai)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),i=e[_i(o,n)];if(i&&i(t.state,t.dispatch,t))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){var a=e[_i(o,n,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=Ai[n.keyCode])&&r!=o){var s=e[_i(r,n)];if(s&&s(t.state,t.dispatch,t))return!0}}return!1}}var Ii=function(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)};function Ri(t,e){var n=t.selection.$cursor;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}var zi=function(t,e,n){var r=Ri(t,n);if(!r)return!1;var o=$i(r);if(!o){var i=r.blockRange(),a=i&&Zt(i);return null!=a&&(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}var s=o.nodeBefore;if(!s.type.spec.isolating&&ea(t,o,e))return!0;if(0==r.parent.content.size&&(Hi(s,"end")||Be.isSelectable(s))){var u=ie(t.doc,r.before(),r.after(),D.empty);if(u&&u.slice.size<u.to-u.from){if(e){var c=t.tr.step(u);c.setSelection(Hi(s,"end")?Me.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):Be.create(c.doc,o.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}}return!(!s.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0)};function Hi(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}var Vi=function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;i=$i(o)}var a=i&&i.nodeBefore;return!(!a||!Be.isSelectable(a))&&(e&&e(t.tr.setSelection(Be.create(t.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)};function $i(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function qi(t,e){var n=t.selection.$cursor;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}var Wi=function(t,e,n){var r=qi(t,n);if(!r)return!1;var o=Ui(r);if(!o)return!1;var i=o.nodeAfter;if(ea(t,o,e))return!0;if(0==r.parent.content.size&&(Hi(i,"start")||Be.isSelectable(i))){var a=ie(t.doc,r.before(),r.after(),D.empty);if(a&&a.slice.size<a.to-a.from){if(e){var s=t.tr.step(a);s.setSelection(Hi(i,"start")?Me.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):Be.create(s.doc,s.mapping.map(o.pos))),e(s.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)},Ki=function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;i=Ui(o)}var a=i&&i.nodeAfter;return!(!a||!Be.isSelectable(a))&&(e&&e(t.tr.setSelection(Be.create(t.doc,i.pos)).scrollIntoView()),!0)};function Ui(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var Gi=function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function Ji(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var Yi=function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=Ji(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(e){var u=r.after(),c=t.tr.replaceWith(u,u,s.createAndFill());c.setSelection(Me.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},Zi=function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(n instanceof Re||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=Ji(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=t.tr.insert(a,i.createAndFill());s.setSelection(Ne.create(s.doc,a+1)),e(s.scrollIntoView())}return!0},Xi=function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(te(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Zt(o);return null!=i&&(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)};var Qi,ta=function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(t.selection instanceof Be&&t.selection.node.isBlock)return!(!r.parentOffset||!te(t.doc,r.pos))&&(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(e){var i=o.parentOffset==o.parent.content.size,a=t.tr;(t.selection instanceof Ne||t.selection instanceof Re)&&a.deleteSelection();var s=0==r.depth?null:Ji(r.node(-1).contentMatchAt(r.indexAfter(-1))),u=Qi&&Qi(o.parent,i),c=u?[u]:i&&s?[{type:s}]:void 0,l=te(a.doc,a.mapping.map(r.pos),1,c);if(c||l||!te(a.doc,a.mapping.map(r.pos),1,s?[{type:s}]:void 0)||(s&&(c=[{type:s}]),l=!0),l&&(a.split(a.mapping.map(r.pos),1,c),!i&&!r.parentOffset&&r.parent.type!=s)){var f=a.mapping.map(r.before()),d=a.doc.resolve(f);s&&r.node(-1).canReplaceWith(d.index(),d.index()+1,s)&&a.setNodeMarkup(a.mapping.map(r.before()),s)}e(a.scrollIntoView())}return!0};function ea(t,e,n){var r,o,i=e.nodeBefore,a=e.nodeAfter;if(i.type.spec.isolating||a.type.spec.isolating)return!1;if(function(t,e,n){var r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(i,i+1)||!o.isTextblock&&!ee(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}(t,e,n))return!0;var s=e.parent.canReplace(e.index(),e.index()+1);if(s&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(r[0]||a.type).validEnd){if(n){for(var u=e.pos+a.nodeSize,c=b.empty,l=r.length-1;l>=0;l--)c=b.from(r[l].create(null,c));c=b.from(i.copy(c));var f=t.tr.step(new Gt(e.pos-1,u,e.pos,u,new D(c,1,0),r.length,!0)),d=u+2*r.length;ee(f.doc,d)&&f.join(d),n(f.scrollIntoView())}return!0}var h=Me.findFrom(e,1),p=h&&h.$from.blockRange(h.$to),m=p&&Zt(p);if(null!=m&&m>=e.depth)return n&&n(t.tr.lift(p,m).scrollIntoView()),!0;if(s&&Hi(a,"start",!0)&&Hi(i,"end")){for(var v=i,y=[];y.push(v),!v.isTextblock;)v=v.lastChild;for(var g=a,w=1;!g.isTextblock;g=g.firstChild)w++;if(v.canReplace(v.childCount,v.childCount,g.content)){if(n){for(var k=b.empty,x=y.length-1;x>=0;x--)k=b.from(y[x].copy(k));n(t.tr.step(new Gt(e.pos-y.length,e.pos+a.nodeSize,e.pos+w,e.pos+a.nodeSize-w,new D(k,y.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function na(t){return function(e,n){for(var r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(e.tr.setSelection(Ne.create(e.doc,t<0?o.start(i):o.end(i)))),!0)}}var ra=na(-1),oa=na(1);function ia(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){for(var o=!1,i=0;i<n.selection.ranges.length&&!o;i++){var a=n.selection.ranges[i],s=a.$from.pos,u=a.$to.pos;n.doc.nodesBetween(s,u,(function(r,i){if(o)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)o=!0;else{var a=n.doc.resolve(i),s=a.index();o=a.parent.canReplaceWith(s,s+1,t)}}))}if(!o)return!1;if(r){for(var c=n.tr,l=0;l<n.selection.ranges.length;l++){var f=n.selection.ranges[l],d=f.$from.pos,h=f.$to.pos;c.setBlockType(d,h,t,e)}r(c.scrollIntoView())}return!0}}function aa(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}var sa=aa(Ii,zi,Vi),ua=aa(Ii,Wi,Ki),ca={Enter:aa(Gi,Zi,Xi,ta),"Mod-Enter":Yi,Backspace:sa,"Mod-Backspace":sa,"Shift-Backspace":sa,Delete:ua,"Mod-Delete":ua,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new Re(t.doc))),!0}},la={"Ctrl-h":ca.Backspace,"Alt-Backspace":ca["Mod-Backspace"],"Ctrl-d":ca.Delete,"Ctrl-Alt-Backspace":ca["Mod-Delete"],"Alt-Delete":ca["Mod-Delete"],"Alt-d":ca["Mod-Delete"],"Ctrl-a":ra,"Ctrl-e":oa};for(var fa in ca)la[fa]=ca[fa];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function da(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),u=!1,c=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(t)&&0==s.startIndex){if(0==i.index(s.depth-1))return!1;var l=n.doc.resolve(s.start-2);c=new H(l,l,s.depth),s.endIndex<s.parent.childCount&&(s=new H(i,n.doc.resolve(a.end(s.depth)),s.depth)),u=!0}var f=Xt(c,t,e,s);return!!f&&(r&&r(function(t,e,n,r,o){for(var i=b.empty,a=n.length-1;a>=0;a--)i=b.from(n[a].type.create(n[a].attrs,i));t.step(new Gt(e.start-(r?2:0),e.end,e.start,e.end,new D(i,0,0),n.length,!0));for(var s=0,u=0;u<n.length;u++)n[u].type==o&&(s=u+1);for(var c=n.length-s,l=e.start+n.length-(r?2:0),f=e.parent,d=e.startIndex,h=e.endIndex,p=!0;d<h;d++,p=!1)!p&&te(t.doc,l,c)&&(t.split(l,c),l+=2*c),l+=f.child(d).nodeSize;return t}(n.tr,s,f,u,t).scrollIntoView()),!0)}}function ha(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==t}));return!!a&&(!n||(o.node(a.depth-1).type==t?function(t,e,n,r){var o=t.tr,i=r.end,a=r.$to.end(r.depth);i<a&&(o.step(new Gt(i-1,a,i,a,new D(b.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new H(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));var s=Zt(r);if(null==s)return!1;o.lift(r,s);var u=o.mapping.map(i,-1)-1;ee(o.doc,u)&&o.join(u);return e(o.scrollIntoView()),!0}(e,n,t,a):function(t,e,n){for(var r=t.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;a>s;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var u=r.doc.resolve(n.start),c=u.nodeAfter;if(r.mapping.map(n.end)!=n.start+u.nodeAfter.nodeSize)return!1;var l=0==n.startIndex,f=n.endIndex==o.childCount,d=u.node(-1),h=u.index(-1);if(!d.canReplace(h+(l?0:1),h+1,c.content.append(f?b.empty:b.from(o))))return!1;var p=u.pos,m=p+c.nodeSize;return r.step(new Gt(p-(l?1:0),m+(f?1:0),p+1,m-1,new D((l?b.empty:b.from(o.copy(b.empty))).append(f?b.empty:b.from(o.copy(b.empty))),l?0:1,f?0:1),l?0:1)),e(r.scrollIntoView()),!0}(e,n,a)))}}function pa(t,e,n){return e=va(e),function(t,e){if(e&&("object"===ba(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ya(t)}(t,ma()?Reflect.construct(e,n||[],va(t).constructor):e.apply(t,n))}function ma(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ma=function(){return!!t})()}function va(t){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},va(t)}function ya(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ga(t,e){return ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ga(t,e)}function ba(t){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(t)}function wa(t){return function(t){if(Array.isArray(t))return Ea(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||xa(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||xa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xa(t,e){if(t){if("string"===typeof t)return Ea(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ea(t,e):void 0}}function Ea(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Da(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ta(r.key),r)}}function Ca(t,e,n){return e&&Da(t.prototype,e),n&&Da(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Aa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oa(Object(n),!0).forEach((function(e){ja(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ja(t,e,n){return(e=Ta(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ta(t){var e=function(t,e){if("object"!=ba(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ba(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ba(e)?e:String(e)}function Ma(t){var e=t.state,n=t.transaction,r=n.selection,o=n.doc,i=n.storedMarks;return Aa(Aa({},e),{},{apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}})}var La=function(){function t(e){Sa(this,t),this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}return Ca(t,[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var t=this,e=this.rawCommands,n=this.editor,r=this.state,o=n.view,i=r.tr,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map((function(e){var n=ka(e,2),r=n[0],s=n[1];return[r,function(){var e=s.apply(void 0,arguments)(a);return i.getMeta("preventDispatch")||t.hasCustomState||o.dispatch(i),e}]})))}},{key:"chain",get:function(){var t=this;return function(){return t.createChain()}}},{key:"can",get:function(){var t=this;return function(){return t.createCan()}}},{key:"createChain",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s=[],u=!!t,c=t||i.tr,l=Aa(Aa({},Object.fromEntries(Object.entries(r).map((function(t){var r=ka(t,2),o=r[0],i=r[1];return[o,function(){var t=e.buildProps(c,n),r=i.apply(void 0,arguments)(t);return s.push(r),l}]})))),{},{run:function(){return u||!n||c.getMeta("preventDispatch")||e.hasCustomState||a.dispatch(c),s.every((function(t){return!0===t}))}});return l}},{key:"createCan",value:function(t){var e=this,n=this.rawCommands,r=this.state,o=t||r.tr,i=this.buildProps(o,false),a=Object.fromEntries(Object.entries(n).map((function(t){var e=ka(t,2),n=e[0],r=e[1];return[n,function(){return r.apply(void 0,arguments)(Aa(Aa({},i),{},{dispatch:void 0}))}]})));return Aa(Aa({},a),{},{chain:function(){return e.createChain(o,false)}})}},{key:"buildProps",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s={tr:t,editor:o,view:a,state:Ma({state:i,transaction:t}),dispatch:n?function(){}:void 0,chain:function(){return e.createChain(t,n)},can:function(){return e.createCan(t)},get commands(){return Object.fromEntries(Object.entries(r).map((function(t){var e=ka(t,2),n=e[0],r=e[1];return[n,function(){return r.apply(void 0,arguments)(s)}]})))}};return s}}]),t}(),Pa=function(){function t(){Sa(this,t),this.callbacks={}}return Ca(t,[{key:"on",value:function(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this.callbacks[t];return i&&i.forEach((function(t){return t.apply(e,r)})),this}},{key:"off",value:function(t,e){var n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((function(t){return t!==e})):delete this.callbacks[t]),this}},{key:"removeAllListeners",value:function(){this.callbacks={}}}]),t}();function Fa(t,e,n){return void 0===t.config[e]&&t.parent?Fa(t.parent,e,n):"function"===typeof t.config[e]?t.config[e].bind(Aa(Aa({},n),{},{parent:t.parent?Fa(t.parent,e,n):null})):t.config[e]}function Na(t){return{baseExtensions:t.filter((function(t){return"extension"===t.type})),nodeExtensions:t.filter((function(t){return"node"===t.type})),markExtensions:t.filter((function(t){return"mark"===t.type}))}}function _a(t){var e=[],n=Na(t),r=n.nodeExtensions,o=n.markExtensions,i=[].concat(wa(r),wa(o)),a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach((function(t){var n=Fa(t,"addGlobalAttributes",{name:t.name,options:t.options,storage:t.storage});n&&n().forEach((function(t){t.types.forEach((function(n){Object.entries(t.attributes).forEach((function(t){var r=ka(t,2),o=r[0],i=r[1];e.push({type:n,name:o,attribute:Aa(Aa({},a),i)})}))}))}))})),i.forEach((function(t){var n={name:t.name,options:t.options,storage:t.storage},r=Fa(t,"addAttributes",n);if(r){var o=r();Object.entries(o).forEach((function(n){var r=ka(n,2),o=r[0],i=r[1],s=Aa(Aa({},a),i);"function"===typeof(null===s||void 0===s?void 0:s.default)&&(s.default=s.default()),(null===s||void 0===s?void 0:s.isRequired)&&void 0===(null===s||void 0===s?void 0:s.default)&&delete s.default,e.push({type:t.name,name:o,attribute:s})}))}})),e}function Ba(t,e){if("string"===typeof t){if(!e.nodes[t])throw Error("There is no node type named '".concat(t,"'. Maybe you forgot to add the extension?"));return e.nodes[t]}return t}function Ia(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return!!t})).reduce((function(t,e){var n=Aa({},t);return Object.entries(e).forEach((function(t){var e=ka(t,2),r=e[0],o=e[1];if(n[r])if("class"===r){var i=o?o.split(" "):[],a=n[r]?n[r].split(" "):[],s=i.filter((function(t){return!a.includes(t)}));n[r]=[].concat(wa(a),wa(s)).join(" ")}else n[r]="style"===r?[n[r],o].join("; "):o;else n[r]=o})),n}),{})}function Ra(t,e){return e.filter((function(t){return t.attribute.rendered})).map((function(e){return e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:ja({},e.name,t.attrs[e.name])})).reduce((function(t,e){return Ia(t,e)}),{})}function za(t){return"function"===typeof t}function Ha(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(za(t)){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return e?t.bind(e).apply(void 0,r):t.apply(void 0,r)}return t}function Va(t,e){return t.style?t:Aa(Aa({},t),{},{getAttrs:function(n){var r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;var o=e.reduce((function(t,e){var r=e.attribute.parseHTML?e.attribute.parseHTML(n):function(t){return"string"!==typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}(n.getAttribute(e.name));return null===r||void 0===r?t:Aa(Aa({},t),{},ja({},e.name,r))}),{});return Aa(Aa({},r),o)}})}function $a(t){return Object.fromEntries(Object.entries(t).filter((function(t){var e=ka(t,2),n=e[0],r=e[1];return("attrs"!==n||!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(t).length&&t.constructor===Object}(r))&&(null!==r&&void 0!==r)})))}function qa(t,e){var n,r=_a(t),o=Na(t),i=o.nodeExtensions,a=o.markExtensions,s=null===(n=i.find((function(t){return Fa(t,"topNode")})))||void 0===n?void 0:n.name,u=Object.fromEntries(i.map((function(n){var o=r.filter((function(t){return t.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:e},a=t.reduce((function(t,e){var r=Fa(e,"extendNodeSchema",i);return Aa(Aa({},t),r?r(n):{})}),{}),s=$a(Aa(Aa({},a),{},{content:Ha(Fa(n,"content",i)),marks:Ha(Fa(n,"marks",i)),group:Ha(Fa(n,"group",i)),inline:Ha(Fa(n,"inline",i)),atom:Ha(Fa(n,"atom",i)),selectable:Ha(Fa(n,"selectable",i)),draggable:Ha(Fa(n,"draggable",i)),code:Ha(Fa(n,"code",i)),defining:Ha(Fa(n,"defining",i)),isolating:Ha(Fa(n,"isolating",i)),attrs:Object.fromEntries(o.map((function(t){var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))})),u=Ha(Fa(n,"parseHTML",i));u&&(s.parseDOM=u.map((function(t){return Va(t,o)})));var c=Fa(n,"renderHTML",i);c&&(s.toDOM=function(t){return c({node:t,HTMLAttributes:Ra(t,o)})});var l=Fa(n,"renderText",i);return l&&(s.toText=l),[n.name,s]}))),c=Object.fromEntries(a.map((function(n){var o=r.filter((function(t){return t.type===n.name})),i={name:n.name,options:n.options,storage:n.storage,editor:e},a=t.reduce((function(t,e){var r=Fa(e,"extendMarkSchema",i);return Aa(Aa({},t),r?r(n):{})}),{}),s=$a(Aa(Aa({},a),{},{inclusive:Ha(Fa(n,"inclusive",i)),excludes:Ha(Fa(n,"excludes",i)),group:Ha(Fa(n,"group",i)),spanning:Ha(Fa(n,"spanning",i)),code:Ha(Fa(n,"code",i)),attrs:Object.fromEntries(o.map((function(t){var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))})),u=Ha(Fa(n,"parseHTML",i));u&&(s.parseDOM=u.map((function(t){return Va(t,o)})));var c=Fa(n,"renderHTML",i);return c&&(s.toDOM=function(t){return c({mark:t,HTMLAttributes:Ra(t,o)})}),[n.name,s]})));return new ut({topNode:s,nodes:u,marks:c})}function Wa(t,e){return e.nodes[t]||e.marks[t]||null}function Ka(t,e){return Array.isArray(e)?e.some((function(e){return("string"===typeof e?e:e.name)===t.name})):e}var Ua=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(function(t,e,o,i){var a,s,u=(null===(s=(a=t.type.spec).toText)||void 0===s?void 0:s.call(a,{node:t,pos:e,parent:o,index:i}))||t.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-e))})),n};function Ga(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var Ja=Ca((function t(e){Sa(this,t),this.find=e.find,this.handler=e.handler})),Ya=function(t,e){if(Ga(e))return e.exec(t);var n=e(t);if(!n)return null;var r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Za(t){var e,n=t.editor,r=t.from,o=t.to,i=t.text,a=t.rules,s=t.plugin,u=n.view;if(u.composing)return!1;var c=u.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(e=c.nodeBefore||c.nodeAfter)||void 0===e?void 0:e.marks.find((function(t){return t.type.spec.code}))))return!1;var l=!1,f=Ua(c)+i;return a.forEach((function(t){if(!l){var e=Ya(f,t.find);if(e){var a=u.state.tr,c=Ma({state:u.state,transaction:a}),d={from:r-(e[0].length-i.length),to:o},h=new La({editor:n,state:c}),p=h.commands,m=h.chain,v=h.can;null!==t.handler({state:c,range:d,match:e,commands:p,chain:m,can:v})&&a.steps.length&&(a.setMeta(s,{transform:a,from:r,to:o,text:i}),u.dispatch(a),l=!0)}}})),l}function Xa(t){var e=t.editor,n=t.rules,r=new Ye({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(r);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,o,i,a){return Za({editor:e,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:function(t){return setTimeout((function(){var o=t.state.selection.$cursor;o&&Za({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})})),!1}},handleKeyDown:function(t,o){if("Enter"!==o.key)return!1;var i=t.state.selection.$cursor;return!!i&&Za({editor:e,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}var Qa=Ca((function t(e){Sa(this,t),this.find=e.find,this.handler=e.handler})),ts=function(t,e,n){if(Ga(e))return wa(t.matchAll(e));var r=e(t,n);return r?r.map((function(e){var n=[e.text];return n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]};function es(t){var e=t.editor,n=t.rules,r=null,o=!1,i=!1,a=new ClipboardEvent("paste"),s=new DragEvent("drop"),u=n.map((function(t){return new Ye({view:function(t){var e=function(e){var n;r=(null===(n=t.dom.parentElement)||void 0===n?void 0:n.contains(e.target))?t.dom.parentElement:null};return window.addEventListener("dragstart",e),{destroy:function(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:function(t,e){return i=r===t.dom.parentElement,s=e,!1},paste:function(t,e){var n,r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return a=e,o=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:function(n,r,u){var c=n[0],l="paste"===c.getMeta("uiEvent")&&!o,f="drop"===c.getMeta("uiEvent")&&!i;if(l||f){var d=r.doc.content.findDiffStart(u.doc.content),h=r.doc.content.findDiffEnd(u.doc.content);if("number"===typeof d&&h&&d!==h.b){var p=u.tr,m=Ma({state:u,transaction:p}),v=function(t){var e=t.editor,n=t.state,r=t.from,o=t.to,i=t.rule,a=t.pasteEvent,s=t.dropEvent,u=new La({editor:e,state:n}),c=u.commands,l=u.chain,f=u.can,d=[];return n.doc.nodesBetween(r,o,(function(t,e){if(t.isTextblock&&!t.type.spec.code){var u=Math.max(r,e),h=Math.min(o,e+t.content.size),p=t.textBetween(u-e,h-e,void 0,"\ufffc");ts(p,i.find,a).forEach((function(t){if(void 0!==t.index){var e=u+t.index+1,r=e+t[0].length,o={from:n.tr.mapping.map(e),to:n.tr.mapping.map(r)},h=i.handler({state:n,range:o,match:t,commands:c,chain:l,can:f,pasteEvent:a,dropEvent:s});d.push(h)}}))}})),d.every((function(t){return null!==t}))}({editor:e,state:m,from:Math.max(d-1,0),to:h.b-1,rule:t,pasteEvent:a,dropEvent:s});if(v&&p.steps.length)return s=new DragEvent("drop"),a=new ClipboardEvent("paste"),p}}}})}));return u}var ns=function(){function t(e,n){var r=this;Sa(this,t),this.splittableMarks=[],this.editor=n,this.extensions=t.resolve(e),this.schema=qa(this.extensions,n),this.extensions.forEach((function(t){var e;r.editor.extensionStorage[t.name]=t.storage;var n={name:t.name,options:t.options,storage:t.storage,editor:r.editor,type:Wa(t.name,r.schema)};"mark"===t.type&&((null===(e=Ha(Fa(t,"keepOnSplit",n)))||void 0===e||e)&&r.splittableMarks.push(t.name));var o=Fa(t,"onBeforeCreate",n);o&&r.editor.on("beforeCreate",o);var i=Fa(t,"onCreate",n);i&&r.editor.on("create",i);var a=Fa(t,"onUpdate",n);a&&r.editor.on("update",a);var s=Fa(t,"onSelectionUpdate",n);s&&r.editor.on("selectionUpdate",s);var u=Fa(t,"onTransaction",n);u&&r.editor.on("transaction",u);var c=Fa(t,"onFocus",n);c&&r.editor.on("focus",c);var l=Fa(t,"onBlur",n);l&&r.editor.on("blur",l);var f=Fa(t,"onDestroy",n);f&&r.editor.on("destroy",f)}))}return Ca(t,[{key:"commands",get:function(){var t=this;return this.extensions.reduce((function(e,n){var r=Fa(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:t.editor,type:Wa(n.name,t.schema)});return r?Aa(Aa({},e),r()):e}),{})}},{key:"plugins",get:function(){var e=this,n=this.editor,r=t.sort(wa(this.extensions).reverse()),o=[],i=[],a=r.map((function(t){var r={name:t.name,options:t.options,storage:t.storage,editor:n,type:Wa(t.name,e.schema)},a=[],s=Fa(t,"addKeyboardShortcuts",r),u={};if("mark"===t.type&&t.config.exitable&&(u.ArrowRight=function(){return Xs.handleExit({editor:n,mark:t})}),s){var c=Object.fromEntries(Object.entries(s()).map((function(t){var e=ka(t,2),r=e[0],o=e[1];return[r,function(){return o({editor:n})}]})));u=Aa(Aa({},u),c)}var l=function(t){return new Ye({props:{handleKeyDown:Bi(t)}})}(u);a.push(l);var f=Fa(t,"addInputRules",r);Ka(t,n.options.enableInputRules)&&f&&o.push.apply(o,wa(f()));var d=Fa(t,"addPasteRules",r);Ka(t,n.options.enablePasteRules)&&d&&i.push.apply(i,wa(d()));var h=Fa(t,"addProseMirrorPlugins",r);if(h){var p=h();a.push.apply(a,wa(p))}return a})).flat();return[Xa({editor:n,rules:o})].concat(wa(es({editor:n,rules:i})),wa(a))}},{key:"attributes",get:function(){return _a(this.extensions)}},{key:"nodeViews",get:function(){var t=this,e=this.editor,n=Na(this.extensions).nodeExtensions;return Object.fromEntries(n.filter((function(t){return!!Fa(t,"addNodeView")})).map((function(n){var r=t.attributes.filter((function(t){return t.type===n.name})),o={name:n.name,options:n.options,storage:n.storage,editor:e,type:Ba(n.name,t.schema)},i=Fa(n,"addNodeView",o);if(!i)return[];return[n.name,function(t,o,a,s){var u=Ra(t,r);return i()({editor:e,node:t,getPos:a,decorations:s,HTMLAttributes:u,extension:n})}]})))}}],[{key:"resolve",value:function(e){var n,r,o=t.sort(t.flatten(e)),i=(n=o.map((function(t){return t.name})),r=n.filter((function(t,e){return n.indexOf(t)!==e})),wa(new Set(r)));return i.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(i.map((function(t){return"'".concat(t,"'")})).join(", "),"]. This can lead to issues.")),o}},{key:"flatten",value:function(t){var e=this;return t.map((function(t){var n=Fa(t,"addExtensions",{name:t.name,options:t.options,storage:t.storage});return n?[t].concat(wa(e.flatten(n()))):t})).flat(10)}},{key:"sort",value:function(t){return t.sort((function(t,e){var n=Fa(t,"priority")||100,r=Fa(e,"priority")||100;return n>r?-1:n<r?1:0}))}}]),t}();function rs(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function is(t,e){var n=Aa({},t);return rs(t)&&rs(e)&&Object.keys(e).forEach((function(r){rs(e[r])&&r in t?n[r]=is(t[r],e[r]):Object.assign(n,ja({},r,e[r]))})),n}var as=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sa(this,t),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Aa(Aa({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ha(Fa(this,"addOptions",{name:this.name}))),this.storage=Ha(Fa(this,"addStorage",{name:this.name,options:this.options}))||{}}return Ca(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=is(this.options,t),e.storage=Ha(Fa(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Ha(Fa(n,"addOptions",{name:n.name})),n.storage=Ha(Fa(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}]),t}();function ss(t,e,n){var r=e.from,o=e.to,i=n||{},a=i.blockSeparator,s=void 0===a?"\n\n":a,u=i.textSerializers,c=void 0===u?{}:u,l="",f=!0;return t.nodesBetween(r,o,(function(t,n,i,a){var u,d=null===c||void 0===c?void 0:c[t.type.name];d?(t.isBlock&&!f&&(l+=s,f=!0),i&&(l+=d({node:t,pos:n,parent:i,index:a,range:e}))):t.isText?(l+=null===(u=null===t||void 0===t?void 0:t.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,o-n),f=!1):t.isBlock&&!f&&(l+=s,f=!0)})),l}function us(t){return Object.fromEntries(Object.entries(t.nodes).filter((function(t){return ka(t,2)[1].spec.toText})).map((function(t){var e=ka(t,2);return[e[0],e[1].spec.toText]})))}var cs=as.create({name:"clipboardTextSerializer",addProseMirrorPlugins:function(){var t=this;return[new Ye({key:new Qe("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var e=t.editor,n=e.state,r=e.schema,o=n.doc,i=n.selection.ranges,a=Math.min.apply(Math,wa(i.map((function(t){return t.$from.pos})))),s=Math.max.apply(Math,wa(i.map((function(t){return t.$to.pos}))));return ss(o,{from:a,to:s},{textSerializers:us(r)})}}})]}});function ls(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(e);return!r.length||r.every((function(r){return n.strict?e[r]===t[r]:Ga(e[r])?e[r].test(t[r]):e[r]===t[r]}))}function fs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.find((function(t){return t.type===e&&ls(t.attrs,n)}))}function ds(t,e){return!!fs(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function hs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e){var r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&0!==r.offset&&(r=t.parent.childBefore(t.parentOffset)),r.node){var o=fs(wa(r.node.marks),e,n);if(o){var i=r.index,a=t.start()+r.offset,s=i+1,u=a+r.node.nodeSize;for(fs(wa(r.node.marks),e,n);i>0&&o.isInSet(t.parent.child(i-1).marks);)i-=1,a-=t.parent.child(i).nodeSize;for(;s<t.parent.childCount&&ds(wa(t.parent.child(s).marks),e,n);)u+=t.parent.child(s).nodeSize,s+=1;return{from:a,to:u}}}}}function ps(t,e){if("string"===typeof t){if(!e.marks[t])throw Error("There is no mark type named '".concat(t,"'. Maybe you forgot to add the extension?"));return e.marks[t]}return t}function ms(t){return t instanceof Ne}function vs(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(t,e),n)}function ys(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return null;var n=Me.atStart(t),r=Me.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return r;var o=n.from,i=r.to;return"all"===e?Ne.create(t,vs(0,o,i),vs(t.content.size,o,i)):Ne.create(t,vs(e,o,i),vs(e,o,i))}function gs(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var bs=function t(e){for(var n=e.childNodes,r=n.length-1;r>=0;r-=1){var o=n[r];3===o.nodeType&&o.nodeValue&&!/\S/.test(o.nodeValue)?e.removeChild(o):1===o.nodeType&&t(o)}return e};function ws(t){var e="<body>".concat(t,"</body>"),n=(new window.DOMParser).parseFromString(e,"text/html").body;return bs(n),bs(n)}function ks(t,e,n){if(n=Aa({slice:!0,parseOptions:{}},n),"object"===ba(t)&&null!==t)try{return Array.isArray(t)&&t.length>0?b.fromArray(t.map((function(t){return e.nodeFromJSON(t)}))):e.nodeFromJSON(t)}catch(o){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),ks("",e,n)}if("string"===typeof t){var r=lt.fromSchema(e);return n.slice?r.parseSlice(ws(t),n.parseOptions).content:r.parse(ws(t),n.parseOptions)}return ks("",e,n)}function xs(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function Es(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.selection,o=r.from,i=r.to,a=r.empty,s=e?Ba(e,t.schema):null,u=[];t.doc.nodesBetween(o,i,(function(t,e){if(!t.isText){var n=Math.max(o,e),r=Math.min(i,e+t.nodeSize);u.push({node:t,from:n,to:r})}}));var c=i-o,l=u.filter((function(t){return!s||s.name===t.node.type.name})).filter((function(t){return ls(t.node.attrs,n,{strict:!1})}));return a?!!l.length:l.reduce((function(t,e){return t+e.to-e.from}),0)>=c}function Ss(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Ds(t,e){var n="string"===typeof e?[e]:e;return Object.keys(t).reduce((function(e,r){return n.includes(r)||(e[r]=t[r]),e}),{})}function Cs(t,e){return ks(t,e,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}})}function Os(t,e){var n=ps(e,t.schema),r=t.selection,o=r.from,i=r.to,a=r.empty,s=[];a?(t.storedMarks&&s.push.apply(s,wa(t.storedMarks)),s.push.apply(s,wa(t.selection.$head.marks()))):t.doc.nodesBetween(o,i,(function(t){s.push.apply(s,wa(t.marks))}));var u=s.find((function(t){return t.type.name===n.name}));return u?Aa({},u.attrs):{}}function As(t){return function(e){return function(t,e){for(var n=t.depth;n>0;n-=1){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}(e.$from,t)}}function js(t,e){var n=wt.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function Ts(t,e){return ss(t,{from:0,to:t.content.size},e)}function Ms(t,e){var n=Ss("string"===typeof e?e:e.name,t.schema);return"node"===n?function(t,e){var n=Ba(e,t.schema),r=t.selection,o=r.from,i=r.to,a=[];t.doc.nodesBetween(o,i,(function(t){a.push(t)}));var s=a.reverse().find((function(t){return t.type.name===n.name}));return s?Aa({},s.attrs):{}}(t,e):"mark"===n?Os(t,e):{}}function Ls(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return t.filter((function(t){var r=e(t);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(t);return 1===e.length?e:e.filter((function(t,n){var r=e.filter((function(t,e){return e!==n}));return!r.some((function(e){return t.oldRange.from>=e.oldRange.from&&t.oldRange.to<=e.oldRange.to&&t.newRange.from>=e.newRange.from&&t.newRange.to<=e.newRange.to}))}))}function Ps(t,e,n){var r=[];return t===e?n.resolve(t).marks().forEach((function(e){var o=hs(n.resolve(t-1),e.type);o&&r.push(Aa({mark:e},o))})):n.nodesBetween(t,e,(function(t,e){t&&void 0!==t.nodeSize&&r.push.apply(r,wa(t.marks.map((function(n){return{from:e,to:e+t.nodeSize,mark:n}}))))})),r}function Fs(t,e,n){return Object.fromEntries(Object.entries(n).filter((function(n){var r=ka(n,1)[0],o=t.find((function(t){return t.type===e&&t.name===r}));return!!o&&o.attribute.keepOnSplit})))}function Ns(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.selection,o=r.empty,i=r.ranges,a=e?ps(e,t.schema):null;if(o)return!!(t.storedMarks||t.selection.$from.marks()).filter((function(t){return!a||a.name===t.type.name})).find((function(t){return ls(t.attrs,n,{strict:!1})}));var s=0,u=[];if(i.forEach((function(e){var n=e.$from,r=e.$to,o=n.pos,i=r.pos;t.doc.nodesBetween(o,i,(function(t,e){if(t.isText||t.marks.length){var n=Math.max(o,e),r=Math.min(i,e+t.nodeSize);s+=r-n,u.push.apply(u,wa(t.marks.map((function(t){return{mark:t,from:n,to:r}}))))}}))})),0===s)return!1;var c=u.filter((function(t){return!a||a.name===t.mark.type.name})).filter((function(t){return ls(t.mark.attrs,n,{strict:!1})})).reduce((function(t,e){return t+e.to-e.from}),0),l=u.filter((function(t){return!a||t.mark.type!==a&&t.mark.type.excludes(a)})).reduce((function(t,e){return t+e.to-e.from}),0);return(c>0?c+l:c)>=s}function _s(t,e){var n=Na(e).nodeExtensions.find((function(e){return e.name===t}));if(!n)return!1;var r=Ha(Fa(n,"group",{name:n.name,options:n.options,storage:n.storage}));return"string"===typeof r&&r.split(" ").includes("list")}function Bs(t,e){var n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){var r=n.filter((function(t){return null===e||void 0===e?void 0:e.includes(t.type.name)}));t.tr.ensureMarks(r)}}var Is=function(t,e){var n=As((function(t){return t.type===e}))(t.selection);if(!n)return!0;var r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;var o=t.doc.nodeAt(r);return n.node.type!==(null===o||void 0===o?void 0:o.type)||!ee(t.doc,n.pos)||(t.join(n.pos),!0)},Rs=function(t,e){var n=As((function(t){return t.type===e}))(t.selection);if(!n)return!0;var r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var o=t.doc.nodeAt(r);return n.node.type!==(null===o||void 0===o?void 0:o.type)||!ee(t.doc,r)||(t.join(r),!0)},zs=Object.freeze({__proto__:null,blur:function(){return function(t){var e=t.editor,n=t.view;return requestAnimationFrame((function(){var t;e.isDestroyed||(n.dom.blur(),null===(t=null===window||void 0===window?void 0:window.getSelection())||void 0===t||t.removeAllRanges())})),!0}},clearContent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return e.commands.setContent("",t)}},clearNodes:function(){return function(t){var e=t.state,n=t.tr,r=t.dispatch,o=n.selection.ranges;return!r||(o.forEach((function(t){var r=t.$from,o=t.$to;e.doc.nodesBetween(r.pos,o.pos,(function(t,e){if(!t.type.isText){var r=n.doc,o=n.mapping,i=r.resolve(o.map(e)),a=r.resolve(o.map(e+t.nodeSize)),s=i.blockRange(a);if(s){var u=Zt(s);if(t.type.isTextblock){var c=i.parent.contentMatchAt(i.index()).defaultType;n.setNodeMarkup(s.start,c)}(u||0===u)&&n.lift(s,u)}}}))})),!0)}},command:function(t){return function(e){return t(e)}},createParagraphNear:function(){return function(t){var e=t.state,n=t.dispatch;return Zi(e,n)}},cut:function(t,e){return function(n){var r=n.editor,o=n.tr,i=r.state.doc.slice(t.from,t.to);o.deleteRange(t.from,t.to);var a=o.mapping.map(e);return o.insert(a,i.content),o.setSelection(new Ne(o.doc.resolve(a-1))),!0}},deleteCurrentNode:function(){return function(t){var e=t.tr,n=t.dispatch,r=e.selection.$anchor.node();if(r.content.size>0)return!1;for(var o=e.selection.$anchor,i=o.depth;i>0;i-=1){if(o.node(i).type===r.type){if(n){var a=o.before(i),s=o.after(i);e.delete(a,s).scrollIntoView()}return!0}}return!1}},deleteNode:function(t){return function(e){for(var n=e.tr,r=e.state,o=e.dispatch,i=Ba(t,r.schema),a=n.selection.$anchor,s=a.depth;s>0;s-=1){if(a.node(s).type===i){if(o){var u=a.before(s),c=a.after(s);n.delete(u,c).scrollIntoView()}return!0}}return!1}},deleteRange:function(t){return function(e){var n=e.tr,r=e.dispatch,o=t.from,i=t.to;return r&&n.delete(o,i),!0}},deleteSelection:function(){return function(t){var e=t.state,n=t.dispatch;return Ii(e,n)}},enter:function(){return function(t){return t.commands.keyboardShortcut("Enter")}},exitCode:function(){return function(t){var e=t.state,n=t.dispatch;return Yi(e,n)}},extendMarkRange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=ps(t,o.schema),s=r.doc,u=r.selection,c=u.$from,l=u.from,f=u.to;if(i){var d=hs(c,a,e);if(d&&d.from<=l&&d.to>=f){var h=Ne.create(s,d.from,d.to);r.setSelection(h)}}return!0}},first:function(t){return function(e){for(var n="function"===typeof t?t(e):t,r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1}},focus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.editor,o=n.view,i=n.tr,a=n.dispatch;e=Aa({scrollIntoView:!0},e);var s=function(){gs()&&o.dom.focus(),requestAnimationFrame((function(){r.isDestroyed||(o.focus(),(null===e||void 0===e?void 0:e.scrollIntoView)&&r.commands.scrollIntoView())}))};if(o.hasFocus()&&null===t||!1===t)return!0;if(a&&null===t&&!ms(r.state.selection))return s(),!0;var u=ys(i.doc,t)||r.state.selection,c=r.state.selection.eq(u);return a&&(c||i.setSelection(u),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0}},forEach:function(t,e){return function(n){return t.every((function(t,r){return e(t,Aa(Aa({},n),{},{index:r}))}))}},insertContent:function(t,e){return function(n){var r=n.tr;return n.commands.insertContentAt({from:r.selection.from,to:r.selection.to},t,e)}},insertContentAt:function(t,e,n){return function(r){var o=r.tr,i=r.dispatch,a=r.editor;if(i){n=Aa({parseOptions:{},updateSelection:!0},n);var s=ks(e,a.schema,{parseOptions:Aa({preserveWhitespace:"full"},n.parseOptions)});if("<>"===s.toString())return!0;var u="number"===typeof t?{from:t,to:t}:{from:t.from,to:t.to},c=u.from,l=u.to,f=!0,d=!0;if((s.toString().startsWith("<")?s:[s]).forEach((function(t){t.check(),f=!!f&&(t.isText&&0===t.marks.length),d=!!d&&t.isBlock})),c===l&&d){var h=o.doc.resolve(c).parent;h.isTextblock&&!h.type.spec.code&&!h.childCount&&(c-=1,l+=1)}f?Array.isArray(e)?o.insertText(e.map((function(t){return t.text||""})).join(""),c,l):"object"===ba(e)&&e&&e.text?o.insertText(e.text,c,l):o.insertText(e,c,l):o.replaceWith(c,l,s),n.updateSelection&&function(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o=t.steps[r];if(o instanceof Ut||o instanceof Gt){var i=t.mapping.maps[r],a=0;i.forEach((function(t,e,n,r){0===a&&(a=r)})),t.setSelection(Me.near(t.doc.resolve(a),n))}}}(o,o.steps.length-1,-1)}return!0}},joinUp:function(){return function(t){return function(t,e){var n,r=t.selection,o=r instanceof Be;if(o){if(r.node.isTextblock||!ee(t.doc,r.from))return!1;n=r.from}else if(null==(n=re(t.doc,r.from,-1)))return!1;if(e){var i=t.tr.join(n);o&&i.setSelection(Be.create(i.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0}(t.state,t.dispatch)}},joinDown:function(){return function(t){return function(t,e){var n,r=t.selection;if(r instanceof Be){if(r.node.isTextblock||!ee(t.doc,r.to))return!1;n=r.to}else if(null==(n=re(t.doc,r.to,1)))return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0}(t.state,t.dispatch)}},joinBackward:function(){return function(t){var e=t.state,n=t.dispatch;return zi(e,n)}},joinForward:function(){return function(t){var e=t.state,n=t.dispatch;return Wi(e,n)}},joinItemBackward:function(){return function(t){var e=t.tr,n=t.state,r=t.dispatch;try{var o=re(n.doc,n.selection.$from.pos,-1);return null!==o&&void 0!==o&&(e.join(o,2),r&&r(e),!0)}catch(i){return!1}}},joinItemForward:function(){return function(t){var e=t.state,n=t.dispatch,r=t.tr;try{var o=re(e.doc,e.selection.$from.pos,1);return null!==o&&void 0!==o&&(r.join(o,2),n&&n(r),!0)}catch(i){return!1}}},keyboardShortcut:function(t){return function(e){var n=e.editor,r=e.view,o=e.tr,i=e.dispatch,a=function(t){var e,n,r,o,i=t.split(/-(?!$)/),a=i[i.length-1];"Space"===a&&(a=" ");for(var s=0;s<i.length-1;s+=1){var u=i[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: ".concat(u));gs()||xs()?o=!0:n=!0}}return e&&(a="Alt-".concat(a)),n&&(a="Ctrl-".concat(a)),o&&(a="Meta-".concat(a)),r&&(a="Shift-".concat(a)),a}(t).split(/-(?!$)/),s=a.find((function(t){return!["Alt","Ctrl","Meta","Shift"].includes(t)})),u=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction((function(){r.someProp("handleKeyDown",(function(t){return t(r,u)}))}));return null===c||void 0===c||c.steps.forEach((function(t){var e=t.map(o.mapping);e&&i&&o.maybeStep(e)})),!0}},lift:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return!!Es(r,Ba(t,r.schema),e)&&function(t,e){var n=t.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&Zt(i);return null!=a&&(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}(r,o)}},liftEmptyBlock:function(){return function(t){var e=t.state,n=t.dispatch;return Xi(e,n)}},liftListItem:function(t){return function(e){var n=e.state,r=e.dispatch;return ha(Ba(t,n.schema))(n,r)}},newlineInCode:function(){return function(t){var e=t.state,n=t.dispatch;return Gi(e,n)}},resetAttributes:function(t,e){return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,u=Ss("string"===typeof t?t:t.name,o.schema);return!!u&&("node"===u&&(a=Ba(t,o.schema)),"mark"===u&&(s=ps(t,o.schema)),i&&r.selection.ranges.forEach((function(t){o.doc.nodesBetween(t.$from.pos,t.$to.pos,(function(t,n){a&&a===t.type&&r.setNodeMarkup(n,void 0,Ds(t.attrs,e)),s&&t.marks.length&&t.marks.forEach((function(o){s===o.type&&r.addMark(n,n+t.nodeSize,s.create(Ds(o.attrs,e)))}))}))})),!0)}},scrollIntoView:function(){return function(t){var e=t.tr;return t.dispatch&&e.scrollIntoView(),!0}},selectAll:function(){return function(t){var e=t.tr;return t.commands.setTextSelection({from:0,to:e.doc.content.size})}},selectNodeBackward:function(){return function(t){var e=t.state,n=t.dispatch;return Vi(e,n)}},selectNodeForward:function(){return function(t){var e=t.state,n=t.dispatch;return Ki(e,n)}},selectParentNode:function(){return function(t){return function(t,e){var n,r=t.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),e&&e(t.tr.setSelection(Be.create(t.doc,n))),!0)}(t.state,t.dispatch)}},selectTextblockEnd:function(){return function(t){var e=t.state,n=t.dispatch;return oa(e,n)}},selectTextblockStart:function(){return function(t){var e=t.state,n=t.dispatch;return ra(e,n)}},setContent:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.tr,i=r.editor,a=r.dispatch,s=o.doc,u=Cs(t,i.schema,n);return a&&o.replaceWith(0,s.content.size,u).setMeta("preventUpdate",!e),!0}},setMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=r.selection,s=a.empty,u=a.ranges,c=ps(t,o.schema);if(i)if(s){var l=Os(o,c);r.addStoredMark(c.create(Aa(Aa({},l),e)))}else u.forEach((function(t){var n=t.$from.pos,i=t.$to.pos;o.doc.nodesBetween(n,i,(function(t,o){var a=Math.max(o,n),s=Math.min(o+t.nodeSize,i);t.marks.find((function(t){return t.type===c}))?t.marks.forEach((function(t){c===t.type&&r.addMark(a,s,c.create(Aa(Aa({},t.attrs),e)))})):r.addMark(a,s,c.create(e))}))}));return function(t,e,n){var r,o=e.selection,i=null;if(ms(o)&&(i=o.$cursor),i){var a=null!==(r=t.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(a)||!a.some((function(t){return t.type.excludes(n)}))}return o.ranges.some((function(e){var r=e.$from,o=e.$to,i=0===r.depth&&t.doc.inlineContent&&t.doc.type.allowsMarkType(n);return t.doc.nodesBetween(r.pos,o.pos,(function(t,e,r){if(i)return!1;if(t.isInline){var o=!r||r.type.allowsMarkType(n),a=!!n.isInSet(t.marks)||!t.marks.some((function(t){return t.type.excludes(n)}));i=o&&a}return!i})),i}))}(o,r,c)}},setMeta:function(t,e){return function(n){return n.tr.setMeta(t,e),!0}},setNode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch,i=n.chain,a=Ba(t,r.schema);return a.isTextblock?i().command((function(t){var n=t.commands;return!!ia(a,e)(r)||n.clearNodes()})).command((function(t){var n=t.state;return ia(a,e)(n,o)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:function(t){return function(e){var n=e.tr;if(e.dispatch){var r=n.doc,o=vs(t,0,r.content.size),i=Be.create(r,o);n.setSelection(i)}return!0}},setTextSelection:function(t){return function(e){var n=e.tr;if(e.dispatch){var r=n.doc,o="number"===typeof t?{from:t,to:t}:t,i=o.from,a=o.to,s=Ne.atStart(r).from,u=Ne.atEnd(r).to,c=vs(i,s,u),l=vs(a,s,u),f=Ne.create(r,c,l);n.setSelection(f)}return!0}},sinkListItem:function(t){return function(e){var n,r=e.state,o=e.dispatch,i=Ba(t,r.schema);return(n=i,function(t,e){var r=t.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(t){return t.childCount>0&&t.firstChild.type==n}));if(!a)return!1;var s=a.startIndex;if(0==s)return!1;var u=a.parent,c=u.child(s-1);if(c.type!=n)return!1;if(e){var l=c.lastChild&&c.lastChild.type==u.type,f=b.from(l?n.create():null),d=new D(b.from(n.create(null,b.from(u.type.create(null,f)))),l?3:1,0),h=a.start,p=a.end;e(t.tr.step(new Gt(h-(l?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0})(r,o)}},splitBlock:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).keepMarks,e=void 0===t||t;return function(t){var n=t.tr,r=t.state,o=t.dispatch,i=t.editor,a=n.selection,s=n.doc,u=a.$from,c=a.$to,l=Fs(i.extensionManager.attributes,u.node().type.name,u.node().attrs);if(a instanceof Be&&a.node.isBlock)return!(!u.parentOffset||!te(s,u.pos))&&(o&&(e&&Bs(r,i.extensionManager.splittableMarks),n.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;if(o){var f=c.parentOffset===c.parent.content.size;a instanceof Ne&&n.deleteSelection();var d=0===u.depth?void 0:function(t){for(var e=0;e<t.edgeCount;e+=1){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(u.node(-1).contentMatchAt(u.indexAfter(-1))),h=f&&d?[{type:d,attrs:l}]:void 0,p=te(n.doc,n.mapping.map(u.pos),1,h);if(h||p||!te(n.doc,n.mapping.map(u.pos),1,d?[{type:d}]:void 0)||(p=!0,h=d?[{type:d,attrs:l}]:void 0),p&&(n.split(n.mapping.map(u.pos),1,h),d&&!f&&!u.parentOffset&&u.parent.type!==d)){var m=n.mapping.map(u.before()),v=n.doc.resolve(m);u.node(-1).canReplaceWith(v.index(),v.index()+1,d)&&n.setNodeMarkup(n.mapping.map(u.before()),d)}e&&Bs(r,i.extensionManager.splittableMarks),n.scrollIntoView()}return!0}},splitListItem:function(t){return function(e){var n,r=e.tr,o=e.state,i=e.dispatch,a=e.editor,s=Ba(t,o.schema),u=o.selection,c=u.$from,l=u.$to,f=o.selection.node;if(f&&f.isBlock||c.depth<2||!c.sameParent(l))return!1;var d=c.node(-1);if(d.type!==s)return!1;var h=a.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==s||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){for(var p=b.empty,m=c.index(-1)?1:c.index(-2)?2:3,v=c.depth-m;v>=c.depth-3;v-=1)p=b.from(c.node(v).copy(p));var y=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,g=Fs(h,c.node().type.name,c.node().attrs),w=(null===(n=s.contentMatch.defaultType)||void 0===n?void 0:n.createAndFill(g))||void 0;p=p.append(b.from(s.createAndFill(null,w)||void 0));var k=c.before(c.depth-(m-1));r.replace(k,c.after(-y),new D(p,4-m,0));var x=-1;r.doc.nodesBetween(k,r.doc.content.size,(function(t,e){if(x>-1)return!1;t.isTextblock&&0===t.content.size&&(x=e+1)})),x>-1&&r.setSelection(Ne.near(r.doc.resolve(x))),r.scrollIntoView()}return!0}var E=l.pos===c.end()?d.contentMatchAt(0).defaultType:null,S=Fs(h,d.type.name,d.attrs),C=Fs(h,c.node().type.name,c.node().attrs);r.delete(c.pos,l.pos);var O=E?[{type:s,attrs:S},{type:E,attrs:C}]:[{type:s,attrs:S}];if(!te(r.doc,c.pos,2))return!1;if(i){var A=o.selection,j=o.storedMarks,T=a.extensionManager.splittableMarks,M=j||A.$to.parentOffset&&A.$from.marks();if(r.split(c.pos,2,O).scrollIntoView(),!M||!i)return!0;var L=M.filter((function(t){return T.includes(t.type.name)}));r.ensureMarks(L)}return!0}},toggleList:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(o){var i=o.editor,a=o.tr,s=o.state,u=o.dispatch,c=o.chain,l=o.commands,f=o.can,d=i.extensionManager,h=d.extensions,p=d.splittableMarks,m=Ba(t,s.schema),v=Ba(e,s.schema),y=s.selection,g=s.storedMarks,b=y.$from,w=y.$to,k=b.blockRange(w),x=g||y.$to.parentOffset&&y.$from.marks();if(!k)return!1;var E=As((function(t){return _s(t.type.name,h)}))(y);if(k.depth>=1&&E&&k.depth-E.depth<=1){if(E.node.type===m)return l.liftListItem(v);if(_s(E.node.type.name,h)&&m.validContent(E.node.content)&&u)return c().command((function(){return a.setNodeMarkup(E.pos,m),!0})).command((function(){return Is(a,m)})).command((function(){return Rs(a,m)})).run()}return n&&x&&u?c().command((function(){var t=f().wrapInList(m,r),e=x.filter((function(t){return p.includes(t.type.name)}));return a.ensureMarks(e),!!t||l.clearNodes()})).wrapInList(m,r).command((function(){return Is(a,m)})).command((function(){return Rs(a,m)})).run():c().command((function(){return!!f().wrapInList(m,r)||l.clearNodes()})).wrapInList(m,r).command((function(){return Is(a,m)})).command((function(){return Rs(a,m)})).run()}},toggleMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=n.extendEmptyMarkRange,s=void 0!==a&&a,u=ps(t,o.schema);return Ns(o,u,e)?i.unsetMark(u,{extendEmptyMarkRange:s}):i.setMark(u,e)}},toggleNode:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=Ba(t,o.schema),s=Ba(e,o.schema);return Es(o,a,n)?i.setNode(s):i.setNode(a,n)}},toggleWrap:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.commands,i=Ba(t,r.schema);return Es(r,i,e)?o.lift(i):o.wrapIn(i,e)}},undoInputRule:function(){return function(t){for(var e=t.state,n=t.dispatch,r=e.plugins,o=0;o<r.length;o+=1){var i=r[o],a=void 0;if(i.spec.isInputRules&&(a=i.getState(e))){if(n){for(var s=e.tr,u=a.transform,c=u.steps.length-1;c>=0;c-=1)s.step(u.steps[c].invert(u.docs[c]));if(a.text){var l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1}},unsetAllMarks:function(){return function(t){var e=t.tr,n=t.dispatch,r=e.selection,o=r.empty,i=r.ranges;return o||n&&i.forEach((function(t){e.removeMark(t.$from.pos,t.$to.pos)})),!0}},unsetMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=e.extendEmptyMarkRange,u=void 0!==s&&s,c=o.selection,l=ps(t,i.schema),f=c.$from,d=c.empty,h=c.ranges;if(!a)return!0;if(d&&u){var p=c.from,m=c.to,v=null===(r=f.marks().find((function(t){return t.type===l})))||void 0===r?void 0:r.attrs,y=hs(f,l,v);y&&(p=y.from,m=y.to),o.removeMark(p,m,l)}else h.forEach((function(t){o.removeMark(t.$from.pos,t.$to.pos,l)}));return o.removeStoredMark(l),!0}},updateAttributes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,u=Ss("string"===typeof t?t:t.name,o.schema);return!!u&&("node"===u&&(a=Ba(t,o.schema)),"mark"===u&&(s=ps(t,o.schema)),i&&r.selection.ranges.forEach((function(t){var n=t.$from.pos,i=t.$to.pos;o.doc.nodesBetween(n,i,(function(t,o){a&&a===t.type&&r.setNodeMarkup(o,void 0,Aa(Aa({},t.attrs),e)),s&&t.marks.length&&t.marks.forEach((function(a){if(s===a.type){var u=Math.max(o,n),c=Math.min(o+t.nodeSize,i);r.addMark(u,c,s.create(Aa(Aa({},a.attrs),e)))}}))}))})),!0)}},wrapIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),u=s&&Xt(s,t,e);return!!u&&(r&&r(n.tr.wrap(s,u).scrollIntoView()),!0)}}(Ba(t,r.schema),e)(r,o)}},wrapInList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return da(Ba(t,r.schema),e)(r,o)}}}),Hs=as.create({name:"commands",addCommands:function(){return Aa({},zs)}}),Vs=as.create({name:"editable",addProseMirrorPlugins:function(){var t=this;return[new Ye({key:new Qe("editable"),props:{editable:function(){return t.editor.options.editable}}})]}}),$s=as.create({name:"focusEvents",addProseMirrorPlugins:function(){var t=this.editor;return[new Ye({key:new Qe("focusEvents"),props:{handleDOMEvents:{focus:function(e,n){t.isFocused=!0;var r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:function(e,n){t.isFocused=!1;var r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),qs=as.create({name:"keymap",addKeyboardShortcuts:function(){var t=this,e=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.undoInputRule()},function(){return e.command((function(t){var n=t.tr,r=n.selection,o=n.doc,i=r.empty,a=r.$anchor,s=a.pos,u=a.parent,c=a.parent.isTextblock?n.doc.resolve(s-1):a,l=c.parent.type.spec.isolating,f=a.pos-a.parentOffset,d=l&&1===c.parent.childCount?f===a.pos:Me.atStart(o).from===s;return!(!(i&&d&&u.type.isTextblock)||u.textContent.length)&&e.clearNodes()}))},function(){return e.deleteSelection()},function(){return e.joinBackward()},function(){return e.selectNodeBackward()}]}))},n=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.deleteSelection()},function(){return e.deleteCurrentNode()},function(){return e.joinForward()},function(){return e.selectNodeForward()}]}))},r={Enter:function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.newlineInCode()},function(){return e.createParagraphNear()},function(){return e.liftEmptyBlock()},function(){return e.splitBlock()}]}))},"Mod-Enter":function(){return t.editor.commands.exitCode()},Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:n,"Mod-Delete":n,"Mod-a":function(){return t.editor.commands.selectAll()}},o=Aa({},r),i=Aa(Aa({},r),{},{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return t.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return t.editor.commands.selectTextblockEnd()}});return gs()||xs()?i:o},addProseMirrorPlugins:function(){var t=this;return[new Ye({key:new Qe("clearDocument"),appendTransaction:function(e,n,r){if(e.some((function(t){return t.docChanged}))&&!n.doc.eq(r.doc)){var o=n.selection,i=o.empty,a=o.from,s=o.to,u=Me.atStart(n.doc).from,c=Me.atEnd(n.doc).to;if(!i&&(a===u&&s===c))if(0===r.doc.textBetween(0,r.doc.content.size," "," ").length){var l=r.tr,f=Ma({state:r,transaction:l});if(new La({editor:t.editor,state:f}).commands.clearNodes(),l.steps.length)return l}}}})]}}),Ws=as.create({name:"tabindex",addProseMirrorPlugins:function(){return[new Ye({key:new Qe("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Ks=Object.freeze({__proto__:null,ClipboardTextSerializer:cs,Commands:Hs,Editable:Vs,FocusEvents:$s,Keymap:qs,Tabindex:Ws});var Us=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Sa(this,e),(t=pa(this,e)).isFocused=!1,t.extensionStorage={},t.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:function(){return null},onCreate:function(){return null},onUpdate:function(){return null},onSelectionUpdate:function(){return null},onTransaction:function(){return null},onFocus:function(){return null},onBlur:function(){return null},onDestroy:function(){return null}},t.isCapturingTransaction=!1,t.capturedTransaction=null,t.setOptions(n),t.createExtensionManager(),t.createCommandManager(),t.createSchema(),t.on("beforeCreate",t.options.onBeforeCreate),t.emit("beforeCreate",{editor:ya(t)}),t.createView(),t.injectCSS(),t.on("create",t.options.onCreate),t.on("update",t.options.onUpdate),t.on("selectionUpdate",t.options.onSelectionUpdate),t.on("transaction",t.options.onTransaction),t.on("focus",t.options.onFocus),t.on("blur",t.options.onBlur),t.on("destroy",t.options.onDestroy),window.setTimeout((function(){t.isDestroyed||(t.commands.focus(t.options.autofocus),t.emit("create",{editor:ya(t)}))}),0),t}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ga(t,e)}(e,t),Ca(e,[{key:"storage",get:function(){return this.extensionStorage}},{key:"commands",get:function(){return this.commandManager.commands}},{key:"chain",value:function(){return this.commandManager.chain()}},{key:"can",value:function(){return this.commandManager.can()}},{key:"injectCSS",value:function(){this.options.injectCSS&&document&&(this.css=function(t,e,n){var r=document.querySelector("style[data-tiptap-style".concat(n?"-".concat(n):"","]"));if(null!==r)return r;var o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style".concat(n?"-".concat(n):""),""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=Aa(Aa({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}},{key:"setEditable",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}},{key:"isEditable",get:function(){return this.options.editable&&this.view&&this.view.editable}},{key:"state",get:function(){return this.view.state}},{key:"registerPlugin",value:function(t,e){var n=za(e)?e(t,wa(this.state.plugins)):[].concat(wa(this.state.plugins),[t]),r=this.state.reconfigure({plugins:n});this.view.updateState(r)}},{key:"unregisterPlugin",value:function(t){if(!this.isDestroyed){var e="string"===typeof t?"".concat(t,"$"):t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((function(t){return!t.key.startsWith(e)}))});this.view.updateState(n)}}},{key:"createExtensionManager",value:function(){var t=this.options.enableCoreExtensions?Object.values(Ks):[],e=[].concat(wa(t),wa(this.options.extensions)).filter((function(t){return["extension","node","mark"].includes(null===t||void 0===t?void 0:t.type)}));this.extensionManager=new ns(e,this)}},{key:"createCommandManager",value:function(){this.commandManager=new La({editor:this})}},{key:"createSchema",value:function(){this.schema=this.extensionManager.schema}},{key:"createView",value:function(){var t=Cs(this.options.content,this.schema,this.options.parseOptions),e=ys(t,this.options.autofocus);this.view=new xi(this.options.element,Aa(Aa({},this.options.editorProps),{},{dispatchTransaction:this.dispatchTransaction.bind(this),state:Ge.create({doc:t,selection:e||void 0})}));var n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}},{key:"createNodeViews",value:function(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}},{key:"prependClass",value:function(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}},{key:"captureTransaction",value:function(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;var e=this.capturedTransaction;return this.capturedTransaction=null,e}},{key:"dispatchTransaction",value:function(t){var e=this;if(!this.view.isDestroyed){if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach((function(t){var n;return null===(n=e.capturedTransaction)||void 0===n?void 0:n.step(t)})):void(this.capturedTransaction=t);var n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});var o=t.getMeta("focus"),i=t.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:t}),i&&this.emit("blur",{editor:this,event:i.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}}},{key:"getAttributes",value:function(t){return Ms(this.state,t)}},{key:"isActive",value:function(t,e){var n="string"===typeof t?t:null,r="string"===typeof t?e:t;return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return Es(t,null,n)||Ns(t,null,n);var r=Ss(e,t.schema);return"node"===r?Es(t,e,n):"mark"===r&&Ns(t,e,n)}(this.state,n,r)}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"getHTML",value:function(){return js(this.state.doc.content,this.schema)}},{key:"getText",value:function(t){var e=t||{},n=e.blockSeparator,r=void 0===n?"\n\n":n,o=e.textSerializers,i=void 0===o?{}:o;return Ts(this.state.doc,{blockSeparator:r,textSerializers:Aa(Aa({},us(this.schema)),i)})}},{key:"isEmpty",get:function(){return t=this.state.doc,n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),r=t.toJSON(),JSON.stringify(n)===JSON.stringify(r);var t,e,n,r}},{key:"getCharacterCount",value:function(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}},{key:"destroy",value:function(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}},{key:"isDestroyed",get:function(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}]),e}(Pa);function Gs(t){return new Ja({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=Ha(t.getAttributes,void 0,o);if(!1===i||null===i)return null;var a=n.tr,s=o[o.length-1],u=o[0];if(s){var c=u.search(/\S/),l=r.from+u.indexOf(s),f=l+s.length;if(Ps(r.from,r.to,n.doc).filter((function(e){return e.mark.type.excluded.find((function(n){return n===t.type&&n!==e.mark.type}))})).filter((function(t){return t.to>l})).length)return null;f<r.to&&a.delete(f,r.to),l>r.from&&a.delete(r.from+c,l);var d=r.from+c+s.length;a.addMark(r.from+c,d,t.type.create(i||{})),a.removeStoredMark(t.type)}}})}function Js(t){return new Ja({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=Ha(t.getAttributes,void 0,o)||{},a=n.tr,s=r.from,u=r.to,c=t.type.create(i);if(o[1]){var l=s+o[0].lastIndexOf(o[1]);l>u?l=u:u=l+o[1].length;var f=o[0][o[0].length-1];a.insertText(f,s+o[0].length-1),a.replaceWith(l,u,c)}else o[0]&&a.insert(s-1,t.type.create(i)).delete(a.mapping.map(s),a.mapping.map(u));a.scrollIntoView()}})}function Ys(t){return new Ja({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=n.doc.resolve(r.from),a=Ha(t.getAttributes,void 0,o)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,a)}})}function Zs(t){return new Ja({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=e.chain,a=Ha(t.getAttributes,void 0,o)||{},s=n.tr.delete(r.from,r.to),u=s.doc.resolve(r.from).blockRange(),c=u&&Xt(u,t.type,a);if(!c)return null;if(s.wrap(u,c),t.keepMarks&&t.editor){var l=n.selection,f=n.storedMarks,d=t.editor.extensionManager.splittableMarks,h=f||l.$to.parentOffset&&l.$from.marks();if(h){var p=h.filter((function(t){return d.includes(t.type.name)}));s.ensureMarks(p)}}if(t.keepAttributes){var m="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";i().updateAttributes(m,a).run()}var v=s.doc.resolve(r.from-1).nodeBefore;v&&v.type===t.type&&ee(s.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(o,v))&&s.join(r.from-1)}})}var Xs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sa(this,t),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Aa(Aa({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ha(Fa(this,"addOptions",{name:this.name}))),this.storage=Ha(Fa(this,"addStorage",{name:this.name,options:this.options}))||{}}return Ca(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=is(this.options,t),e.storage=Ha(Fa(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Ha(Fa(n,"addOptions",{name:n.name})),n.storage=Ha(Fa(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"handleExit",value:function(t){var e=t.editor,n=t.mark,r=e.state.tr,o=e.state.selection.$from;if(o.pos===o.end()){var i=o.marks();if(!!!i.find((function(t){return(null===t||void 0===t?void 0:t.type.name)===n.name})))return!1;var a=i.find((function(t){return(null===t||void 0===t?void 0:t.type.name)===n.name}));return a&&r.removeStoredMark(a),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}]),t}(),Qs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sa(this,t),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=Aa(Aa({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ha(Fa(this,"addOptions",{name:this.name}))),this.storage=Ha(Fa(this,"addStorage",{name:this.name,options:this.options}))||{}}return Ca(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=is(this.options,t),e.storage=Ha(Fa(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=Ha(Fa(n,"addOptions",{name:n.name})),n.storage=Ha(Fa(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}]),t}();function tu(t){return new Qa({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=e.pasteEvent,a=Ha(t.getAttributes,void 0,o,i);if(!1===a||null===a)return null;var s=n.tr,u=o[o.length-1],c=o[0],l=r.to;if(u){var f=c.search(/\S/),d=r.from+c.indexOf(u),h=d+u.length;if(Ps(r.from,r.to,n.doc).filter((function(e){return e.mark.type.excluded.find((function(n){return n===t.type&&n!==e.mark.type}))})).filter((function(t){return t.to>d})).length)return null;h<r.to&&s.delete(h,r.to),d>r.from&&s.delete(r.from+f,d),l=r.from+f+u.length,s.addMark(r.from+f,l,t.type.create(a||{})),s.removeStoredMark(t.type)}}})}function eu(t){return new Qa({find:t.find,handler:function(e){var n=e.match,r=e.chain,o=e.range,i=e.pasteEvent,a=Ha(t.getAttributes,void 0,n,i);if(!1===a||null===a)return null;n.input&&r().deleteRange(o).insertContentAt(o.from,{type:t.type.name,attrs:a})}})}var nu=/^\s*>\s$/,ru=Qs.create({name:"blockquote",addOptions:function(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML:function(){return[{tag:"blockquote"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["blockquote",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setBlockquote:function(){return function(e){return e.commands.wrapIn(t.name)}},toggleBlockquote:function(){return function(e){return e.commands.toggleWrap(t.name)}},unsetBlockquote:function(){return function(e){return e.commands.lift(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-b":function(){return t.editor.commands.toggleBlockquote()}}},addInputRules:function(){return[Zs({find:nu,type:this.type})]}}),ou=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,iu=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,au=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,su=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,uu=Xs.create({name:"bold",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["strong",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setBold:function(){return function(e){return e.commands.setMark(t.name)}},toggleBold:function(){return function(e){return e.commands.toggleMark(t.name)}},unsetBold:function(){return function(e){return e.commands.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-b":function(){return t.editor.commands.toggleBold()},"Mod-B":function(){return t.editor.commands.toggleBold()}}},addInputRules:function(){return[Gs({find:ou,type:this.type}),Gs({find:au,type:this.type})]},addPasteRules:function(){return[tu({find:iu,type:this.type}),tu({find:su,type:this.type})]}});function cu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return lu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lu(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fu=Qs.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["li",Ia(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts:function(){var t=this;return{Enter:function(){return t.editor.commands.splitListItem(t.name)},Tab:function(){return t.editor.commands.sinkListItem(t.name)},"Shift-Tab":function(){return t.editor.commands.liftListItem(t.name)}}}}),du=Xs.create({name:"textStyle",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"span",getAttrs:function(t){return!!t.hasAttribute("style")&&{}}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["span",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{removeEmptyTextStyle:function(){return function(e){var n=e.state,r=e.commands,o=Os(n,t.type);return!!Object.entries(o).some((function(t){return!!cu(t,2)[1]}))||r.unsetMark(t.name)}}}}}),hu=/^\s*([-+*])\s$/,pu=Qs.create({name:"bulletList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},parseHTML:function(){return[{tag:"ul"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["ul",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{toggleBulletList:function(){return function(e){var n=e.commands,r=e.chain;return t.options.keepAttributes?r().toggleList(t.name,t.options.itemTypeName,t.options.keepMarks).updateAttributes(fu.name,t.editor.getAttributes(du.name)).run():n.toggleList(t.name,t.options.itemTypeName,t.options.keepMarks)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-8":function(){return t.editor.commands.toggleBulletList()}}},addInputRules:function(){var t=this,e=Zs({find:hu,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Zs({find:hu,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:function(){return t.editor.getAttributes(du.name)},editor:this.editor})),[e]}}),mu=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,vu=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,yu=Xs.create({name:"code",addOptions:function(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML:function(){return[{tag:"code"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["code",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setCode:function(){return function(e){return e.commands.setMark(t.name)}},toggleCode:function(){return function(e){return e.commands.toggleMark(t.name)}},unsetCode:function(){return function(e){return e.commands.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-e":function(){return t.editor.commands.toggleCode()}}},addInputRules:function(){return[Gs({find:mu,type:this.type})]},addPasteRules:function(){return[tu({find:vu,type:this.type})]}});function gu(t){return function(t){if(Array.isArray(t))return bu(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return bu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bu(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var wu=/^```([a-z]+)?[\s\n]$/,ku=/^~~~([a-z]+)?[\s\n]$/,xu=Qs.create({name:"codeBlock",addOptions:function(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes:function(){var t=this;return{language:{default:null,parseHTML:function(e){var n,r=t.options.languageClassPrefix,o=gu((null===(n=e.firstElementChild)||void 0===n?void 0:n.classList)||[]).filter((function(t){return t.startsWith(r)})).map((function(t){return t.replace(r,"")}))[0];return o||null},rendered:!1}}},parseHTML:function(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML:function(t){var e=t.node,n=t.HTMLAttributes;return["pre",Ia(this.options.HTMLAttributes,n),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands:function(){var t=this;return{setCodeBlock:function(e){return function(n){return n.commands.setNode(t.name,e)}},toggleCodeBlock:function(e){return function(n){return n.commands.toggleNode(t.name,"paragraph",e)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Alt-c":function(){return t.editor.commands.toggleCodeBlock()},Backspace:function(){var e=t.editor.state.selection,n=e.empty,r=e.$anchor,o=1===r.pos;return!(!n||r.parent.type.name!==t.name)&&(!(!o&&r.parent.textContent.length)&&t.editor.commands.clearNodes())},Enter:function(e){var n=e.editor;if(!t.options.exitOnTripleEnter)return!1;var r=n.state.selection,o=r.$from;if(!r.empty||o.parent.type!==t.type)return!1;var i=o.parentOffset===o.parent.nodeSize-2,a=o.parent.textContent.endsWith("\n\n");return!(!i||!a)&&n.chain().command((function(t){return t.tr.delete(o.pos-2,o.pos),!0})).exitCode().run()},ArrowDown:function(e){var n=e.editor;if(!t.options.exitOnArrowDown)return!1;var r=n.state,o=r.selection,i=r.doc,a=o.$from;if(!o.empty||a.parent.type!==t.type)return!1;if(!(a.parentOffset===a.parent.nodeSize-2))return!1;var s=a.after();return void 0!==s&&(!i.nodeAt(s)&&n.commands.exitCode())}}},addInputRules:function(){return[Ys({find:wu,type:this.type,getAttributes:function(t){return{language:t[1]}}}),Ys({find:ku,type:this.type,getAttributes:function(t){return{language:t[1]}}})]},addProseMirrorPlugins:function(){var t=this;return[new Ye({key:new Qe("codeBlockVSCodeHandler"),props:{handlePaste:function(e,n){if(!n.clipboardData)return!1;if(t.editor.isActive(t.type.name))return!1;var r=n.clipboardData.getData("text/plain"),o=n.clipboardData.getData("vscode-editor-data"),i=o?JSON.parse(o):void 0,a=null===i||void 0===i?void 0:i.mode;if(!r||!a)return!1;var s=e.state.tr;return s.replaceSelectionWith(t.type.create({language:a})),s.setSelection(Ne.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(r.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),Eu=Qs.create({name:"doc",topNode:!0,content:"block+"});function Su(t){return Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(t)}function Du(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cu(r.key),r)}}function Cu(t){var e=function(t,e){if("object"!=Su(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Su(e)?e:String(e)}function Ou(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ye({view:function(e){return new Au(e,t)}})}var Au=function(){function t(e,n){var r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=n.width)&&void 0!==r?r:1,this.color=!1===n.color?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var n=function(e){o[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))}},{key:"update",value:function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){var r=e.nodeBefore,o=e.nodeAfter;if(r||o){var i=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0));if(i){var a=i.getBoundingClientRect(),s=r?a.bottom:a.top;r&&o&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:a.left,right:a.right,top:s-this.width/2,bottom:s+this.width/2}}}}if(!t){var u=this.editorView.coordsAtPos(this.cursorPos);t={left:u.left-this.width/2,right:u.left+this.width/2,top:u.top,bottom:u.bottom}}var c,l,f=this.editorView.dom.offsetParent;if(this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!f||f==document.body&&"static"==getComputedStyle(f).position)c=-pageXOffset,l=-pageYOffset;else{var d=f.getBoundingClientRect();c=d.left-f.scrollLeft,l=d.top-f.scrollTop}this.element.style.left=t.left-c+"px",this.element.style.top=t.top-l+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}},{key:"scheduleRemoval",value:function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)}},{key:"dragover",value:function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,e,t):r;if(e&&!o){var i=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){var a=oe(this.editorView.state.doc,i,this.editorView.dragging.slice);null!=a&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}])&&Du(e.prototype,n),r&&Du(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ju=as.create({name:"dropCursor",addOptions:function(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins:function(){return[Ou(this.options)]}});function Tu(t){return Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(t)}function Mu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fu(r.key),r)}}function Pu(t,e,n){return e&&Lu(t.prototype,e),n&&Lu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fu(t){var e=function(t,e){if("object"!=Tu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Tu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tu(e)?e:String(e)}function Nu(t,e,n){return e=Bu(e),function(t,e){if(e&&("object"===Tu(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_u()?Reflect.construct(e,n||[],Bu(t).constructor):e.apply(t,n))}function _u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_u=function(){return!!t})()}function Bu(t){return Bu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bu(t)}function Iu(t,e){return Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Iu(t,e)}var Ru=function(t){function e(t){return Mu(this,e),Nu(this,e,[t,t])}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Iu(t,e)}(e,t),Pu(e,[{key:"map",value:function(t,n){var r=t.resolve(n.map(this.head));return e.valid(r)?new e(r):Me.near(r)}},{key:"content",value:function(){return D.empty}},{key:"eq",value:function(t){return t instanceof e&&t.head==this.head}},{key:"toJSON",value:function(){return{type:"gapcursor",pos:this.head}}},{key:"getBookmark",value:function(){return new zu(this.anchor)}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))}},{key:"valid",value:function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e),r=t.node(e);if(0!=n)for(var o=r.child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}},{key:"findGapCursorFrom",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t:for(;;){if(!r&&e.valid(t))return t;for(var o=t.pos,i=null,a=t.depth;;a--){var s=t.node(a);if(n>0?t.indexAfter(a)<s.childCount:t.index(a)>0){i=s.child(n>0?t.indexAfter(a):t.index(a)-1);break}if(0==a)return null;o+=n;var u=t.doc.resolve(o);if(e.valid(u))return u}for(;;){var c=n>0?i.firstChild:i.lastChild;if(!c){if(i.isAtom&&!i.isText&&!Be.isSelectable(i)){t=t.doc.resolve(o+i.nodeSize*n),r=!1;continue t}break}i=c,o+=n;var l=t.doc.resolve(o);if(e.valid(l))return l}return null}}}]),e}(Me);Ru.prototype.visible=!1,Ru.findFrom=Ru.findGapCursorFrom,Me.jsonID("gapcursor",Ru);var zu=function(){function t(e){Mu(this,t),this.pos=e}return Pu(t,[{key:"map",value:function(e){return new t(e.map(this.pos))}},{key:"resolve",value:function(t){var e=t.resolve(this.pos);return Ru.valid(e)?new Ru(e):Me.near(e)}}]),t}();var Hu=Bi({ArrowLeft:Vu("horiz",-1),ArrowRight:Vu("horiz",1),ArrowUp:Vu("vert",-1),ArrowDown:Vu("vert",1)});function Vu(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,o){var i=t.selection,a=e>0?i.$to:i.$from,s=i.empty;if(i instanceof Ne){if(!o.endOfTextblock(n)||0==a.depth)return!1;s=!1,a=t.doc.resolve(e>0?a.after():a.before())}var u=Ru.findGapCursorFrom(a,e,s);return!!u&&(r&&r(t.tr.setSelection(new Ru(u))),!0)}}function $u(t,e,n){if(!t||!t.editable)return!1;var r=t.state.doc.resolve(e);if(!Ru.valid(r))return!1;var o=t.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&Be.isSelectable(t.state.doc.nodeAt(o.inside)))&&(t.dispatch(t.state.tr.setSelection(new Ru(r))),!0)}function qu(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof Ru))return!1;var n=t.state.selection.$from,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;for(var o=b.empty,i=r.length-1;i>=0;i--)o=b.from(r[i].createAndFill(null,o));var a=t.state.tr.replace(n.pos,n.pos,new D(o,0,0));return a.setSelection(Ne.near(a.doc.resolve(n.pos+1))),t.dispatch(a),!1}function Wu(t){if(!(t.selection instanceof Ru))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",Xo.create(t.doc,[Jo.widget(t.selection.head,e,{key:"gapcursor"})])}var Ku=as.create({name:"gapCursor",addProseMirrorPlugins:function(){return[new Ye({props:{decorations:Wu,createSelectionBetween:function(t,e,n){return e.pos==n.pos&&Ru.valid(n)?new Ru(n):null},handleClick:$u,handleKeyDown:Hu,handleDOMEvents:{beforeinput:qu}}})]},extendNodeSchema:function(t){var e;return{allowGapCursor:null!==(e=Ha(Fa(t,"allowGapCursor",{name:t.name,options:t.options,storage:t.storage})))&&void 0!==e?e:null}}}),Uu=Qs.create({name:"hardBreak",addOptions:function(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML:function(){return[{tag:"br"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["br",Ia(this.options.HTMLAttributes,e)]},renderText:function(){return"\n"},addCommands:function(){var t=this;return{setHardBreak:function(){return function(e){var n=e.commands,r=e.chain,o=e.state,i=e.editor;return n.first([function(){return n.exitCode()},function(){return n.command((function(){var e=o.selection,n=o.storedMarks;if(e.$from.parent.type.spec.isolating)return!1;var a=t.options.keepMarks,s=i.extensionManager.splittableMarks,u=n||e.$to.parentOffset&&e.$from.marks();return r().insertContent({type:t.name}).command((function(t){var e=t.tr;if(t.dispatch&&u&&a){var n=u.filter((function(t){return s.includes(t.type.name)}));e.ensureMarks(n)}return!0})).run()}))}])}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Enter":function(){return t.editor.commands.setHardBreak()},"Shift-Enter":function(){return t.editor.commands.setHardBreak()}}}});function Gu(t){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(t)}function Ju(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ju(Object(n),!0).forEach((function(e){Zu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ju(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zu(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Gu(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Gu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gu(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xu=Qs.create({name:"heading",addOptions:function(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes:function(){return{level:{default:1,rendered:!1}}},parseHTML:function(){return this.options.levels.map((function(t){return{tag:"h".concat(t),attrs:{level:t}}}))},renderHTML:function(t){var e=t.node,n=t.HTMLAttributes,r=this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0];return["h".concat(r),Ia(this.options.HTMLAttributes,n),0]},addCommands:function(){var t=this;return{setHeading:function(e){return function(n){var r=n.commands;return!!t.options.levels.includes(e.level)&&r.setNode(t.name,e)}},toggleHeading:function(e){return function(n){var r=n.commands;return!!t.options.levels.includes(e.level)&&r.toggleNode(t.name,"paragraph",e)}}}},addKeyboardShortcuts:function(){var t=this;return this.options.levels.reduce((function(e,n){return Yu(Yu({},e),Zu({},"Mod-Alt-".concat(n),(function(){return t.editor.commands.toggleHeading({level:n})})))}),{})},addInputRules:function(){var t=this;return this.options.levels.map((function(e){return Ys({find:new RegExp("^(#{1,".concat(e,"})\\s$")),type:t.type,getAttributes:{level:e}})}))}}),Qu=200,tc=function(){};tc.prototype.append=function(t){return t.length?(t=tc.from(t),!this.length&&t||t.length<Qu&&this.leafAppend(t)||this.length<Qu&&t.leafPrepend(this)||this.appendInner(t)):this},tc.prototype.prepend=function(t){return t.length?tc.from(t).append(this):this},tc.prototype.appendInner=function(t){return new nc(this,t)},tc.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?tc.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},tc.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},tc.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},tc.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},tc.from=function(t){return t instanceof tc?t:t&&t.length?new ec(t):tc.empty};var ec=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=Qu)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=Qu)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(tc);tc.empty=new ec([]);var nc=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(tc),rc=tc;function oc(t){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(t)}function ic(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ac(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uc(r.key),r)}}function sc(t,e,n){return e&&ac(t.prototype,e),n&&ac(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uc(t){var e=function(t,e){if("object"!=oc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oc(e)?e:String(e)}var cc=function(){function t(e,n){ic(this,t),this.items=e,this.eventCount=n}return sc(t,[{key:"popEvent",value:function(e,n){var r=this;if(0==this.eventCount)return null;for(var o,i,a=this.items.length;;a--){if(this.items.get(a-1).selection){--a;break}}n&&(o=this.remapping(a,this.items.length),i=o.maps.length);var s,u,c=e.tr,l=[],f=[];return this.items.forEach((function(e,n){if(!e.step)return o||(o=r.remapping(a,n+1),i=o.maps.length),i--,void f.push(e);if(o){f.push(new lc(e.map));var d,h=e.step.map(o.slice(i));h&&c.maybeStep(h).doc&&(d=c.mapping.maps[c.mapping.maps.length-1],l.push(new lc(d,void 0,void 0,l.length+f.length))),i--,d&&o.appendMap(d,i)}else c.maybeStep(e.step);return e.selection?(s=o?e.selection.map(o.slice(i)):e.selection,u=new t(r.items.slice(0,a).append(f.reverse().concat(l)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:u,transform:c,selection:s}}},{key:"addTransform",value:function(e,n,r,o){for(var i=[],a=this.eventCount,s=this.items,u=!o&&s.length?s.get(s.length-1):null,c=0;c<e.steps.length;c++){var l,f=e.steps[c].invert(e.docs[c]),d=new lc(e.mapping.maps[c],f,n);(l=u&&u.merge(d))&&(d=l,c?i.pop():s=s.slice(0,s.length-1)),i.push(d),n&&(a++,n=void 0),o||(u=d)}var h,p,m,v=a-r.depth;return v>dc&&(p=v,(h=s).forEach((function(t,e){if(t.selection&&0==p--)return m=e,!1})),s=h.slice(m),a-=v),new t(s.append(i),a)}},{key:"remapping",value:function(t,e){var n=new It;return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,o)}),t,e),n}},{key:"addMaps",value:function(e){return 0==this.eventCount?this:new t(this.items.append(e.map((function(t){return new lc(t)}))),this.eventCount)}},{key:"rebased",value:function(e,n){if(!this.eventCount)return this;var r=[],o=Math.max(0,this.items.length-n),i=e.mapping,a=e.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),o);var u=n;this.items.forEach((function(t){var n=i.getMirror(--u);if(null!=n){a=Math.min(a,n);var o=i.maps[n];if(t.step){var c=e.steps[n].invert(e.docs[n]),l=t.selection&&t.selection.map(i.slice(u+1,n));l&&s++,r.push(new lc(o,c,l))}else r.push(new lc(o))}}),o);for(var c=[],l=n;l<a;l++)c.push(new lc(i.maps[l]));var f=new t(this.items.slice(0,o).append(c).append(r),s);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-r.length)),f}},{key:"emptyItemCount",value:function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t}},{key:"compress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((function(t,a){if(a>=e)o.push(t),t.selection&&i++;else if(t.step){var s=t.step.map(n.slice(r)),u=s&&s.getMap();if(r--,u&&n.appendMap(u,r),s){var c=t.selection&&t.selection.map(n.slice(r));c&&i++;var l,f=new lc(u.invert(),s,c),d=o.length-1;(l=o.length&&o[d].merge(f))?o[d]=l:o.push(f)}}else t.map&&r--}),this.items.length,0),new t(rc.from(o.reverse()),i)}}]),t}();cc.empty=new cc(rc.empty,0);var lc=function(){function t(e,n,r,o){ic(this,t),this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}return sc(t,[{key:"merge",value:function(e){if(this.step&&e.step&&!e.selection){var n=e.step.merge(this.step);if(n)return new t(n.getMap().invert(),n,this.selection)}}}]),t}(),fc=sc((function t(e,n,r,o,i){ic(this,t),this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i})),dc=20;function hc(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function pc(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function mc(t,e,n,r){var o=gc(e),i=bc.get(e).spec.config,a=(r?t.undone:t.done).popEvent(e,o);if(a){var s=a.selection.resolve(a.transform.doc),u=(r?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),i,o),c=new fc(r?u:a.remaining,r?a.remaining:u,null,0,-1);n(a.transform.setSelection(s).setMeta(bc,{redo:r,historyState:c}).scrollIntoView())}}var vc=!1,yc=null;function gc(t){var e=t.plugins;if(yc!=e){vc=!1,yc=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){vc=!0;break}}return vc}var bc=new Qe("history"),wc=new Qe("closeHistory");function kc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ye({key:bc,state:{init:function(){return new fc(cc.empty,cc.empty,null,0,-1)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(bc);if(i)return i.historyState;n.getMeta(wc)&&(t=new fc(t.done,t.undone,null,0,-1));var a=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(a&&a.getMeta(bc))return a.getMeta(bc).redo?new fc(t.done.addTransform(n,void 0,r,gc(e)),t.undone,hc(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new fc(t.done,t.undone.addTransform(n,void 0,r,gc(e)),null,t.prevTime,t.prevComposition);if(!1===n.getMeta("addToHistory")||a&&!1===a.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new fc(t.done.rebased(n,o),t.undone.rebased(n,o),pc(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new fc(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),pc(t.prevRanges,n.mapping),t.prevTime,t.prevComposition);var s=n.getMeta("composition"),u=0==t.prevTime||!a&&t.prevComposition!=s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}(n,t.prevRanges)),c=a?pc(t.prevRanges,n.mapping):hc(n.mapping.maps[n.steps.length-1]);return new fc(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,gc(e)),cc.empty,c,n.time,null==s?t.prevComposition:s)}(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput:function(t,e){var n=e.inputType,r="historyUndo"==n?xc:"historyRedo"==n?Ec:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}var xc=function(t,e){var n=bc.getState(t);return!(!n||0==n.done.eventCount)&&(e&&mc(n,t,e,!1),!0)},Ec=function(t,e){var n=bc.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&mc(n,t,e,!0),!0)};var Sc=as.create({name:"history",addOptions:function(){return{depth:100,newGroupDelay:500}},addCommands:function(){return{undo:function(){return function(t){var e=t.state,n=t.dispatch;return xc(e,n)}},redo:function(){return function(t){var e=t.state,n=t.dispatch;return Ec(e,n)}}}},addProseMirrorPlugins:function(){return[kc(this.options)]},addKeyboardShortcuts:function(){var t=this;return{"Mod-z":function(){return t.editor.commands.undo()},"Mod-Z":function(){return t.editor.commands.undo()},"Mod-y":function(){return t.editor.commands.redo()},"Mod-Y":function(){return t.editor.commands.redo()},"Shift-Mod-z":function(){return t.editor.commands.redo()},"Shift-Mod-Z":function(){return t.editor.commands.redo()},"Mod-\u044f":function(){return t.editor.commands.undo()},"Shift-Mod-\u044f":function(){return t.editor.commands.redo()}}}}),Dc=Qs.create({name:"horizontalRule",addOptions:function(){return{HTMLAttributes:{}}},group:"block",parseHTML:function(){return[{tag:"hr"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["hr",Ia(this.options.HTMLAttributes,e)]},addCommands:function(){var t=this;return{setHorizontalRule:function(){return function(e){var n=e.chain,r=e.state.selection.$to,o=n();return 0===r.parentOffset?o.insertContentAt(Math.max(r.pos-2,0),{type:t.name}):o.insertContent({type:t.name}),o.command((function(t){var e,n=t.tr;if(t.dispatch){var r=n.selection.$to,o=r.end();if(r.nodeAfter)r.nodeAfter.isTextblock?n.setSelection(Ne.create(n.doc,r.pos+1)):r.nodeAfter.isBlock?n.setSelection(Be.create(n.doc,r.pos)):n.setSelection(Ne.create(n.doc,r.pos));else{var i=null===(e=r.parent.type.contentMatch.defaultType)||void 0===e?void 0:e.create();i&&(n.insert(o,i),n.setSelection(Ne.create(n.doc,o+1)))}n.scrollIntoView()}return!0})).run()}}}},addInputRules:function(){return[Js({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),Cc=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Oc=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Ac=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,jc=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Tc=Xs.create({name:"italic",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"em"},{tag:"i",getAttrs:function(t){return"normal"!==t.style.fontStyle&&null}},{style:"font-style=italic"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["em",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setItalic:function(){return function(e){return e.commands.setMark(t.name)}},toggleItalic:function(){return function(e){return e.commands.toggleMark(t.name)}},unsetItalic:function(){return function(e){return e.commands.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-i":function(){return t.editor.commands.toggleItalic()},"Mod-I":function(){return t.editor.commands.toggleItalic()}}},addInputRules:function(){return[Gs({find:Cc,type:this.type}),Gs({find:Ac,type:this.type})]},addPasteRules:function(){return[tu({find:Oc,type:this.type}),tu({find:jc,type:this.type})]}}),Mc=Qs.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["li",Ia(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts:function(){var t=this;return{Enter:function(){return t.editor.commands.splitListItem(t.name)},Tab:function(){return t.editor.commands.sinkListItem(t.name)},"Shift-Tab":function(){return t.editor.commands.liftListItem(t.name)}}}});function Lc(t){return Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(t)}var Pc=["start"];function Fc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Nc(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Lc(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Lc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lc(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _c(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Bc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Ic(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ic(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ic(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Rc=Qs.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["li",Ia(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts:function(){var t=this;return{Enter:function(){return t.editor.commands.splitListItem(t.name)},Tab:function(){return t.editor.commands.sinkListItem(t.name)},"Shift-Tab":function(){return t.editor.commands.liftListItem(t.name)}}}}),zc=Xs.create({name:"textStyle",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"span",getAttrs:function(t){return!!t.hasAttribute("style")&&{}}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["span",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{removeEmptyTextStyle:function(){return function(e){var n=e.state,r=e.commands,o=Os(n,t.type);return!!Object.entries(o).some((function(t){return!!Bc(t,2)[1]}))||r.unsetMark(t.name)}}}}}),Hc=/^(\d+)\.\s$/,Vc=Qs.create({name:"orderedList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},addAttributes:function(){return{start:{default:1,parseHTML:function(t){return t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}}},parseHTML:function(){return[{tag:"ol"}]},renderHTML:function(t){var e=t.HTMLAttributes,n=e.start,r=_c(e,Pc);return 1===n?["ol",Ia(this.options.HTMLAttributes,r),0]:["ol",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{toggleOrderedList:function(){return function(e){var n=e.commands,r=e.chain;return t.options.keepAttributes?r().toggleList(t.name,t.options.itemTypeName,t.options.keepMarks).updateAttributes(Rc.name,t.editor.getAttributes(zc.name)).run():n.toggleList(t.name,t.options.itemTypeName,t.options.keepMarks)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-7":function(){return t.editor.commands.toggleOrderedList()}}},addInputRules:function(){var t=this,e=Zs({find:Hc,type:this.type,getAttributes:function(t){return{start:+t[1]}},joinPredicate:function(t,e){return e.childCount+e.attrs.start===+t[1]}});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Zs({find:Hc,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:function(e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fc(Object(n),!0).forEach((function(e){Nc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({start:+e[1]},t.editor.getAttributes(zc.name))},joinPredicate:function(t,e){return e.childCount+e.attrs.start===+t[1]},editor:this.editor})),[e]}}),$c=Qs.create({name:"paragraph",priority:1e3,addOptions:function(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML:function(){return[{tag:"p"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["p",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setParagraph:function(){return function(e){return e.commands.setNode(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Alt-0":function(){return t.editor.commands.setParagraph()}}}}),qc=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Wc=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Kc=Xs.create({name:"strike",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:function(t){return!!t.includes("line-through")&&{}}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["s",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setStrike:function(){return function(e){return e.commands.setMark(t.name)}},toggleStrike:function(){return function(e){return e.commands.toggleMark(t.name)}},unsetStrike:function(){return function(e){return e.commands.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this,e={};return xs()?e["Mod-Shift-s"]=function(){return t.editor.commands.toggleStrike()}:e["Ctrl-Shift-s"]=function(){return t.editor.commands.toggleStrike()},e},addInputRules:function(){return[Gs({find:qc,type:this.type})]},addPasteRules:function(){return[tu({find:Wc,type:this.type})]}}),Uc=Qs.create({name:"text",group:"inline"}),Gc=as.create({name:"starterKit",addExtensions:function(){var t,e,n,r,o,i,a,s,u,c,l,f,d,h,p,m,v,y,g=[];return!1!==this.options.blockquote&&g.push(ru.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&g.push(uu.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&g.push(pu.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&g.push(yu.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&g.push(xu.configure(null===(o=this.options)||void 0===o?void 0:o.codeBlock)),!1!==this.options.document&&g.push(Eu.configure(null===(i=this.options)||void 0===i?void 0:i.document)),!1!==this.options.dropcursor&&g.push(ju.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&g.push(Ku.configure(null===(s=this.options)||void 0===s?void 0:s.gapcursor)),!1!==this.options.hardBreak&&g.push(Uu.configure(null===(u=this.options)||void 0===u?void 0:u.hardBreak)),!1!==this.options.heading&&g.push(Xu.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&g.push(Sc.configure(null===(l=this.options)||void 0===l?void 0:l.history)),!1!==this.options.horizontalRule&&g.push(Dc.configure(null===(f=this.options)||void 0===f?void 0:f.horizontalRule)),!1!==this.options.italic&&g.push(Tc.configure(null===(d=this.options)||void 0===d?void 0:d.italic)),!1!==this.options.listItem&&g.push(Mc.configure(null===(h=this.options)||void 0===h?void 0:h.listItem)),!1!==this.options.orderedList&&g.push(Vc.configure(null===(p=this.options)||void 0===p?void 0:p.orderedList)),!1!==this.options.paragraph&&g.push($c.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&g.push(Kc.configure(null===(v=this.options)||void 0===v?void 0:v.strike)),!1!==this.options.text&&g.push(Uc.configure(null===(y=this.options)||void 0===y?void 0:y.text)),g}}),Jc=Xs.create({name:"underline",addOptions:function(){return{HTMLAttributes:{}}},parseHTML:function(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:function(t){return!!t.includes("underline")&&{}}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["u",Ia(this.options.HTMLAttributes,e),0]},addCommands:function(){var t=this;return{setUnderline:function(){return function(e){return e.commands.setMark(t.name)}},toggleUnderline:function(){return function(e){return e.commands.toggleMark(t.name)}},unsetUnderline:function(){return function(e){return e.commands.unsetMark(t.name)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-u":function(){return t.editor.commands.toggleUnderline()},"Mod-U":function(){return t.editor.commands.toggleUnderline()}}}}),Yc=as.create({name:"characterCount",addOptions:function(){return{limit:null,mode:"textSize"}},addStorage:function(){return{characters:function(){return 0},words:function(){return 0}}},onBeforeCreate:function(){var t=this;this.storage.characters=function(e){var n=(null===e||void 0===e?void 0:e.node)||t.editor.state.doc;return"textSize"===((null===e||void 0===e?void 0:e.mode)||t.options.mode)?n.textBetween(0,n.content.size,void 0," ").length:n.nodeSize},this.storage.words=function(e){var n=(null===e||void 0===e?void 0:e.node)||t.editor.state.doc;return n.textBetween(0,n.content.size," "," ").split(" ").filter((function(t){return""!==t})).length}},addProseMirrorPlugins:function(){var t=this;return[new Ye({key:new Qe("characterCount"),filterTransaction:function(e,n){var r=t.options.limit;if(!e.docChanged||0===r||null===r||void 0===r)return!0;var o=t.storage.characters({node:n.doc}),i=t.storage.characters({node:e.doc});if(i<=r)return!0;if(o>r&&i>r&&i<=o)return!0;if(o>r&&i>r&&i>o)return!1;if(!e.getMeta("paste"))return!1;var a=e.selection.$head.pos,s=a-(i-r),u=a;return e.deleteRange(s,u),!(t.storage.characters({node:e.doc})>r)}})]}});function Zc(t){return function(t){if(Array.isArray(t))return Xc(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Xc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xc(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Qc=Yc.extend({addProseMirrorPlugins:function(){var t,e=this.options.limit,n=null===(t=this.parent)||void 0===t?void 0:t.call(this);if(0===e||null===e||!e)return n;var r=this.editor.storage;return[].concat(Zc(n),[new Ye({props:{handleKeyDown:function(t,n){return"Enter"===n.key&&r.characterCount.characters()>=e}}})])}}),tl=uu.extend({parseHTML:function(){return[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&"400"!==t.style.fontWeight&&null}},{tag:"span",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t.style.fontWeight)&&null}}]}}),el=as.create({name:"dialog",addStorage:function(){return{open:!1}},addCommands:function(){var t=this;return{isDialogOpen:function(){return function(){return t.storage.open}},toggleDialog:function(e){return function(){return t.storage.open=e}}}},addProseMirrorPlugins:function(){var t=this;return[new Ye({key:new Qe("editable"),props:{attributes:function(){return t.storage.open?{class:"dialog-open"}:{}}}})]}});function nl(t){return nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(t)}function rl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ol(t,e,n){return e=function(t){var e=function(t,e){if("object"!=nl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=nl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nl(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function il(){il=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==nl(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(nl(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function al(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}var sl=new Qe("suggestion");function ul(t){var e,n=t.pluginKey,r=void 0===n?sl:n,o=t.editor,i=t.char,a=void 0===i?"@":i,s=t.allowSpaces,u=void 0!==s&&s,c=t.allowedPrefixes,l=void 0===c?[" "]:c,f=t.startOfLine,d=void 0!==f&&f,h=t.decorationTag,p=void 0===h?"span":h,m=t.decorationClass,v=void 0===m?"suggestion":m,y=t.command,g=void 0===y?function(){return null}:y,b=t.items,w=void 0===b?function(){return[]}:b,k=t.render,x=void 0===k?function(){return{}}:k,E=t.allow,S=void 0===E?function(){return!0}:E,D=null===x||void 0===x?void 0:x(),C=new Ye({key:r,view:function(){var t,n,r=this;return{update:(t=il().mark((function t(n,i){var a,s,u,c,l,f,d,h,p,m,v,y,b,k,x,E,S,C;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=null===(a=r.key)||void 0===a?void 0:a.getState(i),p=null===(s=r.key)||void 0===s?void 0:s.getState(n.state),m=h.active&&p.active&&h.range.from!==p.range.from,v=!h.active&&p.active,y=h.active&&!p.active,b=!v&&!y&&h.query!==p.query,x=b&&!m,E=y||m,(k=v||m)||x||E){t.next=11;break}return t.abrupt("return");case 11:if(S=E&&!k?h:p,C=n.dom.querySelector('[data-decoration-id="'.concat(S.decorationId,'"]')),e={editor:o,range:S.range,query:S.query,text:S.text,items:[],command:function(t){g({editor:o,range:S.range,props:t})},decorationNode:C,clientRect:C?function(){var t,e=(null===(t=r.key)||void 0===t?void 0:t.getState(o.state)).decorationId,i=n.dom.querySelector('[data-decoration-id="'.concat(e,'"]'));return(null===i||void 0===i?void 0:i.getBoundingClientRect())||null}:null},k&&(null===(u=null===D||void 0===D?void 0:D.onBeforeStart)||void 0===u||u.call(D,e)),x&&(null===(c=null===D||void 0===D?void 0:D.onBeforeUpdate)||void 0===c||c.call(D,e)),!x&&!k){t.next=20;break}return t.next=19,w({editor:o,query:S.query});case 19:e.items=t.sent;case 20:E&&(null===(l=null===D||void 0===D?void 0:D.onExit)||void 0===l||l.call(D,e)),x&&(null===(f=null===D||void 0===D?void 0:D.onUpdate)||void 0===f||f.call(D,e)),k&&(null===(d=null===D||void 0===D?void 0:D.onStart)||void 0===d||d.call(D,e));case 23:case"end":return t.stop()}}),t)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){al(i,r,o,a,s,"next",t)}function s(t){al(i,r,o,a,s,"throw",t)}a(void 0)}))},function(t,e){return n.apply(this,arguments)}),destroy:function(){var t;e&&(null===(t=null===D||void 0===D?void 0:D.onExit)||void 0===t||t.call(D,e))}}},state:{init:function(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply:function(t,e,n,r){var i=o.isEditable,s=o.view.composing,c=t.selection,f=c.empty,h=c.from,p=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rl(Object(n),!0).forEach((function(e){ol(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e);if(p.composing=s,i&&(f||o.view.composing)){!(h<e.range.from||h>e.range.to)||s||e.composing||(p.active=!1);var m=function(t){var e,n=t.char,r=t.allowSpaces,o=t.allowedPrefixes,i=t.startOfLine,a=t.$position,s=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),u=new RegExp("\\s".concat(s,"$")),c=i?"^":"",l=r?new RegExp("".concat(c).concat(s,".*?(?=\\s").concat(s,"|$)"),"gm"):new RegExp("".concat(c,"(?:^)?").concat(s,"[^\\s").concat(s,"]*"),"gm"),f=(null===(e=a.nodeBefore)||void 0===e?void 0:e.isText)&&a.nodeBefore.text;if(!f)return null;var d=a.pos-f.length,h=Array.from(f.matchAll(l)).pop();if(!h||void 0===h.input||void 0===h.index)return null;var p=h.input.slice(Math.max(0,h.index-1),h.index),m=new RegExp("^[".concat(null===o||void 0===o?void 0:o.join(""),"\0]?$")).test(p);if(null!==o&&!m)return null;var v=d+h.index,y=v+h[0].length;return r&&u.test(f.slice(y-1,y+1))&&(h[0]+=" ",y+=1),v<a.pos&&y>=a.pos?{range:{from:v,to:y},query:h[0].slice(n.length),text:h[0]}:null}({char:a,allowSpaces:u,allowedPrefixes:l,startOfLine:d,$position:c.$from}),v="id_".concat(Math.floor(4294967295*Math.random()));m&&S({editor:o,state:r,range:m.range})?(p.active=!0,p.decorationId=e.decorationId?e.decorationId:v,p.range=m.range,p.query=m.query,p.text=m.text):p.active=!1}else p.active=!1;return p.active||(p.decorationId=null,p.range={from:0,to:0},p.query=null,p.text=null),p}},props:{handleKeyDown:function(t,e){var n,r=C.getState(t.state),o=r.active,i=r.range;return o&&(null===(n=null===D||void 0===D?void 0:D.onKeyDown)||void 0===n?void 0:n.call(D,{view:t,event:e,range:i}))||!1},decorations:function(t){var e=C.getState(t),n=e.active,r=e.range,o=e.decorationId;return n?Xo.create(t.doc,[Jo.inline(r.from,r.to,{nodeName:p,class:v,"data-decoration-id":o})]):null}}});return C}function cl(t){return cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(t)}function ll(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ll(Object(n),!0).forEach((function(e){dl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ll(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dl(t,e,n){return e=function(t){var e=function(t,e){if("object"!=cl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=cl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cl(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hl=new Qe("mention"),pl=Qs.create({name:"mention",addOptions:function(){var t=this;return{HTMLAttributes:{},renderLabel:function(t){var e,n=t.options,r=t.node;return"".concat(n.suggestion.char).concat(null!==(e=r.attrs.label)&&void 0!==e?e:r.attrs.id)},suggestion:{char:"@",pluginKey:hl,command:function(e){var n,r,o=e.editor,i=e.range,a=e.props,s=o.view.state.selection.$to.nodeAfter;(null===(n=null===s||void 0===s?void 0:s.text)||void 0===n?void 0:n.startsWith(" "))&&(i.to+=1),o.chain().focus().insertContentAt(i,[{type:t.name,attrs:a},{type:"text",text:" "}]).run(),null===(r=window.getSelection())||void 0===r||r.collapseToEnd()},allow:function(e){var n=e.state,r=e.range,o=n.doc.resolve(r.from),i=n.schema.nodes[t.name],a=!!o.parent.type.contentMatch.matchType(i);return a}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(t){return t.getAttribute("data-id")},renderHTML:function(t){return t.id?{"data-id":t.id}:{}}},label:{default:null,parseHTML:function(t){return t.getAttribute("data-label")},renderHTML:function(t){return t.label?{"data-label":t.label}:{}}}}},parseHTML:function(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML:function(t){var e=t.node,n=t.HTMLAttributes;return["span",Ia({"data-type":this.name},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:e})]},renderText:function(t){var e=t.node;return this.options.renderLabel({options:this.options,node:e})},addKeyboardShortcuts:function(){var t=this;return{Backspace:function(){return t.editor.commands.command((function(e){var n=e.tr,r=e.state,o=!1,i=r.selection,a=i.empty,s=i.anchor;return!!a&&(r.doc.nodesBetween(s-1,s,(function(e,r){if(e.type.name===t.name)return o=!0,n.insertText(t.options.suggestion.char||"",r,r+e.nodeSize),!1})),o)}))}}},addProseMirrorPlugins:function(){return[ul(fl({editor:this.editor},this.options.suggestion))]}}),ml=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).itemConverter;return function(){var t=null,n=null,r=null,o=-1,i=null,a=null,s=function(t){var n=t;return e&&(n=e(t)),n instanceof Object?n:{label:n}},u=function(e){var n=0;if(t.querySelectorAll(".editor-suggestions-item").forEach((function(t,e){"true"===t.dataset.selected&&(o=e),t.removeAttribute("data-selected"),n+=1})),"up"===e?o-=1:o+=1,o<0?o=0:o===n&&(o-=1),o>-1){var r=t.querySelector('.editor-suggestions-item[data-index="'.concat(o,'"]'));r&&(r.dataset.selected="true")}},c=function(t){var e=n,o=r;a&&"undefined"===typeof jest&&i.chain().focus().setTextSelection(a).command((function(t){var e=t.tr;return t.dispatch&&e.replaceSelectionWith(i.schema.text("  ")),!0})).setTextSelection({from:a.from,to:a.from}).run(),o(s(e[t]))},l=function(e){var n=e.items,r=(0,e.clientRect)();Object.assign(t.style,{position:"absolute",top:"".concat(document.documentElement.scrollTop+r.top+r.height,"px"),left:"".concat(r.left,"px")}),t.classList.remove("hidden","hide"),t.innerHTML="",n.forEach((function(e,n){var r=s(e),i=r.label,a=r.id,u=document.createElement("button");u.type="button",u.classList.add("editor-suggestions-item"),a&&(u.dataset.id=a),u.dataset.index=n,u.dataset.value=i,0===n&&(o=n,u.dataset.selected="true"),u.textContent=i,t.append(u),u.addEventListener("click",(function(){return c(n)}))}))};return{onStart:function(e){var o=e.editor,a=e.items,s=e.clientRect,u=e.command;i=o,n=a,r=u,t=document.createElement("div"),document.body.append(t),t.classList.add("editor-suggestions","hidden","hide"),a.length>0&&l({clientRect:s,items:a})},onUpdate:function(e){var r=e.clientRect,o=e.items;r&&t&&(n=o,o.length>0?l({clientRect:r,items:o}):t.classList.add("editor-suggestions","hidden","hide"))},onKeyDown:function(e){var n=e.event,r=e.range;return a=r,"Escape"===n.key?(t.classList.add("hidden","hide"),!0):"ArrowUp"===n.key?(u("up"),!0):"ArrowDown"===n.key?(u("down"),!0):"Enter"===n.key&&(o>-1&&c(o),o=-1,!0)},onExit:function(){t.remove(),t=n=r=i=a=null,o=-1}}}},vl=function(t){return function(e){var n=e.node,r=document.createElement("span");r.textContent=t.options.renderLabel({options:t.options,node:n});var o=n.attrs,i=o.id,a=o.label;return r.dataset.suggestion=n.type.name,i&&(r.dataset.id=i),r.dataset.label=a,{dom:r}}};function yl(t){return yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(t)}function gl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gl(Object(n),!0).forEach((function(e){wl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wl(t,e,n){return e=function(t){var e=function(t,e){if("object"!=yl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=yl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yl(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kl(){kl=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==yl(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(yl(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function xl(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function El(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){xl(i,r,o,a,s,"next",t)}function s(t){xl(i,r,o,a,s,"throw",t)}a(void 0)}))}}var Sl=new Qe("hashtag"),Dl=function(){var t=El(kl().mark((function t(e){return kl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("/api",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'{ hashtags(name:"'.concat(e,'") {name} }')})}).then((function(t){if(t.ok)return t.json();throw new Error("Could not retrieve data")})).then((function(t){return t.data.hashtags||[]})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Cl=pl.extend({name:"hashtag",addOptions:function(){var t,e,n=null===(t=this.parent)||void 0===t?void 0:t.call(this),r=null===n||void 0===n?void 0:n.suggestion;return bl(bl({},n),{},{renderLabel:function(t){var e,n=t.node;return"".concat(null!==(e=n.attrs.label)&&void 0!==e?e:n.attrs.id)},suggestion:bl(bl({},r),{},{char:"#",pluginKey:Sl,items:(e=El(kl().mark((function t(e){var n,r,o;return kl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=e.query).length<2)){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,Dl(n);case 5:return r=t.sent,o=r.sort((function(t){return t.name})),t.abrupt("return",o.slice(0,5));case 8:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)}),render:ml(this,{itemConverter:function(t){return{label:"#".concat(t.name)}}})})})},addNodeView:function(){return vl(this)}}),Ol=Xu.extend({addInputRules:function(){var t=this;return this.options.levels.map((function(e){return Ys({find:new RegExp("^(#{2,".concat(e,"})\\s$")),type:t.type,getAttributes:{level:e}})}))}});function Al(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||Tl(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jl(t){return function(t){if(Array.isArray(t))return Ml(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Tl(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tl(t,e){if(t){if("string"===typeof t)return Ml(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ml(t,e):void 0}}function Ml(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ll=[function(t){var e,n=document.createElement("div");n.innerHTML=function(t){return t.replace(/<!\[if\s+[^\]]+\]>((?!<!\[endif\])[\s\S])+<!\[endif\]>/g,"")}(t);var r=n.querySelectorAll([".MsoListParagraph",".MsoListParagraphCxSpFirst",".MsoListParagraphCxSpMiddle",".MsoListParagraphCxSpLast"].join(", "));if(r.length<1)return t;var o=function(t){var e,n=null===(e=t.querySelector("style"))||void 0===e?void 0:e.textContent;if(!n)return{};var r={};return jl(n.matchAll(/@list\s+(l\d+:level\d+)[\s]+\{([^}]+)\}/g)).forEach((function(t){var e={};t[2].replace(/[\s]+/g,"").split(";").forEach((function(t){var n=Al(t.split(":"),2),r=n[0],o=n[1];e[r]=o})),r[t[1]]=e})),r}(n);null===(e=n.querySelector("style"))||void 0===e||e.remove();var i=1,a=null;return r.forEach((function(t){var e=function(t){var e=t.getAttribute("style");if(!e)return{type:null,level:1};var n=e.match(/mso-list:(l\d+)\s(level\d+)/);if(n){var r=Al(n,3),o=r[1],i=r[2];return{type:o,level:parseInt(i.match(/\d/),10)}}return{type:null,level:1}}(t),n=e.type,r=e.level,s=function(t,e,n){if(null===t)return{};var r=n[t]||{},o=n["".concat(t,":level").concat(e)]||{};return Object.assign(r,o)}(n,r,o),u=function(t){var e="ol",n=null;switch(t["mso-level-number-format"]){case"bullet":e="ul";break;case"alpha-lower":case"lower-alpha":n="a";break;case"alpha-upper":case"upper-alpha":n="A";break;case"roman-lower":case"lower-roman":n="i";break;case"roman-upper":case"upper-roman":n="I";break;default:n="1"}return{tag:e,type:n}}(s),c=u.tag,l=u.type,f=document.createElement("li"),d=document.createElement("p");if(d.innerHTML=t.innerHTML,f.append(d),t.classList.contains("MsoListParagraph")||t.classList.contains("MsoListParagraphCxSpFirst"))i=1,a=document.createElement(c),"ol"===c&&l&&a.setAttribute("type",l),a.append(f),t.replaceWith(a);else{if(r>i){i+=1;var h=document.createElement(c);if("ol"===c&&l&&h.setAttribute("type",l),r===i)h.append(f);else{var p=document.createElement("li"),m=document.createElement("p");p.append(m),h.append(p)}a.lastElementChild.append(h),a=h}else{for(;r<i;){i-=1;var v=a.parentNode.closest("ol, ul");if(!v){i=r;break}a=v}a.append(f)}t.classList.contains("MsoListParagraphCxSpLast")&&(i=1,a=null),t.remove()}})),n.innerHTML},function(t){var e=document.createElement("div");e.innerHTML=t;var n={};return e.querySelectorAll(".ListContainerWrapper").forEach((function(t){var e,r,o=t.querySelector("li[data-listid]");null!==(r=n[e=o.dataset.listid])&&void 0!==r||(n[e]=[]),n[o.dataset.listid].push({wrapper:t,level:parseInt(o.dataset.ariaLevel,10)})})),Object.keys(n).length<1?t:(Object.values(n).forEach((function(t){var e=t.shift().wrapper,n=e.querySelector("ol, ul");e.replaceWith(n);var r=1,o=1;t.forEach((function(t){var e=t.wrapper,i=t.level,a=e.querySelector("ol, ul");if(i>o){for(var s=null;i>o;)o+=1,n.lastElementChild&&(r+=1,s=n.lastElementChild);s.append(a),n=a}else{for(var u;i<r;){r-=1;var c=n.parentNode.closest("ol, ul");if(!c){r=i;break}n=c}o=i,(u=n).append.apply(u,jl(a.querySelectorAll("li"))),a.remove()}e.remove()}))})),e.innerHTML)}],Pl=["start"];function Fl(t){return Fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(t)}function Nl(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function _l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_l(Object(n),!0).forEach((function(e){Il(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Il(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Fl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fl(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rl=["a","A","i","I"],zl=function(t){switch(t){case"lower-alpha":case"lower-latin":return"a";case"upper-alpha":case"upper-latin":return"A";case"lower-roman":return"i";case"upper-roman":return"I";default:return"1"}},Hl=Vc.extend({addAttributes:function(){var t;return Bl(Bl({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{},{type:{default:null,parseHTML:function(t){var e=t.getAttribute("type");if(Rl.includes(e))return e;var n=t.querySelector("li");return n&&(e=zl(n.style.listStyleType),Rl.includes(e))?e:(e=zl(t.style.listStyleType),Rl.includes(e)?e:null)}}})},renderHTML:function(t){var e,n,r=t.HTMLAttributes,o=r.start,i=Nl(r,Pl),a=null;(a=Ia(this.options.HTMLAttributes,1===o?i:r)).type&&(null!==(n=(e=a)["data-type"])&&void 0!==n||(e["data-type"]=a.type));return["ol",a,0]},addCommands:function(){var t,e=this;return Bl(Bl({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{},{setOrderedListType:function(t){return function(n){var r=n.commands,o=n.dispatch,i=e.editor.isActive("orderedList");return o&&i?r.updateAttributes("orderedList",{type:t}):i}}})},addKeyboardShortcuts:function(){var t,e=this,n=function(t){if(!e.editor.isActive("orderedList"))return!1;var n=function(t,e){var n=Rl.indexOf(t)+e;if(-2===n)n=Rl.length-1;else if(n<0||n>=Rl.length)return null;return Rl[n]}(e.editor.getAttributes("orderedList").type,t);return!!e.editor.can().setOrderedListType(n)&&e.editor.commands.setOrderedListType(n)};return Bl(Bl({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{},{"Alt-Shift-ArrowUp":function(){return n(-1)},"Alt-Shift-ArrowDown":function(){return n(1)}})},addProseMirrorPlugins:function(){return[new Ye({props:{transformPastedHTML:function(t){return function(t){var e=t;return Ll.forEach((function(t){return e=t(e)})),e}(t)}}})]}});function Vl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return $l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $l(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ql=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Wl=Qs.create({name:"image",addOptions:function(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline:function(){return this.options.inline},group:function(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:function(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML:function(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML:function(t){var e=t.HTMLAttributes;return["img",Ia(this.options.HTMLAttributes,e)]},addCommands:function(){var t=this;return{setImage:function(e){return function(n){return n.commands.insertContent({type:t.name,attrs:e})}}}},addInputRules:function(){return[Js({find:ql,type:this.type,getAttributes:function(t){var e=Vl(t,5),n=e[2];return{src:e[3],alt:n,title:e[4]}}})]}});function Kl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ul(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kl(Object(n),!0).forEach((function(e){Gl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gl(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Jl(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Jl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jl(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jl(t){return Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(t)}var Yl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=window.Decidim.config.get("messages");if(null===t)return e;var n=e;return t.split(".").forEach((function(t){return n=n[t]||{}})),n},Zl=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={};return Object.keys(e).forEach((function(o){"object"===Jl(e[o])?r=Ul(Ul({},r),t(e[o],"".concat(n).concat(o,"."))):""===o?r[(null===n||void 0===n?void 0:n.replace(/\.$/,""))||""]=e[o]:r["".concat(n).concat(o)]=e[o]})),r},Xl=function(t){return Zl(Yl(t))},Ql=function(t){return t.split(".").slice(0,-1).join(".")};function tf(t){return tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(t)}function ef(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ef(Object(n),!0).forEach((function(e){rf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rf(t,e,n){return e=function(t){var e=function(t,e){if("object"!=tf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=tf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tf(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var of=function(t){var e=Xl("editor.extensions.image.nodeView.resizer"),n=function(t){var n=e["control.resize"],r=e["position.".concat(t.replace(/-(\w)/,(function(t,e){return e.toUpperCase()})))];return function(t,e){var n=document.createElement("button");return n.type="button",n.ariaLabel=e,n.dataset.imageResizerControl=t,n}(t,n.replace("%position%",r))};return function(e){var r=e.editor,o=e.node,i=e.getPos,a=document.createElement("div");a.dataset.imageResizerWrapper="",a.append(n("top-left")),a.append(n("top-right")),a.append(n("bottom-left")),a.append(n("bottom-right"));var s=function(){var t=document.createElement("div");t.dataset.imageResizerDimensions="";var e=document.createElement("span");e.dataset.imageResizerDimension="width",e.dataset.imageResizerDimensionValue="";var n=document.createElement("span");return n.dataset.imageResizerDimension="height",n.dataset.imageResizerDimensionValue="",t.append(e),t.append("\xd7"),t.append(n),{wrapper:t,width:e,height:n}}();a.append(s.wrapper);var u=wt.fromSchema(o.type.schema).serializeNode(o);a.append(u);var c=u.querySelector("img"),l=null,f=null,d=o.attrs.src,h=null,p=c.naturalHeight,m=c.naturalWidth,v=null,y=null,g=document.createElement("img"),b=o.attrs.width;g.onload=function(){m=g.naturalWidth,p=g.naturalHeight,null===b?(h=m,f=p):(h=b,f=Math.round(p*(h/m))),[nf(nf({},o.attrs),{},{width:1}),o.attrs].forEach((function(e){setTimeout((function(){r.view.dispatch(r.view.state.tr.setNodeMarkup(i(),t.type,e))}),0)}))},g.src=c.src;var w=function(t,e){if("touch"===e){var n=t.originalEvent,r=t.touches||t.changedTouches||n.touches||n.changedTouches;if(!r)return{xPos:null,yPos:null};var o=r[0];return{xPos:o.pageX,yPos:o.pageY}}return{xPos:t.clientX,yPos:t.clientY}},k=function(t,e){var n=w(t,e).xPos,o=y-n;l.match(/-left$/)&&(o*=-1),(h=Math.round(v*(1-o/v)))<100?h=100:h>=m&&(h=m),f=Math.round(p*(h/m));var i=h;i>=m&&(i=null),r.commands.updateAttributes("image",{width:i})},x=function(t){return k(t,"mouse")},E=function(t){return k(t,"touch")},S=function t(){l=y=null,document.removeEventListener("mousemove",x),document.removeEventListener("touchmove",E),document.removeEventListener("mouseup",t),document.removeEventListener("touchend",t)};a.querySelectorAll("[data-image-resizer-control]").forEach((function(t){var e=function(e,n){"mouse"===n&&0!==e.button||r.isEditable&&!l&&(document.addEventListener("mousemove",x),document.addEventListener("touchmove",E),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),e.preventDefault(),l=t.dataset.imageResizerControl,v=r.getAttributes("image").width||m,y=w(e,n).xPos)};t.addEventListener("mousedown",(function(t){return e(t,"mouse")})),t.addEventListener("touchstart",(function(t){return e(t,"touch")}))}));var D=document.createElement("div");return D.dataset.imageResizer="",D.append(a),{dom:D,contentDOM:u,update:function(e){if(e.type!==t.type)return!1;var n=e.attrs,r=n.alt,o=n.src,i=n.title,a=n.width;return s.width.dataset.imageResizerDimensionValue=h,s.height.dataset.imageResizerDimensionValue=f,c.alt=r,d!==o&&(c.src=o,d=o),i?c.title=i:c.removeAttribute("title"),a?c.width=a:c.removeAttribute("width"),!0}}}};function af(t){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(t)}function sf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return uf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uf(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cf(Object(n),!0).forEach((function(e){ff(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ff(t,e,n){return e=function(t){var e=function(t,e){if("object"!=af(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=af(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==af(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var df={role:"img","aria-hidden":"true"};function hf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=lf(lf({},df),e),r={width:"0.75em",height:"0.75em"};Object.keys(n).forEach((function(t){var e=t.replace(/([A-Z])/g,(function(t){return"-".concat(t[0].toLowerCase())}));"undefined"===typeof r[t]?r[e]=n[t]:r[e]="".concat(r[e]," ").concat(n[t])}));var o=document.createElement("svg"),i=document.createElement("use"),a=document.createElement("title");return a.innerHTML=n.title||n.ariaLabel||t,i.setAttribute("href","".concat(window.Decidim.config.get("icons_path"),"#ri-").concat(t)),Object.entries(r).forEach((function(t){var e=sf(t,2),n=e[0],r=e[1];return o.setAttribute(n,r)})),o.appendChild(a),o.appendChild(i),o.outerHTML}function pf(t){return pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(t)}function mf(){mf=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==pf(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(pf(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function vf(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function yf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gf(r.key),r)}}function gf(t){var e=function(t,e){if("object"!=pf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pf(e)?e:String(e)}var bf=function(){function t(e,n){var r=this,o=n.i18n,i=n.onOpen,a=n.onClose;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.i18n=o,this.onOpen=i,this.onClose=a,this.values={src:null,alt:null},this.dropZoneEnabled=!0,this.exitMode="cancel";var s=null;this.messageSection=document.createElement("div"),this.currentFileSection=document.createElement("div"),this.inputSection=document.createElement("div"),this.saveButton=this.element.querySelector("button[data-dropzone-save]"),this.cancelButton=this.element.querySelector("button[data-dropzone-cancel]"),this.dropZone=this.element.querySelector("[data-dropzone]"),s=document.createElement("div"),this.dropZone.parentNode.insertBefore(s,this.dropZone.nextSibling),s.append(this.messageSection),s.append(this.currentFileSection),this.dropZone.parentNode.querySelector(".upload-modal__text").classList.add("mb-0"),this.dropZone.parentNode.append(this.inputSection),this.saveButton.addEventListener("click",(function(){r.exitMode="save"})),this.cancelButton.addEventListener("click",(function(){r.exitMode="cancel"})),this.dropZone.addEventListener("change",(function(t){t.preventDefault();var e=t.target.files;e.length<1||r.uploadFile(e[0])}));var u=function(t){t?(r.dropZone.classList.add("is-dragover"),r.dropZone.querySelectorAll(".upload-modal__dropzone").forEach((function(t){return t.classList.add("is-dragover")}))):(r.dropZone.classList.remove("is-dragover"),r.dropZone.querySelectorAll(".upload-modal__dropzone").forEach((function(t){return t.classList.remove("is-dragover")})))},c={dragenter:function(t){return t.preventDefault()},dragleave:function(){return u(!1)},dragover:function(t){t.preventDefault(),u(!0)},drop:function(t){t.preventDefault(),u(!1),r.messageSection.innerHTML="";var e=t.dataTransfer.files;e.length<1||r.uploadFile(e[0])}};Object.keys(c).forEach((function(t){r.dropZone.addEventListener(t,c[t])}));var l=function(){var t=r.inputSection.querySelector(".attachment-title");t&&(r.values.alt=t.value),r.onClose&&r.onClose(r),r.callback&&(r.callback(r.exitMode),r.callback=null)};this.element.addEventListener("close.dialog",(function(){return setTimeout(l,0)}))}var e,n,r,o,i;return e=t,n=[{key:"getValue",value:function(t){return this.values[t]}},{key:"toggle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.exitMode="cancel",new Promise((function(r){t.saveButton.disabled=!0,t.values={src:e.src,alt:e.alt},t.updateCurrentFile();var o=t.element.querySelector("[data-dialog-title]");e.src&&e.src.length>0?o.textContent=o.dataset.editlabel:o.textContent=o.dataset.addlabel;var i,a,s='\n        <form class="form-defaults form">\n          <label>\n            '.concat(n.inputLabel,'\n            <input class="attachment-title" type="text" name="alt">\n          </label>\n        </form>\n      '),u=null;i='<div class="form__wrapper">'.concat(s,"</div>"),(a=document.createElement("div")).innerHTML=i,(u=a.firstElementChild).querySelector(".attachment-title").value=e.alt||"",t.inputSection.innerHTML="",t.inputSection.append(u),t.uploadHandler=n.uploadHandler;var c=t.element.dataset.dialog,l=window.Decidim.currentDialogs[c];l?l.open():console.error("Upload dialog not initialized for: ".concat(c)),t.callback=r,t.onOpen&&t.onOpen(t)}))}},{key:"updateCurrentFile",value:function(t){var e=this.dropZone.querySelector("[data-dropzone-items]");if(!this.values.src||this.values.src.length<1)return e.setAttribute("hidden","hidden"),void(e.innerHTML="");this.saveButton.disabled=!1,t&&(e.removeAttribute("hidden"),e.innerHTML='\n        <li data-filename="'.concat(t.name,'" data-state="validated">\n          <div data-template="ok">\n            <div><img src="').concat(this.values.src,'" alt="').concat(this.i18n.uploadedFile,'"></div>\n            <span>').concat(t.name,"</span>\n          </div>\n        </li>\n      "))}},{key:"uploadFile",value:(o=mf().mark((function t(e){var n,r,o,i;return mf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.uploadHandler){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.uploadHandler(e);case 4:if((n=t.sent).url){t.next=11;break}return r=this.dropZone.querySelector("[data-dropzone-items]"),o=JSON.parse(r.dataset.locales),r.removeAttribute("hidden"),r.innerHTML='\n        <li data-filename="'.concat(e.name,'" data-state="validated">\n          <div data-template="error">\n            <div>').concat(hf("error-warning-line"),"</div>\n            <div>\n              <span>").concat(e.name,"</span>\n              <span>").concat(o.validation_error,"</span>\n              <ul><li>").concat(n.message,"</li></ul>\n            </div>\n          </div>\n        </li>\n      "),t.abrupt("return");case 11:this.values.src=n.url,(i=this.inputSection.querySelector(".attachment-title"))&&(!i.value||i.value.length<1)&&(i.value=Ql(e.name)),this.updateCurrentFile(e);case 15:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){vf(i,n,r,a,s,"next",t)}function s(t){vf(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})}],n&&yf(e.prototype,n),r&&yf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wf(t){return wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(t)}function kf(){kf=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==wf(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(wf(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function xf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ef(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xf(Object(n),!0).forEach((function(e){Sf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Sf(t,e,n){return e=function(t){var e=function(t,e){if("object"!=wf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=wf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wf(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Df(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function Cf(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Df(i,r,o,a,s,"next",t)}function s(t){Df(i,r,o,a,s,"throw",t)}a(void 0)}))}}var Of=function(){var t=Cf(kf().mark((function t(e,n){var r,o,i;return kf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.querySelector("meta[name='csrf-token']").getAttribute("content"),(o=new FormData).append("image",e),i=Xl("editor.extensions.image"),t.abrupt("return",new Promise((function(t,a){fetch(n,{method:"POST",mode:"cors",cache:"no-cache",headers:{"X-CSRF-Token":r},body:o}).then((function(t){return t.ok?t.json():new Promise((function(t){return t({message:i.uploadError})}))})).then((function(n){return t(Ef({title:Ql(e.name)},n))})).catch(a)})));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Af=function(t,e){return Array.from(t).filter((function(t){return e instanceof RegExp?e.test(t.type):e instanceof Array?e.includes(t.type):e===t.type}))},jf=Wl.extend({addOptions:function(){var t;return Ef(Ef({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{},{contentTypes:/^image\/(jpe?g|png|svg|webp)$/i,uploadImagesPath:null,uploadDialogSelector:null})},addAttributes:function(){var t;return Ef(Ef({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{},{width:{default:null}})},addCommands:function(){var t,e,n,r,o,i=this,a=Xl("editor.extensions.image"),s=(e=this.editor,n=this.options,r=n.uploadDialogSelector,o=Xl("editor.upload"),new bf(document.querySelector(r),{i18n:o,onOpen:function(){return e.commands.toggleDialog(!0)},onClose:function(){return e.chain().toggleDialog(!1).focus(null,{scrollIntoView:!1}).run()}}));return Ef(Ef({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{},{imageDialog:function(){return function(){var t=Cf(kf().mark((function t(e){var n,r,o,u,c;return kf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.dispatch){t.next=15;break}return n=i.editor.getAttributes("image"),r=n.src,o=n.alt,u=n.width,i.editor.commands.toggleDialog(!0),t.next=6,s.toggle({src:r,alt:o},{inputLabel:a.altLabel,uploadHandler:function(){var t=Cf(kf().mark((function t(e){return kf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Of(e,i.options.uploadImagesPath));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});case 6:if(c=t.sent,i.editor.commands.toggleDialog(!1),"save"===c){t.next=11;break}return i.editor.commands.focus(null,{scrollIntoView:!1}),t.abrupt("return",!1);case 11:return s.getValue("src")!==r&&(u=null),r=s.getValue("src"),o=s.getValue("alt"),t.abrupt("return",i.editor.chain().setImage({src:r,alt:o,width:u}).focus(null,{scrollIntoView:!1}).run());case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})},addNodeView:function(){return of(this)},parseHTML:function(){return[{tag:"div[data-image] img[src]:not([src^='data:'])"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["div",{class:"editor-content-image","data-image":""},["img",Ia(this.options.HTMLAttributes,e)]]},addProseMirrorPlugins:function(){var t=this.editor,e=this.options,n=e.uploadImagesPath,r=e.contentTypes,o=function(e){e.forEach((function(e){e.url&&t.commands.setImage({src:e.url,alt:e.title})}))};return[new Ye({props:{handlePaste:function(t,e){var i=(e.clipboardData||e.originalEvent.clipboardData).items,a=Af(i,r);return!(a.length<1)&&(Promise.all(a.map((function(t){return Of(t.getAsFile(),n)}))).then((function(t){o(t)})),!0)},handleDoubleClick:function(){return!!t.isActive("image")&&(t.chain().focus().imageDialog().run(),!0)},handleDOMEvents:{drop:function(e,i){var a,s=e.posAtCoords({left:i.clientX,top:i.clientY}),u=null===i||void 0===i||null===(a=i.dataTransfer)||void 0===a?void 0:a.files;if(u&&!(u.length<1)){var c=Af(u,r);c.length<1||(i.preventDefault(),t.chain().focus().setTextSelection(s.pos).run(),Promise.all(c.map((function(t){return Of(t,n)}))).then((function(t){o(t)})))}}}}})]}}),Tf=["heading","paragraph"],Mf=as.create({name:"indent",addOptions:function(){return{minIndentLevel:0,maxIndentLevel:10,HTMLAttributes:{}}},addGlobalAttributes:function(){return[{types:Tf,attributes:{indent:{default:0,renderHTML:function(t){return t.indent<1?{}:{class:"editor-indent-".concat(t.indent)}},parseHTML:function(t){var e=/^(editor|ql)-indent-([0-9]+)/,n=Array.from(t.classList).find((function(t){return e.test(t)}));return n?parseInt(n.match(e)[2],10):0}}}}]},addCommands:function(){var t=this,e=function(e,n){var r=n.editor,o=n.state,i=n.dispatch,a=n.commands;if(!function(t){return Tf.some((function(e){return t.isActive(e)}))}(r))return!1;var s=function(t){for(var e,n=t.depth,r=function(){var e=t.node(n);if(Tf.some((function(t){return e.type.name===t})))return{v:e};n-=1};n>0;)if(e=r())return e.v;return null}(o.selection.$head);if(null===s)return!1;var u=s.attrs.indent+e;return!(u<t.options.minIndentLevel||u>t.options.maxIndentLevel)&&(!i||a.updateAttributes(s.type.name,{indent:u}))};return{indent:function(){return function(t){var n=t.editor,r=t.state,o=t.commands,i=t.dispatch;return n.isActive("listItem")?!i||o.sinkListItem("listItem"):e(1,{editor:n,state:r,dispatch:i,commands:o})}},outdent:function(){return function(t){var n=t.editor,r=t.state,o=t.commands,i=t.dispatch;return n.isActive("listItem")?3!==r.selection.$head.depth&&(!i||o.liftListItem("listItem")):e(-1,{editor:n,state:r,dispatch:i,commands:o})}}}},addKeyboardShortcuts:function(){var t=this,e=function(){return!!t.editor.can().indent()&&t.editor.commands.indent()},n=function(){return!!t.editor.can().outdent()&&t.editor.commands.outdent()};return{Tab:e,"Shift-Tab":n,Backspace:function(){return!t.editor.isActive("listItem")&&(!(t.editor.state.selection.$head.parentOffset>0)&&n())},"Mod-]":e,"Mod-[":n}}});function Lf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Pf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pf(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ff(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hf(r.key),r)}}function Nf(t,e,n){return e=Bf(e),function(t,e){if(e&&("object"===Rf(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_f()?Reflect.construct(e,n||[],Bf(t).constructor):e.apply(t,n))}function _f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_f=function(){return!!t})()}function Bf(t){return Bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bf(t)}function If(t,e){return If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},If(t,e)}function Rf(t){return Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(t)}function zf(t,e,n){return(e=Hf(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hf(t){var e=function(t,e){if("object"!=Rf(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rf(e)?e:String(e)}var Vf="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",$f="\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u09240\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc0\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2",qf=function(t,e){for(var n in e)t[n]=e[n];return t},Wf="numeric",Kf="ascii",Uf="alpha",Gf="asciinumeric",Jf="alphanumeric",Yf="domain",Zf="emoji",Xf="scheme",Qf="slashscheme",td="whitespace";function ed(t,e){return t in e||(e[t]=[]),e[t]}function nd(t,e,n){for(var r in e[Wf]&&(e[Gf]=!0,e[Jf]=!0),e[Kf]&&(e[Gf]=!0,e[Uf]=!0),e[Gf]&&(e[Jf]=!0),e[Uf]&&(e[Jf]=!0),e[Jf]&&(e[Yf]=!0),e[Zf]&&(e[Yf]=!0),e){var o=ed(r,n);o.indexOf(t)<0&&o.push(t)}}function rd(t){void 0===t&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}rd.groups={},rd.prototype={accepts:function(){return!!this.t},go:function(t){var e=this,n=e.j[t];if(n)return n;for(var r=0;r<e.jr.length;r++){var o=e.jr[r][0],i=e.jr[r][1];if(i&&o.test(t))return i}return e.jd},has:function(t,e){return void 0===e&&(e=!1),e?t in this.j:!!this.go(t)},ta:function(t,e,n,r){for(var o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr:function(t,e,n,r){var o;return r=r||rd.groups,e&&e.j?o=e:(o=new rd(e),n&&r&&nd(e,n,r)),this.jr.push([t,o]),o},ts:function(t,e,n,r){var o=this,i=t.length;if(!i)return o;for(var a=0;a<i-1;a++)o=o.tt(t[a]);return o.tt(t[i-1],e,n,r)},tt:function(t,e,n,r){r=r||rd.groups;var o=this;if(e&&e.j)return o.j[t]=e,e;var i,a=e,s=o.go(t);if(s?(i=new rd,qf(i.j,s.j),i.jr.push.apply(i.jr,s.jr),i.jd=s.jd,i.t=s.t):i=new rd,a){if(r)if(i.t&&"string"===typeof i.t){var u=qf(function(t,e){var n={};for(var r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}(i.t,r),n);nd(a,u,r)}else n&&nd(a,n,r);i.t=a}return o.j[t]=i,i}};var od=function(t,e,n,r,o){return t.ta(e,n,r,o)},id=function(t,e,n,r,o){return t.tr(e,n,r,o)},ad=function(t,e,n,r,o){return t.ts(e,n,r,o)},sd=function(t,e,n,r,o){return t.tt(e,n,r,o)},ud="WORD",cd="UWORD",ld="LOCALHOST",fd="TLD",dd="UTLD",hd="SCHEME",pd="SLASH_SCHEME",md="NUM",vd="WS",yd="NL",gd="OPENBRACE",bd="CLOSEBRACE",wd="OPENBRACKET",kd="CLOSEBRACKET",xd="OPENPAREN",Ed="CLOSEPAREN",Sd="OPENANGLEBRACKET",Dd="CLOSEANGLEBRACKET",Cd="FULLWIDTHLEFTPAREN",Od="FULLWIDTHRIGHTPAREN",Ad="LEFTCORNERBRACKET",jd="RIGHTCORNERBRACKET",Td="LEFTWHITECORNERBRACKET",Md="RIGHTWHITECORNERBRACKET",Ld="FULLWIDTHLESSTHAN",Pd="FULLWIDTHGREATERTHAN",Fd="AMPERSAND",Nd="APOSTROPHE",_d="ASTERISK",Bd="AT",Id="BACKSLASH",Rd="BACKTICK",zd="CARET",Hd="COLON",Vd="COMMA",$d="DOLLAR",qd="DOT",Wd="EQUALS",Kd="EXCLAMATION",Ud="HYPHEN",Gd="PERCENT",Jd="PIPE",Yd="PLUS",Zd="POUND",Xd="QUERY",Qd="QUOTE",th="SEMI",eh="SLASH",nh="TILDE",rh="UNDERSCORE",oh="EMOJI",ih="SYM",ah=Object.freeze({__proto__:null,WORD:ud,UWORD:cd,LOCALHOST:ld,TLD:fd,UTLD:dd,SCHEME:hd,SLASH_SCHEME:pd,NUM:md,WS:vd,NL:yd,OPENBRACE:gd,CLOSEBRACE:bd,OPENBRACKET:wd,CLOSEBRACKET:kd,OPENPAREN:xd,CLOSEPAREN:Ed,OPENANGLEBRACKET:Sd,CLOSEANGLEBRACKET:Dd,FULLWIDTHLEFTPAREN:Cd,FULLWIDTHRIGHTPAREN:Od,LEFTCORNERBRACKET:Ad,RIGHTCORNERBRACKET:jd,LEFTWHITECORNERBRACKET:Td,RIGHTWHITECORNERBRACKET:Md,FULLWIDTHLESSTHAN:Ld,FULLWIDTHGREATERTHAN:Pd,AMPERSAND:Fd,APOSTROPHE:Nd,ASTERISK:_d,AT:Bd,BACKSLASH:Id,BACKTICK:Rd,CARET:zd,COLON:Hd,COMMA:Vd,DOLLAR:$d,DOT:qd,EQUALS:Wd,EXCLAMATION:Kd,HYPHEN:Ud,PERCENT:Gd,PIPE:Jd,PLUS:Yd,POUND:Zd,QUERY:Xd,QUOTE:Qd,SEMI:th,SLASH:eh,TILDE:nh,UNDERSCORE:rh,EMOJI:oh,SYM:ih}),sh=/[a-z]/,uh=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,ch=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])/,lh=/\d/,fh=/\s/,dh="\n",hh="\ufe0f",ph="\u200d",mh=null,vh=null;function yh(t,e,n,r,o){for(var i,a=e.length,s=0;s<a-1;s++){var u=e[s];t.j[u]?i=t.j[u]:((i=new rd(r)).jr=o.slice(),t.j[u]=i),t=i}return(i=new rd(n)).jr=o.slice(),t.j[e[a-1]]=i,i}function gh(t){for(var e=[],n=[],r=0;r<t.length;){for(var o=0;"0123456789".indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(var i=parseInt(t.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(t[r]),r++}return e}var bh={defaultProtocol:"http",events:null,format:kh,formatHref:kh,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function wh(t,e){void 0===e&&(e=null);var n=qf({},bh);t&&(n=qf(n,t instanceof wh?t.o:t));for(var r=n.ignoreTags,o=[],i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}function kh(t){return t}wh.prototype={o:bh,ignoreTags:[],defaultRender:function(t){return t},check:function(t){return this.get("validate",t.toString(),t)},get:function(t,e,n){var r=null!=e,o=this.o[t];return o?("object"===Rf(o)?"function"===typeof(o=n.t in o?o[n.t]:bh[t])&&r&&(o=o(e,n)):"function"===typeof o&&r&&(o=o(e,n.t,n)),o):o},getObj:function(t,e,n){var r=this.o[t];return"function"===typeof r&&null!=e&&(r=r(e,n.t,n)),r},render:function(t){var e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function xh(t,e){this.t="token",this.v=t,this.tk=e}function Eh(t,e){var n=function(e){function n(e,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(o=Nf(this,n,[e,r])).t=t,o}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&If(t,e)}(n,e),r=n,o&&Ff(r.prototype,o),i&&Ff(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(xh);for(var r in e)n.prototype[r]=e[r];return n.t=t,n}xh.prototype={isLink:!1,toString:function(){return this.v},toHref:function(t){return this.toString()},toFormattedString:function(t){var e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"\u2026":r},toFormattedHref:function(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(t){return void 0===t&&(t=bh.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject:function(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate:function(t){return t.get("validate",this.toString(),this)},render:function(t){var e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),i=this.toFormattedString(t),a={},s=t.get("className",n,e),u=t.get("target",n,e),c=t.get("rel",n,e),l=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return a.href=r,s&&(a.class=s),u&&(a.target=u),c&&(a.rel=c),l&&qf(a,l),{tagName:o,attributes:a,content:i,eventListeners:f}}};var Sh=Eh("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Dh=Eh("text"),Ch=Eh("nl"),Oh=Eh("url",{isLink:!0,toHref:function(t){return void 0===t&&(t=bh.defaultProtocol),this.hasProtocol()?this.v:"".concat(t,"://").concat(this.v)},hasProtocol:function(){var t=this.tk;return t.length>=2&&t[0].t!==ld&&t[1].t===Hd}}),Ah=function(t){return new rd(t)};function jh(t,e,n){var r=n[0].s,o=n[n.length-1].e;return new t(e.slice(r,o),n)}var Th="undefined"!==typeof console&&console&&console.warn||function(){},Mh="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Lh={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Ph(t,e){if(void 0===e&&(e=!1),Lh.initialized&&Th('linkifyjs: already initialized - will not register custom scheme "'.concat(t,'" ').concat(Mh)),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');Lh.customSchemes.push([t,e])}function Fh(){Lh.scanner=function(t){void 0===t&&(t=[]);var e={};rd.groups=e;var n=new rd;null==mh&&(mh=gh(Vf)),null==vh&&(vh=gh($f)),sd(n,"'",Nd),sd(n,"{",gd),sd(n,"}",bd),sd(n,"[",wd),sd(n,"]",kd),sd(n,"(",xd),sd(n,")",Ed),sd(n,"<",Sd),sd(n,">",Dd),sd(n,"\uff08",Cd),sd(n,"\uff09",Od),sd(n,"\u300c",Ad),sd(n,"\u300d",jd),sd(n,"\u300e",Td),sd(n,"\u300f",Md),sd(n,"\uff1c",Ld),sd(n,"\uff1e",Pd),sd(n,"&",Fd),sd(n,"*",_d),sd(n,"@",Bd),sd(n,"`",Rd),sd(n,"^",zd),sd(n,":",Hd),sd(n,",",Vd),sd(n,"$",$d),sd(n,".",qd),sd(n,"=",Wd),sd(n,"!",Kd),sd(n,"-",Ud),sd(n,"%",Gd),sd(n,"|",Jd),sd(n,"+",Yd),sd(n,"#",Zd),sd(n,"?",Xd),sd(n,'"',Qd),sd(n,"/",eh),sd(n,";",th),sd(n,"~",nh),sd(n,"_",rh),sd(n,"\\",Id);var r=id(n,lh,md,zf({},Wf,!0));id(r,lh,r);var o=id(n,sh,ud,zf({},Kf,!0));id(o,sh,o);var i=id(n,uh,cd,zf({},Uf,!0));id(i,sh),id(i,uh,i);var a=id(n,fh,vd,zf({},td,!0));sd(n,dh,yd,zf({},td,!0)),sd(a,dh),id(a,fh,a);var s=id(n,ch,oh,zf({},Zf,!0));id(s,ch,s),sd(s,hh,s);var u=sd(s,ph);id(u,ch,s);for(var c=[[sh,o]],l=[[sh,null],[uh,i]],f=0;f<mh.length;f++)yh(n,mh[f],fd,ud,c);for(var d=0;d<vh.length;d++)yh(n,vh[d],dd,cd,l);nd(fd,{tld:!0,ascii:!0},e),nd(dd,{utld:!0,alpha:!0},e),yh(n,"file",hd,ud,c),yh(n,"mailto",hd,ud,c),yh(n,"http",pd,ud,c),yh(n,"https",pd,ud,c),yh(n,"ftp",pd,ud,c),yh(n,"ftps",pd,ud,c),nd(hd,{scheme:!0,ascii:!0},e),nd(pd,{slashscheme:!0,ascii:!0},e),t=t.sort((function(t,e){return t[0]>e[0]?1:-1}));for(var h=0;h<t.length;h++){var p=t[h][0],m=zf({},t[h][1]?Xf:Qf,!0);p.indexOf("-")>=0?m[Yf]=!0:sh.test(p)?lh.test(p)?m[Gf]=!0:m[Kf]=!0:m[Wf]=!0,ad(n,p,p,m)}return ad(n,"localhost",ld,{ascii:!0}),n.jd=new rd(ih),{start:n,tokens:qf({groups:e},ah)}}(Lh.customSchemes);for(var t=0;t<Lh.tokenQueue.length;t++)Lh.tokenQueue[t][1]({scanner:Lh.scanner});Lh.parser=function(t){var e=t.groups,n=e.domain.concat([Fd,_d,Bd,Id,Rd,zd,$d,Wd,Ud,md,Gd,Jd,Yd,Zd,eh,ih,nh,rh]),r=[Nd,Hd,Vd,qd,Kd,Xd,Qd,th,Sd,Dd,gd,bd,kd,wd,xd,Ed,Cd,Od,Ad,jd,Td,Md,Ld,Pd],o=[Fd,Nd,_d,Id,Rd,zd,$d,Wd,Ud,gd,bd,Gd,Jd,Yd,Zd,Xd,eh,ih,nh,rh],i=Ah(),a=sd(i,nh);od(a,o,a),od(a,e.domain,a);var s=Ah(),u=Ah(),c=Ah();od(i,e.domain,s),od(i,e.scheme,u),od(i,e.slashscheme,c),od(s,o,a),od(s,e.domain,s);var l=sd(s,Bd);sd(a,Bd,l),sd(u,Bd,l),sd(c,Bd,l);var f=sd(a,qd);od(f,o,a),od(f,e.domain,a);var d=Ah();od(l,e.domain,d),od(d,e.domain,d);var h=sd(d,qd);od(h,e.domain,d);var p=Ah(Sh);od(h,e.tld,p),od(h,e.utld,p),sd(l,ld,p);var m=sd(d,Ud);od(m,e.domain,d),od(p,e.domain,d),sd(p,qd,h),sd(p,Ud,m);var v=sd(p,Hd);od(v,e.numeric,Sh);var y=sd(s,Ud),g=sd(s,qd);od(y,e.domain,s),od(g,o,a),od(g,e.domain,s);var b=Ah(Oh);od(g,e.tld,b),od(g,e.utld,b),od(b,e.domain,s),od(b,o,a),sd(b,qd,g),sd(b,Ud,y),sd(b,Bd,l);var w=sd(b,Hd),k=Ah(Oh);od(w,e.numeric,k);var x=Ah(Oh),E=Ah();od(x,n,x),od(x,r,E),od(E,n,x),od(E,r,E),sd(b,eh,x),sd(k,eh,x);var S=sd(u,Hd),D=sd(c,Hd),C=sd(D,eh),O=sd(C,eh);od(u,e.domain,s),sd(u,qd,g),sd(u,Ud,y),od(c,e.domain,s),sd(c,qd,g),sd(c,Ud,y),od(S,e.domain,x),sd(S,eh,x),od(O,e.domain,x),od(O,n,x),sd(O,eh,x);for(var A=[[gd,bd],[wd,kd],[xd,Ed],[Sd,Dd],[Cd,Od],[Ad,jd],[Td,Md],[Ld,Pd]],j=0;j<A.length;j++){var T=Lf(A[j],2),M=T[0],L=T[1],P=sd(x,M);sd(E,M,P),sd(P,L,x);var F=Ah(Oh);od(P,n,F);var N=Ah();od(P,r),od(F,n,F),od(F,r,N),od(N,n,F),od(N,r,N),sd(F,L,x),sd(N,L,x)}return sd(i,ld,b),sd(i,yd,Ch),{start:i,tokens:ah}}(Lh.scanner.tokens);for(var e=0;e<Lh.pluginQueue.length;e++)Lh.pluginQueue[e][1]({scanner:Lh.scanner,parser:Lh.parser});Lh.initialized=!0}function Nh(t){return Lh.initialized||Fh(),function(t,e,n){for(var r=n.length,o=0,i=[],a=[];o<r;){for(var s=t,u=null,c=null,l=0,f=null,d=-1;o<r&&!(u=s.go(n[o].t));)a.push(n[o++]);for(;o<r&&(c=u||s.go(n[o].t));)u=null,(s=c).accepts()?(d=0,f=s):d>=0&&d++,o++,l++;if(d<0)(o-=l)<r&&(a.push(n[o]),o++);else{a.length>0&&(i.push(jh(Dh,e,a)),a=[]),o-=d,l-=d;var h=f.t,p=n.slice(o-l,o);i.push(jh(h,e,p))}}return a.length>0&&i.push(jh(Dh,e,a)),i}(Lh.parser.start,t,function(t,e){for(var n=function(t){for(var e=[],n=t.length,r=0;r<n;){var o=t.charCodeAt(r),i=void 0,a=o<55296||o>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(a),r+=a.length}return e}(e.replace(/[A-Z]/g,(function(t){return t.toLowerCase()}))),r=n.length,o=[],i=0,a=0;a<r;){for(var s=t,u=null,c=0,l=null,f=-1,d=-1;a<r&&(u=s.go(n[a]));)(s=u).accepts()?(f=0,d=0,l=s):f>=0&&(f+=n[a].length,d++),c+=n[a].length,i+=n[a].length,a++;i-=f,a-=d,c-=f,o.push({t:l.t,v:e.slice(i-c,i),s:i-c,e:i})}return o}(Lh.scanner.start,t))}function _h(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),e&&"object"===Rf(e)){if(n)throw Error("linkifyjs: Invalid link type ".concat(e,"; must be a string"));n=e,e=null}for(var r=new wh(n),o=Nh(t),i=[],a=0;a<o.length;a++){var s=o[a];!s.isLink||e&&s.t!==e||!r.check(s)||i.push(s.toFormattedObject(r))}return i}function Bh(t){return Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bh(t)}function Ih(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ih(Object(n),!0).forEach((function(e){zh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ih(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zh(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Bh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Bh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bh(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hh(t){return function(t){if(Array.isArray(t))return Vh(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Vh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vh(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $h(t){return new Ye({key:new Qe("autolink"),appendTransaction:function(e,n,r){var o=e.some((function(t){return t.docChanged}))&&!n.doc.eq(r.doc),i=e.some((function(t){return t.getMeta("preventAutolink")}));if(o&&!i){var a=r.tr,s=function(t,e){var n=new ge(t);return e.forEach((function(t){t.steps.forEach((function(t){n.step(t)}))})),n}(n.doc,Hh(e)),u=function(t){var e=t.mapping,n=t.steps,r=[];return e.maps.forEach((function(t,o){var i=[];if(t.ranges.length)t.forEach((function(t,e){i.push({from:t,to:e})}));else{var a=n[o],s=a.from,u=a.to;if(void 0===s||void 0===u)return;i.push({from:s,to:u})}i.forEach((function(t){var n=t.from,i=t.to,a=e.slice(o).map(n,-1),s=e.slice(o).map(i),u=e.invert().map(a,-1),c=e.invert().map(s);r.push({oldRange:{from:u,to:c},newRange:{from:a,to:s}})}))})),Ls(r)}(s);if(u.forEach((function(e){var n,o,i,s,u,c,l=e.newRange,f=(n=r.doc,o=l,i=function(t){return t.isTextblock},s=[],n.nodesBetween(o.from,o.to,(function(t,e){i(t)&&s.push({node:t,pos:e})})),s);if(f.length>1?(u=f[0],c=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ")):f.length&&r.doc.textBetween(l.from,l.to," "," ").endsWith(" ")&&(u=f[0],c=r.doc.textBetween(u.pos,l.to,void 0," ")),u&&c){var d=c.split(" ").filter((function(t){return""!==t}));if(d.length<=0)return!1;var h=d[d.length-1],p=u.pos+c.lastIndexOf(h);if(!h)return!1;_h(h).filter((function(t){return t.isLink})).map((function(t){return Rh(Rh({},t),{},{from:p+t.start+1,to:p+t.end+1})})).filter((function(t){return!r.schema.marks.code||!r.doc.rangeHasMark(t.from,t.to,r.schema.marks.code)})).filter((function(e){return!t.validate||t.validate(e.value)})).forEach((function(e){Ps(e.from,e.to,r.doc).some((function(e){return e.mark.type===t.type}))||a.addMark(e.from,e.to,t.type.create({href:e.href}))}))}})),a.steps.length)return a}}})}var qh=Xs.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate:function(){this.options.protocols.forEach((function(t){"string"!==typeof t?Ph(t.scheme,t.optionalSlashes):Ph(t)}))},onDestroy:function(){rd.groups={},Lh.scanner=null,Lh.parser=null,Lh.tokenQueue=[],Lh.pluginQueue=[],Lh.customSchemes=[],Lh.initialized=!1},inclusive:function(){return this.options.autolink},addOptions:function(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes:function(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML:function(t){var e,n=t.HTMLAttributes;return(null===(e=n.href)||void 0===e?void 0:e.startsWith("javascript:"))?["a",Ia(this.options.HTMLAttributes,Rh(Rh({},n),{},{href:""})),0]:["a",Ia(this.options.HTMLAttributes,n),0]},addCommands:function(){var t=this;return{setLink:function(e){return function(n){return(0,n.chain)().setMark(t.name,e).setMeta("preventAutolink",!0).run()}},toggleLink:function(e){return function(n){return(0,n.chain)().toggleMark(t.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},unsetLink:function(){return function(e){return(0,e.chain)().unsetMark(t.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}}},addPasteRules:function(){return[tu({find:function(t,e){var n,r=null===(n=null===e||void 0===e?void 0:e.clipboardData)||void 0===n?void 0:n.getData("text/html"),o=[];if(r){var i=(new DOMParser).parseFromString(r,"text/html"),a=i.querySelectorAll("a");a.length&&Hh(a).forEach((function(t){return o.push({text:t.innerText,data:{href:t.getAttribute("href")},index:i.body.innerText.indexOf(t.innerText)+t.innerText.length})}))}if(t){var s=_h(t).filter((function(t){return t.isLink}));s.length&&s.forEach((function(t){return o.push({text:t.value,data:{href:t.href},index:t.start})}))}return o},type:this.type,getAttributes:function(t){var e;return{href:null===(e=t.data)||void 0===e?void 0:e.href}}})]},addProseMirrorPlugins:function(){var t=[];return this.options.autolink&&t.push($h({type:this.type,validate:this.options.validate})),this.options.openOnClick&&t.push(function(t){return new Ye({key:new Qe("handleClickLink"),props:{handleClick:function(e,n,r){var o,i;if(0!==r.button)return!1;if("A"!==r.target.nodeName)return!1;var a=Ms(e.state,t.type.name),s=r.target,u=null!==(o=null===s||void 0===s?void 0:s.href)&&void 0!==o?o:a.href,c=null!==(i=null===s||void 0===s?void 0:s.target)&&void 0!==i?i:a.target;return!(!s||!u)&&(e.editable&&window.open(u,c),!0)}}})}({type:this.type})),this.options.linkOnPaste&&t.push(function(t){return new Ye({key:new Qe("handlePasteLink"),props:{handlePaste:function(e,n,r){if(e.state.selection.empty)return!1;var o="";r.content.forEach((function(t){o+=t.textContent}));var i=_h(o).find((function(t){return t.isLink&&t.value===o}));return!(!o||!i)&&(t.editor.commands.setMark(t.type,{href:i.href}),!0)}}})}({editor:this.editor,type:this.type})),t}});function Wh(t){return Wh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(t)}function Kh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return Uh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uh(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jh(r.key),r)}}function Jh(t){var e=function(t,e){if("object"!=Wh(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Wh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wh(e)?e:String(e)}var Yh={documentSelector:".js-document",documentDisabledClass:"is-disabled",openingTriggerActiveClass:"is-active",delay:200},Zh=['[href]:not([tabindex^="-"])','input:not([disabled]):not([type="hidden"]):not([tabindex^="-"]):not([type="radio"])','input[type="radio"]:checked','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])','[contenteditable="true"]:not([tabindex^="-"])'],Xh="Escape",Qh="Tab",tp="F6";function ep(t,e){for(var n=t;n!==e&&n;)n=n.parentNode;return!!n}var np=Symbol("onClick"),rp=Symbol("onKeydown"),op=Symbol("addEventDelegation"),ip=Symbol("addEventListeners"),ap=Symbol("removeEventListeners"),sp=Symbol("addAttributes"),up=Symbol("removeAttributes"),cp=Symbol("setAttributes"),lp=Symbol("setFocusableElements"),fp=Symbol("setFocus"),dp=Symbol("restoreFocus"),hp=Symbol("switchFocus"),pp=Symbol("maintainFocus"),mp=Symbol("addObserver"),vp=Symbol("removeObserver"),yp=Yh;var gp=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.onOpen,i=void 0===o?function(){}:o,a=r.onClose,s=void 0===a?function(){}:a,u=r.openingSelector,c=r.closingSelector,l=r.backdropSelector,f=r.helperSelector,d=r.labelledby,h=r.describedby,p=r.isModal,m=void 0===p||p,v=r.isTooltip,y=void 0!==v&&v,g=r.isOpen,b=void 0!==g&&g,w=r.isCreated,k=void 0===w||w,x=r.disableScroll,E=void 0===x||x,S=r.enableAutoFocus,D=void 0===S||S,C=r.openingTriggerActiveClass,O=void 0===C?yp.openingTriggerActiveClass:C,A=r.delay,j=void 0===A?yp.delay:A;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),document.querySelector(e)?(this.config={dialogSelector:e,onOpen:i,onClose:s,openingSelector:u,closingSelector:c,backdropSelector:l,helperSelector:f,labelledby:d,describedby:h,isModal:m,isTooltip:y,isCreated:k,isOpen:b,disableScroll:E,enableAutoFocus:D,documentSelector:yp.documentSelector,documentDisabledClass:yp.documentDisabledClass,openingTriggerActiveClass:O,delay:j},this.dialog=document.querySelector(e),this.dialogArea="".concat(e,", ").concat(u),this.openingTriggers=document.querySelectorAll(u),this.backdropTrigger=document.querySelector(l),this.helpers=document.querySelectorAll(f),this.document=document.querySelector(this.config.documentSelector)||document.querySelector("html"),this.documentIsAlreadyDisabled=!1,this.focusableElements=[],this.firstFocusableElement=null,this.lastFocusableElement=null,this.openingTrigger=null,this.closingTrigger=null,this.isCreated=!1,this.isOpen=!1,this.close=this.close.bind(this),this.toggle=this.toggle.bind(this),this[np]=this[np].bind(this),this[rp]=this[rp].bind(this),this[op]=this[op].bind(this),this[hp]=this[hp].bind(this),this.observer=new MutationObserver((function(t){return t.forEach((function(){return n[lp]()}))})),this.isInitialized=!0,k&&this.create()):this.isInitialized=!1}var e,n,r;return e=t,(n=[{key:np,value:function(t){this.config.isTooltip&&!t.target.closest(this.dialogArea)&&this.close(t),t.target===this.backdropTrigger&&this.close(t)}},{key:rp,value:function(t){switch(t.key){case Xh:t.stopPropagation(),this.close(t);break;case tp:this.config.isModal||(this.config.isTooltip?this.close(t):this[dp]());break;case Qh:this[pp](t)}}},{key:op,value:function(t){var e=this;document.querySelectorAll(this.config.openingSelector).forEach((function(n){ep(t.target,n)&&(e.openingTrigger=n,e.toggle(t))})),document.querySelectorAll(this.config.closingSelector).forEach((function(n){ep(t.target,n)&&(e.closingTrigger=n,e.close())}))}},{key:ip,value:function(){document.addEventListener("click",this[np],{capture:!0}),this.dialog.addEventListener("keydown",this[rp])}},{key:ap,value:function(){document.removeEventListener("click",this[np],{capture:!0}),this.dialog.removeEventListener("keydown",this[rp]),this.openingTrigger&&this.openingTrigger.removeEventListener("keydown",this[hp])}},{key:sp,value:function(){this.dialog.setAttribute("role","dialog"),this.dialog.setAttribute("tabindex",-1),this.dialog.setAttribute("aria-hidden",!0),this.config.labelledby&&this.dialog.setAttribute("aria-labelledby",this.config.labelledby),this.config.describedby&&this.dialog.setAttribute("aria-describedby",this.config.describedby),this.config.isModal&&this.dialog.setAttribute("aria-modal",!0),this.openingTriggers.forEach((function(t){return t.setAttribute("aria-haspopup","dialog")}))}},{key:up,value:function(){var t=this;this.dialog.removeAttribute("role"),this.dialog.removeAttribute("tabindex"),this.dialog.removeAttribute("aria-hidden"),this.dialog.removeAttribute("aria-labelledby"),this.dialog.removeAttribute("aria-describedby"),this.dialog.removeAttribute("aria-modal"),this.config.disableScroll&&this.isOpen&&!this.documentIsAlreadyDisabled&&this.document.classList.remove(this.config.documentDisabledClass),this.openingTriggers.forEach((function(t){return t.removeAttribute("aria-haspopup")})),this.openingTrigger&&this.openingTrigger.classList.remove(this.config.openingTriggerActiveClass),this.helpers.forEach((function(e){return e.classList.remove(t.config.openingTriggerActiveClass)}))}},{key:cp,value:function(){var t=this;this.dialog.setAttribute("aria-hidden",!this.isOpen),this.config.disableScroll&&!this.documentIsAlreadyDisabled&&(this.isOpen?this.document.classList.add(this.config.documentDisabledClass):this.document.classList.remove(this.config.documentDisabledClass)),this.openingTrigger&&(this.isOpen?this.openingTrigger.classList.add(this.config.openingTriggerActiveClass):this.openingTrigger.classList.remove(this.config.openingTriggerActiveClass)),this.helpers.forEach((function(e){t.isOpen?e.classList.add(t.config.openingTriggerActiveClass):e.classList.remove(t.config.openingTriggerActiveClass)}))}},{key:lp,value:function(){var t,e,n=(t=this.dialog.querySelectorAll(Zh),e=[],t.forEach((function(t){var n=t.getBoundingClientRect();(n.width>0||n.height>0)&&e.push(t)})),e),r=function(t,e,n){var r=t.querySelectorAll(e),o=[],i=!1;return 0===r.length?n:(n.forEach((function(t){r.forEach((function(e){e.contains(t)&&(i=!0)})),i||o.push(t),i=!1})),o)}(this.dialog,'[role="dialog"]',n);this.focusableElements=r.length>0?r:[this.dialog];var o=Kh(this.focusableElements,1);this.firstFocusableElement=o[0],this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1]}},{key:fp,value:function(){var t=this;this.config.enableAutoFocus&&window.setTimeout((function(){return t.firstFocusableElement.focus()}),this.config.delay)}},{key:dp,value:function(){var t=this;this.config.enableAutoFocus&&window.setTimeout((function(){return t.openingTrigger.focus()}),this.config.delay),this.isOpen&&this.openingTrigger.addEventListener("keydown",this[hp])}},{key:hp,value:function(t){t.key===tp&&(this.openingTrigger.removeEventListener("keydown",this[hp]),this[fp]())}},{key:pp,value:function(t){t.shiftKey&&t.target===this.firstFocusableElement&&(t.preventDefault(),this.lastFocusableElement.focus()),t.shiftKey||t.target!==this.lastFocusableElement||(t.preventDefault(),this.firstFocusableElement.focus())}},{key:mp,value:function(){this.observer.observe(this.dialog,{childList:!0,attributes:!0,subtree:!0})}},{key:vp,value:function(){this.observer.disconnect()}},{key:"open",value:function(){this.isInitialized&&this.isCreated&&!this.isOpen&&(this.isOpen=!0,this.documentIsAlreadyDisabled=this.document.classList.contains(this.config.documentDisabledClass),this[cp](),this[ip](),this[fp](),this.config.onOpen(this.dialog,this.openingTrigger))}},{key:"close",value:function(t){this.isInitialized&&this.isCreated&&this.isOpen&&(this.isOpen=!1,t&&t.preventDefault(),this[cp](),this[ap](),this.openingTrigger&&(!this.config.isTooltip||this.config.isTooltip&&t&&"click"!==t.type)&&this[dp](),this.config.onClose(this.dialog,this.closingTrigger))}},{key:"toggle",value:function(t){this.isInitialized&&this.isCreated&&(t&&t.preventDefault(),this.isOpen?this.close():this.open())}},{key:"create",value:function(){this.isInitialized&&!this.isCreated&&(this.isCreated=!0,this[sp](),this[lp](),this[mp](),this.config.isOpen&&this.open(),document.addEventListener("click",this[op],{capture:!0}))}},{key:"destroy",value:function(){this.isInitialized&&this.isCreated&&(this.close(),this.isCreated=!1,this[up](),this[ap](),this[vp](),document.removeEventListener("click",this[op],{capture:!0}))}}])&&Gh(e.prototype,n),r&&Gh(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),bp=gp,wp=function(t){return"".concat(t,"-").concat((new Date).getTime(),"-").concat(Math.random().toString(16).slice(2))};function kp(t){return kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(t)}function xp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ep(r.key),r)}}function Ep(t){var e=function(t,e){if("object"!=kp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kp(e)?e:String(e)}var Sp=function(){function t(e,n){var r=this,o=n.inputs;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e;var i=wp("inputdialog");this.element=document.createElement("div"),this.element.dataset.dialog="".concat(Math.random().toString(36).slice(2));var a="";Object.keys(o).forEach((function(t){var e=o[t],n="";if("select"===e.type){var r=e.options.map((function(t){return'<option value="'.concat(t.value,'">').concat(t.label,"</option>")}));n='<select id="'.concat(i,"-").concat(t,'">').concat(r,"</select>")}else n='<input id="'.concat(i,"-").concat(t,'" type="').concat(e.type||"text",'">');a+='\n        <div data-input="'.concat(t,'">\n          <label>\n            ').concat(e.label,"\n            ").concat(n,"\n          </label>\n        </div>\n      ")}));var s=Xl("editor.inputDialog"),u=this.element.dataset.dialog;this.element.innerHTML='\n      <div id="'.concat(u,'-content">\n        <button type="button" data-dialog-close="').concat(u,'" data-dialog-closable="" aria-label="').concat(s.close,'">&times</button>\n        <div data-dialog-container>\n          <form class="form-defaults form">\n            <div class="form__wrapper">\n              ').concat(a,'\n            </div>\n            <input type="submit" hidden>\n          </form>\n        </div>\n        <div data-dialog-actions>\n          <button type="button" class="button button__sm md:button__lg button__transparent-secondary" data-action="cancel">').concat(s["buttons.cancel"],'</button>\n          <button type="button" class="button button__sm md:button__lg button__secondary" data-action="save">').concat(s["buttons.save"],"</button>\n        </div>\n      </div>\n    "),document.body.appendChild(this.element),this.dialog=new bp('[data-dialog="'.concat(u,'"]'),{closingSelector:'[data-dialog-close="'.concat(u,'"]'),backdropSelector:'[data-dialog="'.concat(u,'"]'),enableAutoFocus:!1,onOpen:function(){setTimeout((function(){return r.focusFirstInput()}),0)},onClose:function(){setTimeout((function(){return r.handleClose()}),0)}}),this.element.querySelector("form").addEventListener("submit",(function(t){t.preventDefault(),r.element.querySelector("button[data-action='save']").dispatchEvent(new Event("click"))})),this.element.querySelectorAll("button[data-action]").forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault(),r.action=t.dataset.action,r.close()}))}))}var e,n,r;return e=t,n=[{key:"toggle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){t.element.querySelectorAll("[data-input]").forEach((function(t){var n=t.querySelector("input, select"),r=e[t.dataset.input];n.value=r||""})),t.callback=n,t.action=null,t.editor.commands.toggleDialog(!0),t.dialog.open()}))}},{key:"close",value:function(){this.dialog.close()}},{key:"destroy",value:function(){this.dialog.destroy(),this.element.remove(),Reflect.deleteProperty(this,"dialog")}},{key:"handleClose",value:function(){this.editor.chain().toggleDialog(!1).focus(null,{scrollIntoView:!1}).run(),this.callback&&(this.callback(this.action),this.callback=null),this.action&&(this.action=null),this.destroy()}},{key:"focusFirstInput",value:function(){var t=this.element.querySelector("input, select");t&&t.focus()}},{key:"getValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=this.element.querySelector('[data-input="'.concat(t,'"]'));if(!e)return null;var n=e.querySelector("input, select");return n?n.value:null}}],n&&xp(e.prototype,n),r&&xp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dp(t){return Dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(t)}function Cp(t){return function(t){if(Array.isArray(t))return Op(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Op(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Op(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Op(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ap(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jp(r.key),r)}}function jp(t){var e=function(t,e){if("object"!=Dp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Dp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dp(e)?e:String(e)}function Tp(t){return Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(t)}function Mp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lp(r.key),r)}}function Lp(t){var e=function(t,e){if("object"!=Tp(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Tp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tp(e)?e:String(e)}function Pp(t,e,n){return e=Np(e),function(t,e){if(e&&("object"===Tp(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fp()?Reflect.construct(e,n||[],Np(t).constructor):e.apply(t,n))}function Fp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fp=function(){return!!t})()}function Np(t){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Np(t)}function _p(t,e){return _p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_p(t,e)}var Bp=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pp(this,e,arguments)}var n,r,o;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_p(t,e)}(e,t),n=e,(r=[{key:"shouldDisplay",value:function(){return this.editor.isActive("link")}},{key:"display",value:function(){var t=this.editor.getAttributes("link").href;this.element.querySelector("[data-linkbubble-value]").textContent=t}},{key:"handleAction",value:function(t){"remove"===t?this.editor.chain().focus(null,{scrollIntoView:!1}).unsetLink().run():this.editor.commands.linkDialog()}}])&&Mp(n.prototype,r),o&&Mp(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(function(){function t(e){var n,r,o=this,i=e.editor,a=e.element,s=e.pluginKey;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=i,this.element=a,this.element.querySelectorAll("button").forEach((function(t){var e=t.dataset.action;t.addEventListener("click",(function(t){t.preventDefault(),o.handleAction(e)}))})),this.bubble=(n=this.element,(r=document.createElement("div")).style.cssText="\n    z-index: 9999;\n    position: absolute;\n    visibility: hidden;\n    inset: 0 auto auto 0;\n    margin: 0;\n  ",r.dataset.bubbleMenu="",r.append(n),r),this.bubbleShown=!1,this.plugin=function(t,e){return new Ye({key:t,view:function(){return{update:function(t,n){var r=t.state;n&&n.doc.eq(r.doc)&&n.selection.eq(r.selection)||e.handleSelectionChange(t)}}}})}(s,this),this.editor.registerPlugin(this.plugin)}var e,n,r;return e=t,(n=[{key:"show",value:function(){this.bubbleShown||(this.editor.view.dom.parentElement.append(this.bubble),this.bubble.style.visibility="visible",this.bubbleShown=!0)}},{key:"hide",value:function(){this.bubbleShown&&(this.bubble.style.visibility="hidden",this.bubble.remove(),this.bubbleShown=!1)}},{key:"destroy",value:function(){this.hide(),this.bubble=null,this.editor.unregisterPlugin(this.plugin.key)}},{key:"handleSelectionChange",value:function(t){if(!this.editor.commands.isDialogOpen())return this.shouldDisplay(t)?(this.display(t),this.show(),void this.updatePosition(t)):void this.hide();this.hide()}},{key:"getReferenceRect",value:function(t){var e=t.state,n=e.selection.ranges,r=Math.min.apply(Math,Cp(n.map((function(t){return t.$from.pos})))),o=Math.max.apply(Math,Cp(n.map((function(t){return t.$to.pos}))));if(e.selection instanceof Be){var i=t.nodeDOM(r);if(i)return i.getBoundingClientRect()}return function(t,e,n){var r=t.state.doc.content.size,o=vs(e,0,r),i=vs(n,0,r),a=t.coordsAtPos(o),s=t.coordsAtPos(i,-1),u=Math.min(a.top,s.top),c=Math.max(a.bottom,s.bottom),l=Math.min(a.left,s.left),f=Math.max(a.right,s.right),d={top:u,bottom:c,left:l,right:f,width:f-l,height:c-u,x:l,y:u};return Aa(Aa({},d),{},{toJSON:function(){return d}})}(t,r,o)}},{key:"updatePosition",value:function(t){var e=t.dom.getBoundingClientRect(),n=this.getReferenceRect(t),r=n.left-e.left,o=n.top-e.top,i=this.bubble.clientWidth,a=this.bubble.clientHeight,s=Math.round(r-i/2);s<5&&(s=5);var u=Math.round(o+a-5);u<5&&(u=5),this.bubble.style.transform="translate(".concat(s,"px, ").concat(u,"px)")}},{key:"shouldDisplay",value:function(){return!1}},{key:"display",value:function(){}},{key:"handleAction",value:function(){}}])&&Ap(e.prototype,n),r&&Ap(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Ip(t){return Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(t)}function Rp(t){return function(t){if(Array.isArray(t))return zp(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return zp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hp(){Hp=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ip(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Ip(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Vp(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function $p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$p(Object(n),!0).forEach((function(e){Wp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wp(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Ip(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ip(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ip(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kp=qh.extend({addStorage:function(){return{bubbleMenu:null}},onCreate:function(){var t,e,n,r;null===(t=this.parent)||void 0===t||t.call(this),this.storage.bubbleMenu=(e=this.editor,new Bp({editor:e,element:(n=Xl("editor.extensions.link.bubbleMenu"),r=document.createElement("div"),r.dataset.linkbubble="",r.innerHTML="\n    <span data-linkbubble-content>\n      ".concat(n.url,':\n      <span data-linkbubble-value></span>\n    </span>\n    <span data-linkbubble-actions>\n      <button type="button" data-action="edit">').concat(n.edit,'</button>\n      <button type="button" data-action="remove">').concat(n.remove,"</button>\n    </span>\n  "),r),pluginKey:new Qe("LinkBubble")}))},onDestroy:function(){var t;null===(t=this.parent)||void 0===t||t.call(this),this.storage.bubbleMenu.destroy(),this.storage.bubbleMenu=null},addOptions:function(){var t;return qp(qp({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{},{allowTargetControl:!1,HTMLAttributes:{target:"_blank",class:null}})},addCommands:function(){var t,e=this,n=Xl("editor.extensions.link");return qp(qp({},null===(t=this.parent)||void 0===t?void 0:t.call(this)),{},{toggleLinkBubble:function(){return function(t){return t.dispatch?e.editor.isActive("link")?(e.storage.bubbleMenu.show(),!0):(e.storage.bubbleMenu.hide(),!1):e.editor.isActive("link")}},linkDialog:function(){return function(){var t,r=(t=Hp().mark((function t(r){var o,i,a,s,u,c,l,f,d;return Hp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.dispatch,i=r.commands,!o){t.next=21;break}return i.extendMarkRange("link"),e.storage.bubbleMenu.hide(),a=e.options.allowTargetControl,s=e.editor.getAttributes("link"),u=s.href,c=s.target,l={href:{type:"text",label:n.hrefLabel}},a&&(l.target={type:"select",label:n.targetLabel,options:[{value:"",label:n["targets.default"]},{value:"_blank",label:n["targets.blank"]}]}),f=new Sp(e.editor,{inputs:l}),t.next=11,f.toggle({href:u,target:c});case 11:if(d=t.sent,u=f.getValue("href"),c=f.getValue("target"),a?(!c||c.length<1)&&(c=null):c="_blank","save"===d){t.next=18;break}return e.editor.chain().focus(null,{scrollIntoView:!1}).toggleLinkBubble().run(),t.abrupt("return",!1);case 18:if(u&&!(u.trim().length<1)){t.next=20;break}return t.abrupt("return",e.editor.chain().focus(null,{scrollIntoView:!1}).unsetLink().run());case 20:return t.abrupt("return",e.editor.chain().focus(null,{scrollIntoView:!1}).setLink({href:u,target:c}).toggleLinkBubble().run());case 21:return t.abrupt("return",!0);case 22:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Vp(i,r,o,a,s,"next",t)}function s(t){Vp(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()}})},addProseMirrorPlugins:function(){var t,e=this.editor;return[].concat(Rp((null===(t=this.parent)||void 0===t?void 0:t.call(this))||{}),[new Ye({props:{handleDoubleClick:function(){return!!e.isActive("link")&&(e.chain().focus().linkDialog().run(),!0)}}})])}});function Up(t){return Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(t)}function Gp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gp(Object(n),!0).forEach((function(e){Yp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yp(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Up(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Up(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Up(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zp(){Zp=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Up(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Up(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Xp(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function Qp(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Xp(i,r,o,a,s,"next",t)}function s(t){Xp(i,r,o,a,s,"throw",t)}a(void 0)}))}}var tm=function(){var t=Qp(Zp().mark((function t(e){var n;return Zp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n='{\n    users(filter: { wildcard: "'.concat(e,'" }) {\n      nickname,\n      name,\n      avatarUrl,\n      __typename,\n      ...on UserGroup { membersCount }\n    }\n  }'),t.abrupt("return",fetch("/api",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})}).then((function(t){if(t.ok)return t.json();throw new Error("Could not retrieve data")})).then((function(t){return t.data.users||[]})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),em=pl.extend({addOptions:function(){var t,e,n=null===(t=this.parent)||void 0===t?void 0:t.call(this);return Jp(Jp({},n),{},{renderLabel:function(t){var e,n=t.node;return"".concat(null!==(e=n.attrs.label)&&void 0!==e?e:n.attrs.id)},suggestion:Jp(Jp({},null===n||void 0===n?void 0:n.suggestion),{},{allowSpaces:!0,items:(e=Qp(Zp().mark((function t(e){var n,r,o;return Zp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=e.query).length<2)){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,tm(n);case 5:return r=t.sent,o=r.sort((function(t){return t.nickname.slice(1)})),t.abrupt("return",o.slice(0,5));case 8:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)}),render:ml(this,{itemConverter:function(t){return{id:t.nickname,label:"".concat(t.nickname," (").concat(t.name,")")}}})})})},addNodeView:function(){return vl(this)}});function nm(t){return nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(t)}function rm(){rm=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==nm(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(nm(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function om(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}var im=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be)(.+)?$/,am=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be)(.+)?$/g,sm=/^(https?:\/\/)?(www\.|player\.)?(vimeo\.com)(.+)?$/,um=/^(https?:\/\/)?(www\.|player\.)?(vimeo\.com)(.+)?$/g,cm=function(t){var e=t.url;return function(t){return t.match(im)}(e)?function(t){var e="https://www.youtube-nocookie.com/embed/",n=t.url;if(n.includes("/embed/"))return n;if(n.includes("youtu.be")){var r=n.split("/").pop();return r?"".concat(e).concat(r):null}var o=/v=([-\w]+)/gm.exec(n);if(!o||!o[1])return null;var i="".concat(e).concat(o[1]),a={ccLoadPolicy:1,modestbranding:1},s={};return Object.keys(a).forEach((function(t){var e=t.replace(/[A-Z]/g,(function(t){return"_".concat(t.toLowerCase())}));s[e]=a[t]})),"".concat(i,"?").concat(new URLSearchParams(s))}(t):function(t){return t.match(sm)}(e)?function(t){var e=t.url.split("?").shift().split("/").pop();return"".concat("https://player.vimeo.com/video/").concat(e)}(t):e},lm=Qs.create({name:"videoEmbed",draggable:!0,addOptions:function(){return{height:null,width:null,inline:!1}},inline:function(){return this.options.inline},group:function(){return this.options.inline?"inline":"block"},addAttributes:function(){return{src:{default:null,parseHTML:function(t){var e,n,r=null===t||void 0===t||null===(e=t.parentElement)||void 0===e?void 0:e.parentElement,o=null===r||void 0===r||null===(n=r.dataset)||void 0===n?void 0:n.videoEmbed;return o&&o.length>0?o:t.src}},title:{default:null},width:{default:this.options.width},height:{default:this.options.height},frameborder:{default:0},allowfullscreen:{default:!0}}},parseHTML:function(){return[{tag:"div[data-video-embed] div iframe"}]},addCommands:function(){var t=this,e=Xl("editor.extensions.videoEmbed");return{setVideo:function(e){return function(n){return n.commands.insertContent({type:t.name,attrs:e})}},videoEmbedDialog:function(){return function(){var n,r=(n=rm().mark((function n(r){var o,i,a,s;return rm().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.dispatch){n.next=15;break}return o=new Sp(t.editor,{inputs:{src:{type:"text",label:e.urlLabel},title:{type:"text",label:e.titleLabel}}}),i=t.editor.getAttributes("videoEmbed"),a=i.src,s=i.title,n.next=6,o.toggle({src:a,title:s});case 6:if("save"===n.sent){n.next=9;break}return n.abrupt("return",!1);case 9:if(a=o.getValue("src"),s=o.getValue("title"),a&&!(a.length<1)){n.next=14;break}return t.editor.commands.focus(null,{scrollIntoView:!1}),n.abrupt("return",!1);case 14:return n.abrupt("return",t.editor.chain().setVideo({src:a,title:s}).focus(null,{scrollIntoView:!1}).run());case 15:return n.abrupt("return",!0);case 16:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){om(i,r,o,a,s,"next",t)}function s(t){om(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()}}},addPasteRules:function(){return[eu({find:am,type:this.type,getAttributes:function(t){return{src:t.input,title:""}}}),eu({find:um,type:this.type,getAttributes:function(t){return{src:t.input,title:""}}})]},renderHTML:function(t){var e=t.HTMLAttributes,n=e.src;return e.src=cm({url:n}),["div",{class:"editor-content-videoEmbed","data-video-embed":n},["div",{},["iframe",Ia({width:this.options.width,height:this.options.height},e)]]]},addProseMirrorPlugins:function(){var t=this.editor;return[new Ye({props:{handleDoubleClick:function(){return!!t.isActive("videoEmbed")&&(t.chain().focus().videoEmbedDialog().run(),!0)}}})]}}),fm=["skins"],dm=["local","version","cdnUrl"],hm=["compact","flat","shortcodes"];function pm(t){return pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(t)}function mm(){return mm="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=km(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},mm.apply(this,arguments)}function vm(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Fm(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){throw t})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){s=!0,i=t})),f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ym(){ym=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==pm(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(pm(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function gm(t,e,n){return e=km(e),function(t,e){if(e&&("object"===pm(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bm(t)}(t,wm()?Reflect.construct(e,n||[],km(t).constructor):e.apply(t,n))}function bm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wm=function(){return!!t})()}function km(t){return km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},km(t)}function xm(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Em(t,e)}function Em(t,e){return Em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Em(t,e)}function Sm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mm(r.key),r)}}function Dm(t,e,n){return e&&Sm(t.prototype,e),n&&Sm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Om(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||Fm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Am(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Am(Object(n),!0).forEach((function(e){Tm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Am(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tm(t,e,n){return(e=Mm(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mm(t){var e=function(t,e){if("object"!=pm(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=pm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pm(e)?e:String(e)}function Lm(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Pm(t){return function(t){if(Array.isArray(t))return Nm(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Fm(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fm(t,e){if(t){if("string"===typeof t)return Nm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nm(t,e):void 0}}function Nm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _m(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function Bm(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){_m(i,r,o,a,s,"next",t)}function s(t){_m(i,r,o,a,s,"throw",t)}a(void 0)}))}}var Im=function(t,e,n){if(!e.has(t))throw TypeError("Cannot "+n)},Rm=function(t,e,n){return Im(t,e,"read from private field"),n?n.call(t):e.get(t)},zm=function(t,e,n){if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Hm=function(t,e,n,r){return Im(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n},Vm=function(t,e,n){return Im(t,e,"access private method"),n};function $m(t,e,n){var r="https://cdn.jsdelivr.net/npm/emojibase-data@".concat(e,"/").concat(t);return"function"==typeof n?r=n(t,e):"string"==typeof n&&(r="".concat(n,"/").concat(t)),r}function qm(t){return Wm.apply(this,arguments)}function Wm(){return Wm=Bm(ym().mark((function t(e){var n,r,o,i,a,s,u,c,l,f,d,h,p,m=arguments;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(n=m.length>1&&void 0!==m[1]?m[1]:{}).local,o=void 0!==r&&r,i=n.version,a=void 0===i?"latest":i,s=n.cdnUrl,u=Lm(n,dm),c=$m(e,a,s),l=o?localStorage:sessionStorage,f="emojibase/".concat(a,"/").concat(e),!(d=l.getItem(f))){t.next=4;break}return t.abrupt("return",Promise.resolve(JSON.parse(d)));case 4:return t.next=6,fetch(c,jm({credentials:"omit",mode:"cors",redirect:"error"},u));case 6:if((h=t.sent).ok){t.next=9;break}throw new Error("Failed to load Emojibase dataset.");case 9:return t.next=11,h.json();case 11:p=t.sent;try{l.setItem(f,JSON.stringify(p))}catch(v){}return t.abrupt("return",p);case 14:case"end":return t.stop()}}),t)}))),Wm.apply(this,arguments)}var Km={discord:"joypixels",slack:"iamcal"};function Um(t,e,n){return Gm.apply(this,arguments)}function Gm(){return(Gm=Bm(ym().mark((function t(e,n,r){var o;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",qm("".concat(e,"/shortcodes/").concat(null!==(o=Km[n])&&void 0!==o?o:n,".json"),r));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Jm(t,e){if(0===e.length)return t;var n=new Set(t.shortcodes);return e.forEach((function(e){var r=e[t.hexcode];Array.isArray(r)?r.forEach((function(t){return n.add(t)})):r&&n.add(r)})),t.shortcodes=Pm(n),t.skins&&t.skins.forEach((function(t){Jm(t,e)})),t}function Ym(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.forEach((function(t){if(t.skins){var r=t.skins,o=Lm(t,fm);n.push(Jm(o,e)),r.forEach((function(t){var r=jm({},t);o.tags&&(r.tags=Pm(o.tags)),n.push(Jm(r,e))}))}else n.push(Jm(t,e))})),n}function Zm(t,e){return 0===e.length||t.forEach((function(t){Jm(t,e)})),t}function Xm(t){return Qm.apply(this,arguments)}function Qm(){return Qm=Bm(ym().mark((function t(e){var n,r,o,i,a,s,u,c,l,f,d=arguments;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(n=d.length>1&&void 0!==d[1]?d[1]:{}).compact,o=void 0!==r&&r,i=n.flat,a=void 0!==i&&i,s=n.shortcodes,u=void 0===s?[]:s,c=Lm(n,hm),t.next=10,qm("".concat(e,"/").concat(o?"compact":"data",".json"),c);case 10:if(l=t.sent,f=[],t.t0=u.length>0,!t.t0){t.next=17;break}return t.next=16,Promise.all(u.map((function(t){var n;if(t.includes("/")){var r=Om(t.split("/"),2);n=Um(r[0],r[1],c)}else n=Um(e,t,c);return n.catch((function(){return{}}))})));case 16:f=t.sent;case 17:return t.abrupt("return",a?Ym(l,f):Zm(l,f));case 18:case"end":return t.stop()}}),t)}))),Qm.apply(this,arguments)}function tv(t,e){return ev.apply(this,arguments)}function ev(){return(ev=Bm(ym().mark((function t(e,n){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",qm("".concat(e,"/messages.json"),n));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nv(t,e){var n=t.target.closest("[data-emoji]");if(n){var r=e.find((function(t){return t.emoji===n.dataset.emoji}));if(r)return r}return null}function rv(t){var e,n=null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-reduced-motion: reduce)");return t.animate&&!(null!=n&&n.matches)}function ov(t,e){return t.toLowerCase().includes(e.toLowerCase())}function iv(t,e,n,r){if(rv(r)&&t.animate)return t.animate(e,n).finished;var o="normal"===n.direction?1:0,i=Object.entries(e).reduce((function(t,e){var n=Om(e,2),r=n[0],i=n[1];return jm(jm({},t),{},Tm({},r,i[o]))}),{});return Object.assign(t.style,i),Promise.resolve()}function av(t){var e,n=document.createElement("template");return n.innerHTML=t,null==(e=n.content)?void 0:e.firstElementChild}function sv(t){return uv.apply(this,arguments)}function uv(){return uv=Bm(ym().mark((function t(e){var n,r;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(new TextEncoder).encode(e),t.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=t.sent,t.abrupt("return",Array.from(new Uint8Array(r)).map((function(t){return t.toString(16).padStart(2,"0")})).join(""));case 5:case"end":return t.stop()}}),t)}))),uv.apply(this,arguments)}function cv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return jm(jm({},t),{},Tm({},e,lv(e)))}),{})}function lv(t){return"picmo__".concat(t)}function fv(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function dv(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=fv(t)).append.apply(e,r)}function hv(t){try{return window[t].length,!0}catch(e){return!1}}function pv(){return hv("sessionStorage")}function mv(t){var e;return{emoji:t.emoji,label:t.label,tags:t.tags,skins:null==(e=t.skins)?void 0:e.map((function(t){return mv(t)})),order:t.order,custom:!1,hexcode:t.hexcode,version:t.version}}function vv(t,e,n){var r;return!(n&&!n.some((function(e){return e.order===t.group})))&&(ov(t.label,e)||(null==(r=t.tags)?void 0:r.some((function(t){return ov(t,e)}))))}var yv=Dm((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";Cm(this,t),this.locale=e})),gv=[function(t,e){return"1F91D"===t.hexcode&&e<14&&(t.skins=[]),t},function(t,e){return t.skins&&(t.skins=t.skins.filter((function(t){return!t.version||t.version<=e}))),t}];function bv(t,e){return t.filter((function(t){return null!==function(t,e){return gv.some((function(n){return null===n(t,e)}))?null:t}(t,e)}))}var wv={};function kv(t){return wv[t]||(wv[t]=new xv(t)),wv[t]}kv.deleteDatabase=function(t){};var xv=function(t){function e(){return Cm(this,e),gm(this,e,arguments)}return xm(e,t),Dm(e,[{key:"open",value:function(){return Promise.resolve()}},{key:"delete",value:function(){return Promise.resolve()}},{key:"close",value:function(){}},{key:"isPopulated",value:function(){return Promise.resolve(!1)}},{key:"getEmojiCount",value:function(){return Promise.resolve(this.emojis.length)}},{key:"getEtags",value:function(){return Promise.resolve({foo:"bar"})}},{key:"getHash",value:function(){return Promise.resolve("")}},{key:"populate",value:function(t){return this.categories=t.groups,this.emojis=t.emojis,Promise.resolve()}},{key:"getCategories",value:function(t){var e,n=this.categories.filter((function(t){return"component"!==t.key}));if(t.showRecents&&n.unshift({key:"recents",order:-1}),null!=(e=t.custom)&&e.length&&n.push({key:"custom",order:10}),t.categories){var r=t.categories;(n=n.filter((function(t){return r.includes(t.key)}))).sort((function(t,e){return r.indexOf(t.key)-r.indexOf(e.key)}))}else n.sort((function(t,e){return t.order-e.order}));return Promise.resolve(n)}},{key:"getEmojis",value:function(t,e){var n=this.emojis.filter((function(e){return e.group===t.order})).filter((function(t){return t.version<=e})).sort((function(t,e){return null!=t.order&&null!=e.order?t.order-e.order:0})).map(mv);return Promise.resolve(bv(n,e))}},{key:"searchEmojis",value:function(t,e,n,r){var o=this.emojis.filter((function(e){return vv(e,t,r)&&e.version<=n})).map(mv),i=e.filter((function(e){return vv(e,t,r)})),a=[].concat(Pm(bv(o,n)),Pm(i));return Promise.resolve(a)}},{key:"setMeta",value:function(t){this.meta=t}}]),e}(yv);function Ev(t){return Sv.apply(this,arguments)}function Sv(){return(Sv=Bm(ym().mark((function t(e){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"HEAD"});case 3:return t.abrupt("return",t.sent.headers.get("etag"));case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}function Dv(t){var e=function(t,e){var n="https://cdn.jsdelivr.net/npm/emojibase-data@".concat(t,"/").concat(e);return{emojisUrl:"".concat(n,"/data.json"),messagesUrl:"".concat(n,"/messages.json")}}("latest",t),n=e.emojisUrl,r=e.messagesUrl;try{return Promise.all([Ev(n),Ev(r)])}catch(o){return Promise.all([null,null])}}function Cv(t,e,n){return Ov.apply(this,arguments)}function Ov(){return Ov=Bm(ym().mark((function t(e,n,r){var o,i,a,s,u,c,l,f;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getEtags();case 3:o=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),o={};case 9:if(a=(i=o).storedEmojisEtag,s=i.storedMessagesEtag,r===s&&n===a){t.next=19;break}return t.next=13,Promise.all([tv(e.locale),Xm(e.locale)]);case 13:return u=t.sent,c=Om(u,2),l=c[0],f=c[1],t.next=19,e.populate({groups:l.groups,emojis:f,emojisEtag:n,messagesEtag:r});case 19:case"end":return t.stop()}}),t,null,[[0,6]])}))),Ov.apply(this,arguments)}function Av(t,e){return jv.apply(this,arguments)}function jv(){return(jv=Bm(ym().mark((function t(e,n){var r;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getHash();case 2:return r=t.sent,t.abrupt("return",n!==r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Tv(t,e,n){return Mv.apply(this,arguments)}function Mv(){return(Mv=Bm(ym().mark((function t(e,n,r){var o;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r||n(e),t.prev=1,t.next=4,o.open();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.warn("[picmo] IndexedDB not available, falling back to InMemoryStoreFactory"),o=kv(e);case 9:return t.abrupt("return",o);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}function Lv(t,e,n){return Pv.apply(this,arguments)}function Pv(){return Pv=Bm(ym().mark((function t(e,n,r){var o,i,a,s,u,c,l,f,d;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(pv()||!(("undefined"===typeof window?"undefined":pm(window))<"u")){t.next=2;break}throw new Error("Session storage is required to use CDN emoji data.");case 2:return t.next=4,Tv(e,n,r);case 4:return o=t.sent,t.next=7,Dv(e);case 7:return i=t.sent,a=Om(i,2),s=a[0],u=a[1],t.next=13,o.isPopulated();case 13:if(!t.sent){t.next=20;break}if(t.t0=s&&u,!t.t0){t.next=18;break}return t.next=18,Cv(o,s,u);case 18:t.next=28;break;case 20:return t.next=22,Promise.all([tv(e),Xm(e)]);case 22:return c=t.sent,l=Om(c,2),f=l[0],d=l[1],t.next=28,o.populate({groups:f.groups,emojis:d,emojisEtag:s,messagesEtag:u});case 28:return t.abrupt("return",o);case 29:case"end":return t.stop()}}),t)}))),Pv.apply(this,arguments)}function Fv(t,e,n,r,o){return Nv.apply(this,arguments)}function Nv(){return Nv=Bm(ym().mark((function t(e,n,r,o,i){var a,s;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tv(e,n,i);case 2:return a=t.sent,t.next=5,sv(o);case 5:return s=t.sent,t.next=8,a.isPopulated();case 8:if(t.t0=!t.sent,t.t0){t.next=13;break}return t.next=12,Av(a,s);case 12:t.t0=t.sent;case 13:if(t.t1=t.t0,!t.t1){t.next=17;break}return t.next=17,a.populate({groups:r.groups,emojis:o,hash:s});case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t)}))),Nv.apply(this,arguments)}function _v(t,e,n,r,o){return Bv.apply(this,arguments)}function Bv(){return Bv=Bm(ym().mark((function t(e,n,r,o,i){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r&&o?Fv(e,n,r,o,i):Lv(e,n,i));case 1:case"end":return t.stop()}}),t)}))),Bv.apply(this,arguments)}var Iv=function(){function t(){Cm(this,t),this.handleKeyDown=this.handleKeyDown.bind(this)}return Dm(t,[{key:"activate",value:function(t){this.rootElement=t,this.rootElement.addEventListener("keydown",this.handleKeyDown)}},{key:"deactivate",value:function(){var t;null==(t=this.rootElement)||t.removeEventListener("keydown",this.handleKeyDown)}},{key:"focusableElements",get:function(){return this.rootElement.querySelectorAll('input, [tabindex="0"]')}},{key:"lastFocusableElement",get:function(){return this.focusableElements[this.focusableElements.length-1]}},{key:"firstFocusableElement",get:function(){return this.focusableElements[0]}},{key:"checkFocus",value:function(t,e,n){t.target===e&&(n.focus(),t.preventDefault())}},{key:"handleKeyDown",value:function(t){"Tab"===t.key&&this.checkFocus(t,t.shiftKey?this.firstFocusableElement:this.lastFocusableElement,t.shiftKey?this.lastFocusableElement:this.firstFocusableElement)}}]),t}(),Rv=cv("light","dark","auto"),zv=Rv.light,Hv=(Rv.dark,Rv.auto,function(){function t(e){var n=e.template,r=e.classes,o=e.parent;Cm(this,t),this.isDestroyed=!1,this.appEvents={},this.uiEvents=[],this.uiElements={},this.ui={},this.template=n,this.classes=r,this.parent=o,this.keyBindingHandler=this.keyBindingHandler.bind(this)}var e;return Dm(t,[{key:"initialize",value:function(){this.bindAppEvents()}},{key:"setCustomEmojis",value:function(t){this.customEmojis=t}},{key:"setEvents",value:function(t){this.events=t}},{key:"setPickerId",value:function(t){this.pickerId=t}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this.events).emit.apply(e,[t].concat(r))}},{key:"setI18n",value:function(t){this.i18n=t}},{key:"setRenderer",value:function(t){this.renderer=t}},{key:"setEmojiData",value:function(t){var e=this;this.emojiDataPromise=t,t.then((function(t){e.emojiData=t}))}},{key:"updateEmojiData",value:function(t){this.emojiData=t,this.emojiDataPromise=Promise.resolve(t)}},{key:"setOptions",value:function(t){this.options=t}},{key:"renderSync",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.el=this.template.renderSync(jm({classes:this.classes,i18n:this.i18n,pickerId:this.pickerId},t)),this.postRender(),this.el}},{key:"render",value:(e=Bm(ym().mark((function t(){var e,n=arguments;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.next=3,this.emojiDataPromise;case 3:return t.next=5,this.template.renderAsync(jm({classes:this.classes,i18n:this.i18n,pickerId:this.pickerId},e));case 5:return this.el=t.sent,this.postRender(),t.abrupt("return",this.el);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"postRender",value:function(){this.bindUIElements(),this.bindKeyBindings(),this.bindUIEvents(),this.scheduleShowAnimation()}},{key:"bindAppEvents",value:function(){var t=this;Object.keys(this.appEvents).forEach((function(e){t.events.on(e,t.appEvents[e],t)})),this.events.on("data:ready",this.updateEmojiData,this)}},{key:"unbindAppEvents",value:function(){var t=this;Object.keys(this.appEvents).forEach((function(e){t.events.off(e,t.appEvents[e])})),this.events.off("data:ready",this.updateEmojiData)}},{key:"keyBindingHandler",value:function(t){var e=this.keyBindings[t.key];e&&e.call(this,t)}},{key:"bindKeyBindings",value:function(){this.keyBindings&&this.el.addEventListener("keydown",this.keyBindingHandler)}},{key:"unbindKeyBindings",value:function(){this.keyBindings&&this.el.removeEventListener("keydown",this.keyBindingHandler)}},{key:"bindUIElements",value:function(){var t=this;this.ui=Object.keys(this.uiElements).reduce((function(e,n){return jm(jm({},e),{},Tm({},n,t.el.querySelector(t.uiElements[n])))}),{})}},{key:"bindUIEvents",value:function(){var t=this;this.uiEvents.forEach((function(e){e.handler=e.handler.bind(t),(e.target?t.ui[e.target]:t.el).addEventListener(e.event,e.handler,e.options)}))}},{key:"unbindUIEvents",value:function(){var t=this;this.uiEvents.forEach((function(e){(e.target?t.ui[e.target]:t.el).removeEventListener(e.event,e.handler)}))}},{key:"destroy",value:function(){this.unbindAppEvents(),this.unbindUIEvents(),this.unbindKeyBindings(),this.el.remove(),this.isDestroyed=!0}},{key:"scheduleShowAnimation",value:function(){var t=this;if(this.parent){var e=new MutationObserver((function(n){var r=Om(n,1)[0];"childList"===r.type&&r.addedNodes[0]===t.el&&(rv(t.options)&&t.animateShow&&t.animateShow(),e.disconnect)}));e.observe(this.parent,{childList:!0})}}}],[{key:"childEvent",value:function(t,e,n){return{target:t,event:e,handler:n,options:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}}}},{key:"uiEvent",value:function(t,e){return{event:t,handler:e,options:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}}},{key:"byClass",value:function(t){return".".concat(t)}}]),t}());var Vv={clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"/></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"/></svg>',frown:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240zM336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176zM259.9 369.4C288.8 369.4 316.2 375.2 340.6 385.5C352.9 390.7 366.7 381.3 361.4 369.1C344.8 330.9 305.6 303.1 259.9 303.1C214.3 303.1 175.1 330.8 158.4 369.1C153.1 381.3 166.1 390.6 179.3 385.4C203.7 375.1 231 369.4 259.9 369.4L259.9 369.4z"/></svg>',gamepad:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M448 64H192C85.96 64 0 149.1 0 256s85.96 192 192 192h256c106 0 192-85.96 192-192S554 64 448 64zM247.1 280h-32v32c0 13.2-10.78 24-23.98 24c-13.2 0-24.02-10.8-24.02-24v-32L136 279.1C122.8 279.1 111.1 269.2 111.1 256c0-13.2 10.85-24.01 24.05-24.01L167.1 232v-32c0-13.2 10.82-24 24.02-24c13.2 0 23.98 10.8 23.98 24v32h32c13.2 0 24.02 10.8 24.02 24C271.1 269.2 261.2 280 247.1 280zM431.1 344c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40s39.1 17.88 39.1 40S454.1 344 431.1 344zM495.1 248c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40c22.12 0 39.1 17.88 39.1 40S518.1 248 495.1 248z"/></svg>',lightbulb:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg>',mug:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M512 32H120c-13.25 0-24 10.75-24 24L96.01 288c0 53 43 96 96 96h192C437 384 480 341 480 288h32c70.63 0 128-57.38 128-128S582.6 32 512 32zM512 224h-32V96h32c35.25 0 64 28.75 64 64S547.3 224 512 224zM560 416h-544C7.164 416 0 423.2 0 432C0 458.5 21.49 480 48 480h480c26.51 0 48-21.49 48-48C576 423.2 568.8 416 560 416z"/></svg>',plane:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M482.3 192C516.5 192 576 221 576 256C576 292 516.5 320 482.3 320H365.7L265.2 495.9C259.5 505.8 248.9 512 237.4 512H181.2C170.6 512 162.9 501.8 165.8 491.6L214.9 320H112L68.8 377.6C65.78 381.6 61.04 384 56 384H14.03C6.284 384 0 377.7 0 369.1C0 368.7 .1818 367.4 .5398 366.1L32 256L.5398 145.9C.1818 144.6 0 143.3 0 142C0 134.3 6.284 128 14.03 128H56C61.04 128 65.78 130.4 68.8 134.4L112 192H214.9L165.8 20.4C162.9 10.17 170.6 0 181.2 0H237.4C248.9 0 259.5 6.153 265.2 16.12L365.7 192H482.3z"/></svg>',robot:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M9.375 233.4C3.375 239.4 0 247.5 0 256v128c0 8.5 3.375 16.62 9.375 22.62S23.5 416 32 416h32V224H32C23.5 224 15.38 227.4 9.375 233.4zM464 96H352V32c0-17.62-14.38-32-32-32S288 14.38 288 32v64H176C131.8 96 96 131.8 96 176V448c0 35.38 28.62 64 64 64h320c35.38 0 64-28.62 64-64V176C544 131.8 508.3 96 464 96zM256 416H192v-32h64V416zM224 296C201.9 296 184 278.1 184 256S201.9 216 224 216S264 233.9 264 256S246.1 296 224 296zM352 416H288v-32h64V416zM448 416h-64v-32h64V416zM416 296c-22.12 0-40-17.88-40-40S393.9 216 416 216S456 233.9 456 256S438.1 296 416 296zM630.6 233.4C624.6 227.4 616.5 224 608 224h-32v192h32c8.5 0 16.62-3.375 22.62-9.375S640 392.5 640 384V256C640 247.5 636.6 239.4 630.6 233.4z"/></svg>',sad:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n  <defs>\n    <radialGradient gradientUnits="userSpaceOnUse" cy="10%" id="gradient-0">\n      <stop offset="0" stop-color="hsl(50, 100%, 50%)" />\n      <stop offset="1" stop-color="hsl(50, 100%, 60%)" />\n    </radialGradient>\n  </defs>\n  \x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e\n  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="172.586" cy="207.006" rx="39.974" ry="39.974"/>\n  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="334.523" cy="207.481" rx="39.974" ry="39.974"/>\n  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="313.325" cy="356.208" rx="91.497" ry="59.893"/>\n  <path fill="#55a7ff" d="M 159.427 274.06 L 102.158 363.286 L 124.366 417.011 L 160.476 423.338 L 196.937 414.736 L 218.502 375.214"></path>\n  <path fill="url(#gradient-0)" d="M256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM256 352C290.9 352 323.2 367.8 348.3 394.9C354.3 401.4 364.4 401.7 370.9 395.7C377.4 389.7 377.7 379.6 371.7 373.1C341.6 340.5 301 320 256 320C247.2 320 240 327.2 240 336C240 344.8 247.2 352 256 352H256zM208 369C208 349 179.6 308.6 166.4 291.3C163.2 286.9 156.8 286.9 153.6 291.3C140.6 308.6 112 349 112 369C112 395 133.5 416 160 416C186.5 416 208 395 208 369H208zM303.6 208C303.6 225.7 317.1 240 335.6 240C353.3 240 367.6 225.7 367.6 208C367.6 190.3 353.3 176 335.6 176C317.1 176 303.6 190.3 303.6 208zM207.6 208C207.6 190.3 193.3 176 175.6 176C157.1 176 143.6 190.3 143.6 208C143.6 225.7 157.1 240 175.6 240C193.3 240 207.6 225.7 207.6 208z" />\n</svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>',smiley:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256.3 331.8C208.9 331.8 164.1 324.9 124.5 312.8C112.2 309 100.2 319.7 105.2 331.5C130.1 390.6 188.4 432 256.3 432C324.2 432 382.4 390.6 407.4 331.5C412.4 319.7 400.4 309 388.1 312.8C348.4 324.9 303.7 331.8 256.3 331.8H256.3zM176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176zM336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240z"/></svg>',symbols:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"/></svg>',tree:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M413.8 447.1L256 448l0 31.99C256 497.7 241.8 512 224.1 512c-17.67 0-32.1-14.32-32.1-31.99l0-31.99l-158.9-.0099c-28.5 0-43.69-34.49-24.69-56.4l68.98-79.59H62.22c-25.41 0-39.15-29.8-22.67-49.13l60.41-70.85H89.21c-21.28 0-32.87-22.5-19.28-37.31l134.8-146.5c10.4-11.3 28.22-11.3 38.62-.0033l134.9 146.5c13.62 14.81 2.001 37.31-19.28 37.31h-10.77l60.35 70.86c16.46 19.34 2.716 49.12-22.68 49.12h-15.2l68.98 79.59C458.7 413.7 443.1 447.1 413.8 447.1z"/></svg>',users:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M224 256c70.7 0 128-57.31 128-128S294.7 0 224 0C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3c-95.73 0-173.3 77.6-173.3 173.3C0 496.5 15.52 512 34.66 512H413.3C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304zM479.1 320h-73.85C451.2 357.7 480 414.1 480 477.3C480 490.1 476.2 501.9 470 512h138C625.7 512 640 497.6 640 479.1C640 391.6 568.4 320 479.1 320zM432 256C493.9 256 544 205.9 544 144S493.9 32 432 32c-25.11 0-48.04 8.555-66.72 22.51C376.8 76.63 384 101.4 384 128c0 35.52-11.93 68.14-31.59 94.71C372.7 243.2 400.8 256 432 256z"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n  <defs>\n    <radialGradient id="radial" cy="85%">\n      <stop offset="20%" stop-color="var(--color-secondary)" />\n      <stop offset="100%" stop-color="var(--color-primary)" />\n    </radialGradient>\n  </defs>\n  \x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e\n  <path fill="url(\'#radial\')" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z" />\n</svg>',xmark:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>'},$v={recents:"clock","smileys-emotion":"smiley","people-body":"users","animals-nature":"tree","food-drink":"mug",activities:"gamepad","travel-places":"plane",objects:"lightbulb",symbols:"symbols",flags:"flag",custom:"robot"};function qv(t,e){if(!(t in Vv))return console.warn('Unknown icon: "'.concat(t,'"')),document.createElement("div");var n=function(t,e){var n=av(e);return n.dataset.icon=t,n.classList.add(lv("icon")),n}(t,Vv[t]);return e&&n.classList.add(lv("icon-".concat(e))),n}var Wv,Kv,Uv,Gv,Jv,Yv,Zv,Xv,Qv="sync",ty=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Cm(this,t),zm(this,Uv),zm(this,Jv),zm(this,Zv),zm(this,Wv,void 0),zm(this,Kv,void 0),Hm(this,Wv,e),Hm(this,Kv,n.mode||Qv)}var e;return Dm(t,[{key:"renderSync",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=av(Rm(this,Wv).call(this,t));return Vm(this,Zv,Xv).call(this,e,t),Vm(this,Jv,Yv).call(this,e),Vm(this,Uv,Gv).call(this,e,t),e}},{key:"renderAsync",value:(e=Bm(ym().mark((function t(){var e,n,r=arguments;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},n=av(Rm(this,Wv).call(this,e)),Vm(this,Zv,Xv).call(this,n,e),Vm(this,Jv,Yv).call(this,n),t.next=6,Vm(this,Uv,Gv).call(this,n,e);case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(t){return"sync"===Rm(this,Kv)?this.renderSync(t):this.renderAsync(t)}}]),t}();Wv=new WeakMap,Kv=new WeakMap,Uv=new WeakSet,Gv=function(){var t=Bm(ym().mark((function t(e,n){var r,o,i,a,s;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.querySelectorAll("[data-view]"),o=[],i=vm(r),t.prev=2,s=ym().mark((function t(){var e,r;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.value,(r=n[e.dataset.view])?"sync"!==e.dataset.render?o.push(r.render().then((function(t){return e.replaceWith(t),t}))):e.replaceWith(r.renderSync()):e.remove();case 3:case"end":return t.stop()}}),t)})),i.s();case 5:if((a=i.n()).done){t.next=9;break}return t.delegateYield(s(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),i.e(t.t1);case 14:return t.prev=14,i.f(),t.finish(14);case 17:return t.abrupt("return",Promise.all(o));case 18:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})));return function(e,n){return t.apply(this,arguments)}}(),Jv=new WeakSet,Yv=function(t){t.querySelectorAll("i[data-icon]").forEach((function(t){var e=t.dataset,n=e.icon,r=e.size;t.replaceWith(qv(n,r))}))},Zv=new WeakSet,Xv=function(t,e){return t.querySelectorAll("[data-placeholder]").forEach((function(t){var n=t.dataset.placeholder;if(n&&e[n]){var r=e[n];t.replaceWith.apply(t,Pm([r].flat()))}else console.warn('Missing placeholder element for key "'.concat(n,'"'))})),t};var ey=cv("imagePlaceholder","placeholder"),ny=new ty((function(t){var e=t.classes;return'\n  <div class="'.concat(e.placeholder," ").concat(e.imagePlaceholder,'"></div>\n')})),ry=function(t){function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).classNames;return Cm(this,e),(t=gm(this,e,[{template:ny,classes:ey}])).classNames=n,t}return xm(e,t),Dm(e,[{key:"load",value:function(t){var e=this,n=document.createElement("img");this.classNames&&(n.className=this.classNames),n.addEventListener("load",(function(){e.el.replaceWith(n)}),{once:!0}),Promise.resolve(t).then((function(t){return n.src=t}))}},{key:"renderSync",value:function(){var t=this;return mm(km(e.prototype),"renderSync",this).call(this),this.classNames&&this.classNames.split(" ").forEach((function(e){return t.el.classList.add(e)})),this.el}}]),e}(Hv),oy=cv("customEmoji"),iy=function(){function t(){Cm(this,t)}return Dm(t,[{key:"renderElement",value:function(t){return{content:t}}},{key:"renderImage",value:function(){var t=arguments.length>1?arguments[1]:void 0,e=new ry({classNames:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""});return e.renderSync(),{content:e,resolver:function(){return e.load(t()),e.el}}}},{key:"doRender",value:function(t,e,n){if(t.custom)return this.renderCustom(t,e,n);var r=this.render(t,n),o=r.content,i=r.resolver,a=o instanceof Element?o:o.el;return i&&i(),a}},{key:"doEmit",value:function(t){return t.custom?this.emitCustom(t):this.emit(t)}},{key:"emitCustom",value:function(t){return{url:t.url,label:t.label,emoji:t.emoji,data:t.data}}},{key:"renderCustom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=[oy.customEmoji,n].join(" ").trim(),o=this.renderImage(r,(function(){return t.url})),i=o.content,a=o.resolver,s=i instanceof Element?i:i.el;return a&&a(),s}}]),t}(),ay=new ty((function(t){var e=t.emoji;return"<span>".concat(e,"</span>")})),sy=function(t){function e(){return Cm(this,e),gm(this,e,arguments)}return xm(e,t),Dm(e,[{key:"render",value:function(t){return this.renderElement(ay.renderSync({emoji:t.emoji}))}},{key:"emit",value:function(t){return{emoji:t.emoji,hexcode:t.hexcode,label:t.label}}}]),e}(iy),uy={"categories.activities":"Activities","categories.animals-nature":"Animals & Nature","categories.custom":"Custom","categories.flags":"Flags","categories.food-drink":"Food & Drink","categories.objects":"Objects","categories.people-body":"People & Body","categories.recents":"Recently Used","categories.smileys-emotion":"Smileys & Emotion","categories.symbols":"Symbols","categories.travel-places":"Travel & Places","error.load":"Failed to load emojis","recents.clear":"Clear recent emojis","recents.none":"You haven't selected any emojis yet.",retry:"Try again","search.clear":"Clear search","search.error":"Failed to search emojis","search.notFound":"No results found",search:"Search emojis..."},cy="PicMo";function ly(t){return new fy(t)}ly.deleteDatabase=function(t){return new Promise((function(e,n){var r=indexedDB.deleteDatabase("".concat(cy,"-").concat(t));r.addEventListener("success",e),r.addEventListener("error",n)}))};var fy=function(t){function e(){return Cm(this,e),gm(this,e,arguments)}var n,r,o,i,a,s,u,c,l,f,d,h,p,m;return xm(e,t),Dm(e,[{key:"open",value:(m=Bm(ym().mark((function t(){var e,n=this;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=indexedDB.open("".concat(cy,"-").concat(this.locale)),t.abrupt("return",new Promise((function(t,r){e.addEventListener("success",(function(e){var r;n.db=null==(r=e.target)?void 0:r.result,t()})),e.addEventListener("error",r),e.addEventListener("upgradeneeded",function(){var t=Bm(ym().mark((function t(e){var r,o;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.db=null==(r=e.target)?void 0:r.result,n.db.createObjectStore("category",{keyPath:"order"}),(o=n.db.createObjectStore("emoji",{keyPath:"emoji"})).createIndex("category","group"),o.createIndex("version","version"),n.db.createObjectStore("meta");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"delete",value:(p=Bm(ym().mark((function t(){var e;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.close(),e=indexedDB.deleteDatabase("".concat(cy,"-").concat(this.locale)),t.next=4,this.waitForRequest(e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"close",value:function(){this.db.close()}},{key:"getEmojiCount",value:(h=Bm(ym().mark((function t(){var e;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.db.transaction("emoji","readonly").objectStore("emoji"),t.next=3,this.waitForRequest(e.count());case 3:return t.abrupt("return",t.sent.target.result);case 4:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getEtags",value:(d=Bm(ym().mark((function t(){var e,n,r,o,i;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.db.transaction("meta","readonly").objectStore("meta"),t.next=3,Promise.all([this.waitForRequest(e.get("emojisEtag")),this.waitForRequest(e.get("messagesEtag"))]);case 3:return n=t.sent,r=Om(n,2),o=r[0],i=r[1],t.abrupt("return",{storedEmojisEtag:o.target.result,storedMessagesEtag:i.target.result});case 8:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"setMeta",value:(f=Bm(ym().mark((function t(e){var n,r;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.db.transaction("meta","readwrite"),r=n.objectStore("meta"),t.abrupt("return",new Promise((function(t){n.oncomplete=t,Object.keys(e).filter(Boolean).forEach((function(t){r.put(e[t],t)}))})));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"getHash",value:(l=Bm(ym().mark((function t(){var e;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.db.transaction("meta","readonly").objectStore("meta"),t.next=3,this.waitForRequest(e.get("hash"));case 3:return t.abrupt("return",t.sent.target.result);case 4:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"isPopulated",value:(c=Bm(ym().mark((function t(){var e;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.db.transaction("category","readonly").objectStore("category"),t.next=3,this.waitForRequest(e.count());case 3:return t.t0=t.sent.target.result,t.abrupt("return",t.t0>0);case 5:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"populate",value:(u=Bm(ym().mark((function t(e){var n,r,o,i,a,s;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.groups,r=e.emojis,o=e.emojisEtag,i=e.messagesEtag,a=e.hash,t.next=3,this.removeAllObjects("category","emoji");case 3:return s=[this.addObjects("category",n),this.addObjects("emoji",r),this.setMeta({emojisEtag:o,messagesEtag:i,hash:a})],t.next=6,Promise.all(s);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"getCategories",value:(s=Bm(ym().mark((function t(e){var n,r,o,i;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.db.transaction("category","readonly").objectStore("category"),t.next=3,this.waitForRequest(r.getAll());case 3:return o=t.sent.target.result.filter((function(t){return"component"!==t.key})),e.showRecents&&o.unshift({key:"recents",order:-1}),null!=(n=e.custom)&&n.length&&o.push({key:"custom",order:10}),e.categories?(i=e.categories,(o=o.filter((function(t){return i.includes(t.key)}))).sort((function(t,e){return i.indexOf(t.key)-i.indexOf(e.key)}))):o.sort((function(t,e){return t.order-e.order})),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"getEmojis",value:(a=Bm(ym().mark((function t(e,n){var r,o;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.db.transaction("emoji","readonly").objectStore("emoji").index("category"),t.next=3,this.waitForRequest(r.getAll(e.order));case 3:return o=t.sent.target.result.filter((function(t){return t.version<=n})).sort((function(t,e){return null!=t.order&&null!=e.order?t.order-e.order:0})).map(mv),t.abrupt("return",bv(o,n));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"searchEmojis",value:(i=Bm(ym().mark((function t(e,n,r,o){var i,a=this;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=[],t.abrupt("return",new Promise((function(t,s){var u=a.db.transaction("emoji","readonly").objectStore("emoji").openCursor();u.addEventListener("success",(function(a){var s,u=null==(s=a.target)?void 0:s.result;if(!u)return t([].concat(Pm(bv(i,r)),Pm(n.filter((function(t){return vv(t,e)})))));var c=u.value;vv(c,e,o)&&c.version<=r&&i.push(mv(c)),u.continue()})),u.addEventListener("error",(function(t){s(t)}))})));case 2:case"end":return t.stop()}}),t)}))),function(t,e,n,r){return i.apply(this,arguments)})},{key:"waitForRequest",value:(o=Bm(ym().mark((function t(e){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.onsuccess=t,e.onerror=n})));case 1:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"withTransaction",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readwrite",r=arguments.length>2?arguments[2]:void 0;return new Promise((function(o,i){var a=e.db.transaction(t,n);a.oncomplete=o,a.onerror=i,r(a)}))}},{key:"removeAllObjects",value:(r=Bm(ym().mark((function t(){var e,n,r,o,i,a=this,s=arguments;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=s.length,n=new Array(e),r=0;r<e;r++)n[r]=s[r];return o=this.db.transaction(n,"readwrite"),i=n.map((function(t){return o.objectStore(t)})),t.next=4,Promise.all(i.map((function(t){return a.waitForRequest(t.clear())})));case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"addObjects",value:(n=Bm(ym().mark((function t(e,n){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.withTransaction(e,"readwrite",(function(t){var r=t.objectStore(e);n.forEach((function(t){r.add(t)}))})));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})}]),e}(yv);function dy(){var t={};return{getItem:function(e){return t[e]},setItem:function(e,n){return t[e]=n},length:Object.keys(t).length,clear:function(){return t={}},key:function(e){return Object.keys(t)[e]},removeItem:function(e){return delete t[e]}}}var hy,py,my,vy,yy,gy=Dm((function t(){Cm(this,t)})),by="PicMo:recents",wy=function(t){function e(t){var n;return Cm(this,e),(n=gm(this,e)).storage=t,n}return xm(e,t),Dm(e,[{key:"clear",value:function(){this.storage.removeItem(by)}},{key:"getRecents",value:function(t){var e;try{return JSON.parse(null!=(e=this.storage.getItem(by))?e:"[]").slice(0,t)}catch(n){return[]}}},{key:"addOrUpdateRecent",value:function(t,e){var n=[t].concat(Pm(this.getRecents(e).filter((function(e){return e.hexcode!==t.hexcode})))).slice(0,e);try{this.storage.setItem(by,JSON.stringify(n))}catch(r){console.warn("storage is not available, recent emojis will not be saved")}}}]),e}(gy),ky=function(t){function e(){return Cm(this,e),gm(this,e,[hv("localStorage")?localStorage:dy()])}return xm(e,t),Dm(e)}(wy),xy={dataStore:ly,theme:zv,animate:!0,showCategoryTabs:!0,showPreview:!0,showRecents:!0,showSearch:!0,showVariants:!0,emojisPerRow:8,visibleRows:6,emojiVersion:"auto",i18n:uy,locale:"en",maxRecents:50,custom:[]};function Ey(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jm(jm(jm({},xy),t),{},{renderer:t.renderer||new sy,recentsProvider:t.recentsProvider||new ky})}var Sy=function(){function t(){Cm(this,t),zm(this,py),zm(this,vy),zm(this,hy,new Map)}return Dm(t,[{key:"on",value:function(t,e,n){Vm(this,vy,yy).call(this,t,e,n)}},{key:"once",value:function(t,e,n){Vm(this,vy,yy).call(this,t,e,n,!0)}},{key:"off",value:function(t,e){var n=Vm(this,py,my).call(this,t);Rm(this,hy).set(t,n.filter((function(t){return t.handler!==e})))}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Vm(this,py,my).call(this,t).forEach((function(n){n.handler.apply(n.context,r),n.once&&e.off(t,n.handler)}))}},{key:"removeAll",value:function(){Rm(this,hy).clear()}}]),t}();hy=new WeakMap,py=new WeakSet,my=function(t){return Rm(this,hy).has(t)||Rm(this,hy).set(t,[]),Rm(this,hy).get(t)},vy=new WeakSet,yy=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Vm(this,py,my).call(this,t).push({context:n,handler:e,once:r})};var Dy=!0,Cy=function(t){function e(){return Cm(this,e),gm(this,e,arguments)}return xm(e,t),Dm(e)}(Sy),Oy=function(t){function e(){return Cm(this,e),gm(this,e,arguments)}return xm(e,t),Dm(e)}(Sy),Ay=cv("emojiCategory","categoryName","noRecents","recentEmojis"),jy=function(t){function e(t){var n,r=t.template,o=t.category,i=t.showVariants,a=t.lazyLoader;return Cm(this,e),(n=gm(this,e,[{template:r,classes:Ay}])).baseUIElements={categoryName:Hv.byClass(Ay.categoryName)},n.category=o,n.showVariants=i,n.lazyLoader=a,n}return xm(e,t),Dm(e,[{key:"setActive",value:function(t,e,n){this.emojiContainer.setActive(t,e,n)}}]),e}(Hv),Ty=new ty((function(t){var e=t.classes,n=t.emoji;return'\n  <button\n    type="button"\n    class="'.concat(e.emojiButton,'"\n    title="').concat(n.label,'"\n    data-emoji="').concat(n.emoji,'"\n    tabindex="-1">\n    <div data-placeholder="emojiContent"></div>\n  </button>\n')})),My=cv("emojiButton"),Ly=function(t){function e(t){var n,r=t.emoji,o=t.lazyLoader,i=t.category;return Cm(this,e),(n=gm(this,e,[{template:Ty,classes:My}])).emoji=r,n.lazyLoader=o,n.category=i,n}return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiEvents=[Hv.uiEvent("focus",this.handleFocus)],mm(km(e.prototype),"initialize",this).call(this)}},{key:"handleFocus",value:function(){this.category&&this.events.emit("focus:change",this.category)}},{key:"activateFocus",value:function(t){this.el.tabIndex=0,t&&this.el.focus()}},{key:"deactivateFocus",value:function(){this.el.tabIndex=-1}},{key:"renderSync",value:function(){return mm(km(e.prototype),"renderSync",this).call(this,{emoji:this.emoji,emojiContent:this.renderer.doRender(this.emoji,this.lazyLoader)})}}]),e}(Hv),Py=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Cm(this,t),this.events=new Sy,this.keyHandlers={ArrowLeft:this.focusPrevious.bind(this),ArrowRight:this.focusNext.bind(this),ArrowUp:this.focusUp.bind(this),ArrowDown:this.focusDown.bind(this)},this.rowCount=Math.ceil(n/e),this.columnCount=e,this.focusedRow=r,this.focusedColumn=o,this.emojiCount=n,this.wrap=i,this.handleKeyDown=this.handleKeyDown.bind(this)}return Dm(t,[{key:"destroy",value:function(){this.events.removeAll()}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"handleKeyDown",value:function(t){t.key in this.keyHandlers&&(t.preventDefault(),this.keyHandlers[t.key]())}},{key:"setCell",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getIndex();this.focusedRow=t,void 0!==e&&(this.focusedColumn=Math.min(this.columnCount,e)),(this.focusedRow>=this.rowCount||this.getIndex()>=this.emojiCount)&&(this.focusedRow=this.rowCount-1,this.focusedColumn=this.emojiCount%this.columnCount-1),this.events.emit("focus:change",{from:r,to:this.getIndex(),performFocus:n})}},{key:"setFocusedIndex",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Math.floor(t/this.columnCount),r=t%this.columnCount;this.setCell(n,r,e)}},{key:"focusNext",value:function(){this.focusedColumn<this.columnCount-1&&this.getIndex()<this.emojiCount-1?this.setCell(this.focusedRow,this.focusedColumn+1):this.focusedRow<this.rowCount-1?this.setCell(this.focusedRow+1,0):this.wrap?this.setCell(0,0):this.events.emit("focus:overflow",0)}},{key:"focusPrevious",value:function(){this.focusedColumn>0?this.setCell(this.focusedRow,this.focusedColumn-1):this.focusedRow>0?this.setCell(this.focusedRow-1,this.columnCount-1):this.wrap?this.setCell(this.rowCount-1,this.columnCount-1):this.events.emit("focus:underflow",this.columnCount-1)}},{key:"focusUp",value:function(){this.focusedRow>0?this.setCell(this.focusedRow-1,this.focusedColumn):this.events.emit("focus:underflow",this.focusedColumn)}},{key:"focusDown",value:function(){this.focusedRow<this.rowCount-1?this.setCell(this.focusedRow+1,this.focusedColumn):this.events.emit("focus:overflow",this.focusedColumn)}},{key:"focusToIndex",value:function(t){this.setCell(Math.floor(t/this.columnCount),t%this.columnCount)}},{key:"getIndex",value:function(){return this.focusedRow*this.columnCount+this.focusedColumn}},{key:"getCell",value:function(){return{row:this.focusedRow,column:this.focusedColumn}}},{key:"getRowCount",value:function(){return this.rowCount}}]),t}(),Fy=new ty((function(t){var e=t.classes;return'\n  <div class="'.concat(e.emojiContainer,'">\n    <div data-placeholder="emojis"></div>\n  </div>\n')})),Ny=cv("emojiContainer"),_y=function(t){function e(t){var n,r=t.emojis,o=t.showVariants,i=t.preview,a=void 0===i||i,s=t.lazyLoader,u=t.category,c=t.fullHeight,l=void 0!==c&&c;return Cm(this,e),(n=gm(this,e,[{template:Fy,classes:Ny}])).fullHeight=!1,n.showVariants=o,n.lazyLoader=s,n.preview=a,n.emojis=r,n.category=u,n.fullHeight=l,n.setFocus=n.setFocus.bind(bm(n)),n.triggerNextCategory=n.triggerNextCategory.bind(bm(n)),n.triggerPreviousCategory=n.triggerPreviousCategory.bind(bm(n)),n}return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.grid=new Py(this.options.emojisPerRow,this.emojiCount,0,0,!this.category),this.grid.on("focus:change",this.setFocus),this.grid.on("focus:overflow",this.triggerNextCategory),this.grid.on("focus:underflow",this.triggerPreviousCategory),this.uiEvents=[Hv.uiEvent("click",this.selectEmoji),Hv.uiEvent("keydown",this.grid.handleKeyDown)],this.preview&&this.uiEvents.push(Hv.uiEvent("mouseover",this.showPreview),Hv.uiEvent("mouseout",this.hidePreview),Hv.uiEvent("focus",this.showPreview,{capture:!0}),Hv.uiEvent("blur",this.hidePreview,{capture:!0})),mm(km(e.prototype),"initialize",this).call(this)}},{key:"setFocusedView",value:function(t,e){var n=this;if(t)if("string"==typeof t){var r=this.emojis.findIndex((function(e){return e.emoji===t}));this.grid.setFocusedIndex(r,!1),setTimeout((function(){var t,e,o,i,a=n.emojiViews[r].el;a.scrollIntoView();var s=null==(t=a.parentElement)?void 0:t.previousElementSibling;(null==(o=null==(e=a.parentElement)?void 0:e.parentElement)?void 0:o.parentElement).scrollTop-=null!=(i=null==s?void 0:s.offsetHeight)?i:0}))}else"first"===t.row||0===t.row?this.grid.setCell(0,t.offset,e):"last"===t.row&&this.grid.setCell(this.grid.getRowCount()-1,t.offset,e)}},{key:"setActive",value:function(t,e,n){var r;t?this.setFocusedView(e,n):null==(r=this.emojiViews[this.grid.getIndex()])||r.deactivateFocus()}},{key:"renderSync",value:function(){var t=this;return this.emojiViews=this.emojis.map((function(e){return t.viewFactory.create(Ly,{emoji:e,category:t.category,lazyLoader:t.lazyLoader,renderer:t.renderer})})),this.emojiElements=this.emojiViews.map((function(t){return t.renderSync()})),mm(km(e.prototype),"renderSync",this).call(this,{emojis:this.emojiElements,i18n:this.i18n})}},{key:"destroy",value:function(){mm(km(e.prototype),"destroy",this).call(this),this.emojiViews.forEach((function(t){return t.destroy()})),this.grid.destroy()}},{key:"triggerPreviousCategory",value:function(t){this.events.emit("category:previous",t)}},{key:"triggerNextCategory",value:function(t){this.category&&this.events.emit("category:next",t)}},{key:"setFocus",value:function(t){var e,n,r=t.from,o=t.to,i=t.performFocus;null==(e=this.emojiViews[r])||e.deactivateFocus(),null==(n=this.emojiViews[o])||n.activateFocus(i)}},{key:"selectEmoji",value:function(t){t.stopPropagation();var e=nv(t,this.emojis);e&&this.events.emit("emoji:select",{emoji:e,showVariants:this.showVariants})}},{key:"showPreview",value:function(t){var e=t.target.closest("button"),n=null==e?void 0:e.firstElementChild,r=nv(t,this.emojis);r&&this.events.emit("preview:show",r,null==n?void 0:n.cloneNode(!0))}},{key:"hidePreview",value:function(t){nv(t,this.emojis)&&this.events.emit("preview:hide")}},{key:"emojiCount",get:function(){return this.emojis.length}}]),e}(Hv),By=new ty((function(t){var e=t.classes,n=t.category,r=t.pickerId,o=t.icon,i=t.i18n;return'\n  <section class="'.concat(e.emojiCategory,'" role="tabpanel" aria-labelledby="').concat(r,"-category-").concat(n.key,'">\n    <h3 data-category="').concat(n.key,'" class="').concat(e.categoryName,'">\n      <i data-icon="').concat(o,'"></i>\n      ').concat(i.get("categories.".concat(n.key),n.message||n.key),'\n    </h3>\n    <div data-view="emojis" data-render="sync"></div>\n  </section>\n')})),Iy=function(t){function e(t){var n,r=t.category,o=t.showVariants,i=t.lazyLoader,a=t.emojiVersion;return Cm(this,e),(n=gm(this,e,[{category:r,showVariants:o,lazyLoader:i,template:By}])).showVariants=o,n.lazyLoader=i,n.emojiVersion=a,n}var n;return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements=jm({},this.baseUIElements),mm(km(e.prototype),"initialize",this).call(this)}},{key:"render",value:(n=Bm(ym().mark((function t(){var n;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.emojiDataPromise;case 2:return t.next=4,this.emojiData.getEmojis(this.category,this.emojiVersion);case 4:return n=t.sent,t.abrupt("return",(this.emojiContainer=this.viewFactory.create(_y,{emojis:n,showVariants:this.showVariants,lazyLoader:this.lazyLoader,category:this.category.key}),mm(km(e.prototype),"render",this).call(this,{category:this.category,emojis:this.emojiContainer,emojiCount:n.length,icon:$v[this.category.key]})));case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(jy),Ry=function(t){function e(t){var n=t.category,r=t.emojis,o=t.preview,i=void 0===o||o,a=t.lazyLoader;return Cm(this,e),gm(this,e,[{category:n,emojis:r,showVariants:!1,preview:i,lazyLoader:a}])}var n;return xm(e,t),Dm(e,[{key:"addOrUpdate",value:(n=Bm(ym().mark((function t(e){var n,r,o,i;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.el.querySelector('[data-emoji="'.concat(e.emoji,'"]')))&&(this.el.removeChild(n),this.emojis=this.emojis.filter((function(t){return t!==e}))),r=this.viewFactory.create(Ly,{emoji:e}),this.el.insertBefore(r.renderSync(),this.el.firstChild),this.emojis=[e].concat(Pm(this.emojis.filter((function(t){return t!==e})))),this.emojis.length>this.options.maxRecents)for(this.emojis=this.emojis.slice(0,this.options.maxRecents),o=this.el.childElementCount-this.options.maxRecents,i=0;i<o;i++)this.el.lastElementChild&&this.el.removeChild(this.el.lastElementChild);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),e}(_y),zy=new ty((function(t){var e=t.emojiCount,n=t.classes,r=t.category,o=t.pickerId,i=t.icon,a=t.i18n;return'\n  <section class="'.concat(n.emojiCategory,'" role="tabpanel" aria-labelledby="').concat(o,"-category-").concat(r.key,'">\n    <h3 data-category="').concat(r.key,'" class="').concat(n.categoryName,'">\n      <i data-icon="').concat(i,'"></i>\n      ').concat(a.get("categories.".concat(r.key),r.message||r.key),'\n    </h3>\n    <div data-empty="').concat(0===e,'" class="').concat(n.recentEmojis,'">\n      <div data-view="emojis" data-render="sync"></div>\n    </div>\n    <div class="').concat(n.noRecents,'">\n      ').concat(a.get("recents.none"),"\n    </div>\n  </section>\n")}),{mode:"async"}),Hy=function(t){function e(t){var n,r=t.category,o=t.lazyLoader,i=t.provider;return Cm(this,e),(n=gm(this,e,[{category:r,showVariants:!1,lazyLoader:o,template:zy}])).provider=i,n}var n,r;return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements=jm(jm({},this.baseUIElements),{},{recents:Hv.byClass(Ay.recentEmojis)}),this.appEvents={"recent:add":this.addRecent},mm(km(e.prototype),"initialize",this).call(this)}},{key:"addRecent",value:(r=Bm(ym().mark((function t(e){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.emojiContainer.addOrUpdate(e);case 2:this.ui.recents.dataset.empty="false";case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"render",value:(n=Bm(ym().mark((function t(){var n,r;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null==(n=this.provider)?void 0:n.getRecents(this.options.maxRecents),this.emojiContainer=this.viewFactory.create(Ry,{emojis:r,showVariants:!1,lazyLoader:this.lazyLoader,category:this.category.key}),t.next=4,mm(km(e.prototype),"render",this).call(this,{category:this.category,emojis:this.emojiContainer,emojiCount:r.length,icon:$v[this.category.key]});case 4:return t.abrupt("return",this.el);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(jy),Vy=new ty((function(t){var e=t.classes,n=t.category,r=t.pickerId,o=t.icon,i=t.i18n;return'\n  <section class="'.concat(e.emojiCategory,'" role="tabpanel" aria-labelledby="').concat(r,"-category-").concat(n.key,'">\n    <h3 data-category="').concat(n.key,'" class="').concat(e.categoryName,'">\n      <i data-icon="').concat(o,'"></i>\n      ').concat(i.get("categories.".concat(n.key),n.message||n.key),'\n    </h3>\n    <div data-view="emojis" data-render="sync"></div>\n  </section>\n')})),$y=function(t){function e(t){var n=t.category,r=t.lazyLoader;return Cm(this,e),gm(this,e,[{template:Vy,showVariants:!1,lazyLoader:r,category:n}])}var n;return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements=jm({},this.baseUIElements),mm(km(e.prototype),"initialize",this).call(this)}},{key:"render",value:(n=Bm(ym().mark((function t(){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this.emojiContainer=this.viewFactory.create(_y,{emojis:this.customEmojis,showVariants:this.showVariants,lazyLoader:this.lazyLoader,category:this.category.key}),mm(km(e.prototype),"render",this).call(this,{category:this.category,emojis:this.emojiContainer,emojiCount:this.customEmojis.length,icon:$v[this.category.key]})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(jy),qy=function(){function t(){Cm(this,t),this.elements=new Map}return Dm(t,[{key:"lazyLoad",value:function(t,e){return this.elements.set(t,e),t}},{key:"observe",value:function(t){var e=this;if(window.IntersectionObserver){var n=new IntersectionObserver((function(t){t.filter((function(t){return t.intersectionRatio>0})).map((function(t){return t.target})).forEach((function(t){var r=e.elements.get(t);null==r||r(),n.unobserve(t)}))}),{root:t});this.elements.forEach((function(t,e){n.observe(e)}))}else this.elements.forEach((function(t){t()}))}}]),t}(),Wy=cv("emojiArea"),Ky=new ty((function(t){var e=t.classes;return'\n  <div class="'.concat(e.emojiArea,'">\n    <div data-placeholder="emojis"></div>\n  </div>\n')}),{mode:"async"}),Uy={recents:Hy,custom:$y};var Gy=function(t){function e(t){var n,r=t.categoryTabs,o=t.categories,i=t.emojiVersion;return Cm(this,e),(n=gm(this,e,[{template:Ky,classes:Wy}])).selectedCategory=0,n.scrollListenerState="active",n.lazyLoader=new qy,n.categoryTabs=r,n.categories=o,n.emojiVersion=i,n.handleScroll=function(t,e){var n=null;return function(){n||(n=window.setTimeout((function(){t(),n=null}),e))}}(n.handleScroll.bind(bm(n)),100),n}var n,r;return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.appEvents={"category:select":this.handleCategorySelect,"category:previous":this.focusPreviousCategory,"category:next":this.focusNextCategory,"focus:change":this.updateFocusedCategory},this.uiElements={emojis:Hv.byClass(Wy.emojiArea)},this.uiEvents=[Hv.uiEvent("scroll",this.handleScroll)],mm(km(e.prototype),"initialize",this).call(this)}},{key:"focusableEmoji",get:function(){return this.el.querySelector('[tabindex="0"]')}},{key:"render",value:(r=Bm(ym().mark((function t(){var n,r=this;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.emojiCategories=this.categories.map(this.createCategory,this),n={},this.categories.forEach((function(t,e){n["emojis-".concat(t.key)]=r.emojiCategories[e]})),t.t0=mm(km(e.prototype),"render",this),t.t1=this,t.next=7,Promise.all(this.emojiCategories.map((function(t){return t.render()})));case 7:return t.t2=t.sent,t.t3={emojis:t.t2},t.next=11,t.t0.call.call(t.t0,t.t1,t.t3);case 11:return this.lazyLoader.observe(this.el),t.abrupt("return",this.el);case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;mm(km(e.prototype),"destroy",this).call(this),this.emojiCategories.forEach((function(e){var n;null==(n=t.observer)||n.unobserve(e.el),e.destroy()}))}},{key:"handleCategorySelect",value:function(t,e){this.el.style.overflow="hidden",this.selectCategory(t,e),this.el.style.overflow="auto"}},{key:"createCategory",value:function(t){var e=Uy[t.key]||Iy;return this.viewFactory.create(e,{category:t,showVariants:!0,lazyLoader:this.lazyLoader,emojiVersion:this.emojiVersion,provider:this.options.recentsProvider})}},{key:"determineInitialCategory",value:function(){var t,e=this;return this.options.initialCategory&&this.categories.find((function(t){return t.key===e.options.initialCategory}))?this.options.initialCategory:null==(t=this.categories.find((function(t){return"recents"!==t.key})))?void 0:t.key}},{key:"determineFocusTarget",value:function(t){var e=this.emojiCategories.find((function(e){return e.category.key===t}));return this.options.initialEmoji&&(null==e?void 0:e.el.querySelector('[data-emoji="'.concat(this.options.initialEmoji,'"]')))?this.options.initialEmoji:"button"}},{key:"reset",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.events.emit("preview:hide");var e=this.determineInitialCategory();e&&(this.selectCategory(e,{focus:this.determineFocusTarget(e),performFocus:t,scroll:"jump"}),this.selectedCategory=this.getCategoryIndex(e))}},{key:"getCategoryIndex",value:function(t){return this.categories.findIndex((function(e){return e.key===t}))}},{key:"focusPreviousCategory",value:function(t){this.selectedCategory>0&&this.focusCategory(this.selectedCategory-1,{row:"last",offset:null!=t?t:this.options.emojisPerRow})}},{key:"focusNextCategory",value:function(t){this.selectedCategory<this.categories.length-1&&this.focusCategory(this.selectedCategory+1,{row:"first",offset:null!=t?t:0})}},{key:"focusCategory",value:function(t,e){this.selectCategory(t,{focus:e,performFocus:!0})}},{key:"selectCategory",value:(n=Bm(ym().mark((function t(e){var n,r,o,i,a,s,u,c,l=arguments;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:{},this.scrollListenerState="suspend",o=jm({performFocus:!1},n),i=o.focus,a=o.performFocus,s=o.scroll,this.emojiCategories[this.selectedCategory].setActive(!1),u=this.selectedCategory="number"==typeof e?e:this.getCategoryIndex(e),null==(r=this.categoryTabs)||r.setActiveTab(this.selectedCategory,{performFocus:a,scroll:"button"===i}),c=this.emojiCategories[u].el.offsetTop,this.emojiCategories[u].setActive(!0,(f=i)&&"button"!==f?f:{row:"first",offset:0},"button"!==i&&a),s&&(this.el.scrollTop=c),this.scrollListenerState="resume";case 8:case"end":return t.stop()}var f}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"updateFocusedCategory",value:function(t){var e;this.categories[this.selectedCategory].key!==t&&(this.scrollListenerState="suspend",this.selectedCategory=this.getCategoryIndex(t),null==(e=this.categoryTabs)||e.setActiveTab(this.selectedCategory,{changeFocusable:!1,performFocus:!1}),this.scrollListenerState="resume")}},{key:"handleScroll",value:function(){var t=this;if("suspend"!==this.scrollListenerState&&this.categoryTabs)if("resume"!==this.scrollListenerState){var e=this.el.scrollTop,n=this.el.scrollHeight-this.el.offsetHeight,r=this.emojiCategories.findIndex((function(n,r){var o;return e<(null==(o=t.emojiCategories[r+1])?void 0:o.el.offsetTop)})),o={changeFocusable:!1,performFocus:!1,scroll:!1};0===e?this.categoryTabs.setActiveTab(0,o):Math.floor(e)===Math.floor(n)||r<0?this.categoryTabs.setActiveTab(this.categories.length-1,o):this.categoryTabs.setActiveTab(r,o)}else this.scrollListenerState="active"}}]),e}(Hv),Jy=new ty((function(t){var e=t.classList,n=t.classes,r=t.icon,o=t.message;return'\n<div class="'.concat(e,'" role="alert">\n  <div class="').concat(n.iconContainer,'"><i data-size="10x" data-icon="').concat(r,'"></i></div>\n  <h3 class="').concat(n.title,'">').concat(o,"</h3>\n</div>\n")})),Yy=cv("error","iconContainer","title"),Zy=function(t){function e(t){var n,r=t.message,o=t.icon,i=void 0===o?"warning":o,a=t.template,s=void 0===a?Jy:a,u=t.className;return Cm(this,e),(n=gm(this,e,[{template:s,classes:Yy}])).message=r,n.icon=i,n.className=u,n}return xm(e,t),Dm(e,[{key:"renderSync",value:function(){var t=[Yy.error,this.className].join(" ").trim();return mm(km(e.prototype),"renderSync",this).call(this,{message:this.message,icon:this.icon,classList:t})}}]),e}(Hv),Xy=new ty((function(t){var e=t.classList,n=t.classes,r=t.icon,o=t.i18n,i=t.message;return'\n  <div class="'.concat(e,'" role="alert">\n    <div class="').concat(n.icon,'"><i data-size="10x" data-icon="').concat(r,'"></i></div>\n    <h3 class="').concat(n.title,'">').concat(i,'</h3>\n    <button type="button">').concat(o.get("retry"),"</button>\n  </div>\n")})),Qy=cv("dataError"),tg=function(t){function e(t){var n=t.message;return Cm(this,e),gm(this,e,[{message:n,template:Xy,className:Qy.dataError}])}var n;return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements={retryButton:"button"},this.uiEvents=[Hv.childEvent("retryButton","click",this.onRetry)],mm(km(e.prototype),"initialize",this).call(this)}},{key:"onRetry",value:(n=Bm(ym().mark((function t(){var e;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.emojiData){t.next=5;break}return t.next=3,this.emojiData.delete();case 3:t.next=7;break;case 5:return t.next=7,this.options.dataStore.deleteDatabase(this.options.locale);case 7:return this.events.emit("reinitialize"),t.next=10,_v(this.options.locale,this.options.dataStore,this.options.messages,this.options.emojiData,this.emojiData);case 10:e=t.sent,this.viewFactory.setEmojiData(e),this.events.emit("data:ready",e);case 12:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),e}(Zy),eg=cv("preview","previewEmoji","previewName","tagList","tag"),ng=new ty((function(t){var e=t.classes,n=t.tag;return'\n  <li class="'.concat(e.tag,'">').concat(n,"</li>\n")})),rg=new ty((function(t){var e=t.classes;return'\n  <div class="'.concat(e.preview,'">\n    <div class="').concat(e.previewEmoji,'"></div>\n    <div class="').concat(e.previewName,'"></div>\n    <ul class="').concat(e.tagList,'"></ul>\n  </div>\n')})),og=function(t){function e(){return Cm(this,e),gm(this,e,[{template:rg,classes:eg}])}return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements={emoji:Hv.byClass(eg.previewEmoji),name:Hv.byClass(eg.previewName),tagList:Hv.byClass(eg.tagList)},this.appEvents={"preview:show":this.showPreview,"preview:hide":this.hidePreview},mm(km(e.prototype),"initialize",this).call(this)}},{key:"showPreview",value:function(t,e){if(dv(this.ui.emoji,e),this.ui.name.textContent=t.label,t.tags){this.ui.tagList.style.display="flex";var n=t.tags.map((function(t){return ng.renderSync({tag:t,classes:eg})}));dv.apply(void 0,[this.ui.tagList].concat(Pm(n)))}}},{key:"hidePreview",value:function(){fv(this.ui.emoji),fv(this.ui.name),fv(this.ui.tagList)}}]),e}(Hv),ig=new ty((function(t){var e=t.classes,n=t.i18n;return'\n  <button title="'.concat(n.get("search.clear"),'" class="').concat(e.clearSearchButton,'">\n    <i data-icon="xmark"></i>\n  </button>\n')})),ag=new ty((function(t){var e=t.classes,n=t.i18n;return'\n<div class="'.concat(e.searchContainer,'">\n  <input class="').concat(e.searchField,'" placeholder="').concat(n.get("search"),'">\n  <span class="').concat(e.searchAccessory,'"></span>\n</div>\n')}),{mode:"async"}),sg=cv("searchContainer","searchField","clearButton","searchAccessory","clearSearchButton","notFound"),ug=function(t){function e(t){var n,r=t.categories,o=t.emojiVersion;return Cm(this,e),(n=gm(this,e,[{template:ag,classes:sg}])).categories=r.filter((function(t){return"recents"!==t.key})),n.emojiVersion=o,n.search=function(t,e){var n=null;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n&&window.clearTimeout(n),n=window.setTimeout((function(){t.apply(void 0,o),n=null}),e)}}(n.search.bind(bm(n)),100),n}var n,r;return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements={searchField:Hv.byClass(sg.searchField),searchAccessory:Hv.byClass(sg.searchAccessory)},this.uiEvents=[Hv.childEvent("searchField","keydown",this.onKeyDown),Hv.childEvent("searchField","input",this.onSearchInput)],mm(km(e.prototype),"initialize",this).call(this)}},{key:"render",value:(r=Bm(ym().mark((function t(){var n=this;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mm(km(e.prototype),"render",this).call(this);case 2:return this.searchIcon=qv("search"),this.notFoundMessage=this.viewFactory.create(Zy,{message:this.i18n.get("search.notFound"),className:sg.notFound,icon:"sad"}),this.notFoundMessage.renderSync(),this.errorMessage=this.viewFactory.create(Zy,{message:this.i18n.get("search.error")}),this.errorMessage.renderSync(),this.clearSearchButton=ig.render({classes:sg,i18n:this.i18n}),this.clearSearchButton.addEventListener("click",(function(t){return n.onClearSearch(t)})),this.searchField=this.ui.searchField,this.showSearchIcon(),t.abrupt("return",this.el);case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"showSearchIcon",value:function(){this.showSearchAccessory(this.searchIcon)}},{key:"showClearSearchButton",value:function(){this.showSearchAccessory(this.clearSearchButton)}},{key:"showSearchAccessory",value:function(t){dv(this.ui.searchAccessory,t)}},{key:"clear",value:function(){this.searchField.value="",this.showSearchIcon()}},{key:"focus",value:function(){this.searchField.focus()}},{key:"onClearSearch",value:function(t){var e;t.stopPropagation(),this.searchField.value="",null==(e=this.resultsContainer)||e.destroy(),this.resultsContainer=null,this.showSearchIcon(),this.events.emit("content:show"),this.searchField.focus()}},{key:"handleResultsKeydown",value:function(t){this.resultsContainer&&"Escape"===t.key&&this.onClearSearch(t)}},{key:"onKeyDown",value:function(t){var e;"Escape"===t.key&&this.searchField.value?this.onClearSearch(t):("Enter"===t.key||"ArrowDown"===t.key)&&this.resultsContainer&&(t.preventDefault(),null==(e=this.resultsContainer.el.querySelector('[tabindex="0"]'))||e.focus())}},{key:"onSearchInput",value:function(t){this.searchField.value?(this.showClearSearchButton(),this.search()):this.onClearSearch(t)}},{key:"search",value:(n=Bm(ym().mark((function t(){var e,n,r,o=this;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.searchField.value){t.next=11;break}return t.prev=1,t.next=4,this.emojiData.searchEmojis(this.searchField.value,this.customEmojis,this.emojiVersion,this.categories);case 4:n=t.sent,this.events.emit("preview:hide"),n.length?(r=new qy,this.resultsContainer=this.viewFactory.create(_y,{emojis:n,fullHeight:!0,showVariants:!0,lazyLoader:r}),this.resultsContainer.renderSync(),null!=(e=this.resultsContainer)&&e.el&&(r.observe(this.resultsContainer.el),this.resultsContainer.setActive(!0,{row:0,offset:0},!1),this.resultsContainer.el.addEventListener("keydown",(function(t){return o.handleResultsKeydown(t)})),this.events.emit("content:show",this.resultsContainer))):this.events.emit("content:show",this.notFoundMessage),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.events.emit("content:show",this.errorMessage);case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return n.apply(this,arguments)})}]),e}(Hv),cg=new ty((function(t){var e=t.classes;return'\n  <div class="'.concat(e.variantOverlay,'">\n    <div class="').concat(e.variantPopup,'">\n      <div data-view="emojis" data-render="sync"></div>\n    </div>\n  </div>\n')})),lg=cv("variantOverlay","variantPopup"),fg={easing:"ease-in-out",duration:250,fill:"both"},dg={opacity:[0,1]},hg={opacity:[0,1],transform:["scale3d(0.8, 0.8, 0.8)","scale3d(1, 1, 1)"]},pg=function(t){function e(t){var n,r=t.emoji,o=t.parent;return Cm(this,e),(n=gm(this,e,[{template:cg,classes:lg,parent:o}])).focusedEmojiIndex=0,n.focusTrap=new Iv,n.animateShow=function(){return Promise.all([iv(n.el,dg,fg,n.options),iv(n.ui.popup,hg,fg,n.options)])},n.emoji=r,n}var n;return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements={popup:Hv.byClass(lg.variantPopup)},this.uiEvents=[Hv.uiEvent("click",this.handleClick),Hv.uiEvent("keydown",this.handleKeydown)],mm(km(e.prototype),"initialize",this).call(this)}},{key:"animateHide",value:function(){var t=jm(jm({},fg),{},{direction:"reverse"});return Promise.all([iv(this.el,dg,t,this.options),iv(this.ui.popup,hg,t,this.options)])}},{key:"hide",value:(n=Bm(ym().mark((function t(){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.animateHide();case 2:this.events.emit("variantPopup:hide");case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"handleKeydown",value:function(t){"Escape"===t.key&&(this.hide(),t.stopPropagation())}},{key:"handleClick",value:function(t){this.ui.popup.contains(t.target)||this.hide()}},{key:"getEmoji",value:function(t){return this.renderedEmojis[t]}},{key:"setFocusedEmoji",value:function(t){this.getEmoji(this.focusedEmojiIndex).tabIndex=-1,this.focusedEmojiIndex=t;var e=this.getEmoji(this.focusedEmojiIndex);e.tabIndex=0,e.focus()}},{key:"destroy",value:function(){this.emojiContainer.destroy(),this.focusTrap.deactivate(),mm(km(e.prototype),"destroy",this).call(this)}},{key:"renderSync",value:function(){var t=this,n=jm(jm({},this.emoji),{},{skins:null}),r=(this.emoji.skins||[]).map((function(e){return jm(jm({},e),{},{label:t.emoji.label,tags:t.emoji.tags})})),o=[n].concat(Pm(r));return this.emojiContainer=this.viewFactory.create(_y,{emojis:o,preview:!1}),mm(km(e.prototype),"renderSync",this).call(this,{emojis:this.emojiContainer}),o.length<this.options.emojisPerRow&&this.el.style.setProperty("--emojis-per-row",o.length.toString()),this.el}},{key:"activate",value:function(){this.emojiContainer.setActive(!0,{row:0,offset:0},!0),this.focusTrap.activate(this.el)}}]),e}(Hv),mg=new ty((function(t){var e=t.classes,n=t.i18n,r=t.category,o=t.pickerId,i=t.icon;return'\n<li class="'.concat(e.categoryTab,'">\n  <button\n    aria-selected="false"\n    role="tab"\n    class="').concat(e.categoryButton,'"\n    tabindex="-1"\n    title="').concat(n.get("categories.".concat(r.key),r.message||r.key),'"\n    type="button"\n    data-category="').concat(r.key,'"\n    id="').concat(o,"-category-").concat(r.key,'"\n  >\n    <i data-icon="').concat(i,'"></i>\n</li>\n')})),vg=cv("categoryTab","categoryTabActive","categoryButton"),yg=function(t){function e(t){var n,r=t.category,o=t.icon;return Cm(this,e),(n=gm(this,e,[{template:mg,classes:vg}])).isActive=!1,n.category=r,n.icon=o,n}return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements={button:Hv.byClass(vg.categoryButton)},this.uiEvents=[Hv.childEvent("button","click",this.selectCategory),Hv.childEvent("button","focus",this.selectCategory)],mm(km(e.prototype),"initialize",this).call(this)}},{key:"renderSync",value:function(){return mm(km(e.prototype),"renderSync",this).call(this,{category:this.category,icon:this.icon}),this.ui.button.ariaSelected="false",this.el}},{key:"setActive",value:function(t){var e=jm({changeFocusable:!0,performFocus:!0,scroll:!0},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=e.changeFocusable,r=e.performFocus,o=e.scroll;this.el.classList.toggle(vg.categoryTabActive,t),n&&(this.ui.button.tabIndex=t?0:-1,this.ui.button.ariaSelected=t.toString()),t&&r&&(this.ui.button.focus(),o&&this.events.emit("category:select",this.category.key,{scroll:"animate",focus:"button",performFocus:!1})),this.isActive=t}},{key:"selectCategory",value:function(){this.isActive||this.events.emit("category:select",this.category.key,{scroll:"animate",focus:"button",performFocus:!0})}}]),e}(Hv),gg=new ty((function(t){var e=t.classes;return'\n  <div class="'.concat(e.categoryButtonsContainer,'">\n    <ul role="tablist" class="').concat(e.categoryButtons,'">\n      <div data-placeholder="tabs"></div>\n    </ul>\n  </div>\n')})),bg=cv("categoryButtons","categoryButtonsContainer"),wg=function(t){function e(t){var n,r=t.categories;return Cm(this,e),(n=gm(this,e,[{template:gg,classes:bg}])).activeCategoryIndex=0,n.categories=r,n}return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.keyBindings={ArrowLeft:this.stepSelectedTab(-1),ArrowRight:this.stepSelectedTab(1)},this.uiEvents=[Hv.uiEvent("scroll",this.checkOverflow)],mm(km(e.prototype),"initialize",this).call(this)}},{key:"checkOverflow",value:function(){var t=Math.abs(this.el.scrollLeft-(this.el.scrollWidth-this.el.offsetWidth))>1,e=this.el.scrollLeft>0;this.el.className="categoryButtonsContainer",e&&t?this.el.classList.add("has-overflow-both"):e?this.el.classList.add("has-overflow-left"):t&&this.el.classList.add("has-overflow-right")}},{key:"renderSync",value:function(){var t=this;return this.tabViews=this.categories.map((function(e){return t.viewFactory.create(yg,{category:e,icon:$v[e.key]})})),mm(km(e.prototype),"renderSync",this).call(this,{tabs:this.tabViews.map((function(t){return t.renderSync()}))}),this.el}},{key:"currentCategory",get:function(){return this.categories[this.activeCategoryIndex]}},{key:"currentTabView",get:function(){return this.tabViews[this.activeCategoryIndex]}},{key:"setActiveTab",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.checkOverflow();var n=this.currentTabView,r=this.tabViews[t];n.setActive(!1,e),r.setActive(!0,e),this.activeCategoryIndex=t}},{key:"getTargetCategory",value:function(t){return t<0?this.categories.length-1:t>=this.categories.length?0:t}},{key:"stepSelectedTab",value:function(t){var e=this;return function(){var n=e.activeCategoryIndex+t;e.setActiveTab(e.getTargetCategory(n),{changeFocusable:!0,performFocus:!0})}}}]),e}(Hv),kg=[{version:15,emoji:String.fromCodePoint(129768)},{version:14,emoji:String.fromCodePoint(128733)},{version:13,emoji:String.fromCodePoint(129729)},{version:12,emoji:String.fromCodePoint(129449)},{version:11,emoji:String.fromCodePoint(129463)},{version:5,emoji:String.fromCodePoint(129322)},{version:4,emoji:String.fromCodePoint(9877)},{version:3,emoji:String.fromCodePoint(129314)},{version:2,emoji:String.fromCodePoint(128488)},{version:1,emoji:String.fromCodePoint(128512)}];function xg(){var t,e=kg.find((function(t){return function(t){var e=document.createElement("canvas").getContext("2d");if(e)return e.textBaseline="top",e.font="32px Arial",e.fillText(t,0,0),0!==e.getImageData(16,16,1,1).data[0]}(t.emoji)}));return null!=(t=null==e?void 0:e.version)?t:1}function Eg(t,e){return Array.from({length:t},(function(){return e})).join("")}function Sg(t){var e,n,r,o=t.emojiCount,i=t.classes,a=t.theme,s=t.className,u=t.categoryCount;return'\n    <div class="picmo__picker '.concat(i.skeleton," ").concat(i.picker," ").concat(a," ").concat(s,'">\n      ').concat((e=t,n=e.showHeader,r=e.classes,n?'\n    <header class="'.concat(r.headerSkeleton,'">\n      ').concat(function(t){var e=t.showSearch,n=t.classes;return e?'\n    <div class="'.concat(n.searchSkeleton,'">\n      <div class="').concat(n.searchInput," ").concat(n.placeholder,'"></div>\n    </div>\n  '):""}(t),"\n      ").concat(function(t){var e=t.showCategoryTabs,n=t.classes;return e?'\n    <div class="'.concat(n.categoryTabsSkeleton,'">\n      ').concat(Eg(u,'<div class="'.concat(n.placeholder," ").concat(n.categoryTab,'"></div>')),"\n    </div>\n  "):""}(t),"\n    </header>\n  "):""),'\n      <div class="').concat(i.contentSkeleton,'">\n        <div class="').concat(i.placeholder," ").concat(i.categoryName,'"></div>\n        <div class="').concat(i.emojiGrid,'">\n          ').concat(Eg(o,'<div class="'.concat(i.placeholder," ").concat(i.emoji,'"></div>')),"\n        </div>\n      </div>\n      ").concat(function(t){var e=t.showPreview,n=t.classes;return e?'\n    <div class="'.concat(n.previewSkeleton,'">\n      <div class="').concat(n.placeholder," ").concat(n.previewEmoji,'"></div>\n      <div class="').concat(n.placeholder," ").concat(n.previewName,'"></div>\n      <ul class="').concat(n.tagList,'">\n        ').concat(Eg(3,'<li class="'.concat(n.placeholder," ").concat(n.tag,'"></li>')),"\n      </ul>\n    </div>\n  "):""}(t),"\n    </div>\n  ")}var Dg,Cg=new ty((function(t){return t.isLoaded?function(t){var e=t.classes,n=t.theme,r=t.className,o=void 0===r?"":r;return'\n    <div class="picmo__picker '.concat(e.picker," ").concat(n," ").concat(o,'">\n      ').concat(function(t){var e=t.showHeader,n=t.classes;return e?'\n    <header class="'.concat(n.header,'">\n      <div data-view="search"></div>\n      <div data-view="categoryTabs" data-render="sync"></div>\n    </header>\n  '):""}(t),'\n      <div class="').concat(e.content,'">\n        <div data-view="emojiArea"></div>\n      </div>\n      <div data-view="preview"></div>\n    </div>\n  ')}(t):Sg(t)})),Og=cv("picker","skeleton","placeholder","searchSkeleton","searchInput","categoryTabsSkeleton","headerSkeleton","categoryTab","contentSkeleton","categoryName","emojiGrid","emoji","previewSkeleton","previewEmoji","previewName","tagList","tag","overlay","content","fullHeight","pluginContainer","header"),Ag={emojisPerRow:"--emojis-per-row",visibleRows:"--row-count",emojiSize:"--emoji-size"},jg=function(t){function e(){var t;return Cm(this,e),(t=gm(this,e,[{template:Cg,classes:Og}])).pickerReady=!1,t.externalEvents=new Oy,t.updaters={styleProperty:function(e){return function(n){return t.el.style.setProperty(Ag[e],n.toString())}},theme:function(e){var n=t.options.theme,r=t.el.closest(".".concat(n));t.el.classList.remove(n),null==r||r.classList.remove(n),t.el.classList.add(e),null==r||r.classList.add(e)},className:function(e){t.options.className&&t.el.classList.remove(t.options.className),t.el.classList.add(e)},emojisPerRow:t.updateStyleProperty.bind(bm(t),"emojisPerRow"),emojiSize:t.updateStyleProperty.bind(bm(t),"emojiSize"),visibleRows:t.updateStyleProperty.bind(bm(t),"visibleRows")},t}var n,r,o,i;return xm(e,t),Dm(e,[{key:"initialize",value:function(){this.uiElements={pickerContent:Hv.byClass(Og.content),header:Hv.byClass(Og.header)},this.uiEvents=[Hv.uiEvent("keydown",this.handleKeyDown)],this.appEvents={error:this.onError,reinitialize:this.reinitialize,"data:ready":this.onDataReady,"content:show":this.showContent,"variantPopup:hide":this.hideVariantPopup,"emoji:select":this.selectEmoji},mm(km(e.prototype),"initialize",this).call(this),this.options.recentsProvider}},{key:"destroy",value:function(){var t,n;mm(km(e.prototype),"destroy",this).call(this),null==(t=this.search)||t.destroy(),this.emojiArea.destroy(),null==(n=this.categoryTabs)||n.destroy(),this.events.removeAll(),this.externalEvents.removeAll()}},{key:"clearRecents",value:function(){this.options.recentsProvider.clear()}},{key:"addEventListener",value:function(t,e){this.externalEvents.on(t,e)}},{key:"removeEventListener",value:function(t,e){this.externalEvents.off(t,e)}},{key:"initializePickerView",value:function(){this.pickerReady&&(this.showContent(),this.emojiArea.reset(!1))}},{key:"handleKeyDown",value:function(t){var e=t.ctrlKey||t.metaKey;"s"===t.key&&e&&this.search&&(t.preventDefault(),this.search.focus())}},{key:"buildChildViews",value:function(){return this.options.showPreview&&(this.preview=this.viewFactory.create(og)),this.options.showSearch&&(this.search=this.viewFactory.create(ug,{categories:this.categories,emojiVersion:this.emojiVersion})),this.options.showCategoryTabs&&(this.categoryTabs=this.viewFactory.create(wg,{categories:this.categories})),this.currentView=this.emojiArea=this.viewFactory.create(Gy,{categoryTabs:this.categoryTabs,categories:this.categories,emojiVersion:this.emojiVersion}),[this.preview,this.search,this.emojiArea,this.categoryTabs]}},{key:"setStyleProperties",value:function(){var t=this;this.options.showSearch||this.el.style.setProperty("--search-height-full","0px"),this.options.showCategoryTabs||(this.el.style.setProperty("--category-tabs-height","0px"),this.el.style.setProperty("--category-tabs-offset","0px")),this.options.showPreview||this.el.style.setProperty("--emoji-preview-height-full","0px"),Object.keys(Ag).forEach((function(e){t.options[e]&&t.el.style.setProperty(Ag[e],t.options[e].toString())}))}},{key:"updateStyleProperty",value:function(t,e){this.el.style.setProperty(Ag[t],e.toString())}},{key:"reinitialize",value:function(){this.renderSync()}},{key:"onError",value:function(t){var e=this.viewFactory.createWithOptions({data:!1},tg,{message:this.i18n.get("error.load")}),n=this.el.offsetHeight||375;throw this.el.style.height="".concat(n,"px"),dv(this.el,e.renderSync()),t}},{key:"onDataReady",value:(i=Bm(ym().mark((function t(n){var r,o,i,a,s,u,c;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.el,t.prev=1,!n){t.next=6;break}this.emojiData=n,t.next=8;break;case 6:return t.next=8,this.emojiDataPromise;case 8:return"auto"===this.options.emojiVersion?this.emojiVersion=xg()||parseFloat("14.0"):this.emojiVersion=this.options.emojiVersion,t.next=11,this.emojiData.getCategories(this.options);case 11:return this.categories=t.sent,o=this.buildChildViews(),i=Om(o,4),a=i[0],s=i[1],u=i[2],c=i[3],t.next=15,mm(km(e.prototype),"render",this).call(this,{isLoaded:!0,search:s,categoryTabs:c,emojiArea:u,preview:a,showHeader:Boolean(this.search||this.categoryTabs),theme:this.options.theme,className:this.options.className});case 15:this.el.style.setProperty("--category-count",this.categories.length.toString()),this.pickerReady=!0,r.replaceWith(this.el),this.setStyleProperties(),this.initializePickerView(),this.setInitialFocus(),this.externalEvents.emit("data:ready"),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1),this.events.emit("error",t.t0);case 27:case"end":return t.stop()}}),t,this,[[1,24]])}))),function(t){return i.apply(this,arguments)})},{key:"renderSync",value:function(){var t,n=(null==(t=this.options.categories)?void 0:t.length)||10;if(this.options.showRecents&&(n+=1),mm(km(e.prototype),"renderSync",this).call(this,{isLoaded:!1,theme:this.options.theme,className:this.options.className,showSearch:this.options.showSearch,showPreview:this.options.showPreview,showCategoryTabs:this.options.showCategoryTabs,showHeader:this.options.showSearch||this.options.showCategoryTabs,emojiCount:this.options.emojisPerRow*this.options.visibleRows,categoryCount:n}),this.el.style.setProperty("--category-count",n.toString()),!this.options.rootElement)throw new Error("Picker must be given a root element via the rootElement option");return dv(this.options.rootElement,this.el),this.setStyleProperties(),this.pickerReady&&this.initializePickerView(),this.el}},{key:"getInitialFocusTarget",value:function(){if(pm(this.options.autoFocus)<"u")switch(this.options.autoFocus){case"emojis":return this.emojiArea.focusableEmoji;case"search":return this.search;case"auto":return this.search||this.emojiArea.focusableEmoji;default:return null}if(!0===this.options.autoFocusSearch)return console.warn("options.autoFocusSearch is deprecated, please use options.focusTarget instead"),this.search}},{key:"setInitialFocus",value:function(){var t;!this.pickerReady||null==(t=this.getInitialFocusTarget())||t.focus()}},{key:"reset",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.pickerReady&&(this.emojiArea.reset(e),this.showContent(this.emojiArea)),null==(t=this.search)||t.clear(),this.hideVariantPopup()}},{key:"showContent",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.emojiArea;n!==this.currentView&&(this.currentView!==this.emojiArea&&(null==(t=this.currentView)||t.destroy()),this.ui.pickerContent.classList.toggle(Og.fullHeight,n!==this.emojiArea),dv(this.ui.pickerContent,n.el),this.currentView=n,n===this.emojiArea?(this.emojiArea.reset(),this.categoryTabs&&this.ui.header.appendChild(this.categoryTabs.el)):null==(e=this.categoryTabs)||e.el.remove())}},{key:"hideVariantPopup",value:function(){var t;null==(t=this.variantPopup)||t.destroy()}},{key:"isPickerClick",value:function(t){var e,n,r=t.target,o=this.el.contains(r),i=null==(n=null==(e=this.variantPopup)?void 0:e.el)?void 0:n.contains(r);return o||i}},{key:"selectEmoji",value:(o=Bm(ym().mark((function t(e){var n,r,o;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.emoji,!(null==(r=n.skins)?void 0:r.length)||!this.options.showVariants||this.isVariantPopupOpen){t.next=5;break}this.showVariantPopup(n),t.next=10;break;case 5:return t.next=7,null==(o=this.variantPopup)?void 0:o.animateHide();case 7:return this.events.emit("variantPopup:hide"),t.next=10,this.emitEmoji(n);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"isVariantPopupOpen",get:function(){return this.variantPopup&&!this.variantPopup.isDestroyed}},{key:"showVariantPopup",value:(r=Bm(ym().mark((function t(e){var n;return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=document.activeElement,this.events.once("variantPopup:hide",(function(){null==n||n.focus()})),this.variantPopup=this.viewFactory.create(pg,{emoji:e,parent:this.el}),this.el.appendChild(this.variantPopup.renderSync()),this.variantPopup.activate();case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"emitEmoji",value:(n=Bm(ym().mark((function t(e){return ym().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.externalEvents,t.next=3,this.renderer.doEmit(e);case 3:t.t1=t.sent,t.t0.emit.call(t.t0,"emoji:select",t.t1),this.options.recentsProvider.addOrUpdateRecent(e,this.options.maxRecents),this.events.emit("recent:add",e);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"updateOptions",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.updaters[n](t[n])})),Object.assign(this.options,t)}}]),e}(Hv),Tg=function(){function t(e){var n=e.events,r=e.i18n,o=e.renderer,i=e.emojiData,a=e.options,s=e.customEmojis,u=void 0===s?[]:s,c=e.pickerId;Cm(this,t),this.events=n,this.i18n=r,this.renderer=o,this.emojiData=i,this.options=a,this.customEmojis=u,this.pickerId=c}return Dm(t,[{key:"setEmojiData",value:function(t){this.emojiData=Promise.resolve(t)}},{key:"createWithOptions",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=function(t,e,n){if(wm())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Em(o,n.prototype),o}(e,r);return i.setPickerId(this.pickerId),i.setEvents(this.events),i.setI18n(this.i18n),i.setRenderer(this.renderer),!1!==t.data&&i.setEmojiData(this.emojiData),i.setOptions(this.options),i.setCustomEmojis(this.customEmojis),i.viewFactory=this,i.initialize(),i}},{key:"create",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.createWithOptions.apply(this,[{},t].concat(n))}}]),t}(),Mg=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cm(this,t),zm(this,Dg,void 0),Hm(this,Dg,new Map(Object.entries(e)))}return Dm(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return Rm(this,Dg).get(t)||e}}]),t}();function Lg(){var t=!1;return function(e){Dy&&!t&&(function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&!(("undefined"===typeof document?"undefined":pm(document))>"u")){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(e),t=!0)}}Dg=new WeakMap;var Pg,Fg=0;var Ng=Lg();function _g(t){Ng('.picmo__picker .picmo__icon{width:1.25em;height:1em;fill:currentColor}.picmo__icon-small{font-size:.8em}.picmo__icon-medium{font-size:1em}.picmo__icon-large{font-size:1.25em}.picmo__icon-2x{font-size:2em}.picmo__icon-3x{font-size:3em}.picmo__icon-4x{font-size:4em}.picmo__icon-5x{font-size:5em}.picmo__icon-8x{font-size:8em}.picmo__icon-10x{font-size:10em}.picmo__light,.picmo__auto{color-scheme:light;--accent-color: #4f46e5;--background-color: #f9fafb;--border-color: #cccccc;--category-name-background-color: #f9fafb;--category-name-button-color: #999999;--category-name-text-color: hsl(214, 30%, 50%);--category-tab-active-background-color: rgba(255, 255, 255, .6);--category-tab-active-color: var(--accent-color);--category-tab-color: #666;--category-tab-highlight-background-color: rgba(0, 0, 0, .15);--error-color-dark: hsl(0, 100%, 45%);--error-color: hsl(0, 100%, 40%);--focus-indicator-background-color: hsl(198, 65%, 85%);--focus-indicator-color: #333333;--hover-background-color: #c7d2fe;--placeholder-background-color: #cccccc;--search-background-color: #f9fafb;--search-focus-background-color: #ffffff;--search-icon-color: #999999;--search-placeholder-color: #71717a;--secondary-background-color: #e2e8f0;--secondary-text-color: #666666;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #000000;--variant-popup-background-color: #ffffff}.picmo__dark{color-scheme:dark;--accent-color: #A580F9;--background-color: #333333;--border-color: #666666;--category-name-background-color: #333333;--category-name-button-color: #eeeeee;--category-name-text-color: #ffffff;--category-tab-active-background-color: #000000;--category-tab-active-color: var(--accent-color);--category-tab-color: #cccccc;--category-tab-highlight-background-color: #4A4A4A;--error-color-dark: hsl(0, 7%, 3%);--error-color: hsl(0, 30%, 60%);--focus-indicator-background-color: hsl(0, 0%, 50%);--focus-indicator-color: #999999;--hover-background-color: hsla(0, 0%, 40%, .85);--image-placeholder-color: #ffffff;--placeholder-background-color: #666666;--search-background-color: #71717a;--search-focus-background-color: #52525b;--search-icon-color: #cccccc;--search-placeholder-color: #d4d4d8;--secondary-background-color: #000000;--secondary-text-color: #999999;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #ffffff;--variant-popup-background-color: #333333}@media (prefers-color-scheme: dark){.picmo__auto{color-scheme:dark;--accent-color: #A580F9;--background-color: #333333;--border-color: #666666;--category-name-background-color: #333333;--category-name-button-color: #eeeeee;--category-name-text-color: #ffffff;--category-tab-active-background-color: #000000;--category-tab-active-color: var(--accent-color);--category-tab-color: #cccccc;--category-tab-highlight-background-color: #4A4A4A;--error-color-dark: hsl(0, 7%, 3%);--error-color: hsl(0, 30%, 60%);--focus-indicator-background-color: hsl(0, 0%, 50%);--focus-indicator-color: #999999;--hover-background-color: hsla(0, 0%, 40%, .85);--image-placeholder-color: #ffffff;--placeholder-background-color: #666666;--search-background-color: #71717a;--search-focus-background-color: #52525b;--search-icon-color: #cccccc;--search-placeholder-color: #d4d4d8;--secondary-background-color: #000000;--secondary-text-color: #999999;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #ffffff;--variant-popup-background-color: #333333}}.picmo__picker .picmo__categoryButtonsContainer{overflow:auto;padding:2px 0}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-right{mask-image:linear-gradient(270deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%);-webkit-mask-image:linear-gradient(270deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%)}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-left{mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%);-webkit-mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%)}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-both{mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%,rgba(255,255,255,1) 90%,rgba(255,255,255,0) 100%);-webkit-mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%,rgba(255,255,255,1) 90%,rgba(255,255,255,0) 100%)}.picmo__picker .picmo__categoryButtons{display:flex;flex-direction:row;gap:var(--tab-gap);margin:0;padding:0 .5em;align-items:center;height:var(--category-tabs-height);box-sizing:border-box;width:100%;justify-content:space-between;position:relative;list-style-type:none;justify-self:center;max-width:min(23.55rem,calc(var(--category-count, 1) * 2.5rem))}.picmo__picker .picmo__categoryButtons .picmo__categoryTab{display:flex;align-items:center;transition:all .1s;width:2em}.picmo__picker .picmo__categoryButtons .picmo__categoryTab.picmo__categoryTabActive .picmo__categoryButton{color:var(--category-tab-active-color);background:linear-gradient(rgba(255,255,255,.75) 0%,rgba(255,255,255,.75) 100%),linear-gradient(var(--category-tab-active-color) 0%,var(--category-tab-active-color) 100%);border:2px solid var(--category-tab-active-color)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab.picmo__categoryTabActive .picmo__categoryButton:hover{background-color:var(--category-tab-active-background-color)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton{border-radius:5px;background:transparent;border:2px solid transparent;color:var(--category-tab-color);cursor:pointer;padding:2px;vertical-align:middle;display:flex;align-items:center;justify-content:center;font-size:1.2rem;width:1.6em;height:1.6em;transition:all .1s}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton:is(img){width:var(--category-tab-size);height:var(--category-tab-size)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton:hover{background:var(--category-tab-highlight-background-color)}.picmo__dataError [data-icon]{opacity:.8}@keyframes appear{0%{opacity:0}to{opacity:.8}}@keyframes appear-grow{0%{opacity:0;transform:scale(.8)}to{opacity:.8;transform:scale(1)}}.picmo__picker .picmo__error{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--secondary-text-color)}.picmo__picker .picmo__error .picmo__iconContainer{opacity:.8;animation:appear-grow .25s cubic-bezier(.175,.885,.32,1.275);--color-primary: var(--error-color);--color-secondary: var(--error-color-dark)}.picmo__picker .picmo__error .picmo__title{animation:appear .25s;animation-delay:50ms;animation-fill-mode:both}.picmo__picker .picmo__error button{padding:8px 16px;cursor:pointer;background:var(--background-color);border:1px solid var(--text-color);border-radius:5px;color:var(--text-color)}.picmo__picker .picmo__error button:hover{background:var(--text-color);color:var(--background-color)}.picmo__emojiButton{background:transparent;border:none;border-radius:15px;cursor:pointer;display:flex;font-family:var(--emoji-font);font-size:var(--emoji-size);height:100%;justify-content:center;align-items:center;margin:0;overflow:hidden;padding:0;width:100%}.picmo__emojiButton:hover{background:var(--hover-background-color)}.picmo__emojiButton:focus{border-radius:0;background:var(--focus-indicator-background-color);outline:1px solid var(--focus-indicator-color)}.picmo__picker .picmo__emojiArea{height:var(--emoji-area-height);overflow-y:auto;position:relative}.picmo__picker .picmo__emojiCategory{position:relative}.picmo__picker .picmo__emojiCategory .picmo__categoryName{font-size:.9em;padding:.5rem;margin:0;background:var(--category-name-background-color);color:var(--category-name-text-color);top:0;z-index:1;display:grid;gap:4px;grid-template-columns:auto 1fr auto;align-items:center;line-height:1;box-sizing:border-box;height:var(--category-name-height);justify-content:flex-start;text-transform:uppercase}.picmo__picker .picmo__emojiCategory .picmo__categoryName button{background:transparent;border:none;display:flex;align-items:center;cursor:pointer;color:var(--category-name-button-color)}.picmo__picker .picmo__emojiCategory .picmo__categoryName button:hover{opacity:1}.picmo__picker .picmo__emojiCategory .picmo__noRecents{color:var(--secondary-text-color);grid-column:1 / span var(--emojis-per-row);font-size:.9em;text-align:center;display:flex;align-items:center;justify-content:center;min-height:calc(var(--emoji-size) * var(--emoji-size-multiplier))}.picmo__picker .picmo__emojiCategory .picmo__recentEmojis[data-empty=true]{display:none}:is(.picmo__picker .picmo__emojiCategory) .picmo__recentEmojis[data-empty=false]+div{display:none}.picmo__picker .picmo__emojiContainer{display:grid;justify-content:space-between;gap:1px;padding:0 .5em;grid-template-columns:repeat(var(--emojis-per-row),calc(var(--emoji-size) * var(--emoji-size-multiplier)));grid-auto-rows:calc(var(--emoji-size) * var(--emoji-size-multiplier));align-items:center;justify-items:center}.picmo__picker.picmo__picker{--border-radius: 5px;--emoji-area-height: calc( (var(--row-count) * var(--emoji-size) * var(--emoji-size-multiplier)) + var(--category-name-height) );--content-height: var(--emoji-area-height);--emojis-per-row: 8;--row-count: 6;--emoji-preview-margin: 4px;--emoji-preview-height: calc(var(--emoji-preview-size) + 1em + 1px);--emoji-preview-height-full: calc(var(--emoji-preview-height) + var(--emoji-preview-margin));--emoji-preview-size: 2.75em;--emoji-size: 2rem;--emoji-size-multiplier: 1.3;--content-margin: 8px;--category-tabs-height:calc(1.5em + 9px);--category-tabs-offset: 8px;--category-tab-size: 1.2rem;--category-name-height: 2rem;--category-name-padding-y: 6px;--search-height: 2em;--search-margin: .5em;--search-margin-bottom: 4px;--search-height-full: calc(var(--search-height) + var(--search-margin) + var(--search-margin-bottom));--overlay-background-color: rgba(0, 0, 0, .8);--emoji-font: "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji";--ui-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;--ui-font-size: 16px;--picker-width: calc(var(--emojis-per-row) * var(--emoji-size) * var(--emoji-size-multiplier) + 2.75rem);--preview-background-color: var(--secondary-background-color);background:var(--background-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:var(--ui-font);font-size:var(--ui-font-size);overflow:hidden;position:relative;width:var(--picker-width);display:grid;gap:8px}.picmo__picker.picmo__picker>*{font-family:var(--ui-font)}.picmo__picker.picmo__skeleton{background:var(--background-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:var(--ui-font);width:var(--picker-width);color:var(--secondary-text-color)}.picmo__picker.picmo__skeleton *{box-sizing:border-box}.picmo__picker.picmo__skeleton .picmo__placeholder{background:var(--placeholder-background-color);position:relative;overflow:hidden}.picmo__picker.picmo__skeleton .picmo__placeholder:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background-image:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.2) 20%,rgba(255,255,255,.5) 60%,rgba(255,255,255,0) 100%);animation:shine 2s infinite;content:""}.picmo__picker.picmo__skeleton .picmo__headerSkeleton{background-color:var(--secondary-background-color);padding-top:8px;padding-bottom:8px;display:flex;flex-direction:column;overflow:hidden;gap:8px;border-bottom:1px solid var(--border-color);width:var(--picker-width)}.picmo__picker.picmo__skeleton .picmo__searchSkeleton{padding:0 8px;height:var(--search-height)}.picmo__picker.picmo__skeleton .picmo__searchSkeleton .picmo__searchInput{width:100%;height:28px;border-radius:3px}.picmo__picker.picmo__skeleton .picmo__categoryTabsSkeleton{height:var(--category-tabs-height);display:flex;flex-direction:row;align-items:center;justify-self:center;width:calc(2rem * var(--category-count, 1))}.picmo__picker.picmo__skeleton .picmo__categoryTabsSkeleton .picmo__categoryTab{width:25px;height:25px;padding:2px;border-radius:5px;margin:.25em}.picmo__picker.picmo__skeleton .picmo__contentSkeleton{height:var(--content-height);padding-right:8px;opacity:.7}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__categoryName{width:50%;height:1rem;margin:.5rem;box-sizing:border-box}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__emojiGrid{display:grid;justify-content:space-between;gap:1px;padding:0 .5em;grid-template-columns:repeat(var(--emojis-per-row),calc(var(--emoji-size) * var(--emoji-size-multiplier)));grid-auto-rows:calc(var(--emoji-size) * var(--emoji-size-multiplier));align-items:center;justify-items:center;width:var(--picker-width)}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__emojiGrid .picmo__emoji{width:var(--emoji-size);height:var(--emoji-size);border-radius:50%}.picmo__picker.picmo__skeleton .picmo__previewSkeleton{height:var(--emoji-preview-height);border-top:1px solid var(--border-color);display:grid;align-items:center;padding:.5em;gap:6px;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"emoji name" "emoji tags"}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__previewEmoji{grid-area:emoji;border-radius:50%;width:var(--emoji-preview-size);height:var(--emoji-preview-size)}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__previewName{grid-area:name;height:.8em;width:80%}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__tagList{grid-area:tags;list-style-type:none;display:flex;flex-direction:row;padding:0;margin:0}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__tagList .picmo__tag{border-radius:3px;padding:2px 8px;margin-right:.25em;height:1em;width:20%}.picmo__overlay{background:rgba(0,0,0,.75);height:100%;left:0;position:fixed;top:0;width:100%;z-index:1000}.picmo__content{position:relative;overflow:hidden;height:var(--content-height)}.picmo__content.picmo__fullHeight{height:calc(var(--content-height) + var(--category-tabs-height) + var(--category-tabs-offset));overflow-y:auto}.picmo__pluginContainer{margin:.5em;display:flex;flex-direction:row}.picmo__header{background-color:var(--secondary-background-color);padding-top:8px;padding-bottom:8px;display:grid;gap:8px;border-bottom:1px solid var(--border-color)}@media (prefers-reduced-motion: reduce){.picmo__placeholder{background:var(--placeholder-background-color);position:relative;overflow:hidden}.picmo__placeholder:after{display:none}}.picmo__picker .picmo__preview{border-top:1px solid var(--border-color);display:grid;align-items:center;gap:6px;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"emoji name" "emoji tags";height:var(--emoji-preview-height);box-sizing:border-box;padding:.5em;position:relative;background:var(--preview-background-color)}.picmo__picker .picmo__preview .picmo__previewEmoji{grid-area:emoji;font-size:var(--emoji-preview-size);font-family:var(--emoji-font);width:1.25em;display:flex;align-items:center;justify-content:center}.picmo__picker .picmo__preview .picmo__previewName{grid-area:name;color:var(--text-color);font-size:.8em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}.picmo__picker .picmo__preview .picmo__tagList{grid-area:tags;list-style-type:none;display:flex;flex-direction:row;padding:0;margin:0;font-size:.75em;overflow:hidden}.picmo__picker .picmo__preview .picmo__tag{border-radius:3px;background:var(--tag-background-color);color:var(--text-color);padding:2px 8px;margin-right:.25em;white-space:nowrap}.picmo__picker .picmo__preview .picmo__tag:last-child{margin-right:0}.picmo__picker .picmo__searchContainer{display:flex;height:var(--search-height);box-sizing:border-box;padding:0 8px;position:relative}.picmo__picker .picmo__searchContainer .picmo__searchField{background:var(--search-background-color);border-radius:3px;border:none;box-sizing:border-box;color:var(--text-color);font-size:.9em;outline:none;padding:.5em 2.25em .5em .5em;width:100%}.picmo__picker .picmo__searchContainer .picmo__searchField:focus{background:var(--search-focus-background-color)}.picmo__picker .picmo__searchContainer .picmo__searchField::placeholder{color:var(--search-placeholder-color)}.picmo__picker .picmo__searchContainer .picmo__searchAccessory{color:var(--search-icon-color);height:100%;position:absolute;right:1em;top:0;width:1.25rem;display:flex;align-items:center}.picmo__picker .picmo__searchContainer .picmo__searchAccessory svg{fill:var(--search-icon-color)}.picmo__picker .picmo__searchContainer .picmo__clearButton{border:0;color:var(--search-icon-color);background:transparent;cursor:pointer}.picmo__picker .picmo__searchContainer .picmo__clearSearchButton{cursor:pointer;border:none;background:transparent;color:var(--search-icon-color);font-size:1em;width:100%;height:100%;display:flex;align-items:center;padding:0}.picmo__picker .picmo__searchContainer .picmo__notFound [data-icon]{fill:#f3e265}.picmo__picker .picmo__variantOverlay{background:var(--overlay-background-color);border-radius:5px;display:flex;flex-direction:column;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%;z-index:1}.picmo__picker .picmo__variantOverlay .picmo__variantPopup{background:var(--variant-popup-background-color);border-radius:5px;margin:.5em;padding:.5em;text-align:center;user-select:none;display:flex;align-items:center;justify-content:center}.picmo__customEmoji{width:1em;height:1em}@keyframes shine{to{transform:translate(100%)}}.picmo__picker .picmo__imagePlaceholder{width:2rem;height:2rem;border-radius:50%}.picmo__placeholder{background:#DDDBDD;position:relative}.picmo__placeholder:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background-image:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.2) 20%,rgba(255,255,255,.5) 60%,rgba(255,255,255,0) 100%);animation:shine 2s infinite;content:""}\n');var e=Ey(t),n=((null==e?void 0:e.custom)||[]).map((function(t){return jm(jm({},t),{},{custom:!0,tags:["custom"].concat(Pm(t.tags||[]))})})),r=new Cy;Pg||(Pg=function(t){return _v(t.locale,t.dataStore,t.messages,t.emojiData)}(e));var o=new Mg(e.i18n);Pg.then((function(t){r.emit("data:ready",t)})).catch((function(t){r.emit("error",t)}));var i=new Tg({events:r,i18n:o,customEmojis:n,renderer:e.renderer,options:e,emojiData:Pg,pickerId:"picmo-".concat(Date.now(),"-").concat(Fg++)}).create(jg);return i.renderSync(),i}Symbol.toStringTag;var Bg=["alignment","allowedPlacements","autoAlignment"],Ig=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],Rg=["mainAxis","crossAxis","limiter"];function zg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zg(r.key),r)}}function Hg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||qg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vg(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function $g(t){return function(t){if(Array.isArray(t))return Wg(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||qg(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qg(t,e){if(t){if("string"===typeof t)return Wg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wg(t,e):void 0}}function Wg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kg(){Kg=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=b.prototype=y.prototype=Object.create(w);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Ug(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function C(e,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=O(s,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Ug(e)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},S(D.prototype),c(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new D(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,u,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Ug(t){return Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ug(t)}function Gg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gg(Object(n),!0).forEach((function(e){Yg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yg(t,e,n){return(e=Zg(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zg(t){var e=function(t,e){if("object"!=Ug(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ug(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ug(e)?e:String(e)}function Xg(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function Qg(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Xg(i,r,o,a,s,"next",t)}function s(t){Xg(i,r,o,a,s,"throw",t)}a(void 0)}))}}function tb(t){return t.split("-")[0]}function eb(t){return t.split("-")[1]}function nb(t){return["top","bottom"].includes(tb(t))?"x":"y"}function rb(t){return"y"===t?"height":"width"}function ob(t,e,n){var r,o=t.reference,i=t.floating,a=o.x+o.width/2-i.width/2,s=o.y+o.height/2-i.height/2,u=nb(e),c=rb(u),l=o[c]/2-i[c]/2,f="x"===u;switch(tb(e)){case"top":r={x:a,y:o.y-i.height};break;case"bottom":r={x:a,y:o.y+o.height};break;case"right":r={x:o.x+o.width,y:s};break;case"left":r={x:o.x-i.width,y:s};break;default:r={x:o.x,y:o.y}}switch(eb(e)){case"start":r[u]-=l*(n&&f?-1:1);break;case"end":r[u]+=l*(n&&f?-1:1)}return r}var ib=function(){var t=Qg(Kg().mark((function t(e,n,r){var o,i,a,s,u,c,l,f,d,h,p,m,v,y,g,b,w,k,x,E,S,D,C,O,A;return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.placement,i=void 0===o?"bottom":o,a=r.strategy,s=void 0===a?"absolute":a,u=r.middleware,c=void 0===u?[]:u,l=r.platform,t.next=9,null==l.isRTL?void 0:l.isRTL(n);case 9:return f=t.sent,t.next=12,l.getElementRects({reference:e,floating:n,strategy:s});case 12:d=t.sent,h=ob(d,i,f),p=h.x,m=h.y,v=i,y={},g=0,b=0;case 20:if(!(b<c.length)){t.next=52;break}return w=c[b],k=w.name,x=w.fn,t.next=26,x({x:p,y:m,initialPlacement:i,placement:v,strategy:s,middlewareData:y,rects:d,platform:l,elements:{reference:e,floating:n}});case 26:if(E=t.sent,S=E.x,D=E.y,C=E.data,O=E.reset,p=null!=S?S:p,m=null!=D?D:m,y=Jg(Jg({},y),{},Yg({},k,Jg(Jg({},y[k]),C))),!(O&&g<=50)){t.next=49;break}if(g++,t.t0="object"==Ug(O),!t.t0){t.next=47;break}if(O.placement&&(v=O.placement),t.t1=O.rects,!t.t1){t.next=46;break}if(!0!==O.rects){t.next=44;break}return t.next=41,l.getElementRects({reference:e,floating:n,strategy:s});case 41:t.t2=t.sent,t.next=45;break;case 44:t.t2=O.rects;case 45:d=t.t2;case 46:A=ob(d,v,f),p=A.x,m=A.y;case 47:return b=-1,t.abrupt("continue",49);case 49:b++,t.next=20;break;case 52:return t.abrupt("return",{x:p,y:m,placement:v,strategy:s,middlewareData:y});case 53:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();function ab(t){return"number"!=typeof t?function(t){return Jg({top:0,right:0,bottom:0,left:0},t)}(t):{top:t,right:t,bottom:t,left:t}}function sb(t){return Jg(Jg({},t),{},{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height})}function ub(t,e){return cb.apply(this,arguments)}function cb(){return cb=Qg(Kg().mark((function t(e,n){var r,o,i,a,s,u,c,l,f,d,h,p,m,v,y,g,b,w,k,x,E;return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n={}),o=e.x,i=e.y,a=e.platform,s=e.rects,u=e.elements,c=e.strategy,f=(l=n).boundary,d=void 0===f?"clippingAncestors":f,h=l.rootBoundary,p=void 0===h?"viewport":h,m=l.elementContext,v=void 0===m?"floating":m,y=l.altBoundary,g=void 0!==y&&y,b=l.padding,w=ab(void 0===b?0:b),k=u[g?"floating"===v?"reference":"floating":v],t.t0=sb,t.t1=a,t.next=24,null==a.isElement?void 0:a.isElement(k);case 24:if(t.t3=r=t.sent,t.t2=null==t.t3,t.t2){t.next=28;break}t.t2=r;case 28:if(!t.t2){t.next=32;break}t.t4=k,t.next=38;break;case 32:if(t.t5=k.contextElement,t.t5){t.next=37;break}return t.next=36,null==a.getDocumentElement?void 0:a.getDocumentElement(u.floating);case 36:t.t5=t.sent;case 37:t.t4=t.t5;case 38:return t.t6=t.t4,t.t7=d,t.t8=p,t.t9=c,t.t10={element:t.t6,boundary:t.t7,rootBoundary:t.t8,strategy:t.t9},t.next=45,t.t1.getClippingRect.call(t.t1,t.t10);case 45:if(t.t11=t.sent,x=(0,t.t0)(t.t11),t.t12=sb,!a.convertOffsetParentRelativeRectToViewportRelativeRect){t.next=61;break}return t.t14=a,t.t15="floating"===v?Jg(Jg({},s.floating),{},{x:o,y:i}):s.reference,t.next=53,null==a.getOffsetParent?void 0:a.getOffsetParent(u.floating);case 53:return t.t16=t.sent,t.t17=c,t.t18={rect:t.t15,offsetParent:t.t16,strategy:t.t17},t.next=58,t.t14.convertOffsetParentRelativeRectToViewportRelativeRect.call(t.t14,t.t18);case 58:t.t13=t.sent,t.next=62;break;case 61:t.t13=s[v];case 62:return t.t19=t.t13,E=(0,t.t12)(t.t19),t.abrupt("return",{top:x.top-E.top+w.top,bottom:E.bottom-x.bottom+w.bottom,left:x.left-E.left+w.left,right:E.right-x.right+w.right});case 65:case"end":return t.stop()}}),t)}))),cb.apply(this,arguments)}var lb=Math.min,fb=Math.max;function db(t,e,n){return fb(t,lb(e,n))}var hb={left:"right",right:"left",bottom:"top",top:"bottom"};function pb(t){return t.replace(/left|right|bottom|top/g,(function(t){return hb[t]}))}function mb(t,e,n){void 0===n&&(n=!1);var r=eb(t),o=nb(t),i=rb(o),a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=pb(a)),{main:a,cross:pb(a)}}var vb={start:"end",end:"start"};function yb(t){return t.replace(/start|end/g,(function(t){return vb[t]}))}var gb=["top","right","bottom","left"].reduce((function(t,e){return t.concat(e,e+"-start",e+"-end")}),[]);function bb(t,e,n){return(t?[].concat($g(n.filter((function(e){return eb(e)===t}))),$g(n.filter((function(e){return eb(e)!==t})))):n.filter((function(t){return tb(t)===t}))).filter((function(n){return!t||(eb(n)===t||!!e&&yb(n)!==n)}))}var wb=function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,fn:function(e){return Qg(Kg().mark((function n(){var r,o,i,a,s,u,c,l,f,d,h,p,m,v,y,g,b,w,k,x,E,S,D,C,O,A,j,T,M,L,P,F,N;return Kg().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=e.x,c=e.y,l=e.rects,f=e.middlewareData,d=e.placement,h=e.platform,p=e.elements,v=(m=t).alignment,y=void 0===v?null:v,g=m.allowedPlacements,b=void 0===g?gb:g,w=m.autoAlignment,k=void 0===w||w,x=Vg(m,Bg),E=bb(y,k,b),n.next=18,ub(e,x);case 18:if(S=n.sent,D=null!=(r=null==(o=f.autoPlacement)?void 0:o.index)?r:0,null!=(C=E[D])){n.next=23;break}return n.abrupt("return",{});case 23:return n.t0=mb,n.t1=C,n.t2=l,n.next=28,null==h.isRTL?void 0:h.isRTL(p.floating);case 28:if(n.t3=n.sent,O=(0,n.t0)(n.t1,n.t2,n.t3),A=O.main,j=O.cross,d===C){n.next=34;break}return n.abrupt("return",{x:u,y:c,reset:{placement:E[0]}});case 34:if(T=[S[tb(C)],S[A],S[j]],M=[].concat($g(null!=(i=null==(a=f.autoPlacement)?void 0:a.overflows)?i:[]),[{placement:C,overflows:T}]),!(L=E[D+1])){n.next=37;break}return n.abrupt("return",{data:{index:D+1,overflows:M},reset:{placement:L}});case 37:return P=M.slice().sort((function(t,e){return t.overflows[0]-e.overflows[0]})),F=null==(s=P.find((function(t){return t.overflows.every((function(t){return t<=0}))})))?void 0:s.placement,N=null!=F?F:P[0].placement,n.abrupt("return",N!==d?{data:{index:D+1,overflows:M},reset:{placement:N}}:{});case 39:case"end":return n.stop()}}),n)})))()}}};function kb(t){var e=pb(t);return[yb(t),e,yb(e)]}var xb=function(t){return void 0===t&&(t={}),{name:"flip",options:t,fn:function(e){return Qg(Kg().mark((function n(){var r,o,i,a,s,u,c,l,f,d,h,p,m,v,y,g,b,w,k,x,E,S,D,C,O,A,j,T,M,L,P,F,N,_;return Kg().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.placement,i=e.middlewareData,a=e.rects,s=e.initialPlacement,u=e.platform,c=e.elements,f=(l=t).mainAxis,d=void 0===f||f,h=l.crossAxis,p=void 0===h||h,m=l.fallbackPlacements,v=l.fallbackStrategy,y=void 0===v?"bestFit":v,g=l.flipAlignment,b=void 0===g||g,w=Vg(l,Ig),k=tb(o),x=m||(k!==s&&b?kb(s):[pb(s)]),E=[s].concat($g(x)),n.next=22,ub(e,w);case 22:if(S=n.sent,D=[],C=(null==(r=i.flip)?void 0:r.overflows)||[],d&&D.push(S[k]),!p){n.next=36;break}return n.t0=mb,n.t1=o,n.t2=a,n.next=31,null==u.isRTL?void 0:u.isRTL(c.floating);case 31:n.t3=n.sent,O=(0,n.t0)(n.t1,n.t2,n.t3),A=O.main,j=O.cross,D.push(S[A],S[j]);case 36:if(C=[].concat($g(C),[{placement:o,overflows:D}]),D.every((function(t){return t<=0}))){n.next=51;break}if(L=(null!=(T=null==(M=i.flip)?void 0:M.index)?T:0)+1,!(P=E[L])){n.next=40;break}return n.abrupt("return",{data:{index:L,overflows:C},reset:{placement:P}});case 40:F="bottom",n.t4=y,n.next="bestFit"===n.t4?44:"initialPlacement"===n.t4?47:49;break;case 44:return _=null==(N=C.map((function(t){return[t,t.overflows.filter((function(t){return t>0})).reduce((function(t,e){return t+e}),0)]})).sort((function(t,e){return t[1]-e[1]}))[0])?void 0:N[0].placement,_&&(F=_),n.abrupt("break",49);case 47:return F=s,n.abrupt("break",49);case 49:if(o===F){n.next=51;break}return n.abrupt("return",{reset:{placement:F}});case 51:return n.abrupt("return",{});case 52:case"end":return n.stop()}}),n)})))()}}};function Eb(t,e){return Sb.apply(this,arguments)}function Sb(){return Sb=Qg(Kg().mark((function t(e,n){var r,o,i,a,s,u,c,l,f,d,h,p,m,v;return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.placement,o=e.platform,i=e.elements,t.next=5,null==o.isRTL?void 0:o.isRTL(i.floating);case 5:return a=t.sent,s=tb(r),u=eb(r),c="x"===nb(r),l=["left","top"].includes(s)?-1:1,f=a&&c?-1:1,d="function"==typeof n?n(e):n,h="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:Jg({mainAxis:0,crossAxis:0,alignmentAxis:null},d),p=h.mainAxis,m=h.crossAxis,v=h.alignmentAxis,t.abrupt("return",(u&&"number"==typeof v&&(m="end"===u?-1*v:v),c?{x:m*f,y:p*l}:{x:p*l,y:m*f}));case 14:case"end":return t.stop()}}),t)}))),Sb.apply(this,arguments)}var Db=function(t){return void 0===t&&(t=0),{name:"offset",options:t,fn:function(e){return Qg(Kg().mark((function n(){var r,o,i;return Kg().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.x,o=e.y,n.next=4,Eb(e,t);case 4:return i=n.sent,n.abrupt("return",{x:r+i.x,y:o+i.y,data:i});case 6:case"end":return n.stop()}}),n)})))()}}};function Cb(t){return"x"===t?"y":"x"}var Ob=function(t){return void 0===t&&(t={}),{name:"shift",options:t,fn:function(e){return Qg(Kg().mark((function n(){var r,o,i,a,s,u,c,l,f,d,h,p,m,v,y,g,b,w,k,x,E,S,D,C;return Kg().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.x,o=e.y,i=e.placement,s=(a=t).mainAxis,u=void 0===s||s,c=a.crossAxis,l=void 0!==c&&c,f=a.limiter,d=void 0===f?{fn:function(t){return{x:t.x,y:t.y}}}:f,h=Vg(a,Rg),p={x:r,y:o},n.next=14,ub(e,h);case 14:return m=n.sent,v=nb(tb(i)),y=Cb(v),g=p[v],b=p[y],u&&(w="y"===v?"bottom":"right",k=g+m["y"===v?"top":"left"],x=g-m[w],g=db(k,g,x)),l&&(E="y"===y?"bottom":"right",S=b+m["y"===y?"top":"left"],D=b-m[E],b=db(S,b,D)),C=d.fn(Jg(Jg({},e),{},Yg(Yg({},v,g),y,b))),n.abrupt("return",Jg(Jg({},C),{},{data:{x:C.x-r,y:C.y-o}}));case 22:case"end":return n.stop()}}),n)})))()}}};function Ab(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function jb(t){if(null==t)return window;if(!Ab(t)){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Tb(t){return jb(t).getComputedStyle(t)}function Mb(t){return Ab(t)?"":t?(t.nodeName||"").toLowerCase():""}function Lb(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Pb(t){return t instanceof jb(t).HTMLElement}function Fb(t){return t instanceof jb(t).Element}function Nb(t){return!(("undefined"===typeof ShadowRoot?"undefined":Ug(ShadowRoot))>"u")&&(t instanceof jb(t).ShadowRoot||t instanceof ShadowRoot)}function _b(t){var e=Tb(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Bb(t){return["table","td","th"].includes(Mb(t))}function Ib(t){var e=/firefox/i.test(Lb()),n=Tb(t);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||e&&"filter"===n.willChange||e&&!!n.filter&&"none"!==n.filter}function Rb(){return!/^((?!chrome|android).)*safari/i.test(Lb())}var zb=Math.min,Hb=Math.max,Vb=Math.round;function $b(t,e,n){var r,o,i,a;void 0===e&&(e=!1),void 0===n&&(n=!1);var s=t.getBoundingClientRect(),u=1,c=1;e&&Pb(t)&&(u=t.offsetWidth>0&&Vb(s.width)/t.offsetWidth||1,c=t.offsetHeight>0&&Vb(s.height)/t.offsetHeight||1);var l=Fb(t)?jb(t):window,f=!Rb()&&n,d=(s.left+(f&&null!=(r=null==(o=l.visualViewport)?void 0:o.offsetLeft)?r:0))/u,h=(s.top+(f&&null!=(i=null==(a=l.visualViewport)?void 0:a.offsetTop)?i:0))/c,p=s.width/u,m=s.height/c;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function qb(t){return((function(t){return t instanceof jb(t).Node}(t)?t.ownerDocument:t.document)||window.document).documentElement}function Wb(t){return Fb(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Kb(t){return $b(qb(t)).left+Wb(t).scrollLeft}function Ub(t,e,n){var r=Pb(e),o=qb(e),i=$b(t,r&&function(t){var e=$b(t);return Vb(e.width)!==t.offsetWidth||Vb(e.height)!==t.offsetHeight}(e),"fixed"===n),a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==Mb(e)||_b(o))&&(a=Wb(e)),Pb(e)){var u=$b(e,!0);s.x=u.x+e.clientLeft,s.y=u.y+e.clientTop}else o&&(s.x=Kb(o));return{x:i.left+a.scrollLeft-s.x,y:i.top+a.scrollTop-s.y,width:i.width,height:i.height}}function Gb(t){return"html"===Mb(t)?t:t.assignedSlot||t.parentNode||(Nb(t)?t.host:null)||qb(t)}function Jb(t){return Pb(t)&&"fixed"!==Tb(t).position?function(t){for(var e=t.offsetParent,n=t,r=!1;n&&n!==e;){var o=n.assignedSlot;if(o){var i=o.offsetParent;if("contents"===Tb(o).display){var a=o.hasAttribute("style"),s=o.style.display;o.style.display=Tb(n).display,i=o.offsetParent,o.style.display=s,a||o.removeAttribute("style")}n=o,e!==i&&(e=i,r=!0)}else if(Nb(n)&&n.host&&r)break;n=Nb(n)&&n.host||n.parentNode}return e}(t):null}function Yb(t){for(var e=jb(t),n=Jb(t);n&&Bb(n)&&"static"===Tb(n).position;)n=Jb(n);return n&&("html"===Mb(n)||"body"===Mb(n)&&"static"===Tb(n).position&&!Ib(n))?e:n||function(t){var e=Gb(t);for(Nb(e)&&(e=e.host);Pb(e)&&!["html","body"].includes(Mb(e));){if(Ib(e))return e;var n=e.parentNode;e=Nb(n)?n.host:n}return null}(t)||e}function Zb(t){if(Pb(t))return{width:t.offsetWidth,height:t.offsetHeight};var e=$b(t);return{width:e.width,height:e.height}}function Xb(t){var e=Gb(t);return["html","body","#document"].includes(Mb(e))?t.ownerDocument.body:Pb(e)&&_b(e)?e:Xb(e)}function Qb(t,e){var n;void 0===e&&(e=[]);var r=Xb(t),o=r===(null==(n=t.ownerDocument)?void 0:n.body),i=jb(r),a=o?[i].concat(i.visualViewport||[],_b(r)?r:[]):r,s=e.concat(a);return o?s:s.concat(Qb(a))}function tw(t,e,n){return"viewport"===e?sb(function(t,e){var n=jb(t),r=qb(t),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,u=0;if(o){i=o.width,a=o.height;var c=Rb();(c||!c&&"fixed"===e)&&(s=o.offsetLeft,u=o.offsetTop)}return{width:i,height:a,x:s,y:u}}(t,n)):Fb(e)?function(t,e){var n=$b(t,!1,"fixed"===e),r=n.top+t.clientTop,o=n.left+t.clientLeft;return{top:r,left:o,x:o,y:r,right:o+t.clientWidth,bottom:r+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(e,n):sb(function(t){var e,n=qb(t),r=Wb(t),o=null==(e=t.ownerDocument)?void 0:e.body,i=Hb(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=Hb(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+Kb(t),u=-r.scrollTop;return"rtl"===Tb(o||n).direction&&(s+=Hb(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:u}}(qb(t)))}function ew(t){var e=Qb(t),n=["absolute","fixed"].includes(Tb(t).position)&&Pb(t)?Yb(t):t;return Fb(n)?e.filter((function(t){return Fb(t)&&function(t,e){var n=null==e.getRootNode?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&Nb(n)){var r=e;do{if(r&&t===r)return!0;r=r.parentNode||r.host}while(r)}return!1}(t,n)&&"body"!==Mb(t)})):[]}var nw={getClippingRect:function(t){var e=t.element,n=t.boundary,r=t.rootBoundary,o=t.strategy,i=[].concat($g("clippingAncestors"===n?ew(e):[].concat(n)),[r]),a=i[0],s=i.reduce((function(t,n){var r=tw(e,n,o);return t.top=Hb(r.top,t.top),t.right=zb(r.right,t.right),t.bottom=zb(r.bottom,t.bottom),t.left=Hb(r.left,t.left),t}),tw(e,a,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){var e=t.rect,n=t.offsetParent,r=t.strategy,o=Pb(n),i=qb(n);if(n===i)return e;var a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if((o||!o&&"fixed"!==r)&&(("body"!==Mb(n)||_b(i))&&(a=Wb(n)),Pb(n))){var u=$b(n,!0);s.x=u.x+n.clientLeft,s.y=u.y+n.clientTop}return Jg(Jg({},e),{},{x:e.x-a.scrollLeft+s.x,y:e.y-a.scrollTop+s.y})},isElement:Fb,getDimensions:Zb,getOffsetParent:Yb,getDocumentElement:qb,getElementRects:function(t){var e=t.reference,n=t.floating,r=t.strategy;return{reference:Ub(e,Yb(n),r),floating:Jg(Jg({},Zb(n)),{},{x:0,y:0})}},getClientRects:function(t){return Array.from(t.getClientRects())},isRTL:function(t){return"rtl"===Tb(t).direction}};function rw(t,e,n,r){void 0===r&&(r={});var o=r,i=o.ancestorScroll,a=void 0===i||i,s=o.ancestorResize,u=void 0===s||s,c=o.elementResize,l=void 0===c||c,f=o.animationFrame,d=void 0!==f&&f,h=a&&!d,p=u&&!d,m=h||p?[].concat($g(Fb(t)?Qb(t):[]),$g(Qb(e))):[];m.forEach((function(t){h&&t.addEventListener("scroll",n,{passive:!0}),p&&t.addEventListener("resize",n)}));var v=null;if(l){var y=!0;v=new ResizeObserver((function(){y||n(),y=!1})),Fb(t)&&!d&&v.observe(t),v.observe(e)}var g,b=d?$b(t):null;return d&&function e(){var r=$b(t);b&&(r.x!==b.x||r.y!==b.y||r.width!==b.width||r.height!==b.height)&&n(),b=r,g=requestAnimationFrame(e)}(),n(),function(){var t;m.forEach((function(t){h&&t.removeEventListener("scroll",n),p&&t.removeEventListener("resize",n)})),null==(t=v)||t.disconnect(),v=null,d&&cancelAnimationFrame(g)}}var ow=function(t,e,n){return ib(t,e,Jg({platform:nw},n))};function iw(t,e,n,r){return aw.apply(this,arguments)}function aw(){return aw=Qg(Kg().mark((function t(e,n,r,o){return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=2;break}throw new Error("Must provide a positioning option");case 2:return t.next=4,"string"==typeof o?sw(e,n,r,o):cw(n,o);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),aw.apply(this,arguments)}function sw(t,e,n,r){return uw.apply(this,arguments)}function uw(){return uw=Qg(Kg().mark((function t(e,n,r,o){var i;return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw new Error("Reference element is required for relative positioning");case 2:return t.abrupt("return",(i="auto"===o?{middleware:[wb(),Ob(),Db({mainAxis:5,crossAxis:12})]}:{placement:o,middleware:[xb(),Ob(),Db(5)]},rw(r,n,Qg(Kg().mark((function t(){var o,a,s;return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.isConnected&&r.offsetParent||!lw(e)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,ow(r,n,i);case 4:o=t.sent,a=o.x,s=o.y,Object.assign(n.style,{position:"absolute",left:"".concat(a,"px"),top:"".concat(s,"px")});case 8:case"end":return t.stop()}}),t)}))))));case 3:case"end":return t.stop()}}),t)}))),uw.apply(this,arguments)}function cw(t,e){return t.style.position="fixed",Object.entries(e).forEach((function(e){var n=Hg(e,2),r=n[0],o=n[1];t.style[r]=o})),function(){}}function lw(t){switch(t.options.onPositionLost){case"close":return t.close(),!0;case"destroy":return t.destroy(),!0;case"hold":return!0}}var fw={hideOnClickOutside:!0,hideOnEmojiSelect:!0,hideOnEscape:!0,position:"auto",showCloseButton:!0,onPositionLost:"none"};var dw=cv("popupContainer","closeButton"),hw=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isOpen=!1,this.externalEvents=new Sy,this.options=Jg(Jg({},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Jg(Jg({},fw),{},{rootElement:document.body},t)}(n)),Ey(e)),this.popupEl=document.createElement("div"),this.popupEl.classList.add(dw.popupContainer),this.popupEl.classList.add(this.options.theme),n.className&&this.popupEl.classList.add(n.className),this.options.showCloseButton&&(this.closeButton=document.createElement("button"),this.closeButton.type="button",this.closeButton.classList.add(dw.closeButton),this.closeButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">\x3c!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e<path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>',this.closeButton.addEventListener("click",(function(){r.close()})),this.popupEl.appendChild(this.closeButton));var o=document.createElement("div");this.popupEl.appendChild(o),this.picker=_g(Jg(Jg({},this.options),{},{rootElement:o})),this.focusTrap=new Iv,this.picker.addEventListener("data:ready",(function(){r.focusTrap.activate(r.picker.el),r.picker.setInitialFocus()})),this.options.hideOnEmojiSelect&&this.picker.addEventListener("emoji:select",(function(){var t;r.close(),null==(t=r.triggerElement)||t.focus()})),this.options.hideOnClickOutside&&(this.onDocumentClick=this.onDocumentClick.bind(this),document.addEventListener("click",this.onDocumentClick)),this.options.hideOnEscape&&(this.handleKeydown=this.handleKeydown.bind(this),this.popupEl.addEventListener("keydown",this.handleKeydown)),this.referenceElement=this.options.referenceElement,this.triggerElement=this.options.triggerElement}var e,n,r,o,i,a,s,u;return e=t,n=[{key:"addEventListener",value:function(t,e){this.externalEvents.on(t,e),this.picker.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.externalEvents.off(t,e),this.picker.removeEventListener(t,e)}},{key:"handleKeydown",value:function(t){var e;"Escape"===t.key&&(this.close(),null==(e=this.triggerElement)||e.focus())}},{key:"destroy",value:(u=Qg(Kg().mark((function t(){return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.isOpen,!t.t0){t.next=4;break}return t.next=4,this.close();case 4:document.removeEventListener("click",this.onDocumentClick),this.picker.destroy(),this.externalEvents.removeAll();case 7:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"toggle",value:function(t){return this.isOpen?this.close():this.open(t)}},{key:"open",value:(s=Qg(Kg().mark((function t(){var e,n,r,o=arguments;return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(e=o.length>0&&void 0!==o[0]?o[0]:{}).triggerElement,r=e.referenceElement,t.t0=this.isOpen,t.t0){t.next=18;break}return n&&(this.triggerElement=n),r&&(this.referenceElement=r),t.next=7,this.initiateOpenStateChange(!0);case 7:return this.popupEl.style.opacity="0",this.options.rootElement.appendChild(this.popupEl),t.next=11,this.setPosition();case 11:return this.picker.reset(!1),t.next=14,this.animatePopup(!0);case 14:return t.next=16,this.animateCloseButton(!0);case 16:this.picker.setInitialFocus(),this.externalEvents.emit("picker:open");case 18:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"close",value:(a=Qg(Kg().mark((function t(){var e;return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=!this.isOpen,t.t0){t.next=13;break}return t.next=4,this.initiateOpenStateChange(!1);case 4:return t.next=6,this.animateCloseButton(!1);case 6:return t.next=8,this.animatePopup(!1);case 8:this.popupEl.remove(),this.picker.reset(),null==(e=this.positionCleanup)||e.call(this),this.focusTrap.deactivate(),this.externalEvents.emit("picker:close");case 13:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getRunningAnimations",value:function(){return this.picker.el.getAnimations().filter((function(t){return"running"===t.playState}))}},{key:"setPosition",value:(i=Qg(Kg().mark((function t(){var e;return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(e=this.positionCleanup)||e.call(this),t.next=3,iw(this,this.popupEl,this.referenceElement,this.options.position);case 3:this.positionCleanup=t.sent;case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"awaitPendingAnimations",value:function(){return Promise.all(this.getRunningAnimations().map((function(t){return t.finished})))}},{key:"onDocumentClick",value:function(t){var e,n=t.target,r=null==(e=this.triggerElement)?void 0:e.contains(n);this.isOpen&&!this.picker.isPickerClick(t)&&!r&&this.close()}},{key:"animatePopup",value:function(t){return iv(this.popupEl,{opacity:[0,1],transform:["scale(0.9)","scale(1)"]},{duration:150,id:t?"show-picker":"hide-picker",easing:"ease-in-out",direction:t?"normal":"reverse",fill:"both"},this.options)}},{key:"animateCloseButton",value:function(t){if(this.closeButton)return iv(this.closeButton,{opacity:[0,1]},{duration:25,id:t?"show-close":"hide-close",easing:"ease-in-out",direction:t?"normal":"reverse",fill:"both"},this.options)}},{key:"initiateOpenStateChange",value:(o=Qg(Kg().mark((function t(e){return Kg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isOpen=e,t.next=3,this.awaitPendingAnimations();case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],n&&zg(e.prototype,n),r&&zg(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),pw=Lg();var mw=n(3925);var vw=/200D|FE0E|FE0F/g,yw=["da","de","en","en-gb","es","es-mx","et","fi","fr","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","zh","zh-hant"];new RegExp("(-| )?(".concat(vw.source,")"),"g");function gw(t){return gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gw(t)}function bw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ww(t,e,n){return(e=xw(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xw(r.key),r)}}function xw(t){var e=function(t,e){if("object"!=gw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=gw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gw(e)?e:String(e)}var Ew=null,Sw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=t.i18n(),r=n.dictionary,o=n.messages.buttonText,i=document.createElement("span");i.className="emoji__container";var a=document.createElement("span");a.className="emoji__trigger";var s=document.createElement("button");s.className="emoji__button",s.type="button",s.setAttribute("aria-label",o),s.innerHTML='<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="smile" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z"></path></svg>';var u=document.createElement("span");u.className="emoji__reference";var c=e.parentNode;c.insertBefore(i,e),i.appendChild(e),i.appendChild(a),i.appendChild(u),a.appendChild(s),c.querySelectorAll(".form-error").forEach((function(t){return i.appendChild(t)}));var l,f,d=(l=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bw(Object(n),!0).forEach((function(e){ww(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({autoFocus:"search",locale:t.locale(),i18n:r},window.matchMedia("(max-width: ".concat(mw.screens.sm,")")).matches&&{emojiSize:"1.5rem"}),f={position:"bottom-end",triggerElement:s,className:"emoji__decidim",referenceElement:u},pw(".picmo__popupContainer{display:flex;flex-direction:column;position:absolute}.picmo__popupContainer .picmo__closeButton{position:absolute;opacity:0;background:transparent;border:none;z-index:1;right:0;top:0;cursor:pointer;padding:4px;align-self:flex-end;transform:translate(50%,-50%);background:#999999;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%}.picmo__popupContainer .picmo__closeButton:hover{background:var(--accent-color)}.picmo__popupContainer .picmo__closeButton svg{fill:#fff;width:1.25rem;height:1.25rem}\n"),new hw(Jg({autoFocus:"auto"},l),f));d.closeButton.type="button";var h=function(){d.toggle()};s.addEventListener("click",h),e.addEventListener("characterCounter",(function(t){t.detail.remaining>=4?(s.addEventListener("click",h),s.removeAttribute("style")):(s.removeEventListener("click",h),s.setAttribute("style","color:lightgrey"))})),d.addEventListener("emoji:select",(function(t){var n=t.emoji;"true"===e.contentEditable?e.editor?e.editor.chain().insertContent(" ".concat(n," ")).focus().run():e.innerHTML+=" ".concat(n," "):e.value+=" ".concat(n," "),"TEXTAREA"!==e.tagName&&"INPUT"!==e.tagName||e.dispatchEvent(new Event("input"));var r=new Event("emoji.added");e.dispatchEvent(r)}))}var e,n,r;return e=t,r=[{key:"i18n",value:function(){if(Ew)return Ew;var t=Yl("emojis")||null,e=t.button;return t&&(Reflect.deleteProperty(t,"button"),t=Zl(t)),Ew={dictionary:t,messages:{buttonText:e}}}},{key:"locale",value:function(){var t=document.documentElement.getAttribute("lang");if(!yw.includes(t)){var e,n=null===(e=t)||void 0===e?void 0:e.split("-")[0];t=yw.includes(n)?n:"en"}return t}}],(n=null)&&kw(e.prototype,n),r&&kw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Dw=as.create({name:"emoji",onCreate:function(t){!function(t){var e=t.view.dom;new Sw(e)}(t.editor)}});function Cw(t){return Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cw(t)}function Ow(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Aw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ow(Object(n),!0).forEach((function(e){jw(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jw(t,e,n){return e=function(t){var e=function(t,e){if("object"!=Cw(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Cw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cw(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tw=as.create({name:"decidimKit",addOptions:function(){return{characterCount:{limit:null},heading:{levels:[2,3,4,5,6]},link:{allowTargetControl:!1},videoEmbed:!1,image:{uploadDialogSelector:null,uploadImagesPath:null,contentTypes:/^image\/(jpe?g|png|svg|webp)$/i},hashtag:!1,mention:!1,emoji:!1}},addExtensions:function(){var t=[Gc.configure({heading:!1,bold:!1,orderedList:!1,codeBlock:!1}),Qc.configure(this.options.characterCount),Kp.configure(Aw({openOnClick:!1},this.options.link)),tl,el,Mf,Hl,xu,Jc];return!1!==this.options.heading&&t.push(Ol.configure(this.options.heading)),!1!==this.options.videoEmbed&&t.push(lm.configure(this.options.videoEmbed)),!1!==this.options.image&&this.options.image.uploadDialogSelector&&t.push(jf.configure(this.options.image)),!1!==this.options.hashtag&&t.push(Cl.configure(this.options.hashtag)),!1!==this.options.mention&&t.push(em.configure(this.options.mention)),!1!==this.options.emoji&&t.push(Dw.configure(this.options.emoji)),t}}),Mw=function(t,e){return function(){return e.apply(void 0,arguments),t}},Lw=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=document.createElement(t),n={};return n.dom=Mw(n,(function(t){return t(e)})),n.append=Mw(n,(function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(o.length>0)return n.append(t),void o.forEach((function(t){return n.append(t)}));t&&(t instanceof Function?n.append(t()):(null===t||void 0===t?void 0:t.render)instanceof Function?n.append(t.render()):t instanceof Node&&t.childNodes.length>0&&e.appendChild(t))})),n.render=function(t){return t instanceof Function&&!t(e)||!1===t?null:e},n},Pw=n.p+"media/images/remixicon.symbol-e643e553623ffcd49f94.svg",Fw=function(){return Lw("div").dom((function(t){return t.classList.add("editor-toolbar-group")}))},Nw=function(t,e){var n=e.type,r=e.label,o=e.icon,i=e.action,a=e.activatable,s=void 0===a||a;return Lw("button").dom((function(e){var a;e.classList.add("editor-toolbar-control"),e.dataset.editorType=n,s&&(e.dataset.editorSelectionType=n),e.type="button",e.ariaLabel=r,e.title=r,e.innerHTML=(a=o,'<svg class="editor-toolbar-icon" role="img" aria-hidden="true">\n    <use href="'.concat(Pw,"#ri-").concat(a,'" />\n  </svg>')),e.addEventListener("click",(function(e){e.preventDefault(),t.commands.focus(),i()}))}))},_w=function(t,e){var n=e.type,r=e.label,o=e.options,i=e.action,a=e.activatable,s=void 0===a||a;return Lw("select").dom((function(e){e.classList.add("editor-toolbar-control","!pr-8"),e.dataset.editorType=n,s&&(e.dataset.editorSelectionType=n),e.ariaLabel=r,e.title=r,o.forEach((function(t){var n=t.label,r=t.value,o=document.createElement("option");o.setAttribute("value",r),o.textContent=n,e.appendChild(o)})),e.addEventListener("change",(function(){t.commands.focus(),i(e.value)}))}))};window.createEditor=function(t){var e,n=t.parentElement.querySelector("input[type=hidden]"),r=t.parentElement.querySelector("label"),o=t.querySelector(".editor-input"),i={role:"textbox","aria-multiline":!0};if(r){var a=wp("editorlabel");r.setAttribute("id",a),i["aria-labelledby"]=a}var s=(null===(e=t.dataset)||void 0===e?void 0:e.toolbar)||"basic",u=JSON.parse(t.dataset.options),c=u.context,l=u.contentTypes,f={};if("participant"!==c&&(f.link={allowTargetControl:!0}),n.hasAttribute("maxlength")&&(f.characterCount={limit:parseInt(n.getAttribute("maxlength"),10)}),"basic"===s&&(f.heading=!1),"full"===s){f.videoEmbed=!0;var d=u.uploadImagesPath,h=u.uploadDialogSelector;f.image={uploadDialogSelector:h,contentTypes:l.image,uploadImagesPath:d}}t.classList.contains("js-hashtags")&&(f.hashtag=!0),t.classList.contains("js-mentions")&&(f.mention=!0),t.classList.contains("js-emojis")&&(f.emoji=!0);var p=new Us({element:o,editorProps:{attributes:i},content:n.value,editable:!n.disabled,extensions:[Tw.configure(f)]}),m=function(t){var e=Xl("editor.toolbar"),n={nodes:[],marks:[],extensions:[]};t.extensionManager.extensions.forEach((function(t){"node"===t.type?n.nodes.push(t.name):"mark"===t.type?n.marks.push(t.name):"extension"===t.type&&n.extensions.push(t.name)}));var r=Lw("div").dom((function(t){return t.classList.add("editor-toolbar")})).append(Fw(t).append(_w(t,{type:"heading",label:e["control.heading"],options:[{value:"normal",label:e["textStyle.normal"]},{value:2,label:e["textStyle.heading"].replace("%level%",2)},{value:3,label:e["textStyle.heading"].replace("%level%",3)},{value:4,label:e["textStyle.heading"].replace("%level%",4)},{value:5,label:e["textStyle.heading"].replace("%level%",5)},{value:6,label:e["textStyle.heading"].replace("%level%",6)}],action:function(e){"normal"===e?t.commands.setParagraph():t.commands.toggleHeading({level:parseInt(e,10)})}}).render(n.nodes.includes("heading")))).append(Fw(t).append(Nw(t,{type:"bold",icon:"bold",label:e["control.bold"],action:function(){return t.commands.toggleBold()}}).render(n.marks.includes("bold")),Nw(t,{type:"italic",icon:"italic",label:e["control.italic"],action:function(){return t.commands.toggleItalic()}}).render(n.marks.includes("italic")),Nw(t,{type:"underline",icon:"underline",label:e["control.underline"],action:function(){return t.commands.toggleUnderline()}}).render(n.marks.includes("underline")),Nw(t,{type:"hardBreak",icon:"text-wrap",label:e["control.hardBreak"],activatable:!1,action:function(){return t.commands.setHardBreak()}}).render(n.nodes.includes("hardBreak")))).append(Fw(t).append(Nw(t,{type:"orderedList",icon:"list-ordered",label:e["control.orderedList"],action:function(){return t.commands.toggleOrderedList()}}).render(n.nodes.includes("orderedList")),Nw(t,{type:"bulletList",icon:"list-unordered",label:e["control.bulletList"],action:function(){return t.commands.toggleBulletList()}}).render(n.nodes.includes("bulletList")))).append(Fw(t).append(Nw(t,{type:"link",icon:"link",label:e["control.link"],action:function(){return t.commands.linkDialog()}}).render(n.marks.includes("link")),Nw(t,{type:"common:eraseStyles",icon:"eraser-line",label:e["control.common.eraseStyles"],activatable:!1,action:function(){if(t.isActive("link")&&t.view.state.selection.empty){var e=t.view.state.selection.anchor;t.chain().focus().extendMarkRange("link").unsetLink().setTextSelection(e).run()}else t.chain().focus().clearNodes().unsetAllMarks().run()}}).render(n.nodes.includes("heading")||n.marks.includes("bold")||n.marks.includes("italic")||n.marks.includes("underline")||n.nodes.includes("hardBreak")||n.nodes.includes("orderedList")||n.nodes.includes("bulletList")||n.marks.includes("link")))).append(Fw(t).append(Nw(t,{type:"codeBlock",icon:"code-line",label:e["control.codeBlock"],action:function(){return t.commands.toggleCodeBlock()}}).render(n.nodes.includes("codeBlock")),Nw(t,{type:"blockquote",icon:"double-quotes-l",label:e["control.blockquote"],action:function(){return t.commands.toggleBlockquote()}}).render(n.nodes.includes("blockquote")))).append(Fw(t).append(Nw(t,{type:"indent:indent",icon:"indent-increase",label:e["control.indent.indent"],activatable:!1,action:function(){return t.commands.indent()}}).render(n.extensions.includes("indent")),Nw(t,{type:"indent:outdent",icon:"indent-decrease",label:e["control.indent.outdent"],activatable:!1,action:function(){return t.commands.outdent()}}).render(n.extensions.includes("indent")))).append(Fw(t).append(Nw(t,{type:"videoEmbed",icon:"video-line",label:e["control.videoEmbed"],action:function(){return t.commands.videoEmbedDialog()}}).render(n.nodes.includes("videoEmbed")),Nw(t,{type:"image",icon:"image-line",label:e["control.image"],action:function(){return t.commands.imageDialog()}}).render(n.nodes.includes("image")))).render(),o=r.querySelectorAll(".editor-toolbar-control[data-editor-selection-type]"),i=r.querySelector(".editor-toolbar-control[data-editor-type='heading']"),a=function(){if(t.isActive("heading")){var e=t.getAttributes("heading").level;i.value="".concat(e)}else i&&(i.value="normal");o.forEach((function(e){t.isActive(e.dataset.editorSelectionType)?e.classList.add("active"):e.classList.remove("active")}))};return t.on("update",a),t.on("selectionUpdate",a),r}(p);return t.insertBefore(m,o),p.on("update",(function(){return n.value=p.getHTML()})),p}}()}();
//# sourceMappingURL=decidim_editor-3f83233670b725a79b2c.js.map