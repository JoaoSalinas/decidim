!function(){var e={98232:function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n;window,n=document.querySelectorAll("button.question--collapse"),setTimeout((function(){e(n).forEach((function(e){e.classList.contains("question-error")&&e.click()}))}),100),$("button.collapse-all").on("click",(function(){$("[id$=field]").find("button.question--collapse[aria-expanded='true']").click()})),$("button.expand-all").on("click",(function(){$("[id$=field]").find("button.question--collapse[aria-expanded='false']").click()}))}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}!function(){"use strict";n(98232);function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:String(n)}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listSelector=t.listSelector,this.minItems=t.minItems,this.hideOnMinItemsOrLessSelector=t.hideOnMinItemsOrLessSelector,this.run()}var n,r,o;return n=e,(r=[{key:"run",value:function(){var e=$(this.listSelector),t=e.find(this.hideOnMinItemsOrLessSelector);e.length<=this.minItems?t.hide():t.show()}}])&&t(n.prototype,r),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:String(t)}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapperSelector=t.wrapperSelector,this.selectSelector=t.selectSelector,this.listSelector=t.listSelector}var t,n,r;return t=e,(n=[{key:"run",value:function(){var e=$(this.listSelector),t=e.parents(this.wrapperSelector).find(this.selectSelector);t.find("option").slice(1).remove();for(var n=2;n<=e.length;n+=1)$('<option value="'.concat(n,'">').concat(n,"</option>")).appendTo(t)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:String(t)}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$source=t.source,this.$select=t.select,this.sourceToParams=t.sourceToParams,this.run()}var t,n,r;return t=e,(n=[{key:"run",value:function(){this.$source.on("change",this._onSourceChange.bind(this)),this._onSourceChange()}},{key:"_onSourceChange",value:function(){var e=this.$select,t=this.sourceToParams(this.$source),n=this.$source.data("url");$.getJSON(n,t,(function(t){e.find("option:not([value=''])").remove();var n=e.data("selected");t.forEach((function(t){var r=$('<option value="'.concat(t.id,'">').concat(t.body,"</option>")).appendTo(e);t.id===n&&r.attr("selected",!0)})),n&&e.val(n)}))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:String(t)}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inputSelector=t.inputSelector,this.targetSelector=t.targetSelector,this.maxLength=t.maxLength,this.omission=t.omission,this.placeholder=t.placeholder,this._bindEvent(),this._run()}var t,n,r;return t=e,(n=[{key:"_run",value:function(){var e=$(this.inputSelector),t=$(this.targetSelector),n=e.val()||this.placeholder;n.length>this.maxLength&&(n=n.substring(0,this.maxLength-this.omission.length)+this.omission),t.text(n)}},{key:"_bindEvent",value:function(){$(this.inputSelector).on("change",this._run.bind(this))}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:String(t)}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listSelector=t.listSelector,this.hideOnFirstSelector=t.hideOnFirstSelector,this.hideOnLastSelector=t.hideOnLastSelector,this.run()}var t,n,r;return t=e,(n=[{key:"run",value:function(){var e=$(this.listSelector),t=this.hideOnFirstSelector,n=this.hideOnLastSelector;if(1===e.length){var r=e.first();r.find(t).hide(),r.find(n).hide()}else e.each((function(r,o){o.id===e.first().attr("id")?($(o).find(t).hide(),$(o).find(n).show()):o.id===e.last().attr("id")?($(o).find(n).hide(),$(o).find(t).show()):($(o).find(n).show(),$(o).find(t).show())}))}}])&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function T(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:String(t)}var F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listSelector=t.listSelector,this.labelSelector=t.labelSelector,this.onPositionComputed=t.onPositionComputed,this.run()}var t,n,r;return t=e,(n=[{key:"run",value:function(){var e=this;$(this.listSelector).each((function(t,n){var r=$(n).find(e.labelSelector),o=r.html();o.match(/#(\d+)/)?r.html(o.replace(/#(\d+)/,"#".concat(t+1))):r.html("".concat(o," #").concat(t+1)),e.onPositionComputed&&e.onPositionComputed(n,t)}))}}])&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function C(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}var q=function(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!==typeof t?Array.from(e):Array.from(e).filter((function(e){return 1===e.nodeType&&e.matches(t)}))},x=new Map,L=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var e={};return this._config.forEach((function(t,n){e[n]=t})),e},set:function(e){if("object"!==_(e))throw new Error("You must provide a valid configuration object to the config setter.");var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:!1,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!1,configurable:!0}),e.prototype.setData=function(e,t){if("string"!==typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!==typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!==typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}(),P=function(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return x.has(e)||x.set(e,new L),x.get(e)};function A(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)A(e[r],t,n);else e.addEventListener(t,n),P(e).setData("event"+t,n)}function I(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)I(e[n],t);else e.removeEventListener(t,P(e).getData("event"+t)),P(e).deleteData("event"+t)}function O(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)O(e[r],t,n);else e.setAttribute(t,n)}function D(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)D(e[n],t);else e.removeAttribute(t)}var M=function(e){if(!e.parentElement||0===e.getClientRects().length)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}},j=function(e,t){if(!(e instanceof HTMLElement)||!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)},k=function(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode},B=function(e,t,n){if(!(e instanceof HTMLElement)||!(e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},H=function(e,t){return B(e,t,"after")},U=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return"border-box"===t.getPropertyValue("box-sizing")?parseInt(t.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},Y=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},N=function(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!==typeof t?e:e.filter((function(e){return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement})).map((function(e){return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)}))},R=function(e){return e.composedPath&&e.composedPath()[0]||e.target},z=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}},W=function(e,t){if(!0===e.isSortable){var n=P(e).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!==typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(e){return e.length>0&&t.matches(e)})).length>0;if(e===t)return!0;if(void 0!==P(e).getConfig("connectWith")&&null!==P(e).getConfig("connectWith"))return P(e).getConfig("connectWith")===P(t).getConfig("connectWith")}return!1},X={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"};var V,J,G,K,Q,Z,ee,te,ne,re=function(e,t){if("string"===typeof P(e).getConfig("hoverClass")){var n=P(e).getConfig("hoverClass").split(" ");!0===t?(A(e,"mousemove",function(e,t){var n=this;if(void 0===t&&(t=250),"function"!==typeof e)throw new Error("You must provide a function as the first argument for throttle.");if("number"!==typeof t)throw new Error("You must provide a number as the second argument for throttle.");var r=null;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=Date.now();(null===r||a-r>=t)&&(r=a,e.apply(n,o))}}((function(t){0===t.buttons&&q(e.children,P(e).getConfig("items")).forEach((function(e){var r,o;e!==t.target?(r=e.classList).remove.apply(r,n):(o=e.classList).add.apply(o,n)}))}),P(e).getConfig("throttleTime"))),A(e,"mouseleave",(function(){q(e.children,P(e).getConfig("items")).forEach((function(e){var t;(t=e.classList).remove.apply(t,n)}))}))):(I(e,"mousemove"),I(e,"mouseleave"))}},oe=function(e){I(e,"dragstart"),I(e,"dragend"),I(e,"dragover"),I(e,"dragenter"),I(e,"drop"),I(e,"mouseenter"),I(e,"mouseleave")},ie=function(e,t){e&&I(e,"dragleave"),t&&t!==e&&I(t,"dragleave")},ae=function(e){var t;(t=e).h5s&&delete t.h5s.data,D(e,"aria-dropeffect")},le=function(e){D(e,"aria-grabbed"),D(e,"aria-copied"),D(e,"draggable"),D(e,"role")};function ce(e,t){if(t.composedPath)return t.composedPath().find((function(e){return e.isSortable}));for(;!0!==e.isSortable;)e=e.parentElement;return e}function ue(e,t){var n=C(e,"opts"),r=q(e.children,n.items).filter((function(e){return e.contains(t)||e.shadowRoot&&e.shadowRoot.contains(t)}));return r.length>0?r[0]:t}var se=function(e){var t=C(e,"opts"),n=q(e.children,t.items),r=N(n,t.handle);(O(e,"aria-dropeffect","move"),C(e,"_disabled","false"),O(r,"draggable","true"),!1===t.disableIEFix)&&("function"===typeof(document||window.document).createElement("span").dragDrop&&A(r,"mousedown",(function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}})))};function de(e,t){var n=String(t);return t=t||{},"string"===typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(n)?e.map((function(e){var t=C(e,"opts");return function(e,t,n){if(void 0===t&&(t=function(e,t){return e}),void 0===n&&(n=function(e){return e}),!(e instanceof HTMLElement)||!0===!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!==typeof t||"function"!==typeof n)throw new Error("You need to provide a valid serializer for items and the container.");var r=C(e,"opts").items,o=q(e.children,r),i=o.map((function(t){return{parent:e,node:t,html:t.outerHTML,index:j(t,o)}}));return{container:n({node:e,itemCount:i.length}),items:i.map((function(n){return t(n,e)}))}}(e,t.itemSerializer,t.containerSerializer)})):(e.forEach((function(e){if(/enable|disable|destroy/.test(n))return de[n](e);["connectWith","disableIEFix"].forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&null!==t[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),t=Object.assign({},X,P(e).config,t),P(e).config=t,C(e,"opts",t),e.isSortable=!0,function(e){var t=C(e,"opts"),n=q(e.children,t.items),r=N(n,t.handle);C(e,"_disabled","false"),oe(n),ie(K,te),I(r,"mousedown"),I(e,"dragover"),I(e,"dragenter"),I(e,"drop")}(e);var r,o=q(e.children,t.items);if(null!==t.placeholder&&void 0!==t.placeholder){var i=document.createElement(e.tagName);t.placeholder instanceof HTMLElement?i.appendChild(t.placeholder):i.innerHTML=t.placeholder,r=i.children[0]}P(e).placeholder=function(e,t,n){var r;if(void 0===n&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"===typeof n&&(r=t.classList).add.apply(r,n.split(" ")),t}(e,r,t.placeholderClass),C(e,"items",t.items),t.acceptFrom?C(e,"acceptFrom",t.acceptFrom):t.connectWith&&C(e,"connectWith",t.connectWith),se(e),O(o,"role","option"),O(o,"aria-grabbed","false"),re(e,!0),A(e,"dragstart",(function(e){var n=R(e);if(!0!==n.isSortable&&(e.stopImmediatePropagation(),(!t.handle||n.matches(t.handle))&&"false"!==n.getAttribute("draggable"))){var r=ce(n,e),o=ue(r,n);ee=q(r.children,t.items),Q=ee.indexOf(o),Z=j(o,r.children),K=r,function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=z),e.dataTransfer&&e.dataTransfer.setDragImage){var r=n(t,M(t),e);if(!(r.element instanceof HTMLElement)||"number"!==typeof r.posX||"number"!==typeof r.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",R(e).id),e.dataTransfer.setDragImage(r.element,r.posX,r.posY)}}(e,o,t.customDragImage),J=U(o),G=Y(o),o.classList.add(t.draggingClass),V=function(e,t){var n=e;return!0===P(t).getConfig("copy")&&(O(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n}(o,r),O(V,"aria-grabbed","true"),r.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:Z,index:Q,container:K},item:V,originalTarget:n}}))}})),A(e,"dragenter",(function(n){var r=R(n),o=ce(r,n);o&&o!==te&&(ne=q(o.children,C(o,"items")).filter((function(t){return t!==P(e).placeholder})),t.dropTargetContainerClass&&o.classList.add(t.dropTargetContainerClass),o.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:Z,index:Q,container:K},destination:{container:o,itemsBeforeUpdate:ne},item:V,originalTarget:r}})),A(o,"dragleave",(function(e){var n=e.relatedTarget||e.fromElement;e.currentTarget.contains(n)||(t.dropTargetContainerClass&&o.classList.remove(t.dropTargetContainerClass),o.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:Z,index:Q,container:o},item:V,originalTarget:r}})))}))),te=o})),A(e,"dragend",(function(n){if(V){V.classList.remove(t.draggingClass),O(V,"aria-grabbed","false"),"true"===V.getAttribute("aria-copied")&&"true"!==C(V,"dropped")&&V.remove(),V.style.display=V.oldDisplay,delete V.oldDisplay;var r=Array.from(x.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(k)[0];r&&r.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:Z,index:Q,container:K},item:V}})),te=null,V=null,J=null,G=null}})),A(e,"drop",(function(n){if(W(e,V.parentElement)){n.preventDefault(),n.stopPropagation(),C(V,"dropped","true");var r=Array.from(x.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(k)[0];H(r,V),r.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:Z,index:Q,container:K},item:V}}));var o=P(e).placeholder,i=q(K.children,t.items).filter((function(e){return e!==o})),a=!0===this.isSortable?this:this.parentElement,l=q(a.children,C(a,"items")).filter((function(e){return e!==o})),c=j(V,Array.from(V.parentElement.children).filter((function(e){return e!==o}))),u=j(V,l);t.dropTargetContainerClass&&a.classList.remove(t.dropTargetContainerClass),Z===c&&K===a||e.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:Z,index:Q,container:K,itemsBeforeUpdate:ee,items:i},destination:{index:u,elementIndex:c,container:a,itemsBeforeUpdate:ne,items:l},item:V}}))}}));var a,l,c,u=(a=function(e,n,r,o){if(V)if(t.forcePlaceholderSize&&(P(e).placeholder.style.height=J+"px",P(e).placeholder.style.width=G+"px"),Array.from(e.children).indexOf(n)>-1){var i=U(n),a=Y(n),l=j(P(e).placeholder,n.parentElement.children),c=j(n,n.parentElement.children);if(i>J||a>G){var u=i-J,s=a-G,d=M(n).top,f=M(n).left;if(l<c&&("vertical"===t.orientation&&o<d||"horizontal"===t.orientation&&r<f))return;if(l>c&&("vertical"===t.orientation&&o>d+i-u||"horizontal"===t.orientation&&r>f+a-s))return}void 0===V.oldDisplay&&(V.oldDisplay=V.style.display),"none"!==V.style.display&&(V.style.display="none");var p=!1;try{var m=M(n).top+n.offsetHeight/2,h=M(n).left+n.offsetWidth/2;p="vertical"===t.orientation&&o>=m||"horizontal"===t.orientation&&r>=h}catch(y){p=l<c}p?H(n,P(e).placeholder):function(e,t){B(e,t,"before")}(n,P(e).placeholder),Array.from(x.values()).filter((function(e){return void 0!==e.placeholder})).forEach((function(t){t.placeholder!==P(e).placeholder&&t.placeholder.remove()}))}else{var v=Array.from(x.values()).filter((function(e){return void 0!==e.placeholder})).map((function(e){return e.placeholder}));-1!==v.indexOf(n)||e!==n||q(n.children,t.items).length||(v.forEach((function(e){return e.remove()})),n.appendChild(P(e).placeholder))}},void 0===(l=t.debounce)&&(l=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(c),c=setTimeout((function(){a.apply(void 0,e)}),l)}),s=function(e){var t=e.target,n=!0===t.isSortable?t:ce(t,e);if(t=ue(n,t),V&&W(n,V.parentElement)&&"true"!==C(n,"_disabled")){var r=C(n,"opts");parseInt(r.maxItems)&&q(n.children,C(n,"items")).length>=parseInt(r.maxItems)&&V.parentElement!==n||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===P(n).getConfig("copy")?"copy":"move",u(n,t,e.pageX,e.pageY))}};A(o.concat(e),"dragover",s),A(o.concat(e),"dragenter",s)})),e)}de.destroy=function(e){!function(e){var t=C(e,"opts")||{},n=q(e.children,t.items),r=N(n,t.handle);I(e,"dragover"),I(e,"dragenter"),I(e,"dragstart"),I(e,"dragend"),I(e,"drop"),ae(e),I(r,"mousedown"),oe(n),le(n),ie(K,te),e.isSortable=!1}(e)},de.enable=function(e){se(e)},de.disable=function(e){!function(e){var t=C(e,"opts"),n=q(e.children,t.items),r=N(n,t.handle);O(e,"aria-dropeffect","none"),C(e,"_disabled","true"),O(r,"draggable","false"),I(r,"mousedown")}(e)},de.__testing={data:C,removeItemEvents:oe,removeItemData:le,removeSortableData:ae,removeContainerEvents:ie};var fe=de;function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ve(r.key),r)}}function he(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ve(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:String(t)}var ye=he((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$(t).length>0&&fe(t,n)[0].addEventListener("sortupdate",(function(e){var t=$(e.target).children();n.onSortUpdate&&n.onSortUpdate(t)}))}));function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Se(r.key),r)}}function Se(e){var t=function(e,t){if("object"!=ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ge(t)?t:String(t)}var we=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapperSelector=t.wrapperSelector,this.containerSelector=t.containerSelector,this.fieldSelector=t.fieldSelector,this.addFieldButtonSelector=t.addFieldButtonSelector,this.addSeparatorButtonSelector=t.addSeparatorButtonSelector,this.addTitleAndDescriptionButtonSelector=t.addTitleAndDescriptionButtonSelector,this.fieldTemplateSelector=t.fieldTemplateSelector,this.separatorTemplateSelector=t.separatorTemplateSelector,this.TitleAndDescriptionTemplateSelector=t.TitleAndDescriptionTemplateSelector,this.removeFieldButtonSelector=t.removeFieldButtonSelector,this.moveUpFieldButtonSelector=t.moveUpFieldButtonSelector,this.moveDownFieldButtonSelector=t.moveDownFieldButtonSelector,this.onAddField=t.onAddField,this.onRemoveField=t.onRemoveField,this.onMoveUpField=t.onMoveUpField,this.onMoveDownField=t.onMoveDownField,this.placeholderId=t.placeholderId,this.elementCounter=0,this._enableInterpolation(),this._activateFields(),this._bindEvents()}var t,n,r;return t=e,n=[{key:"_enableInterpolation",value:function(){$.fn.replaceAttribute=function(e,t,n){return $(this).find("[".concat(e,"*=").concat(t,"]")).addBack("[".concat(e,"*=").concat(t,"]")).each((function(r,o){$(o).attr(e,$(o).attr(e).replace(t,n))})),this},$.fn.template=function(e,t){var n=$(this).find("template, .decidim-template");n.length>0&&n.html((function(n,r){return $(r).template(e,t)[0].outerHTML}));var r=$(this).find("[data-template]");return r.length>0&&r.each((function(n,r){var o=$(r),i=$(o.data("template")),a=$(i[0].outerHTML),l="".concat(i.attr("id"),"-").concat(t),c="#".concat(l);a.attr("id",l),o.attr("data-template",c).data("template",c),i.after(a),a.html((function(n,r){return $(r).template(e,t)[0].outerHTML}))})),$(this).replaceAttribute("id",e,t),$(this).replaceAttribute("name",e,t),$(this).replaceAttribute("data-tabs-content",e,t),$(this).replaceAttribute("for",e,t),$(this).replaceAttribute("tabs_id",e,t),$(this).replaceAttribute("href",e,t),$(this).replaceAttribute("value",e,t),this}}},{key:"_bindEvents",value:function(){var e=this;$(this.wrapperSelector).on("click",this.addFieldButtonSelector,(function(t){return e._bindSafeEvent(t,(function(){return e._addField(e.fieldTemplateSelector)}))})),this.addSeparatorButtonSelector&&$(this.wrapperSelector).on("click",this.addSeparatorButtonSelector,(function(t){return e._bindSafeEvent(t,(function(){return e._addField(e.separatorTemplateSelector)}))})),this.addTitleAndDescriptionButtonSelector&&$(this.wrapperSelector).on("click",this.addTitleAndDescriptionButtonSelector,(function(t){return e._bindSafeEvent(t,(function(){return e._addField(e.TitleAndDescriptionTemplateSelector)}))})),$(this.wrapperSelector).on("click",this.removeFieldButtonSelector,(function(t){return e._bindSafeEvent(t,(function(t){return e._removeField(t)}))})),this.moveUpFieldButtonSelector&&$(this.wrapperSelector).on("click",this.moveUpFieldButtonSelector,(function(t){return e._bindSafeEvent(t,(function(t){return e._moveUpField(t)}))})),this.moveDownFieldButtonSelector&&$(this.wrapperSelector).on("click",this.moveDownFieldButtonSelector,(function(t){return e._bindSafeEvent(t,(function(t){return e._moveDownField(t)}))}))}},{key:"_bindSafeEvent",value:function(e,t){e.preventDefault(),e.stopPropagation();try{return t(e.target)}catch(n){return console.error(n),n}}},{key:"_addField",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".decidim-template",t=$(this.wrapperSelector),n=t.find(this.containerSelector),r=t.data("template"),o=null;r&&(o=$(r)),(null===o||o.length<1)&&(o=t.children("template, ".concat(e)));var i=$(o.html()).template(this.placeholderId,this._getUID());i.find("ul.tabs").attr("data-tabs",!0);var a=n.find(this.fieldSelector).last();a.length>0?a.after(i):i.appendTo(n),i.foundation(),this.onAddField&&this.onAddField(i)}},{key:"_removeField",value:function(e){var t=$(e).parents(this.fieldSelector);if(t.find("input").filter((function(e,t){return t.name.match(/id/)})).length>0){var n=t.find("input").filter((function(e,t){return t.name.match(/delete/)}));n.length>0&&$(n[0]).val(!0),t.addClass("hidden"),t.hide()}else t.remove();this.onRemoveField&&this.onRemoveField(t)}},{key:"_moveUpField",value:function(e){var t=$(e).parents(this.fieldSelector);t.prev().before(t),this.onMoveUpField&&this.onMoveUpField(t)}},{key:"_moveDownField",value:function(e){var t=$(e).parents(this.fieldSelector);t.next().after(t),this.onMoveDownField&&this.onMoveDownField(t)}},{key:"_activateFields",value:function(){var e=this,t=$(this.wrapperSelector).find(this.containerSelector);t.append(t.find("script")),$(this.fieldSelector).each((function(t,n){$(n).template(e.placeholderId,e._getUID()),$(n).find("ul.tabs").attr("data-tabs",!0)}))}},{key:"_getUID",value:function(){return this.elementCounter+=1,(new Date).getTime()+this.elementCounter}}],n&&be(t.prototype,n),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ee(e){return new we(e)}function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function $e(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Te(t)?t:String(t)}var _e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controllerField=t.controllerField,this.wrapperSelector=t.wrapperSelector,this.dependentFieldsSelector=t.dependentFieldsSelector,this.dependentInputSelector=t.dependentInputSelector,this.enablingCondition=t.enablingCondition,this._bindEvent(),this._run()}var t,n,r;return t=e,(n=[{key:"_run",value:function(){var e=this.controllerField,t=e.parents(this.wrapperSelector).find(this.dependentFieldsSelector),n=t.find(this.dependentInputSelector);this.enablingCondition(e)?(n.prop("disabled",!1),t.show()):(n.prop("disabled",!0),t.hide())}},{key:"_bindEvent",value:function(){var e=this;this.controllerField.on("change",(function(){e._run()}))}}])&&Fe(t.prototype,n),r&&Fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ce(e){return new _e(e)}window.Decidim.createEditableForm=function(){var e=".questionnaire-question",t=".questionnaire-question-answer-option",n=".questionnaire-question-answer-options",r=".remove-answer-option",i=".questionnaire-question-matrix-row",a=".questionnaire-question-matrix-rows",l=".remove-matrix-row",u=".questionnaire-question-max-choices",s=".questionnaire-question-display-condition",d=".questionnaire-question-display-conditions",p=".remove-display-condition",m="select[name$=\\[decidim_condition_question_id\\]]",h="select[name$=\\[condition_type\\]]",y="input[name$=\\[deleted\\]]",g=new S({listSelector:".questionnaire-question:not(.hidden)",hideOnFirstSelector:".move-up-question",hideOnLastSelector:".move-down-question"}),b=new F({listSelector:".questionnaire-question:not(.hidden)",labelSelector:".card-title span:first",onPositionComputed:function(t,n){$(t).find("input[name$=\\[position\\]]:not([name*=\\[matrix_rows\\]])").val(n),g.run(),$(e).each((function(e,t){var n=$(t);e?(n.find(d).find(y).val("false"),n.find(d).show()):(n.find(d).find(y).val("true"),n.find(d).hide())}))}}),w=["single_option","multiple_option","sorting","matrix_single","matrix_multiple"],E=["matrix_single","matrix_multiple"],T=function(){new ye(".questionnaire-questions-list:not(.published)",{handle:".question-divider",placeholder:'<div style="border-style: dashed; border-color: #000"></div>',forcePlaceholderSize:!0,onSortUpdate:function(){b.run(),g.run()}})},_=function(e){var t,n="#".concat(e," .question-title-statement"),r=$(n).data("locale"),o=$(n).data("max-length"),i=$(n).data("omission"),a=$(n).data("placeholder");return t={inputSelector:"#".concat(e," input[name$=\\[body_").concat(r,"\\]]"),targetSelector:n,maxLength:o,omission:i,placeholder:a},new v(t)},C=function(i){var a=function(t){return new o({wrapperSelector:e,listSelector:"#".concat(t," ").concat(n," .questionnaire-question-answer-option:not(.hidden)"),minItems:2,hideOnMinItemsOrLessSelector:r})}(i),l=function(t){return new c({wrapperSelector:e,selectSelector:"".concat(u," select"),listSelector:"#".concat(t," ").concat(n," .questionnaire-question-answer-option:not(.hidden)")})}(i);return Ee({placeholderId:"questionnaire-question-answer-option-id",wrapperSelector:"#".concat(i," ").concat(n),containerSelector:".questionnaire-question-answer-options-list",fieldSelector:t,addFieldButtonSelector:".add-answer-option",fieldTemplateSelector:".decidim-answer-option-template",removeFieldButtonSelector:r,onAddField:function(){a.run(),l.run()},onRemoveField:function(){a.run(),l.run()}})},q={},x={},L=function(e){return w.indexOf(e)>=0},P=function(e){return E.indexOf(e)>=0},A=function(e){var t=e.options[e.selectedIndex];return $(t).data("type")},I=function(e){var t=e.find(m),n=A(t[0]),r=L(n),o=["answered","not_answered"];r&&(o.push("equal"),o.push("not_equal")),o.push("match");var i=e.find(h);i.find("option").each((function(e,t){var n=$(t),r=n.val();r&&(n.show(),o.indexOf(r)<0&&n.hide())})),o.indexOf(i.val())<0&&i.val(o[0]),i.trigger("change")},O=function(e){var t=e.find(h).val(),n=e.find(".questionnaire-question-display-condition-value"),r=e.find(".questionnaire-question-display-condition-answer-option"),o=e.find(m),i=A(o[0]),a=L(i);"match"===t?n.show():n.hide(),!a||"not_equal"!==t&&"equal"!==t?r.hide():r.show()},D=function(e){var t=function(e){return new f({source:e.find(m),select:e.find("select[name$=\\[decidim_answer_option_id\\]]"),sourceToParams:function(e){return{id:e.val()}}})}(e);t.run(),e.find(m).on("change",(function(){I(e)})),e.find(h).on("change",(function(){O(e)})),O(e),I(e)},M={},j=function(r){var o=r.attr("id"),c=r.find("select[name$=\\[question_type\\]]");!function(e){var t=e.find(".collapsible");if(t.length>0){var n=t.attr("id").replace("-question-card",""),r="".concat(n,"-question-card");e.find(".question--collapse").attr("data-controls",r)}}(r),_(o),Ce({controllerField:c,wrapperSelector:e,dependentFieldsSelector:n,dependentInputSelector:"".concat(t," input"),enablingCondition:function(e){return L(e.val())}}),Ce({controllerField:c,wrapperSelector:e,dependentFieldsSelector:u,dependentInputSelector:"select",enablingCondition:function(e){return"multiple_option"===e.val()||"matrix_multiple"===e.val()}}),Ce({controllerField:c,wrapperSelector:e,dependentFieldsSelector:a,dependentInputSelector:"".concat(i," input"),enablingCondition:function(e){return P(e.val())}}),q[o]=C(o),x[o]=function(e){return Ee({placeholderId:"questionnaire-question-matrix-row-id",wrapperSelector:"#".concat(e," ").concat(a),containerSelector:".questionnaire-question-matrix-rows-list",fieldSelector:i,addFieldButtonSelector:".add-matrix-row",fieldTemplateSelector:".decidim-matrix-row-template",removeFieldButtonSelector:l,onAddField:function(){},onRemoveField:function(){}})}(o),M[o]=function(e){return Ee({placeholderId:"questionnaire-question-display-condition-id",wrapperSelector:"#".concat(e," ").concat(d),containerSelector:".questionnaire-question-display-conditions-list",fieldSelector:s,addFieldButtonSelector:".add-display-condition",removeFieldButtonSelector:p,onAddField:function(e){D(e)},onRemoveField:function(){}})}(o);var f=q[o],m=x[o],h=function(){L(c.val())&&(0===c.parents(e).find(t).length&&(f._addField(),f._addField()));P(c.val())&&(0===c.parents(e).find(i).length&&(m._addField(),m._addField()))};c.on("change",h),h()};Ee({placeholderId:"questionnaire-question-id",wrapperSelector:".questionnaire-questions",containerSelector:".questionnaire-questions-list",fieldSelector:e,addFieldButtonSelector:".add-question",addSeparatorButtonSelector:".add-separator",addTitleAndDescriptionButtonSelector:".add-title-and-description",fieldTemplateSelector:".decidim-question-template",separatorTemplateSelector:".decidim-separator-template",TitleAndDescriptionTemplateSelector:".decidim-title-and-description-template",removeFieldButtonSelector:".remove-question",moveUpFieldButtonSelector:".move-up-question",moveDownFieldButtonSelector:".move-down-question",onAddField:function(e){j(e),T(),b.run(),g.run(),e.find("select.language-change").toArray().forEach((function(e){e.addEventListener("change",(function(){var t=e.value,n=e.parentElement.parentElement.nextElementSibling;n.querySelector(".is-active").classList.remove("is-active"),n.querySelector(t).classList.add("is-active")}))})),document.dispatchEvent(new CustomEvent("ajax:loaded",{detail:e[0]}))},onRemoveField:function(e){b.run(),g.run(),e.find(r).each((function(t,n){q[e.attr("id")]._removeField(n)})),e.find(l).each((function(t,n){x[e.attr("id")]._removeField(n)})),e.find(p).each((function(t,n){M[e.attr("id")]._removeField(n)}))},onMoveUpField:function(){b.run(),g.run()},onMoveDownField:function(){b.run(),g.run()}}),T(),$(e).each((function(e,t){var n=$(t);!function(e){"true"===e.find("input[name$=\\[deleted\\]]").val()&&(e.addClass("hidden"),e.hide())}(n),j(n)})),$(s).each((function(e,t){var n=$(t);D(n)})),b.run(),g.run()}}()}();
//# sourceMappingURL=decidim_forms_admin-d2786067fd70bbae653a.js.map