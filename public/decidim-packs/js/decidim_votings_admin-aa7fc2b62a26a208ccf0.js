/*! For license information please see decidim_votings_admin-aa7fc2b62a26a208ccf0.js.LICENSE.txt */
!function(){var e={23439:function(e,t,n){var r={"./decidim/elections/decidim_elections.svg":97540,"./decidim/votings/decidim_votings.svg":63400};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=23439},54751:function(){$((function(){setInterval((function(){var e=$("#census-creating-data-wrapper"),t=e.data("updateStatusUrl");e.length>0&&$.get(t)}),1e4)}))},35085:function(e){"use strict";function t(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(){n=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",h="suspendedYield",g="executing",y="completed",m={};function b(){}function w(){}function O(){}var k={};c(k,s,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(P([])));S&&S!==r&&i.call(S,s)&&(k=S);var I=O.prototype=b.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(r,o,a,s){var l=p(e[r],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==v(c)&&i.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var r;o(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}})}function C(t,n,r){var i=f;return function(o,a){if(i===g)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=F(s,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var u=p(t,n,r);if("normal"===u.type){if(i=r.done?y:h,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=y,r.method="throw",r.arg=u.arg)}}}function F(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,F(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(v(t)+" is not iterable")}return w.prototype=O,o(I,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:w,configurable:!0}),w.displayName=c(O,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,c(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},x(A.prototype),c(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(I),c(I,u,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}var r=n().mark(z);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n){return t=d(t),function(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(e,c()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function y(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:String(t)}function b(e,t){e.split(/\s+/).forEach((function(e){t(e)}))}var w=function(){function e(){h(this,e),this._events=void 0,this._events={}}return y(e,[{key:"on",value:function(e,t){var n=this;b(e,(function(e){var r=n._events[e]||[];r.push(t),n._events[e]=r}))}},{key:"off",value:function(e,t){var n=this,r=arguments.length;0!==r?b(e,(function(e){if(1!==r){var i=n._events[e];void 0!==i&&(i.splice(i.indexOf(t),1),n._events[e]=i)}else delete n._events[e]})):this._events={}}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this;b(e,(function(e){var t=i._events[e];void 0!==t&&t.forEach((function(e){e.apply(i,n)}))}))}}]),e}();var O,k,_=function(e){return(e=e.filter(Boolean)).length<2?e[0]||"":1==C(e)?"["+e.join("")+"]":"(?:"+e.join("|")+")"},S=function(e){if(!x(e))return e.join("");var t="",n=0,r=function(){n>1&&(t+="{"+n+"}")};return e.forEach((function(i,o){i!==e[o-1]?(r(),t+=i,n=1):n++})),r(),t},I=function(e){var t=E(e);return _(t)},x=function(e){return new Set(e).size!==e.length},A=function(e){return(e+"").replace(/([\$\(-\+\.\?\[-\^\{-\}])/g,"\\$1")},C=function(e){return e.reduce((function(e,t){return Math.max(e,F(t))}),0)},F=function(e){return E(e).length},E=function(e){return Array.from(e)},j=function e(t){if(1===t.length)return[[t]];var n=[];return e(t.substring(1)).forEach((function(e){var r=e.slice(0);r[0]=t.charAt(0)+r[0],n.push(r),(r=e.slice(0)).unshift(t.charAt(0)),n.push(r)})),n},L=[[0,65535]],P=3,T={},$={"/":"\u2044\u2215",0:"\u07c0",a:"\u2c65\u0250\u0251",aa:"\ua733",ae:"\xe6\u01fd\u01e3",ao:"\ua735",au:"\ua737",av:"\ua739\ua73b",ay:"\ua73d",b:"\u0180\u0253\u0183",c:"\ua73f\u0188\u023c\u2184",d:"\u0111\u0257\u0256\u1d05\u018c\uabb7\u0501\u0266",e:"\u025b\u01dd\u1d07\u0247",f:"\ua77c\u0192",g:"\u01e5\u0260\ua7a1\u1d79\ua77f\u0262",h:"\u0127\u2c68\u2c76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2c6a\ua741\ua743\ua745\ua7a3",l:"\u0142\u019a\u026b\u2c61\ua749\ua747\ua781\u026d",m:"\u0271\u026f\u03fb",n:"\ua7a5\u019e\u0272\ua791\u1d0e\u043b\u0509",o:"\xf8\u01ff\u0254\u0275\ua74b\ua74d\u1d11",oe:"\u0153",oi:"\u01a3",oo:"\ua74f",ou:"\u0223",p:"\u01a5\u1d7d\ua751\ua753\ua755\u03c1",q:"\ua757\ua759\u024b",r:"\u024d\u027d\ua75b\ua7a7\ua783",s:"\xdf\u023f\ua7a9\ua785\u0282",t:"\u0167\u01ad\u0288\u2c66\ua787",th:"\xfe",tz:"\ua729",u:"\u0289",v:"\u028b\ua75f\u028c",vy:"\ua761",w:"\u2c73",y:"\u01b4\u024f\u1eff",z:"\u01b6\u0225\u0240\u2c6c\ua763",hv:"\u0195"};for(var N in $)for(var D=$[N]||"",V=0;V<D.length;V++){var q=D.substring(V,V+1);T[q]=N}var H=new RegExp(Object.keys(T).join("|")+"|[\u0300-\u036f\xb7\u02be\u02bc]","gu"),R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NFKD";return e.normalize(t)},M=function(e){return E(e).reduce((function(e,t){return e+B(t)}),"")},B=function(e){return e=R(e).toLowerCase().replace(H,(function(e){return T[e]||""})),R(e,"NFC")};function z(e){var t,a,s,l,u,c,d,p;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=o(e),n.prev=1,t.s();case 3:if((a=t.n()).done){n.next=22;break}s=i(a.value,2),l=s[0],u=s[1],c=l;case 6:if(!(c<=u)){n.next=20;break}if(d=String.fromCharCode(c),(p=M(d))!=d.toLowerCase()){n.next=11;break}return n.abrupt("continue",17);case 11:if(!(p.length>P)){n.next=13;break}return n.abrupt("continue",17);case 13:if(0!=p.length){n.next=15;break}return n.abrupt("continue",17);case 15:return n.next=17,{folded:p,composed:d,code_point:c};case 17:c++,n.next=6;break;case 20:n.next=3;break;case 22:n.next=27;break;case 24:n.prev=24,n.t0=n.catch(1),t.e(n.t0);case 27:return n.prev=27,t.f(),n.finish(27);case 30:case"end":return n.stop()}}),r,null,[[1,24,27,30]])}var G=function(e){var t=function(e){var t,n={},r=function(e,t){var r=n[e]||new Set,i=new RegExp("^"+I(r)+"$","iu");t.match(i)||(r.add(A(t)),n[e]=r)},i=o(z(e));try{for(i.s();!(t=i.n()).done;){var a=t.value;r(a.folded,a.folded),r(a.folded,a.composed)}}catch(s){i.e(s)}finally{i.f()}return n}(e),n={},r=[];for(var i in t){var a=t[i];a&&(n[i]=I(a)),i.length>1&&r.push(A(i))}r.sort((function(e,t){return t.length-e.length}));var s=_(r);return k=new RegExp("^"+s,"u"),n},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t=Math.max(t,e.length-1),_(j(e).map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0;return e=e.map((function(e){return O[e]&&(n+=e.length),O[e]||e})),n>=t?S(e):""}(e,t)})))},Q=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length>1?1:0;return _(e.map((function(e){for(var r=[],i=t?e.length():e.length()-1,o=0;o<i;o++)r.push(K(e.substrs[o]||"",n));return S(r)})))},J=function(e,t){var n,r=o(t);try{var i,a=function(){var t=n.value;if(t.start!=e.start||t.end!=e.end)return 0;if(t.substrs.join("")!==e.substrs.join(""))return 0;var r=e.parts;return t.parts.filter((function(e){var t,n=o(r);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.start===e.start&&i.substr===e.substr)return!1;if(1!=e.length&&1!=i.length){if(e.start<i.start&&e.end>i.start)return!0;if(i.start<e.start&&i.end>e.start)return!0}}}catch(a){n.e(a)}finally{n.f()}return!1})).length>0?0:{v:!0}};for(r.s();!(n=r.n()).done;)if(0!==(i=a())&&i)return i.v}catch(s){r.e(s)}finally{r.f()}return!1},U=function(){function e(){h(this,e),this.parts=[],this.substrs=[],this.start=0,this.end=0}return y(e,[{key:"add",value:function(e){e&&(this.parts.push(e),this.substrs.push(e.substr),this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}},{key:"last",value:function(){return this.parts[this.parts.length-1]}},{key:"length",value:function(){return this.parts.length}},{key:"clone",value:function(t,n){var r,i=new e,a=JSON.parse(JSON.stringify(this.parts)),s=a.pop(),l=o(a);try{for(l.s();!(r=l.n()).done;){var u=r.value;i.add(u)}}catch(p){l.e(p)}finally{l.f()}var c=n.substr.substring(0,t-s.start),d=c.length;return i.add({start:s.start,end:s.start+d,length:d,substr:c}),i}}]),e}(),Y=function(e){var t;void 0===O&&(O=G(t||L)),e=M(e);for(var n="",r=[new U],i=0;i<e.length;i++){var a,s=e.substring(i).match(k),l=e.substring(i,i+1),u=s?s[0]:null,c=[],d=new Set,p=o(r);try{for(p.s();!(a=p.n()).done;){var f=a.value,v=f.last();if(!v||1==v.length||v.end<=i)if(u){var h=u.length;f.add({start:i,end:i+h,length:h,substr:u}),d.add("1")}else f.add({start:i,end:i+1,length:1,substr:l}),d.add("2");else if(u){var g=f.clone(i,v),y=u.length;g.add({start:i,end:i+y,length:y,substr:u}),c.push(g)}else d.add("3")}}catch(I){p.e(I)}finally{p.f()}if(c.length>0){var m,b=o(c=c.sort((function(e,t){return e.length()-t.length()})));try{for(b.s();!(m=b.n()).done;){var w=m.value;J(w,r)||r.push(w)}}catch(I){b.e(I)}finally{b.f()}}else if(i>0&&1==d.size&&!d.has("3")){n+=Q(r,!1);var _=new U,S=r[0];S&&_.add(S.last()),r=[_]}}return n+=Q(r,!0)},W=function(e,t){if(e)return e[t]},X=function(e,t){if(e){for(var n,r=t.split(".");(n=r.shift())&&(e=e[n]););return e}},Z=function(e,t,n){var r,i;return e?(e+="",null==t.regex||-1===(i=e.search(t.regex))?0:(r=t.string.length/e.length,0===i&&(r+=.5),r*n)):0},ee=function(e,t){var n=e[t];if("function"==typeof n)return n;n&&!Array.isArray(n)&&(e[t]=[n])},te=function(e,t){if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},ne=function(e,t){return"number"===typeof e&&"number"===typeof t?e>t?1:e<t?-1:0:(e=M(e+"").toLowerCase())>(t=M(t+"").toLowerCase())?1:t>e?-1:0},re=function(){function e(t,n){h(this,e),this.items=void 0,this.settings=void 0,this.items=t,this.settings=n||{diacritics:!0}}return y(e,[{key:"tokenize",value:function(e,t,n){var r=this;if(!e||!e.length)return[];var i,o=[],a=e.split(/\s+/);return n&&(i=new RegExp("^("+Object.keys(n).map(A).join("|")+"):(.*)$")),a.forEach((function(e){var n,a=null,s=null;i&&(n=e.match(i))&&(a=n[1],e=n[2]),e.length>0&&(s=r.settings.diacritics?Y(e)||null:A(e))&&t&&(s="\\b"+s),o.push({string:e,regex:s?new RegExp(s,"iu"):null,field:a})})),o}},{key:"getScoreFunction",value:function(e,t){var n=this.prepareSearch(e,t);return this._getScoreFunction(n)}},{key:"_getScoreFunction",value:function(e){var t=e.tokens,n=t.length;if(!n)return function(){return 0};var r=e.options.fields,i=e.weights,a=r.length,s=e.getAttrFn;if(!a)return function(){return 1};var l=1===a?function(e,t){var n=r[0].field;return Z(s(t,n),e,i[n]||1)}:function(e,t){var n=0;if(e.field){var r=s(t,e.field);!e.regex&&r?n+=1/a:n+=Z(r,e,1)}else te(i,(function(r,i){n+=Z(s(t,i),e,r)}));return n/a};return 1===n?function(e){return l(t[0],e)}:"and"===e.options.conjunction?function(e){var r,i,a=0,s=o(t);try{for(s.s();!(i=s.n()).done;){var u=i.value;if((r=l(u,e))<=0)return 0;a+=r}}catch(c){s.e(c)}finally{s.f()}return a/n}:function(e){var r=0;return te(t,(function(t){r+=l(t,e)})),r/n}}},{key:"getSortFunction",value:function(e,t){var n=this.prepareSearch(e,t);return this._getSortFunction(n)}},{key:"_getSortFunction",value:function(e){var t,n=[],r=this,i=e.options,a=!e.query&&i.sort_empty?i.sort_empty:i.sort;if("function"==typeof a)return a.bind(this);var s=function(t,n){return"$score"===t?n.score:e.getAttrFn(r.items[n.id],t)};if(a){var l,u=o(a);try{for(u.s();!(l=u.n()).done;){var c=l.value;(e.query||"$score"!==c.field)&&n.push(c)}}catch(f){u.e(f)}finally{u.f()}}if(e.query){t=!0;var d,p=o(n);try{for(p.s();!(d=p.n()).done;){if("$score"===d.value.field){t=!1;break}}}catch(f){p.e(f)}finally{p.f()}t&&n.unshift({field:"$score",direction:"desc"})}else n=n.filter((function(e){return"$score"!==e.field}));return n.length?function(e,t){var r,i,a,l=o(n);try{for(l.s();!(a=l.n()).done;){var u=a.value;if(i=u.field,r=("desc"===u.direction?-1:1)*ne(s(i,e),s(i,t)))return r}}catch(f){l.e(f)}finally{l.f()}return 0}:null}},{key:"prepareSearch",value:function(e,t){var n={},r=Object.assign({},t);if(ee(r,"sort"),ee(r,"sort_empty"),r.fields){ee(r,"fields");var i=[];r.fields.forEach((function(e){"string"==typeof e&&(e={field:e,weight:1}),i.push(e),n[e.field]="weight"in e?e.weight:1})),r.fields=i}return{options:r,query:e.toLowerCase().trim(),tokens:this.tokenize(e,r.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:r.nesting?X:W}}},{key:"search",value:function(e,t){var n,r,i=this;r=this.prepareSearch(e,t),t=r.options,e=r.query;var o=t.score||i._getScoreFunction(r);e.length?te(i.items,(function(e,i){n=o(e),(!1===t.filter||n>0)&&r.items.push({score:n,id:i})})):te(i.items,(function(e,t){r.items.push({score:1,id:t})}));var a=i._getSortFunction(r);return a&&r.items.sort(a),r.total=r.items.length,"number"===typeof t.limit&&(r.items=r.items.slice(0,t.limit)),r}}]),e}(),ie=function(e,t){if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},oe=function(e){if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(ae(e)){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return document.querySelector(e)},ae=function(e){return"string"===typeof e&&e.indexOf("<")>-1},se=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)},le=function(e,t){Object.assign(e.style,t)},ue=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=de(n);(e=pe(e)).map((function(e){i.map((function(t){e.classList.add(t)}))}))},ce=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=de(n);(e=pe(e)).map((function(e){i.map((function(t){e.classList.remove(t)}))}))},de=function(e){var t=[];return ie(e,(function(e){"string"===typeof e&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(t=t.concat(e))})),t.filter(Boolean)},pe=function(e){return Array.isArray(e)||(e=[e]),e},fe=function(e,t,n){if(!n||n.contains(e))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}},ve=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)>0?e[e.length-1]:e[0]},he=function(e,t){if(!e)return-1;t=t||e.nodeName;for(var n=0;e=e.previousElementSibling;)e.matches(t)&&n++;return n},ge=function(e,t){ie(t,(function(t,n){null==t?e.removeAttribute(n):e.setAttribute(n,""+t)}))},ye=function(e,t){e.parentNode&&e.parentNode.replaceChild(t,e)},me=function(e,t){if(null!==t){if("string"===typeof t){if(!t.length)return;t=new RegExp(t,"i")}var n=function(e){1!==e.nodeType||!e.childNodes||/(script|style)/i.test(e.tagName)||"highlight"===e.className&&"SPAN"===e.tagName||Array.from(e.childNodes).forEach((function(e){r(e)}))},r=function(e){return 3===e.nodeType?function(e){var n=e.data.match(t);if(n&&e.data.length>0){var r=document.createElement("span");r.className="highlight";var i=e.splitText(n.index);i.splitText(n[0].length);var o=i.cloneNode(!0);return r.appendChild(o),ye(i,r),1}return 0}(e):(n(e),0)};r(e)}},be="undefined"!==typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",we={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return e.length>0},render:{}},Oe=function(e){return"undefined"===typeof e||null===e?null:ke(e)},ke=function(e){return"boolean"===typeof e?e?"1":"0":e+""},_e=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},Se=function(e,t,n){var r,i=e.trigger,a={};e.trigger=function(){var n=arguments[0];if(-1===t.indexOf(n))return i.apply(e,arguments);a[n]=arguments},n.apply(e,[]),e.trigger=i;var s,l=o(t);try{for(l.s();!(s=l.n()).done;)(r=s.value)in a&&i.apply(e,a[r])}catch(u){l.e(u)}finally{l.f()}},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(e.preventDefault(),t&&e.stopPropagation())},xe=function(e,t,n,r){e.addEventListener(t,n,r)},Ae=function(e,t){return!!t&&(!!t[e]&&1===(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0))},Ce=function(e,t){var n=e.getAttribute("id");return n||(e.setAttribute("id",t),t)},Fe=function(e){return e.replace(/[\\"']/g,"\\$&")},Ee=function(e,t){t&&e.append(t)};function je(e,t){var n=Object.assign({},we,t),r=n.dataAttr,i=n.labelField,o=n.valueField,a=n.disabledField,s=n.optgroupField,l=n.optgroupLabelField,u=n.optgroupValueField,c=e.tagName.toLowerCase(),d=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");if(!d&&!n.allowEmptyOption){var p=e.querySelector('option[value=""]');p&&(d=p.textContent)}var f,v,h,g,y,m,b={placeholder:d,options:[],optgroups:[],items:[],maxItems:null};return"select"===c?(v=b.options,h={},g=1,y=function(e){var t=Object.assign({},e.dataset),n=r&&t[r];return"string"===typeof n&&n.length&&(t=Object.assign(t,JSON.parse(n))),t},m=function(e,t){var r=Oe(e.value);if(null!=r&&(r||n.allowEmptyOption)){if(h.hasOwnProperty(r)){if(t){var l=h[r][s];l?Array.isArray(l)?l.push(t):h[r][s]=[l,t]:h[r][s]=t}}else{var u=y(e);u[i]=u[i]||e.textContent,u[o]=u[o]||r,u[a]=u[a]||e.disabled,u[s]=u[s]||t,u.$option=e,h[r]=u,v.push(u)}e.selected&&b.items.push(r)}},b.maxItems=e.hasAttribute("multiple")?null:1,ie(e.children,(function(e){var t,n,r;"optgroup"===(f=e.tagName.toLowerCase())?((r=y(t=e))[l]=r[l]||t.getAttribute("label")||"",r[u]=r[u]||g++,r[a]=r[a]||t.disabled,b.optgroups.push(r),n=r[u],ie(t.children,(function(e){m(e,n)}))):"option"===f&&m(e)}))):function(){var t=e.getAttribute(r);if(t)b.options=JSON.parse(t),ie(b.options,(function(e){b.items.push(e[o])}));else{var a=e.value.trim()||"";if(!n.allowEmptyOption&&!a.length)return;var s=a.split(n.delimiter);ie(s,(function(e){var t={};t[i]=e,t[o]=e,b.options.push(t)})),b.items=s}}(),Object.assign({},we,b,t)}var Le,Pe=0,Te=function(e){function n(e,r){var i,o;h(this,n),(i=l(this,n)).control_input=void 0,i.wrapper=void 0,i.dropdown=void 0,i.control=void 0,i.dropdown_content=void 0,i.focus_node=void 0,i.order=0,i.settings=void 0,i.input=void 0,i.tabIndex=void 0,i.is_select_tag=void 0,i.rtl=void 0,i.inputId=void 0,i._destroy=void 0,i.sifter=void 0,i.isOpen=!1,i.isDisabled=!1,i.isRequired=void 0,i.isInvalid=!1,i.isValid=!0,i.isLocked=!1,i.isFocused=!1,i.isInputHidden=!1,i.isSetup=!1,i.ignoreFocus=!1,i.ignoreHover=!1,i.hasOptions=!1,i.currentResults=void 0,i.lastValue="",i.caretPos=0,i.loading=0,i.loadedSearches={},i.activeOption=null,i.activeItems=[],i.optgroups={},i.options={},i.userOptions={},i.items=[],Pe++;var a=oe(e);if(a.tomselect)throw new Error("Tom Select already initialized on this element");a.tomselect=u(i),o=(window.getComputedStyle&&window.getComputedStyle(a,null)).getPropertyValue("direction");var s=je(a,r);i.settings=s,i.input=a,i.tabIndex=a.tabIndex||0,i.is_select_tag="select"===a.tagName.toLowerCase(),i.rtl=/rtl/i.test(o),i.inputId=Ce(a,"tomselect-"+Pe),i.isRequired=a.required,i.sifter=new re(i.options,{diacritics:s.diacritics}),s.mode=s.mode||(1===s.maxItems?"single":"multi"),"boolean"!==typeof s.hideSelected&&(s.hideSelected="multi"===s.mode),"boolean"!==typeof s.hidePlaceholder&&(s.hidePlaceholder="multi"!==s.mode);var c=s.createFilter;"function"!==typeof c&&("string"===typeof c&&(c=new RegExp(c)),c instanceof RegExp?s.createFilter=function(e){return c.test(e)}:s.createFilter=function(e){return i.settings.duplicates||!i.options[e]}),i.initializePlugins(s.plugins),i.setupCallbacks(),i.setupTemplates();var d,p=oe("<div>"),f=oe("<div>"),v=i._render("dropdown"),g=oe('<div role="listbox" tabindex="-1">'),y=i.input.getAttribute("class")||"",m=s.mode;if(ue(p,s.wrapperClass,y,m),ue(f,s.controlClass),Ee(p,f),ue(v,s.dropdownClass,m),s.copyClassesToDropdown&&ue(v,y),ue(g,s.dropdownContentClass),Ee(v,g),oe(s.dropdownParent||p).appendChild(v),ae(s.controlInput)){d=oe(s.controlInput);te(["autocorrect","autocapitalize","autocomplete"],(function(e){a.getAttribute(e)&&ge(d,t({},e,a.getAttribute(e)))})),d.tabIndex=-1,f.appendChild(d),i.focus_node=d}else s.controlInput?(d=oe(s.controlInput),i.focus_node=d):(d=oe("<input/>"),i.focus_node=f);return i.wrapper=p,i.dropdown=v,i.dropdown_content=g,i.control=f,i.control_input=d,i.setup(),i}return p(n,e),y(n,[{key:"setup",value:function(){var e=this,t=e.settings,n=e.control_input,r=e.dropdown,i=e.dropdown_content,o=e.wrapper,a=e.control,s=e.input,l=e.focus_node,u={passive:!0},c=e.inputId+"-ts-dropdown";ge(i,{id:c}),ge(l,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":c});var d,p,f,v=Ce(l,e.inputId+"-ts-control"),h="label[for='"+function(e){return e.replace(/['"\\]/g,"\\$&")}(e.inputId)+"']",g=document.querySelector(h),y=e.focus.bind(e);if(g){xe(g,"click",y),ge(g,{for:v});var m=Ce(g,e.inputId+"-ts-label");ge(l,{"aria-labelledby":m}),ge(i,{"aria-labelledby":m})}if(o.style.width=s.style.width,e.plugins.names.length){var b="plugin-"+e.plugins.names.join(" plugin-");ue([o,r],b)}(null===t.maxItems||t.maxItems>1)&&e.is_select_tag&&ge(s,{multiple:"multiple"}),t.placeholder&&ge(n,{placeholder:t.placeholder}),!t.splitOn&&t.delimiter&&(t.splitOn=new RegExp("\\s*"+A(t.delimiter)+"+\\s*")),t.load&&t.loadThrottle&&(t.load=(d=t.load,p=t.loadThrottle,function(e,t){var n=this;f&&(n.loading=Math.max(n.loading-1,0),clearTimeout(f)),f=setTimeout((function(){f=null,n.loadedSearches[e]=!0,d.call(n,e,t)}),p)})),e.control_input.type=s.type,xe(r,"mousemove",(function(){e.ignoreHover=!1})),xe(r,"mouseenter",(function(t){var n=fe(t.target,"[data-selectable]",r);n&&e.onOptionHover(t,n)}),{capture:!0}),xe(r,"click",(function(t){var n=fe(t.target,"[data-selectable]");n&&(e.onOptionSelect(t,n),Ie(t,!0))})),xe(a,"click",(function(t){var r=fe(t.target,"[data-ts-item]",a);r&&e.onItemSelect(t,r)?Ie(t,!0):""==n.value&&(e.onClick(),Ie(t,!0))})),xe(l,"keydown",(function(t){return e.onKeyDown(t)})),xe(n,"keypress",(function(t){return e.onKeyPress(t)})),xe(n,"input",(function(t){return e.onInput(t)})),xe(l,"blur",(function(t){return e.onBlur(t)})),xe(l,"focus",(function(t){return e.onFocus(t)})),xe(n,"paste",(function(t){return e.onPaste(t)}));var w=function(t){var i=t.composedPath()[0];if(!o.contains(i)&&!r.contains(i))return e.isFocused&&e.blur(),void e.inputState();i==n&&e.isOpen?t.stopPropagation():Ie(t,!0)},O=function(){e.isOpen&&e.positionDropdown()};xe(document,"mousedown",w),xe(window,"scroll",O,u),xe(window,"resize",O,u),this._destroy=function(){document.removeEventListener("mousedown",w),window.removeEventListener("scroll",O),window.removeEventListener("resize",O),g&&g.removeEventListener("click",y)},this.revertSettings={innerHTML:s.innerHTML,tabIndex:s.tabIndex},s.tabIndex=-1,s.insertAdjacentElement("afterend",e.wrapper),e.sync(!1),t.items=[],delete t.optgroups,delete t.options,xe(s,"invalid",(function(){e.isValid&&(e.isValid=!1,e.isInvalid=!0,e.refreshState())})),e.updateOriginalInput(),e.refreshItems(),e.close(!1),e.inputState(),e.isSetup=!0,s.disabled?e.disable():e.enable(),e.on("change",this.onChange),ue(s,"tomselected","ts-hidden-accessible"),e.trigger("initialize"),!0===t.preload&&e.preload()}},{key:"setupOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.addOptions(t),te(n,(function(t){e.registerOptionGroup(t)}))}},{key:"setupTemplates",value:function(){var e=this,t=e.settings.labelField,n=e.settings.optgroupLabelField,r={optgroup:function(e){var t=document.createElement("div");return t.className="optgroup",t.appendChild(e.options),t},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[n])+"</div>"},option:function(e,n){return"<div>"+n(e[t])+"</div>"},item:function(e,n){return"<div>"+n(e[t])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"},no_results:function(){return'<div class="no-results">No results found</div>'},loading:function(){return'<div class="spinner"></div>'},not_loading:function(){},dropdown:function(){return"<div></div>"}};e.settings.render=Object.assign({},r,e.settings.render)}},{key:"setupCallbacks",value:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)(t=this.settings[n[e]])&&this.on(e,t)}},{key:"sync",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?je(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(t.options,t.optgroups),e.setValue(t.items||[],!0),e.lastQuery=null}},{key:"onClick",value:function(){var e=this;if(e.activeItems.length>0)return e.clearActiveItems(),void e.focus();e.isFocused&&e.isOpen?e.blur():e.focus()}},{key:"onMouseDown",value:function(){}},{key:"onChange",value:function(){se(this.input,"input"),se(this.input,"change")}},{key:"onPaste",value:function(e){var t=this,n=this;n.isInputHidden||n.isLocked?Ie(e):n.settings.splitOn&&setTimeout((function(){var e=n.inputValue();if(e.match(n.settings.splitOn)){var r=e.trim().split(n.settings.splitOn);te(r,(function(e){Oe(e)&&(t.options[e]?n.addItem(e):n.createItem(e))}))}}),0)}},{key:"onKeyPress",value:function(e){var t=this;if(!t.isLocked){var n=String.fromCharCode(e.keyCode||e.which);return t.settings.create&&"multi"===t.settings.mode&&n===t.settings.delimiter?(t.createItem(),void Ie(e)):void 0}Ie(e)}},{key:"onKeyDown",value:function(e){var t=this;if(t.ignoreHover=!0,t.isLocked)9!==e.keyCode&&Ie(e);else{switch(e.keyCode){case 65:if(Ae(be,e)&&""==t.control_input.value)return Ie(e),void t.selectAll();break;case 27:return t.isOpen&&(Ie(e,!0),t.close()),void t.clearActiveItems();case 40:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){var n=t.getAdjacent(t.activeOption,1);n&&t.setActiveOption(n)}return void Ie(e);case 38:if(t.activeOption){var r=t.getAdjacent(t.activeOption,-1);r&&t.setActiveOption(r)}return void Ie(e);case 13:return void(t.canSelect(t.activeOption)?(t.onOptionSelect(e,t.activeOption),Ie(e)):(t.settings.create&&t.createItem()||document.activeElement==t.control_input&&t.isOpen)&&Ie(e));case 37:return void t.advanceSelection(-1,e);case 39:return void t.advanceSelection(1,e);case 9:return void(t.settings.selectOnTab&&(t.canSelect(t.activeOption)&&(t.onOptionSelect(e,t.activeOption),Ie(e)),t.settings.create&&t.createItem()&&Ie(e)));case 8:case 46:return void t.deleteSelection(e)}t.isInputHidden&&!Ae(be,e)&&Ie(e)}}},{key:"onInput",value:function(e){var t=this;if(!t.isLocked){var n=t.inputValue();t.lastValue!==n&&(t.lastValue=n,t.settings.shouldLoad.call(t,n)&&t.load(n),t.refreshOptions(),t.trigger("type",n))}}},{key:"onOptionHover",value:function(e,t){this.ignoreHover||this.setActiveOption(t,!1)}},{key:"onFocus",value:function(e){var t=this,n=t.isFocused;if(t.isDisabled)return t.blur(),void Ie(e);t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.preload(),n||t.trigger("focus"),t.activeItems.length||(t.showInput(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}},{key:"onBlur",value:function(e){if(!1!==document.hasFocus()){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var n=function(){t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,n):n()}}}},{key:"onOptionSelect",value:function(e,t){var n,r=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?r.createItem(null,(function(){r.settings.closeAfterSelect&&r.close()})):"undefined"!==typeof(n=t.dataset.value)&&(r.lastQuery=null,r.addItem(n),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&e.type&&/click/.test(e.type)&&r.setActiveOption(t)))}},{key:"canSelect",value:function(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}},{key:"onItemSelect",value:function(e,t){var n=this;return!n.isLocked&&"multi"===n.settings.mode&&(Ie(e),n.setActiveItem(t,e),!0)}},{key:"canLoad",value:function(e){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(e)}},{key:"load",value:function(e){var t=this;if(t.canLoad(e)){ue(t.wrapper,t.settings.loadingClass),t.loading++;var n=t.loadCallback.bind(t);t.settings.load.call(t,e,n)}}},{key:"loadCallback",value:function(e,t){var n=this;n.loading=Math.max(n.loading-1,0),n.lastQuery=null,n.clearActiveOption(),n.setupOptions(e,t),n.refreshOptions(n.isFocused&&!n.isInputHidden),n.loading||ce(n.wrapper,n.settings.loadingClass),n.trigger("load",e,t)}},{key:"preload",value:function(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}},{key:"setTextboxValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.control_input;t.value!==e&&(t.value=e,se(t,"update"),this.lastValue=e)}},{key:"getValue",value:function(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}},{key:"setValue",value:function(e,t){var n=this;Se(this,t?[]:["change"],(function(){n.clear(t),n.addItems(e,t)}))}},{key:"setMaxItems",value:function(e){0===e&&(e=null),this.settings.maxItems=e,this.refreshState()}},{key:"setActiveItem",value:function(e,t){var n,r,i,o,a,s,l=this;if("single"!==l.settings.mode){if(!e)return l.clearActiveItems(),void(l.isFocused&&l.showInput());if("click"===(n=t&&t.type.toLowerCase())&&Ae("shiftKey",t)&&l.activeItems.length){for(s=l.getLastActive(),(i=Array.prototype.indexOf.call(l.control.children,s))>(o=Array.prototype.indexOf.call(l.control.children,e))&&(a=i,i=o,o=a),r=i;r<=o;r++)e=l.control.children[r],-1===l.activeItems.indexOf(e)&&l.setActiveItemClass(e);Ie(t)}else"click"===n&&Ae(be,t)||"keydown"===n&&Ae("shiftKey",t)?e.classList.contains("active")?l.removeActiveItem(e):l.setActiveItemClass(e):(l.clearActiveItems(),l.setActiveItemClass(e));l.hideInput(),l.isFocused||l.focus()}}},{key:"setActiveItemClass",value:function(e){var t=this,n=t.control.querySelector(".last-active");n&&ce(n,"last-active"),ue(e,"active last-active"),t.trigger("item_select",e),-1==t.activeItems.indexOf(e)&&t.activeItems.push(e)}},{key:"removeActiveItem",value:function(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),ce(e,"active")}},{key:"clearActiveItems",value:function(){ce(this.activeItems,"active"),this.activeItems=[]}},{key:"setActiveOption",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,ge(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),ge(e,{"aria-selected":"true"}),ue(e,"active"),t&&this.scrollToOption(e)))}},{key:"scrollToOption",value:function(e,t){if(e){var n=this.dropdown_content,r=n.clientHeight,i=n.scrollTop||0,o=e.offsetHeight,a=e.getBoundingClientRect().top-n.getBoundingClientRect().top+i;a+o>r+i?this.scroll(a-r+o,t):a<i&&this.scroll(a,t)}}},{key:"scroll",value:function(e,t){var n=this.dropdown_content;t&&(n.style.scrollBehavior=t),n.scrollTop=e,n.style.scrollBehavior=""}},{key:"clearActiveOption",value:function(){this.activeOption&&(ce(this.activeOption,"active"),ge(this.activeOption,{"aria-selected":null})),this.activeOption=null,ge(this.focus_node,{"aria-activedescendant":null})}},{key:"selectAll",value:function(){var e=this;if("single"!==e.settings.mode){var t=e.controlChildren();t.length&&(e.hideInput(),e.close(),e.activeItems=t,te(t,(function(t){e.setActiveItemClass(t)})))}}},{key:"inputState",value:function(){var e=this;e.control.contains(e.control_input)&&(ge(e.control_input,{placeholder:e.settings.placeholder}),e.activeItems.length>0||!e.isFocused&&e.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&e.items.length>0&&ge(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}},{key:"hideInput",value:function(){this.inputState()}},{key:"showInput",value:function(){this.inputState()}},{key:"inputValue",value:function(){return this.control_input.value.trim()}},{key:"focus",value:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.control_input.offsetWidth?e.control_input.focus():e.focus_node.focus(),setTimeout((function(){e.ignoreFocus=!1,e.onFocus()}),0))}},{key:"blur",value:function(){this.focus_node.blur(),this.onBlur()}},{key:"getScoreFunction",value:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}},{key:"getSearchOptions",value:function(){var e=this.settings,t=e.sortField;return"string"===typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}},{key:"search",value:function(e){var t,n,r=this,i=this.getSearchOptions();if(r.settings.score&&"function"!==typeof(n=r.settings.score.call(r,e)))throw new Error('Tom Select "score" setting must be a function that returns a function');return e!==r.lastQuery?(r.lastQuery=e,t=r.sifter.search(e,Object.assign(i,{score:n})),r.currentResults=t):t=Object.assign({},r.currentResults),r.settings.hideSelected&&(t.items=t.items.filter((function(e){var t=Oe(e.id);return!(t&&-1!==r.items.indexOf(t))}))),t}},{key:"refreshOptions",value:function(){var e,t,n,r,i,o,a,s,l,u,c,d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p={},f=[],v=this,h=v.inputValue(),g=h===v.lastQuery||""==h&&null==v.lastQuery,y=v.search(h),m=null,b=v.settings.shouldOpen||!1,w=v.dropdown_content;for(g&&(m=v.activeOption)&&(l=m.closest("[data-group]")),r=y.items.length,"number"===typeof v.settings.maxOptions&&(r=Math.min(r,v.settings.maxOptions)),r>0&&(b=!0),e=0;e<r;e++){var O=y.items[e];if(O){var k=O.id,_=v.options[k];if(void 0!==_){var S=ke(k),I=v.getOption(S,!0);for(v.settings.hideSelected||I.classList.toggle("selected",v.items.includes(S)),i=_[v.settings.optgroupField]||"",t=0,n=(o=Array.isArray(i)?i:[i])&&o.length;t<n;t++){i=o[t],v.optgroups.hasOwnProperty(i)||(i="");var x=p[i];void 0===x&&(x=document.createDocumentFragment(),f.push(i)),t>0&&(I=I.cloneNode(!0),ge(I,{id:_.$id+"-clone-"+t,"aria-selected":null}),I.classList.add("ts-cloned"),ce(I,"active"),v.activeOption&&v.activeOption.dataset.value==k&&l&&l.dataset.group===i.toString()&&(m=I)),x.appendChild(I),p[i]=x}}}}v.settings.lockOptgroupOrder&&f.sort((function(e,t){var n=v.optgroups[e],r=v.optgroups[t];return(n&&n.$order||0)-(r&&r.$order||0)})),a=document.createDocumentFragment(),te(f,(function(e){var t=p[e];if(t&&t.children.length){var n=v.optgroups[e];if(void 0!==n){var r=document.createDocumentFragment(),i=v.render("optgroup_header",n);Ee(r,i),Ee(r,t);var o=v.render("optgroup",{group:n,options:r});Ee(a,o)}else Ee(a,t)}})),w.innerHTML="",Ee(w,a),v.settings.highlight&&(c=w.querySelectorAll("span.highlight"),Array.prototype.forEach.call(c,(function(e){var t=e.parentNode;t.replaceChild(e.firstChild,e),t.normalize()})),y.query.length&&y.tokens.length&&te(y.tokens,(function(e){me(w,e.regex)})));var A=function(e){var t=v.render(e,{input:h});return t&&(b=!0,w.insertBefore(t,w.firstChild)),t};if(v.loading?A("loading"):v.settings.shouldLoad.call(v,h)?0===y.items.length&&A("no_results"):A("not_loading"),(s=v.canCreate(h))&&(u=A("option_create")),v.hasOptions=y.items.length>0||s,b){if(y.items.length>0){if(m||"single"!==v.settings.mode||void 0==v.items[0]||(m=v.getOption(v.items[0])),!w.contains(m)){var C=0;u&&!v.settings.addPrecedence&&(C=1),m=v.selectable()[C]}}else u&&(m=u);d&&!v.isOpen&&(v.open(),v.scrollToOption(m,"auto")),v.setActiveOption(m)}else v.clearActiveOption(),d&&v.isOpen&&v.close(!1)}},{key:"selectable",value:function(){return this.dropdown_content.querySelectorAll("[data-selectable]")}},{key:"addOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;if(Array.isArray(e))return n.addOptions(e,t),!1;var r=Oe(e[n.settings.valueField]);return null!==r&&!n.options.hasOwnProperty(r)&&(e.$order=e.$order||++n.order,e.$id=n.inputId+"-opt-"+e.$order,n.options[r]=e,n.lastQuery=null,t&&(n.userOptions[r]=t,n.trigger("option_add",r,e)),r)}},{key:"addOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];te(e,(function(e){t.addOption(e,n)}))}},{key:"registerOption",value:function(e){return this.addOption(e)}},{key:"registerOptionGroup",value:function(e){var t=Oe(e[this.settings.optgroupValueField]);return null!==t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}},{key:"addOptionGroup",value:function(e,t){var n;t[this.settings.optgroupValueField]=e,(n=this.registerOptionGroup(t))&&this.trigger("optgroup_add",n,t)}},{key:"removeOptionGroup",value:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}},{key:"clearOptionGroups",value:function(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}},{key:"updateOption",value:function(e,t){var n,r,i=this,o=Oe(e),a=Oe(t[i.settings.valueField]);if(null!==o){var s=i.options[o];if(void 0!=s){if("string"!==typeof a)throw new Error("Value must be set in option data");var l=i.getOption(o),u=i.getItem(o);if(t.$order=t.$order||s.$order,delete i.options[o],i.uncacheValue(a),i.options[a]=t,l){if(i.dropdown_content.contains(l)){var c=i._render("option",t);ye(l,c),i.activeOption===l&&i.setActiveOption(c)}l.remove()}u&&(-1!==(r=i.items.indexOf(o))&&i.items.splice(r,1,a),n=i._render("item",t),u.classList.contains("active")&&ue(n,"active"),ye(u,n)),i.lastQuery=null}}}},{key:"removeOption",value:function(e,t){var n=this;e=ke(e),n.uncacheValue(e),delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)}},{key:"clearOptions",value:function(e){var t=(e||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();var n={};te(this.options,(function(e,r){t(e,r)&&(n[r]=e)})),this.options=this.sifter.items=n,this.lastQuery=null,this.trigger("option_clear")}},{key:"clearFilter",value:function(e,t){return this.items.indexOf(t)>=0}},{key:"getOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Oe(e);if(null===n)return null;var r=this.options[n];if(void 0!=r){if(r.$div)return r.$div;if(t)return this._render("option",r)}return null}},{key:"getAdjacent",value:function(e,t){var n;if(!e)return null;n="item"==(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"option")?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(var r=0;r<n.length;r++)if(n[r]==e)return t>0?n[r+1]:n[r-1];return null}},{key:"getItem",value:function(e){if("object"==v(e))return e;var t=Oe(e);return null!==t?this.control.querySelector('[data-value="'.concat(Fe(t),'"]')):null}},{key:"addItems",value:function(e,t){var n=this,r=Array.isArray(e)?e:[e],i=(r=r.filter((function(e){return-1===n.items.indexOf(e)})))[r.length-1];r.forEach((function(e){n.isPending=e!==i,n.addItem(e,t)}))}},{key:"addItem",value:function(e,t){var n=this;Se(this,t?[]:["change","dropdown_close"],(function(){var r,i,o=n,a=o.settings.mode,s=Oe(e);if((!s||-1===o.items.indexOf(s)||("single"===a&&o.close(),"single"!==a&&o.settings.duplicates))&&null!==s&&o.options.hasOwnProperty(s)&&("single"===a&&o.clear(t),"multi"!==a||!o.isFull())){if(r=o._render("item",o.options[s]),o.control.contains(r)&&(r=r.cloneNode(!0)),i=o.isFull(),o.items.splice(o.caretPos,0,s),o.insertAtCaret(r),o.isSetup){if(!o.isPending&&o.settings.hideSelected){var l=o.getOption(s),u=o.getAdjacent(l,1);u&&o.setActiveOption(u)}o.isPending||o.settings.closeAfterSelect||o.refreshOptions(o.isFocused&&"single"!==a),0!=o.settings.closeAfterSelect&&o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",s,r),o.isPending||o.updateOriginalInput({silent:t})}(!o.isPending||!i&&o.isFull())&&(o.inputState(),o.refreshState())}}))}},{key:"removeItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=this;if(e=n.getItem(e)){var r,i,o=e.dataset.value;r=he(e),e.remove(),e.classList.contains("active")&&(i=n.activeItems.indexOf(e),n.activeItems.splice(i,1),ce(e,"active")),n.items.splice(r,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(o)&&n.removeOption(o,t),r<n.caretPos&&n.setCaret(n.caretPos-1),n.updateOriginalInput({silent:t}),n.refreshState(),n.positionDropdown(),n.trigger("item_remove",o,e)}}},{key:"createItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};3===arguments.length&&(n=arguments[2]),"function"!=typeof n&&(n=function(){});var r,i=this,o=i.caretPos;if(e=e||i.inputValue(),!i.canCreate(e))return n(),!1;i.lock();var a=!1,s=function(e){if(i.unlock(),!e||"object"!==v(e))return n();var t=Oe(e[i.settings.valueField]);if("string"!==typeof t)return n();i.setTextboxValue(),i.addOption(e,!0),i.setCaret(o),i.addItem(t),n(e),a=!0};return r="function"===typeof i.settings.create?i.settings.create.call(this,e,s):t(t({},i.settings.labelField,e),i.settings.valueField,e),a||s(r),!0}},{key:"refreshItems",value:function(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}},{key:"refreshState",value:function(){var e=this;e.refreshValidityState();var t=e.isFull(),n=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);var r,i=e.wrapper.classList;i.toggle("focus",e.isFocused),i.toggle("disabled",e.isDisabled),i.toggle("required",e.isRequired),i.toggle("invalid",!e.isValid),i.toggle("locked",n),i.toggle("full",t),i.toggle("input-active",e.isFocused&&!e.isInputHidden),i.toggle("dropdown-active",e.isOpen),i.toggle("has-options",(r=e.options,0===Object.keys(r).length)),i.toggle("has-items",e.items.length>0)}},{key:"refreshValidityState",value:function(){var e=this;e.input.validity&&(e.isValid=e.input.validity.valid,e.isInvalid=!e.isValid)}},{key:"isFull",value:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}},{key:"updateOriginalInput",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this,i=r.input.querySelector('option[value=""]');if(r.is_select_tag){var o=function(e,t,n){return e||(e=oe('<option value="'+_e(t)+'">'+_e(n)+"</option>")),e!=i&&r.input.append(e),a.push(e),(e!=i||s>0)&&(e.selected=!0),e},a=[],s=r.input.querySelectorAll("option:checked").length;r.input.querySelectorAll("option:checked").forEach((function(e){e.selected=!1})),0==r.items.length&&"single"==r.settings.mode?o(i,"",""):r.items.forEach((function(n){if(e=r.options[n],t=e[r.settings.labelField]||"",a.includes(e.$option)){var i=r.input.querySelector('option[value="'.concat(Fe(n),'"]:not(:checked)'));o(i,n,t)}else e.$option=o(e.$option,n,t)}))}else r.input.value=r.getValue();r.isSetup&&(n.silent||r.trigger("change",r.getValue()))}},{key:"open",value:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.isOpen=!0,ge(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),le(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),le(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,n=t.isOpen;e&&(t.setTextboxValue(),"single"===t.settings.mode&&t.items.length&&t.hideInput()),t.isOpen=!1,ge(t.focus_node,{"aria-expanded":"false"}),le(t.dropdown,{display:"none"}),t.settings.hideSelected&&t.clearActiveOption(),t.refreshState(),n&&t.trigger("dropdown_close",t.dropdown)}},{key:"positionDropdown",value:function(){if("body"===this.settings.dropdownParent){var e=this.control,t=e.getBoundingClientRect(),n=e.offsetHeight+t.top+window.scrollY,r=t.left+window.scrollX;le(this.dropdown,{width:t.width+"px",top:n+"px",left:r+"px"})}}},{key:"clear",value:function(e){var t=this;if(t.items.length){var n=t.controlChildren();te(n,(function(e){t.removeItem(e,!0)})),t.showInput(),e||t.updateOriginalInput(),t.trigger("clear")}}},{key:"insertAtCaret",value:function(e){var t=this,n=t.caretPos,r=t.control;r.insertBefore(e,r.children[n]||null),t.setCaret(n+1)}},{key:"deleteSelection",value:function(e){var t,n,r,i,o,a=this;t=e&&8===e.keyCode?-1:1,n={start:(o=a.control_input).selectionStart||0,length:(o.selectionEnd||0)-(o.selectionStart||0)};var s=[];if(a.activeItems.length)i=ve(a.activeItems,t),r=he(i),t>0&&r++,te(a.activeItems,(function(e){return s.push(e)}));else if((a.isFocused||"single"===a.settings.mode)&&a.items.length){var l,u=a.controlChildren();t<0&&0===n.start&&0===n.length?l=u[a.caretPos-1]:t>0&&n.start===a.inputValue().length&&(l=u[a.caretPos]),void 0!==l&&s.push(l)}if(!a.shouldDelete(s,e))return!1;for(Ie(e,!0),"undefined"!==typeof r&&a.setCaret(r);s.length;)a.removeItem(s.pop());return a.showInput(),a.positionDropdown(),a.refreshOptions(!1),!0}},{key:"shouldDelete",value:function(e,t){var n=e.map((function(e){return e.dataset.value}));return!(!n.length||"function"===typeof this.settings.onDelete&&!1===this.settings.onDelete(n,t))}},{key:"advanceSelection",value:function(e,t){var n,r,i=this;i.rtl&&(e*=-1),i.inputValue().length||(Ae(be,t)||Ae("shiftKey",t)?(r=(n=i.getLastActive(e))?n.classList.contains("active")?i.getAdjacent(n,e,"item"):n:e>0?i.control_input.nextElementSibling:i.control_input.previousElementSibling)&&(r.classList.contains("active")&&i.removeActiveItem(n),i.setActiveItemClass(r)):i.moveCaret(e))}},{key:"moveCaret",value:function(e){}},{key:"getLastActive",value:function(e){var t=this.control.querySelector(".last-active");if(t)return t;var n=this.control.querySelectorAll(".active");return n?ve(n,e):void 0}},{key:"setCaret",value:function(e){this.caretPos=this.items.length}},{key:"controlChildren",value:function(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}},{key:"lock",value:function(){this.isLocked=!0,this.refreshState()}},{key:"unlock",value:function(){this.isLocked=!1,this.refreshState()}},{key:"disable",value:function(){var e=this;e.input.disabled=!0,e.control_input.disabled=!0,e.focus_node.tabIndex=-1,e.isDisabled=!0,this.close(),e.lock()}},{key:"enable",value:function(){var e=this;e.input.disabled=!1,e.control_input.disabled=!1,e.focus_node.tabIndex=e.tabIndex,e.isDisabled=!1,e.unlock()}},{key:"destroy",value:function(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,ce(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}},{key:"render",value:function(e,t){var n,r,i=this;if("function"!==typeof this.settings.render[e])return null;if(!(r=i.settings.render[e].call(this,t,_e)))return null;if(r=oe(r),"option"===e||"option_create"===e?t[i.settings.disabledField]?ge(r,{"aria-disabled":"true"}):ge(r,{"data-selectable":""}):"optgroup"===e&&(n=t.group[i.settings.optgroupValueField],ge(r,{"data-group":n}),t.group[i.settings.disabledField]&&ge(r,{"data-disabled":""})),"option"===e||"item"===e){var o=ke(t[i.settings.valueField]);ge(r,{"data-value":o}),"item"===e?(ue(r,i.settings.itemClass),ge(r,{"data-ts-item":""})):(ue(r,i.settings.optionClass),ge(r,{role:"option",id:t.$id}),t.$div=r,i.options[o]=t)}return r}},{key:"_render",value:function(e,t){var n=this.render(e,t);if(null==n)throw"HTMLElement expected";return n}},{key:"clearCache",value:function(){te(this.options,(function(e){e.$div&&(e.$div.remove(),delete e.$div)}))}},{key:"uncacheValue",value:function(e){var t=this.getOption(e);t&&t.remove()}},{key:"canCreate",value:function(e){return this.settings.create&&e.length>0&&this.settings.createFilter.call(this,e)}},{key:"hook",value:function(e,t,n){var r=this,i=r[t];r[t]=function(){var t,o;return"after"===e&&(t=i.apply(r,arguments)),o=n.apply(r,arguments),"instead"===e?o:("before"===e&&(t=i.apply(r,arguments)),t)}}}]),n}(((Le=w).plugins={},function(e){function t(){var e;h(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=l(this,t,[].concat(r))).plugins={names:[],settings:{},requested:{},loaded:{}},e}return p(t,e),y(t,[{key:"initializePlugins",value:function(e){var t,n,r=this,i=[];if(Array.isArray(e))e.forEach((function(e){"string"===typeof e?i.push(e):(r.plugins.settings[e.name]=e.options,i.push(e.name))}));else if(e)for(t in e)e.hasOwnProperty(t)&&(r.plugins.settings[t]=e[t],i.push(t));for(;n=i.shift();)r.require(n)}},{key:"loadPlugin",value:function(e){var t=this,n=t.plugins,r=Le.plugins[e];if(!Le.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');n.requested[e]=!0,n.loaded[e]=r.fn.apply(t,[t.plugins.settings[e]||{}]),n.names.push(e)}},{key:"require",value:function(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]}}],[{key:"define",value:function(e,t){Le.plugins[e]={name:e,fn:t}}}]),t}(Le)));Te.define("caret_position",(function(){var e=this;e.hook("instead","setCaret",(function(t){"single"!==e.settings.mode&&e.control.contains(e.control_input)?(t=Math.max(0,Math.min(e.items.length,t)))==e.caretPos||e.isPending||e.controlChildren().forEach((function(n,r){r<t?e.control_input.insertAdjacentElement("beforebegin",n):e.control.appendChild(n)})):t=e.items.length,e.caretPos=t})),e.hook("instead","moveCaret",(function(t){if(e.isFocused){var n=e.getLastActive(t);if(n){var r=he(n);e.setCaret(t>0?r+1:r),e.setActiveItem(),ce(n,"last-active")}else e.setCaret(e.caretPos+t)}}))})),Te.define("dropdown_input",(function(){var e=this;e.settings.shouldOpen=!0,e.hook("before","setup",(function(){e.focus_node=e.control,ue(e.control_input,"dropdown-input");var t=oe('<div class="dropdown-input-wrap">');t.append(e.control_input),e.dropdown.insertBefore(t,e.dropdown.firstChild);var n=oe('<input class="items-placeholder" tabindex="-1" />');n.placeholder=e.settings.placeholder||"",e.control.append(n)})),e.on("initialize",(function(){e.control_input.addEventListener("keydown",(function(t){switch(t.keyCode){case 27:return e.isOpen&&(Ie(t,!0),e.close()),void e.clearActiveItems();case 9:e.focus_node.tabIndex=-1}return e.onKeyDown.call(e,t)})),e.on("blur",(function(){e.focus_node.tabIndex=e.isDisabled?-1:e.tabIndex})),e.on("dropdown_open",(function(){e.control_input.focus()}));var t=e.onBlur;e.hook("instead","onBlur",(function(n){if(!n||n.relatedTarget!=e.control_input)return t.call(e)})),xe(e.control_input,"blur",(function(){return e.onBlur()})),e.hook("before","close",(function(){e.isOpen&&e.focus_node.focus({preventScroll:!0})}))}))})),Te.define("no_backspace_delete",(function(){var e=this,t=e.deleteSelection;this.hook("instead","deleteSelection",(function(n){return!!e.activeItems.length&&t.call(e,n)}))})),Te.define("remove_button",(function(e){var t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},e),n=this;if(t.append){var r='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+_e(t.title)+'">'+t.label+"</a>";n.hook("after","setupTemplates",(function(){var e=n.settings.render.item;n.settings.render.item=function(t,i){var o=oe(e.call(n,t,i)),a=oe(r);return o.appendChild(a),xe(a,"mousedown",(function(e){Ie(e,!0)})),xe(a,"click",(function(e){Ie(e,!0),n.isLocked||n.shouldDelete([o],e)&&(n.removeItem(o),n.refreshOptions(!1),n.inputState())})),o}}))}})),Te.define("restore_on_backspace",(function(e){var t=this,n=Object.assign({text:function(e){return e[t.settings.labelField]}},e);t.on("item_remove",(function(e){if(t.isFocused&&""===t.control_input.value.trim()){var r=t.options[e];r&&t.setTextboxValue(n.text.call(t,r))}}))})),e.exports=Te},97540:function(e,t,n){"use strict";e.exports=n.p+"media/images/decidim_elections-15e5583a7f2834cd644e.svg"},63400:function(e,t,n){"use strict";e.exports=n.p+"media/images/decidim_votings-d8f8364c84ea50df120f.svg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/decidim-packs/",function(){"use strict";n(54751);function e(e,t,n){var r="".concat(e,"Name");if(n[r])return n[r];var i=t.attr("name"),o=/\[[^\]]+\]$/;return i.match(o)?i.replace(o,"[".concat(e,"]")):e}function t(t,n,r){var i=$.extend({},n),o=t.attr("id").split("_");o.pop();var a="".concat(o.join("_")),s="latitude",l="longitude";t.length>0&&(s=e("latitude",t,i),l=e("longitude",t,i));var u=$.extend({latitudeId:"".concat(a,"_latitude"),longitudeId:"".concat(a,"_longitude"),latitudeName:s,longitudeName:l},n),c=!1,d=function(e){!function(){var e=$("#".concat(u.latitudeId));e.length<1&&(e=$('<input type="hidden" name="'.concat(u.latitudeName,'" id="').concat(u.latitudeId,'" />')),t.after(e));var n=$("#".concat(u.longitudeId));n.length<1&&(n=$('<input type="hidden" name="'.concat(u.longitudeName,'" id="').concat(u.longitudeId,'" />')),t.after(n))}(),$("#".concat(u.latitudeId)).val(e[0]).attr("value",e[0]),$("#".concat(u.longitudeId)).val(e[1]).attr("value",e[1])};t.on("change.decidim",(function(){c||($("#".concat(u.latitudeId)).val("").removeAttr("value"),$("#".concat(u.longitudeId)).val("").removeAttr("value"))})),t.on("geocoder-suggest-coordinates.decidim",(function(e,t){d(t),c=!0,"function"!==typeof r||r(t)}));var p="".concat(t.data("coordinates")).split(",").map(parseFloat);Array.isArray(p)&&2===p.length&&d(p)}$((function(){var e=$(".edit_polling_station, .new_polling_station");e.length>0&&t(e.find("#polling_station_address"))}));var r=n(35085),i=n.n(r);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){var r;return r=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==o(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:String(t)}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("#polling_officers_filter").forEach((function(e){var t=e.dataset,n=t.tmName,r=t.tmItems,o=t.tmNoResults,a={plugins:["remove_button","dropdown_input"],allowEmptyOption:!0,items:JSON.parse(r),render:s({item:function(e,t){return"<div>".concat(t(e.text),'<input type="hidden" name="').concat(n,'[]" value="').concat(e.value,'" /></div>')}},o&&{no_results:function(){return'<div class="no-results">'.concat(o,"</div>")}})};return new(i())(e,a)}))}));var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controllerField=t.controllerField,this.wrapperSelector=t.wrapperSelector,this.dependentFieldsSelector=t.dependentFieldsSelector,this.dependentInputSelector=t.dependentInputSelector,this.enablingCondition=t.enablingCondition,this._bindEvent(),this._run()}var t,n,r;return t=e,(n=[{key:"_run",value:function(){var e=this.controllerField,t=e.parents(this.wrapperSelector).find(this.dependentFieldsSelector),n=t.find(this.dependentInputSelector);this.enablingCondition(e)?(n.prop("disabled",!1),t.show()):(n.prop("disabled",!0),t.hide())}},{key:"_bindEvent",value:function(){var e=this;this.controllerField.on("change",(function(){e._run()}))}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return new p(e)}$((function(){var e=$("#voting_user_role_existing_user");f({controllerField:e,wrapperSelector:".user-fields",dependentFieldsSelector:".user-fields--email",dependentInputSelector:"input",enablingCondition:function(e){return"false"===e.val()}}),f({controllerField:e,wrapperSelector:".user-fields",dependentFieldsSelector:".user-fields--name",dependentInputSelector:"input",enablingCondition:function(e){return"false"===e.val()}}),f({controllerField:e,wrapperSelector:".user-fields",dependentFieldsSelector:".user-fields--user-picker",dependentInputSelector:"input",enablingCondition:function(e){return"true"===e.val()}})})),n(23439)}()}();
//# sourceMappingURL=decidim_votings_admin-aa7fc2b62a26a208ccf0.js.map