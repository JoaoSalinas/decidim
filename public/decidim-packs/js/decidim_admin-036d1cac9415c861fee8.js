/*! For license information please see decidim_admin-036d1cac9415c861fee8.js.LICENSE.txt */
!function(){var e={40873:function(e,t,n){var r,o,i;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}i=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e){return n="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},n(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){return"string"==typeof e?document.querySelector(e):e()},u=function(e,t){var n="string"==typeof e?document.createElement(e):e;for(var r in t){var o=t[r];if("inside"===r)o.append(n);else if("dest"===r)l(o[0]).insertAdjacentElement(o[1],n);else if("around"===r){var i=o;i.parentNode.insertBefore(n,i),n.append(i),null!=i.getAttribute("autofocus")&&i.focus()}else r in n?n[r]=o:n.setAttribute(r,o)}return n},s=function(e,t){return e=String(e).toLowerCase(),t?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):e},f=function(e,n){return u("mark",t({innerHTML:e},"string"==typeof n&&{class:n})).outerHTML},d=function(e,t){t.input.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t.feedback,cancelable:!0}))},h=function(e,t,n){var r=n||{},o=r.mode,i=r.diacritics,a=r.highlight,c=s(t,i);if(t=String(t),e=s(e,i),"loose"===o){var l=(e=e.replace(/ /g,"")).length,u=0,d=Array.from(t).map((function(t,n){return u<l&&c[n]===e[u]&&(t=a?f(t,a):t,u++),t})).join("");if(u===l)return d}else{var h=c.indexOf(e);if(~h)return e=t.substring(h,h+e.length),a?t.replace(e,f(e,a)):t}},p=function(e,t){return new Promise((function(n,r){var o;return(o=e.data).cache&&o.store?n():new Promise((function(e,n){return"function"==typeof o.src?o.src(t).then(e,n):e(o.src)})).then((function(t){try{return e.feedback=o.store=t,d("response",e),n()}catch(e){return r(e)}}),r)}))},m=function(e,t){var n=t.data,r=t.searchEngine,o=[];n.store.forEach((function(a,c){var l=function(n){var i=n?a[n]:a,c="function"==typeof r?r(e,i):h(e,i,{mode:r,diacritics:t.diacritics,highlight:t.resultItem.highlight});if(c){var l={match:c,value:a};n&&(l.key=n),o.push(l)}};if(n.keys){var u,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw a}}}}(n.keys);try{for(s.s();!(u=s.n()).done;)l(u.value)}catch(e){s.e(e)}finally{s.f()}}else l()})),n.filter&&(o=n.filter(o));var a=o.slice(0,t.resultsList.maxResults);t.feedback={query:e,matches:o,results:a},d("results",t)},v="aria-expanded",y="aria-activedescendant",g="aria-selected",b=function(e,n){e.feedback.selection=t({index:n},e.feedback.results[n])},w=function(e){e.isOpen||((e.wrapper||e.input).setAttribute(v,!0),e.list.removeAttribute("hidden"),e.isOpen=!0,d("open",e))},S=function(e){e.isOpen&&((e.wrapper||e.input).setAttribute(v,!1),e.input.setAttribute(y,""),e.list.setAttribute("hidden",""),e.isOpen=!1,d("close",e))},k=function(e,t){var n=t.resultItem,r=t.list.getElementsByTagName(n.tag),i=!!n.selected&&n.selected.split(" ");if(t.isOpen&&r.length){var a,c,l=t.cursor;e>=r.length&&(e=0),e<0&&(e=r.length-1),t.cursor=e,l>-1&&(r[l].removeAttribute(g),i&&(c=r[l].classList).remove.apply(c,o(i))),r[e].setAttribute(g,!0),i&&(a=r[e].classList).add.apply(a,o(i)),t.input.setAttribute(y,r[t.cursor].id),t.list.scrollTop=r[e].offsetTop-t.list.clientHeight+r[e].clientHeight+5,t.feedback.cursor=t.cursor,b(t,e),d("navigate",t)}},E=function(e){k(e.cursor+1,e)},_=function(e){k(e.cursor-1,e)},x=function(e,t,n){(n=n>=0?n:e.cursor)<0||(e.feedback.event=t,b(e,n),d("selection",e),S(e))};function L(e,n){var r=this;return new Promise((function(o,i){var a,c;return a=n||((c=e.input)instanceof HTMLInputElement||c instanceof HTMLTextAreaElement?c.value:c.innerHTML),function(e,t,n){return t?t(e):e.length>=n}(a=e.query?e.query(a):a,e.trigger,e.threshold)?p(e,a).then((function(n){try{return e.feedback instanceof Error?o():(m(a,e),e.resultsList&&function(e){var n=e.resultsList,r=e.list,o=e.resultItem,i=e.feedback,a=i.matches,c=i.results;if(e.cursor=-1,r.innerHTML="",a.length||n.noResults){var l=new DocumentFragment;c.forEach((function(e,n){var r=u(o.tag,t({id:"".concat(o.id,"_").concat(n),role:"option",innerHTML:e.match,inside:l},o.class&&{class:o.class}));o.element&&o.element(r,e)})),r.append(l),n.element&&n.element(r,i),w(e)}else S(e)}(e),l.call(r))}catch(e){return i(e)}}),i):(S(e),l.call(r));function l(){return o()}}))}var $=function(e,t){for(var n in e)for(var r in e[n])t(n,r)},T=function(e){var n,r,o,i=e.events,a=(n=function(){return L(e)},r=e.debounce,function(){clearTimeout(o),o=setTimeout((function(){return n()}),r)}),c=e.events=t({input:t({},i&&i.input)},e.resultsList&&{list:i?t({},i.list):{}}),l={input:{input:function(){a()},keydown:function(t){!function(e,t){switch(e.keyCode){case 40:case 38:e.preventDefault(),40===e.keyCode?E(t):_(t);break;case 13:t.submit||e.preventDefault(),t.cursor>=0&&x(t,e);break;case 9:t.resultsList.tabSelect&&t.cursor>=0&&x(t,e);break;case 27:t.input.value="",S(t)}}(t,e)},blur:function(){S(e)}},list:{mousedown:function(e){e.preventDefault()},click:function(t){!function(e,t){var n=t.resultItem.tag.toUpperCase(),r=Array.from(t.list.querySelectorAll(n)),o=e.target.closest(n);o&&o.nodeName===n&&x(t,e,r.indexOf(o))}(t,e)}}};$(l,(function(t,n){(e.resultsList||"input"===n)&&(c[t][n]||(c[t][n]=l[t][n]))})),$(c,(function(t,n){e[t].addEventListener(n,c[t][n])}))};function C(e){var n=this;return new Promise((function(r,o){var i,a,c;if(i=e.placeHolder,c={role:"combobox","aria-owns":(a=e.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},u(e.input,t(t({"aria-controls":a.id,"aria-autocomplete":"both"},i&&{placeholder:i}),!e.wrapper&&t({},c))),e.wrapper&&(e.wrapper=u("div",t({around:e.input,class:e.name+"_wrapper"},c))),a&&(e.list=u(a.tag,t({dest:[a.destination,a.position],id:a.id,role:"listbox",hidden:"hidden"},a.class&&{class:a.class}))),T(e),e.data.cache)return p(e).then((function(e){try{return l.call(n)}catch(e){return o(e)}}),o);function l(){return d("init",e),r()}return l.call(n)}))}function O(e){var t=e.prototype;t.init=function(){C(this)},t.start=function(e){L(this,e)},t.unInit=function(){if(this.wrapper){var e=this.wrapper.parentNode;e.insertBefore(this.input,this.wrapper),e.removeChild(this.wrapper)}var t;$((t=this).events,(function(e,n){t[e].removeEventListener(n,t.events[e][n])}))},t.open=function(){w(this)},t.close=function(){S(this)},t.goTo=function(e){k(e,this)},t.next=function(){E(this)},t.previous=function(){_(this)},t.select=function(e){x(this,null,e)},t.search=function(e,t,n){return h(e,t,n)}}return function e(t){this.options=t,this.id=e.instances=(e.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(e){var t=e.name,r=e.options,o=e.resultsList,i=e.resultItem;for(var a in r)if("object"===n(r[a]))for(var c in e[a]||(e[a]={}),r[a])e[a][c]=r[a][c];else e[a]=r[a];e.selector=e.selector||"#"+t,o.destination=o.destination||e.selector,o.id=o.id||t+"_list_"+e.id,i.id=i.id||t+"_result",e.input=l(e.selector)}(this),O.call(this,e),C(this)}},"object"==a(t)?e.exports=i():void 0===(o="function"===typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)},74055:function(){$((function(){var e=$(".moderation-details"),t=e.find(".toggle-content"),n=e.find(".reported-content"),r=n.find(".current"),o=n.find(".original");o.hide(),t.on("click",(function(){r.toggle(),o.toggle(),r.is(":hidden")?t.html(t.data("see-current-button-label")):t.html(t.data("see-original-button-label"))}))}))},78858:function(){$((function(){var e=$(".form.newsletter_deliver");if(e.length>0){var t=e.find("#send_newsletter_to_all_users"),n=e.find("#send_newsletter_to_followers"),r=e.find("#send_newsletter_to_participants"),o=e.find("#participatory_spaces_for_select"),i=n.find("input[type='checkbox']").prop("checked"),a=r.find("input[type='checkbox']").prop("checked");t.on("change",(function(e){var t=e.target.checked;t?(n.find("input[type='checkbox']").prop("checked",!t),r.find("input[type='checkbox']").prop("checked",!t),o.hide()):(n.find("input[type='checkbox']").prop("checked",!t),r.find("input[type='checkbox']").prop("checked",!t),o.show())})),n.on("change",(function(e){var n=e.target.checked,i=r.find("input[type='checkbox']").prop("checked");n?(t.find("input[type='checkbox']").prop("checked",!n),o.show()):i||(t.find("input[type='checkbox']").prop("checked",!0),o.hide())})),r.on("change",(function(e){var r=e.target.checked,i=n.find("input[type='checkbox']").prop("checked");r?(t.find("input[type='checkbox']").prop("checked",!r),o.show()):i||(t.find("input[type='checkbox']").prop("checked",!0),o.hide())})),i||a?o.show():o.hide(),$(".form .spaces-block-tag").each((function(e,t){var n=$(t).find(".chosen-select");n.change((function(){var e=n.find("option:selected").val();"all"===e?(n.find("option").not(":first").prop("selected",!0),n.find("option[value='all']").prop("selected",!1)):""===e&&n.find("option").not(":first").prop("selected",!1)}))})),e.on("change",(function(){var t=e.serializeJSON().newsletter,n=e.data("recipients-count-newsletter-path"),r=$("#recipients_count_spinner");r.removeClass("hide"),$.get(n,{data:t},(function(e){$("#recipients_count").text(e)})).always((function(){r.addClass("hide")}))}))}}))},48404:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";t=function(){return r};var n,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(n){f=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new j(r||[]);return a(i,"_invoke",{value:T(e,n,c)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var p="suspendedStart",m="suspendedYield",v="executing",y="completed",g={};function b(){}function w(){}function S(){}var k={};f(k,l,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(I([])));_&&_!==o&&i.call(_,l)&&(k=_);var x=S.prototype=b.prototype=Object.create(k);function L(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function $(t,n){function r(o,a,c,l){var u=h(t[o],t,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==e(f)&&i.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,c,l)}),(function(e){r("throw",e,c,l)})):n.resolve(f).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,l)}))}l(u.arg)}var o;a(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function T(e,t,r){var o=p;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=C(c,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=h(e,t,r);if("normal"===u.type){if(o=r.done?y:m,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function C(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,C(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=h(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(i.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=S,a(x,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:w,configurable:!0}),w.displayName=f(S,s,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,f(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},r.awrap=function(e){return{__await:e}},L($.prototype),f($.prototype,u,(function(){return this})),r.AsyncIterator=$,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new $(d(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(x),f(x,s,"Generator"),f(x,l,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=I,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return c.type="throw",c.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}},r}function n(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(u){return void n(u)}c.done?t(l):Promise.resolve(l).then(r,o)}$((function(){var e=$("#show-email-modal");if(0!==e.length){var r=$("[data-open=user_email]",e),o=$("#user_email",e),i=$("#user_full_name",e);$("[data-dialog-open=show-email-modal]").on("click",(function(e){e.preventDefault(),r.show(),r.attr("data-remote-url",e.currentTarget.href),i.text($(e.currentTarget).data("full-name")),o.html("")})),$("[data-open=user_email]").on("click",(function(e){!function(e){a.apply(this,arguments)}(e.currentTarget.dataset.remoteUrl)}))}function a(){var e;return e=t().mark((function e(n){var o,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:if(!(o=e.sent).ok){e.next=11;break}return e.next=6,o.text();case 6:i=e.sent,$("#user_email").html(i),r.hide(),e.next=12;break;case 11:console.log('Error-HTTP: " + '.concat(o.status));case 12:case"end":return e.stop()}}),e)})),a=function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function c(e){n(a,o,i,c,l,"next",e)}function l(e){n(a,o,i,c,l,"throw",e)}c(void 0)}))},a.apply(this,arguments)}}))},73792:function(){$((function(){var e=$("label[for='component_settings_proposal_edit_time_limited']"),t=$("#component_settings_proposal_edit_time_limited"),n=$("#component_settings_proposal_edit_time_infinite"),r=$(".proposal_edit_before_minutes_container");r.detach().appendTo(e),n.is(":checked")&&r.hide(),t.on("click",(function(){r.show()})),n.on("click",(function(){r.hide()}))}))},62942:function(){$((function(){var e=$("#component_settings_scopes_enabled"),t=$("#component_settings_scope_id");$(".edit_component, .new_component").length>0&&(e.on("change",(function(e){var n=e.target.checked;t.attr("disabled",!n)})),t.attr("disabled",!e.prop("checked")))}))},69498:function(){$((function(){$("[data-tabs]").on("change.zf.tabs",(function(e){var t=$(e.target).parent().next(".tabs-content").find(".tabs-panel.is-active"),n=t.find(".editor .ProseMirror");(n.length>0||(n=t.find("input:first")).length>0)&&n.focus()}))}))},57459:function(){var e=function(e,t,n){var r=n/100,o=t*Math.min(r,1-r)/100,i=function(t){var n=(t+e/30)%12,i=r-o*Math.max(Math.min(n-3,9-n,1),-1);return Math.round(255*i).toString(16).padStart(2,"0")};return"#".concat(i(0)).concat(i(8)).concat(i(4))},t=function(t,n){var r=function(e){var t=0,n=0,r=0;4===e.length?(t="0x".concat(e[1]).concat(e[1]),n="0x".concat(e[2]).concat(e[2]),r="0x".concat(e[3]).concat(e[3])):7===e.length&&(t="0x".concat(e[1]).concat(e[2]),n="0x".concat(e[3]).concat(e[4]),r="0x".concat(e[5]).concat(e[6])),t/=255,n/=255,r/=255;var o=Math.min(t,n,r),i=Math.max(t,n,r),a=i-o,c=0,l=0,u=0;return c=0===a?0:i===t?(n-r)/a%6:i===n?(r-t)/a+2:(t-n)/a+4,(c=Math.round(60*c))<0&&(c+=360),u=(i+o)/2,l=0===a?0:a/(1-Math.abs(2*u-1)),{hue:c,saturation:l=Number((100*l).toFixed(1)),lightness:u=Number((100*u).toFixed(1))}}(t),o=r.hue,i=r.saturation,a=r.lightness,c=e(o+120,n||i,a),l=e(o-120,n||i,a);document.documentElement.style.setProperty("--primary",t),document.documentElement.style.setProperty("--secondary",c),document.documentElement.style.setProperty("--tertiary",l),document.getElementById("preview-primary").value=t,document.getElementById("preview-secondary").value=c,(document.getElementById("preview-tertiary")||{}).value=l};document.addEventListener("DOMContentLoaded",(function(){var n=document.querySelector("#primary-selector");if(n){var r=document.querySelector("#preview-primary"),o=document.querySelector("#primary-saturation"),i=document.querySelector("#set-colors");(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:360,r=Math.trunc(360/n);return Array.from({length:n},(function(n,o){return{hue:o*r,saturation:e,lightness:t}}))})(50,50).forEach((function(t){var r=document.createElement("div"),o=e(t.hue,t.saturation,t.lightness);r.style.backgroundColor=o,r.dataset.value=o,r.style.flex=1,n.appendChild(r)})),document.documentElement.style.setProperty("--primary",document.querySelector("#organization_primary_color").value),document.documentElement.style.setProperty("--secondary",document.querySelector("#organization_secondary_color").value),document.documentElement.style.setProperty("--tertiary",document.querySelector("#organization_tertiary_color").value),n.addEventListener("click",(function(e){var n=e.target.dataset.value;return t(n,Number(o.value))})),o.addEventListener("input",(function(e){var n=e.target.value;return t(r.value,Number(n))})),i.addEventListener("click",(function(e){e.preventDefault(),document.querySelector("#organization_primary_color").value=document.querySelector("#preview-primary").value,document.querySelector("#organization_secondary_color").value=document.querySelector("#preview-secondary").value,document.querySelector("#organization_tertiary_color").value=document.querySelector("#preview-tertiary").value}))}}))},82002:function(){$((function(){var e=$("#welcome-notification-details"),t=$("#organization_send_welcome_notification",e),n=$("#organization_customize_welcome_notification",e),r=function(){t.is(":checked")?$(".send-welcome-notification-details",e).show():$(".send-welcome-notification-details",e).hide(),n.is(":checked")?$(".customize-welcome-notification-details",e).show():$(".customize-welcome-notification-details",e).hide()};$(t).click((function(){return r()})),$(n).click((function(){return r()})),r()}))},51544:function(){$((function(){var e=$(".slug"),t=e.find("input"),n=e.find("span.slug-url-value");t.on("keyup",(function(e){n.html(e.target.value)}))}))}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";n(69498);var e=function(e){var t=document.querySelector(".layout-wrapper");e.preventDefault(),t.classList.toggle("is-nav-open")};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}var o=function(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!==typeof t?Array.from(e):Array.from(e).filter((function(e){return 1===e.nodeType&&e.matches(t)}))},i=new Map,a=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var e={};return this._config.forEach((function(t,n){e[n]=t})),e},set:function(e){if("object"!==t(e))throw new Error("You must provide a valid configuration object to the config setter.");var n=Object.assign({},e);this._config=new Map(Object.entries(n))},enumerable:!1,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!1,configurable:!0}),e.prototype.setData=function(e,t){if("string"!==typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!==typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!==typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}(),c=function(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return i.has(e)||i.set(e,new a),i.get(e)};function l(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)l(e[r],t,n);else e.addEventListener(t,n),c(e).setData("event"+t,n)}function u(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)u(e[n],t);else e.removeEventListener(t,c(e).getData("event"+t)),c(e).deleteData("event"+t)}function s(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)s(e[r],t,n);else e.setAttribute(t,n)}function f(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)f(e[n],t);else e.removeAttribute(t)}var d=function(e){if(!e.parentElement||0===e.getClientRects().length)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}},h=function(e,t){if(!(e instanceof HTMLElement)||!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)},p=function(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode},m=function(e,t,n){if(!(e instanceof HTMLElement)||!(e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},v=function(e,t){return m(e,t,"after")},y=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return"border-box"===t.getPropertyValue("box-sizing")?parseInt(t.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},g=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},b=function(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!==typeof t?e:e.filter((function(e){return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement})).map((function(e){return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)}))},w=function(e){return e.composedPath&&e.composedPath()[0]||e.target},S=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}},k=function(e,t){if(!0===e.isSortable){var n=c(e).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!==typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(e){return e.length>0&&t.matches(e)})).length>0;if(e===t)return!0;if(void 0!==c(e).getConfig("connectWith")&&null!==c(e).getConfig("connectWith"))return c(e).getConfig("connectWith")===c(t).getConfig("connectWith")}return!1},E={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"};var _,x,L,T,C,O,P,j,I,A=function(e,t){if("string"===typeof c(e).getConfig("hoverClass")){var n=c(e).getConfig("hoverClass").split(" ");!0===t?(l(e,"mousemove",function(e,t){var n=this;if(void 0===t&&(t=250),"function"!==typeof e)throw new Error("You must provide a function as the first argument for throttle.");if("number"!==typeof t)throw new Error("You must provide a number as the second argument for throttle.");var r=null;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=Date.now();(null===r||a-r>=t)&&(r=a,e.apply(n,o))}}((function(t){0===t.buttons&&o(e.children,c(e).getConfig("items")).forEach((function(e){var r,o;e!==t.target?(r=e.classList).remove.apply(r,n):(o=e.classList).add.apply(o,n)}))}),c(e).getConfig("throttleTime"))),l(e,"mouseleave",(function(){o(e.children,c(e).getConfig("items")).forEach((function(e){var t;(t=e.classList).remove.apply(t,n)}))}))):(u(e,"mousemove"),u(e,"mouseleave"))}},D=function(e){u(e,"dragstart"),u(e,"dragend"),u(e,"dragover"),u(e,"dragenter"),u(e,"drop"),u(e,"mouseenter"),u(e,"mouseleave")},F=function(e,t){e&&u(e,"dragleave"),t&&t!==e&&u(t,"dragleave")},M=function(e){var t;(t=e).h5s&&delete t.h5s.data,f(e,"aria-dropeffect")},N=function(e){f(e,"aria-grabbed"),f(e,"aria-copied"),f(e,"draggable"),f(e,"role")};function H(e,t){if(t.composedPath)return t.composedPath().find((function(e){return e.isSortable}));for(;!0!==e.isSortable;)e=e.parentElement;return e}function B(e,t){var n=r(e,"opts"),i=o(e.children,n.items).filter((function(e){return e.contains(t)||e.shadowRoot&&e.shadowRoot.contains(t)}));return i.length>0?i[0]:t}var q=function(e){var t=r(e,"opts"),n=o(e.children,t.items),i=b(n,t.handle);(s(e,"aria-dropeffect","move"),r(e,"_disabled","false"),s(i,"draggable","true"),!1===t.disableIEFix)&&("function"===typeof(document||window.document).createElement("span").dragDrop&&l(i,"mousedown",(function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}})))};function R(e,t){var n=String(t);return t=t||{},"string"===typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(n)?e.map((function(e){var t=r(e,"opts");return function(e,t,n){if(void 0===t&&(t=function(e,t){return e}),void 0===n&&(n=function(e){return e}),!(e instanceof HTMLElement)||!0===!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!==typeof t||"function"!==typeof n)throw new Error("You need to provide a valid serializer for items and the container.");var i=r(e,"opts").items,a=o(e.children,i),c=a.map((function(t){return{parent:e,node:t,html:t.outerHTML,index:h(t,a)}}));return{container:n({node:e,itemCount:c.length}),items:c.map((function(n){return t(n,e)}))}}(e,t.itemSerializer,t.containerSerializer)})):(e.forEach((function(e){if(/enable|disable|destroy/.test(n))return R[n](e);["connectWith","disableIEFix"].forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&null!==t[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),t=Object.assign({},E,c(e).config,t),c(e).config=t,r(e,"opts",t),e.isSortable=!0,function(e){var t=r(e,"opts"),n=o(e.children,t.items),i=b(n,t.handle);r(e,"_disabled","false"),D(n),F(T,j),u(i,"mousedown"),u(e,"dragover"),u(e,"dragenter"),u(e,"drop")}(e);var a,f=o(e.children,t.items);if(null!==t.placeholder&&void 0!==t.placeholder){var $=document.createElement(e.tagName);t.placeholder instanceof HTMLElement?$.appendChild(t.placeholder):$.innerHTML=t.placeholder,a=$.children[0]}c(e).placeholder=function(e,t,n){var r;if(void 0===n&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"===typeof n&&(r=t.classList).add.apply(r,n.split(" ")),t}(e,a,t.placeholderClass),r(e,"items",t.items),t.acceptFrom?r(e,"acceptFrom",t.acceptFrom):t.connectWith&&r(e,"connectWith",t.connectWith),q(e),s(f,"role","option"),s(f,"aria-grabbed","false"),A(e,!0),l(e,"dragstart",(function(e){var n=w(e);if(!0!==n.isSortable&&(e.stopImmediatePropagation(),(!t.handle||n.matches(t.handle))&&"false"!==n.getAttribute("draggable"))){var r=H(n,e),i=B(r,n);P=o(r.children,t.items),C=P.indexOf(i),O=h(i,r.children),T=r,function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=S),e.dataTransfer&&e.dataTransfer.setDragImage){var r=n(t,d(t),e);if(!(r.element instanceof HTMLElement)||"number"!==typeof r.posX||"number"!==typeof r.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",w(e).id),e.dataTransfer.setDragImage(r.element,r.posX,r.posY)}}(e,i,t.customDragImage),x=y(i),L=g(i),i.classList.add(t.draggingClass),_=function(e,t){var n=e;return!0===c(t).getConfig("copy")&&(s(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n}(i,r),s(_,"aria-grabbed","true"),r.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:O,index:C,container:T},item:_,originalTarget:n}}))}})),l(e,"dragenter",(function(n){var i=w(n),a=H(i,n);a&&a!==j&&(I=o(a.children,r(a,"items")).filter((function(t){return t!==c(e).placeholder})),t.dropTargetContainerClass&&a.classList.add(t.dropTargetContainerClass),a.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:O,index:C,container:T},destination:{container:a,itemsBeforeUpdate:I},item:_,originalTarget:i}})),l(a,"dragleave",(function(e){var n=e.relatedTarget||e.fromElement;e.currentTarget.contains(n)||(t.dropTargetContainerClass&&a.classList.remove(t.dropTargetContainerClass),a.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:O,index:C,container:a},item:_,originalTarget:i}})))}))),j=a})),l(e,"dragend",(function(n){if(_){_.classList.remove(t.draggingClass),s(_,"aria-grabbed","false"),"true"===_.getAttribute("aria-copied")&&"true"!==r(_,"dropped")&&_.remove(),_.style.display=_.oldDisplay,delete _.oldDisplay;var o=Array.from(i.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(p)[0];o&&o.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:O,index:C,container:T},item:_}})),j=null,_=null,x=null,L=null}})),l(e,"drop",(function(n){if(k(e,_.parentElement)){n.preventDefault(),n.stopPropagation(),r(_,"dropped","true");var a=Array.from(i.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(p)[0];v(a,_),a.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:O,index:C,container:T},item:_}}));var l=c(e).placeholder,u=o(T.children,t.items).filter((function(e){return e!==l})),s=!0===this.isSortable?this:this.parentElement,f=o(s.children,r(s,"items")).filter((function(e){return e!==l})),d=h(_,Array.from(_.parentElement.children).filter((function(e){return e!==l}))),m=h(_,f);t.dropTargetContainerClass&&s.classList.remove(t.dropTargetContainerClass),O===d&&T===s||e.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:O,index:C,container:T,itemsBeforeUpdate:P,items:u},destination:{index:m,elementIndex:d,container:s,itemsBeforeUpdate:I,items:f},item:_}}))}}));var M,N,z,U=(M=function(e,n,r,a){if(_)if(t.forcePlaceholderSize&&(c(e).placeholder.style.height=x+"px",c(e).placeholder.style.width=L+"px"),Array.from(e.children).indexOf(n)>-1){var l=y(n),u=g(n),s=h(c(e).placeholder,n.parentElement.children),f=h(n,n.parentElement.children);if(l>x||u>L){var p=l-x,b=u-L,w=d(n).top,S=d(n).left;if(s<f&&("vertical"===t.orientation&&a<w||"horizontal"===t.orientation&&r<S))return;if(s>f&&("vertical"===t.orientation&&a>w+l-p||"horizontal"===t.orientation&&r>S+u-b))return}void 0===_.oldDisplay&&(_.oldDisplay=_.style.display),"none"!==_.style.display&&(_.style.display="none");var k=!1;try{var E=d(n).top+n.offsetHeight/2,$=d(n).left+n.offsetWidth/2;k="vertical"===t.orientation&&a>=E||"horizontal"===t.orientation&&r>=$}catch(C){k=s<f}k?v(n,c(e).placeholder):function(e,t){m(e,t,"before")}(n,c(e).placeholder),Array.from(i.values()).filter((function(e){return void 0!==e.placeholder})).forEach((function(t){t.placeholder!==c(e).placeholder&&t.placeholder.remove()}))}else{var T=Array.from(i.values()).filter((function(e){return void 0!==e.placeholder})).map((function(e){return e.placeholder}));-1!==T.indexOf(n)||e!==n||o(n.children,t.items).length||(T.forEach((function(e){return e.remove()})),n.appendChild(c(e).placeholder))}},void 0===(N=t.debounce)&&(N=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(z),z=setTimeout((function(){M.apply(void 0,e)}),N)}),W=function(e){var t=e.target,n=!0===t.isSortable?t:H(t,e);if(t=B(n,t),_&&k(n,_.parentElement)&&"true"!==r(n,"_disabled")){var i=r(n,"opts");parseInt(i.maxItems)&&o(n.children,r(n,"items")).length>=parseInt(i.maxItems)&&_.parentElement!==n||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===c(n).getConfig("copy")?"copy":"move",U(n,t,e.pageX,e.pageY))}};l(f.concat(e),"dragover",W),l(f.concat(e),"dragenter",W)})),e)}R.destroy=function(e){!function(e){var t=r(e,"opts")||{},n=o(e.children,t.items),i=b(n,t.handle);u(e,"dragover"),u(e,"dragenter"),u(e,"dragstart"),u(e,"dragend"),u(e,"drop"),M(e),u(i,"mousedown"),D(n),N(n),F(T,j),e.isSortable=!1}(e)},R.enable=function(e){q(e)},R.disable=function(e){!function(e){var t=r(e,"opts"),n=o(e.children,t.items),i=b(n,t.handle);s(e,"aria-dropeffect","none"),r(e,"_disabled","true"),s(i,"draggable","false"),u(i,"mousedown")}(e)},R.__testing={data:r,removeItemEvents:D,removeItemData:N,removeSortableData:M,removeContainerEvents:F};var z=R;function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function Y(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:String(t)}var V=Y((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$(t).length>0&&z(t,n)[0].addEventListener("sortupdate",(function(e){var t=$(e.target).children();n.onSortUpdate&&n.onSortUpdate(t)}))}));function X(e,t){return new V(e,t)}function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q(r.key),r)}}function Q(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:String(t)}var Z=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.checkboxesTree=Array.from(document.querySelectorAll("[data-checkboxes-tree]")),this.checkboxesTree.length&&(this.checkboxesLeaf=Array.from(document.querySelectorAll("[data-children-checkbox] input")),this.checkboxesTree.forEach((function(e){return e.addEventListener("click",(function(e){return t.checkTheCheckBoxes(e.target)}))})),this.checkboxesLeaf.forEach((function(e){return e.addEventListener("change",(function(e){return t.checkTheCheckParent(e.target)}))})),this.checkboxesLeaf.forEach((function(e){return t.checkTheCheckParent(e)})))}var t,n,r;return t=e,(n=[{key:"updateChecked",value:function(e,t){var n=this;e.each((function(e,r){(""===r.value&&1===t.length||""!==r.value&&t.includes(r.value))&&(r.checked=!0,n.checkTheCheckBoxes(r),n.checkTheCheckParent(r))}))}},{key:"setContainerForm",value:function(e){e.on("submit ajax:before",(function(){e.find(".ignore-filters input, input.ignore-filter").each((function(e,t){t.disabled=!0}))})),e.on("ajax:send",(function(){e.find(".ignore-filters input, input.ignore-filter").each((function(e,t){t.disabled=!1}))}))}},{key:"checkTheCheckBoxes",value:function(e){var t=this,n=e.dataset.checkboxesTree,r=e.checked;document.querySelectorAll('[data-children-checkbox$="'.concat(n,'"] input')).forEach((function(e){e.checked=r,e.indeterminate=!1,e.classList.add("ignore-filter"),e.dataset.checkboxesTree&&t.checkTheCheckBoxes(e)}))}},{key:"checkTheCheckParent",value:function(e){var t=e.parentNode.dataset.childrenCheckbox,n=this.checkboxesTree.find((function(e){var n=e.id;return new RegExp("".concat(t,"$"),"i").test(n)}));if("undefined"!==typeof n){var r=this.checkboxesLeaf.filter((function(e){return e.parentNode.dataset.childrenCheckbox===t})),o=r.filter((function(e){return e.checked})),i=r.filter((function(e){return e.indeterminate}));0===o.length&&0===i.length?(n.checked=!1,n.indeterminate=!1):o.length===r.length&&0===i.length?(n.checked=!0,n.indeterminate=!1):(n.checked=!1,n.indeterminate=!0),r.forEach((function(e){n.indeterminate&&!e.indeterminate?e.classList.remove("ignore-filter"):e.classList.add("ignore-filter")})),"childrenCheckbox"in n.parentNode.dataset&&this.checkTheCheckParent(n)}}}])&&K(t.prototype,n),r&&K(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ee={};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ie(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:String(t)}window.onpopstate=function(e){if(e.isTrusted)for(var t in ee)ee.hasOwnProperty(t)&&ee[t](e.state)};var ae=function(){function e(t){var n,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$form=t,this.id=this.$form.attr("id")||this._getUID(),this.mounted=!1,this.changeEvents=!0,this.theCheckBoxesTree=new Z,this._updateInitialState(),this._onFormChange=(n=this,r=this._onFormChange.bind(this),i=null,function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];i&&clearTimeout(i),i=setTimeout((function(){i=null,Reflect.apply(r,n,t)}),o)}),this._onPopState=this._onPopState.bind(this),window.Decidim.PopStateHandler?this.popStateSubmiter=!1:(this.popStateSubmiter=!0,window.Decidim.PopStateHandler=this.id)}var t,n,r;return t=e,n=[{key:"unmountComponent",value:function(){var e;this.mounted&&(this.mounted=!1,this.$form.off("change","input, select",this._onFormChange),e="filters-".concat(this.id),ee[e]=null)}},{key:"mountComponent",value:function(){var e,t,n=this;if(this.$form.length>0&&!this.mounted){this.mounted=!0;var r=0,o=$("main");0===o.length&&this.$form.data("remoteFill")&&(o=this.$form.data("remoteFill")),this.$form.on("change","input:not([data-disable-dynamic-change]), select:not([data-disable-dynamic-change])",this._onFormChange),this.currentFormRequest=null,this.$form.on("ajax:beforeSend",(function(e){n.currentFormRequest&&n.currentFormRequest.abort(),n.currentFormRequest=e.originalEvent.detail[0],(r+=1)>0&&o.length>0&&!o.hasClass("spinner-container")&&o.addClass("spinner-container")})),$(document).on("ajax:success",(function(){(r-=1)<=0&&o.length>0&&o.removeClass("spinner-container")})),$(document).on("ajax:error",(function(){(r-=1)<=0&&o.length>0&&o.removeClass("spinner-container"),n.$form.find(".spinner-container").addClass("hide")})),this.theCheckBoxesTree.setContainerForm(this.$form),e="filters-".concat(this.id),t=function(e){n._onPopState(e)},ee[e]=t}}},{key:"_updateInitialState",value:function(){var e=ne(this._currentStateAndPath(),2),t=e[0],n=e[1];n._path=t,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;window.history&&window.history.replaceState(t,null,e)}(null,n)}},{key:"_getLocation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=window.history?window.history.state:null,n="";return n=t&&t._path?t._path:window.location.pathname+window.location.search+window.location.hash,e?window.location.origin+n:n}},{key:"_parseLocationFilterValues",value:function(){var e=decodeURIComponent(this._getLocation()).match(/filter\[([^\]]*)\](?:\[\])?=([^&]*)/g);return e?e.reduce((function(e,t){var n=ne(t.match(/filter\[([^\]]*)\](\[\])?=([^&]*)/),4),r=n[1],o=n[2],i=n[3];return o?(e[r]||(e[r]=[]),e[r].push(i)):e[r]=i,e}),{}):null}},{key:"_parseLocationOrderValue",value:function(){var e=this._getLocation().match(/order=([^&]*)/),t=this.$form.find(".order-by .menu").find(".menu a:first").data("order");return e&&(t=e[1]),t}},{key:"_clearForm",value:function(){this.$form.find("input[type=checkbox]").each((function(e,t){t.checked=t.indeterminate=!1})),this.$form.find("input[type=radio]").attr("checked",!1),this.$form.find("fieldset input[type=radio]:first").each((function(){$(this)[0].checked=!0}))}},{key:"_onPopState",value:function(){var e=this;this.changeEvents=!1,this._clearForm();var t=this._parseLocationFilterValues(),n=this._parseLocationOrderValue();this.$form.find("input.order_filter").val(n),t&&Object.keys(t).forEach((function(n){var r=t[n];if(Array.isArray(r)){var o=e.$form.find('input[type=checkbox][name="filter['.concat(n,'][]"]'));e.theCheckBoxesTree.updateChecked(o,r)}else e.$form.find('*[name="filter['.concat(n,']"]')).each((function(e,t){switch(t.type){case"hidden":break;case"radio":case"checkbox":t.checked=r===t.value;break;default:t.value=r}}))})),this.popStateSubmiter&&Rails.fire(this.$form[0],"submit"),this.changeEvents=!0}},{key:"_onFormChange",value:function(){if(this.changeEvents){var e=ne(this._currentStateAndPath(),2),t=e[0],n=e[1];t!==this._getLocation(!1)&&(Rails.fire(this.$form[0],"submit"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;window.history&&window.history.pushState(t,null,e)}(t,n),this._saveFilters(t))}}},{key:"_currentStateAndPath",value:function(){var e=this.$form.attr("action"),t=this.$form.find("input:not(.ignore-filter)").serialize();return[e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t),{}]}},{key:"_getUID",value:function(){return"filter-form-".concat((new Date).getUTCMilliseconds(),"-").concat(Math.floor(1e7*Math.random()))}},{key:"_saveFilters",value:function(e){if(window.sessionStorage){var t,n,r,o=this.$form.attr("action");sessionStorage.setItem("filteredParams",JSON.stringify((t={},r=e,(n=ie(n=o))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)))}}}],n&&oe(t.prototype,n),r&&oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return(t=de(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,de(r.key),r)}}function de(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==se(t)?t:String(t)}var he=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={}}var t,n,r;return t=e,n=[{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"object"===se(e)?this.config=le(le({},this.config),e):this.config[e]=t}},{key:"get",value:function(e){return this.config[e]}}],n&&fe(t.prototype,n),r&&fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ve(r.key),r)}}function ve(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:String(t)}var ye="%count%",ge={charactersAtLeast:{one:"at least ".concat(ye," character"),other:"at least ".concat(ye," characters")},charactersLeft:{one:"".concat(ye," character left"),other:"".concat(ye," characters left")}},be=ge,we=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$input=t,this.$target=$(this.$input.data("remaining-characters")),this.minCharacters=parseInt(this.$input.attr("minlength"),10),this.maxCharacters=parseInt(this.$input.attr("maxlength"),10),this.describeByCounter="hidden"!==this.$input.attr("type")&&"undefined"===typeof this.$input.attr("aria-describedby"),this.maxCharacters>10?(this.maxCharacters>100?this.announceThreshold=Math.floor(.1*this.maxCharacters):this.announceThreshold=10,this.announceEveryThreshold=10):(this.announceThreshold=1,this.announceEveryThreshold=1);var r=this.$target.attr("id");if("undefined"===typeof r&&(r=this.$input.attr("id")&&this.$input.attr("id").length>0?"".concat(this.$input.attr("id"),"_characters"):"characters_".concat(Math.random().toString(36).substr(2,9))),this.$target.length>0)this.$target.attr("id",r);else{var o=document.createElement("span");o.id=r,o.className="input-character-counter__text",this.$target=$(o);var i=document.createElement("span");if(i.className="input-character-counter__container",i.appendChild(o),this.$input.parent().is(".editor"))this.$input.parent().after(this.$target);else{var a=document.createElement("span");a.className="input-character-counter",this.$input.next(".form-error").addBack().wrapAll(a),this.$input.after(i)}}if(this.$target.length>0&&(this.maxCharacters>0||this.minCharacters>0)){var c="".concat(r,"_sr");this.$srTarget=$("#".concat(c)),this.$srTarget.length||(this.$srTarget=$('<span role="status" id="'.concat(c,'" class="sr-only remaining-character-count-sr" />')),this.$target.before(this.$srTarget)),this.$target.attr("aria-hidden","true"),this.$userInput=this.$input,this.$input.parent().is(".editor")?setTimeout((function(){n.editor=n.$input.siblings(".editor-container")[0].querySelector(".ProseMirror").editor,n.$userInput=$(n.editor.view.dom),n.initialize()})):this.initialize()}}var t,n,r;return t=e,n=[{key:"initialize",value:function(){this.updateInputLength(),this.previousInputLength=this.inputLength,this.bindEvents(),this.setDescribedBy(!0)}},{key:"setDescribedBy",value:function(e){this.describeByCounter&&(e?this.$userInput.attr("aria-describedby",this.$srTarget.attr("id")):this.$userInput.removeAttr("aria-describedby"))}},{key:"bindEvents",value:function(){var e=this;this.editor?this.editor.on("update",(function(){e.handleInput()})):this.$userInput.on("input",(function(){e.handleInput()})),this.$userInput.on("keyup",(function(){e.updateStatus()})),this.$userInput.on("focus",(function(){e.updateScreenReaderStatus()})),this.$userInput.on("blur",(function(){e.updateScreenReaderStatus(),e.setDescribedBy(!0)})),null!==this.$userInput.get(0)&&this.$userInput.get(0).addEventListener("emoji.added",(function(){e.updateStatus()})),this.updateStatus(),this.updateScreenReaderStatus()}},{key:"getInputLength",value:function(){return this.inputLength}},{key:"updateInputLength",value:function(){this.previousInputLength=this.inputLength,this.editor?this.inputLength=this.editor.storage.characterCount.characters():this.inputLength=this.$input.val().length}},{key:"handleInput",value:function(){this.updateInputLength(),this.checkScreenReaderUpdate(),this.setDescribedBy(!1)}},{key:"getInputDirection",value:function(){return this.inputLength<this.previousInputLength?"del":"ins"}},{key:"getScreenReaderLength",value:function(){var e=this.getInputLength();if(this.maxCharacters<10)return e;if(this.maxCharacters-e<=this.announceEveryThreshold)return e;var t=e-e%this.announceThreshold;if("del"===this.getInputDirection()){if(t===e)return t;if(this.maxCharacters-t===this.announceThreshold)return this.announcedAt||e;if(t<e)return t+this.announceThreshold}else if(t<this.announcedAt)return this.announcedAt;return t}},{key:"getMessages",value:function(){var e=[],t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=this.getInputLength()),this.minCharacters>0){var n=be.charactersAtLeast.other;1===this.minCharacters&&(n=be.charactersAtLeast.one),e.push(n.replace(ye,this.minCharacters))}if(this.maxCharacters>0){var r=this.maxCharacters-t,o=be.charactersLeft.other;1===r&&(o=be.charactersLeft.one),this.$userInput[0].dispatchEvent(new CustomEvent("characterCounter",{detail:{remaining:r}})),e.push(o.replace(ye,r))}return e}},{key:"updateStatus",value:function(){this.$target.text(this.getMessages().join(", "))}},{key:"checkScreenReaderUpdate",value:function(){if(!(this.maxCharacters<1)){var e=this.getScreenReaderLength();e!==this.announcedAt&&(this.announcedAt=e,this.updateScreenReaderStatus(e))}}},{key:"updateScreenReaderStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$srTarget.text(this.getMessages(e).join(", "))}}],r=[{key:"configureMessages",value:function(e){be=$.extend(ge,e)}}],n&&me(t.prototype,n),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ee(r.key),r)}}function Ee(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:String(t)}var _e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controllerSelect=t.controllerSelect,this.subformWrapperClass=t.subformWrapperClass,this.globalWrapperSelector=t.globalWrapperSelector,this._bindEvent(),this._runAll()}var t,n,r;return t=e,(n=[{key:"_runAll",value:function(){var e=this;this.controllerSelect.each((function(t,n){e.run(n)}))}},{key:"run",value:function(e){var t=$(e),n=this.subformWrapperClass,r=t.val(),o=t.parents(this.globalWrapperSelector).find(".".concat(n)),i=o.filter("#".concat(n,"-").concat(r));o.find("input,textarea,select").prop("disabled",!0),o.hide(),i.find("input,textarea,select").prop("disabled",!1),i.show()}},{key:"_bindEvent",value:function(){var e=this;this.controllerSelect.on("change",(function(t){e.run(t.target)}))}}])&&ke(t.prototype,n),r&&ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function $e(e){var t=function(e,t){if("object"!=xe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xe(t)?t:String(t)}window.Decidim=window.Decidim||{},window.Decidim.managedUsersForm=function(){new _e({controllerSelect:$("select#impersonate_user_authorization_handler_name"),subformWrapperClass:"authorization-handler",globalWrapperSelector:"form"}).run()},window.Decidim.config=new he,window.Decidim.InputCharacterCounter=we,$((function(){var t;$(document).foundation(),(t=document.querySelector(".menu-trigger"))&&t.addEventListener("click",e),X("#steps tbody",{placeholder:$('<tr style="border-style: dashed; border-color: #000"><td colspan="4">&nbsp;</td></tr>')[0],onSortUpdate:function(e){var t=$("#steps tbody").data("sort-url"),n=e.map((function(e,t){return $(t).data("id")})).toArray();$.ajax({method:"POST",url:t,contentType:"application/json",data:JSON.stringify({items_ids:n})})}}),$("form.new_filter").each((function(){new ae($(this)).mountComponent()}))}));var Te=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controllerSelect=t.controllerSelect,this.subformWrapperClass=t.subformWrapperClass,this.globalWrapperSelector=t.globalWrapperSelector,this._bindEvent(),this._runAll()}var t,n,r;return t=e,(n=[{key:"_runAll",value:function(){var e=this;this.controllerSelect.each((function(t,n){e.run(n)}))}},{key:"run",value:function(e){var t=$(e),n=this.subformWrapperClass,r=t.val(),o=t.parents(this.globalWrapperSelector).find("#".concat(n,"-").concat(r));t.prop("checked")?(o.find("input,textarea,select").prop("disabled",!1),o.show()):(o.find("input,textarea,select").prop("disabled",!0),o.hide())}},{key:"_bindEvent",value:function(){var e=this;this.controllerSelect.on("change",(function(t){e.run(t.target)}))}}])&&Le(t.prototype,n),r&&Le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();$((function(){new Te({controllerSelect:$("input[name$=\\[authorization_handlers\\]\\[\\]]"),subformWrapperClass:"authorization-handler",globalWrapperSelector:"fieldset"}).run()}));n(82002),n(78858),n(62942),n(73792);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pe(r.key),r)}}function Pe(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:String(t)}var je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ruleCheckboxes=t.ruleCheckboxes,this._runAll()}var t,n,r;return t=e,(n=[{key:"_runAll",value:function(){var e=this;this.ruleCheckboxes.each((function(t,n){e._bindEvent(n),e.run(n)}))}},{key:"_bindEvent",value:function(e){var t=this;$(e).on("change",(function(e){t.run(e.target)}))}},{key:"run",value:function(e){var t=this;this.toggleTextInput(e),$(e).prop("checked")&&this.ruleCheckboxes.filter((function(t,n){return n!==e})).prop("checked",!1).each((function(e,n){t.toggleTextInput(n)}))}},{key:"toggleTextInput",value:function(e){var t=$(e).closest("div");if(!(t.length<1)){var n=t.attr("class").replace(/^vote_rule_/,"vote_").replace(/_enabled_container$/,""),r=$('[class^="'.concat(n,'"][class$="_container"]'));$(e).prop("checked")?r.slideDown():r.slideUp()}}}])&&Oe(t.prototype,n),r&&Oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,De(r.key),r)}}function De(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:String(t)}$((function(){new je({ruleCheckboxes:$("input[id^='component_settings_vote_rule_']")}).run(),$(".readonly_container input").click((function(e){return e.preventDefault(),!1}));var e=$("input#component_settings_amendments_enabled");if(e.length>0){var t=$(".amendments_wizard_help_text_container, .amendments_visibility_container, .amendment_creation_enabled_container, .amendment_reaction_enabled_container, .amendment_promotion_enabled_container");e.is(":not(:checked)")&&t.hide(),e.click((function(){t.toggle()}))}}));var Fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listSelector=t.listSelector,this.hideOnFirstSelector=t.hideOnFirstSelector,this.hideOnLastSelector=t.hideOnLastSelector,this.run()}var t,n,r;return t=e,(n=[{key:"run",value:function(){var e=$(this.listSelector),t=this.hideOnFirstSelector,n=this.hideOnLastSelector;if(1===e.length){var r=e.first();r.find(t).hide(),r.find(n).hide()}else e.each((function(r,o){o.id===e.first().attr("id")?($(o).find(t).hide(),$(o).find(n).show()):o.id===e.last().attr("id")?($(o).find(n).hide(),$(o).find(t).show()):($(o).find(n).show(),$(o).find(t).show())}))}}])&&Ae(t.prototype,n),r&&Ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,He(r.key),r)}}function He(e){var t=function(e,t){if("object"!=Me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Me(t)?t:String(t)}var Be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listSelector=t.listSelector,this.labelSelector=t.labelSelector,this.onPositionComputed=t.onPositionComputed,this.run()}var t,n,r;return t=e,(n=[{key:"run",value:function(){var e=this;$(this.listSelector).each((function(t,n){var r=$(n).find(e.labelSelector),o=r.html();o.match(/#(\d+)/)?r.html(o.replace(/#(\d+)/,"#".concat(t+1))):r.html("".concat(o," #").concat(t+1)),e.onPositionComputed&&e.onPositionComputed(n,t)}))}}])&&Ne(t.prototype,n),r&&Ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ze(r.key),r)}}function ze(e){var t=function(e,t){if("object"!=qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qe(t)?t:String(t)}var Ue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapperSelector=t.wrapperSelector,this.containerSelector=t.containerSelector,this.fieldSelector=t.fieldSelector,this.addFieldButtonSelector=t.addFieldButtonSelector,this.addSeparatorButtonSelector=t.addSeparatorButtonSelector,this.addTitleAndDescriptionButtonSelector=t.addTitleAndDescriptionButtonSelector,this.fieldTemplateSelector=t.fieldTemplateSelector,this.separatorTemplateSelector=t.separatorTemplateSelector,this.TitleAndDescriptionTemplateSelector=t.TitleAndDescriptionTemplateSelector,this.removeFieldButtonSelector=t.removeFieldButtonSelector,this.moveUpFieldButtonSelector=t.moveUpFieldButtonSelector,this.moveDownFieldButtonSelector=t.moveDownFieldButtonSelector,this.onAddField=t.onAddField,this.onRemoveField=t.onRemoveField,this.onMoveUpField=t.onMoveUpField,this.onMoveDownField=t.onMoveDownField,this.placeholderId=t.placeholderId,this.elementCounter=0,this._enableInterpolation(),this._activateFields(),this._bindEvents()}var t,n,r;return t=e,n=[{key:"_enableInterpolation",value:function(){$.fn.replaceAttribute=function(e,t,n){return $(this).find("[".concat(e,"*=").concat(t,"]")).addBack("[".concat(e,"*=").concat(t,"]")).each((function(r,o){$(o).attr(e,$(o).attr(e).replace(t,n))})),this},$.fn.template=function(e,t){var n=$(this).find("template, .decidim-template");n.length>0&&n.html((function(n,r){return $(r).template(e,t)[0].outerHTML}));var r=$(this).find("[data-template]");return r.length>0&&r.each((function(n,r){var o=$(r),i=$(o.data("template")),a=$(i[0].outerHTML),c="".concat(i.attr("id"),"-").concat(t),l="#".concat(c);a.attr("id",c),o.attr("data-template",l).data("template",l),i.after(a),a.html((function(n,r){return $(r).template(e,t)[0].outerHTML}))})),$(this).replaceAttribute("id",e,t),$(this).replaceAttribute("name",e,t),$(this).replaceAttribute("data-tabs-content",e,t),$(this).replaceAttribute("for",e,t),$(this).replaceAttribute("tabs_id",e,t),$(this).replaceAttribute("href",e,t),$(this).replaceAttribute("value",e,t),this}}},{key:"_bindEvents",value:function(){var e=this;$(this.wrapperSelector).on("click",this.addFieldButtonSelector,(function(t){return e._bindSafeEvent(t,(function(){return e._addField(e.fieldTemplateSelector)}))})),this.addSeparatorButtonSelector&&$(this.wrapperSelector).on("click",this.addSeparatorButtonSelector,(function(t){return e._bindSafeEvent(t,(function(){return e._addField(e.separatorTemplateSelector)}))})),this.addTitleAndDescriptionButtonSelector&&$(this.wrapperSelector).on("click",this.addTitleAndDescriptionButtonSelector,(function(t){return e._bindSafeEvent(t,(function(){return e._addField(e.TitleAndDescriptionTemplateSelector)}))})),$(this.wrapperSelector).on("click",this.removeFieldButtonSelector,(function(t){return e._bindSafeEvent(t,(function(t){return e._removeField(t)}))})),this.moveUpFieldButtonSelector&&$(this.wrapperSelector).on("click",this.moveUpFieldButtonSelector,(function(t){return e._bindSafeEvent(t,(function(t){return e._moveUpField(t)}))})),this.moveDownFieldButtonSelector&&$(this.wrapperSelector).on("click",this.moveDownFieldButtonSelector,(function(t){return e._bindSafeEvent(t,(function(t){return e._moveDownField(t)}))}))}},{key:"_bindSafeEvent",value:function(e,t){e.preventDefault(),e.stopPropagation();try{return t(e.target)}catch(n){return console.error(n),n}}},{key:"_addField",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".decidim-template",t=$(this.wrapperSelector),n=t.find(this.containerSelector),r=t.data("template"),o=null;r&&(o=$(r)),(null===o||o.length<1)&&(o=t.children("template, ".concat(e)));var i=$(o.html()).template(this.placeholderId,this._getUID());i.find("ul.tabs").attr("data-tabs",!0);var a=n.find(this.fieldSelector).last();a.length>0?a.after(i):i.appendTo(n),i.foundation(),this.onAddField&&this.onAddField(i)}},{key:"_removeField",value:function(e){var t=$(e).parents(this.fieldSelector);if(t.find("input").filter((function(e,t){return t.name.match(/id/)})).length>0){var n=t.find("input").filter((function(e,t){return t.name.match(/delete/)}));n.length>0&&$(n[0]).val(!0),t.addClass("hidden"),t.hide()}else t.remove();this.onRemoveField&&this.onRemoveField(t)}},{key:"_moveUpField",value:function(e){var t=$(e).parents(this.fieldSelector);t.prev().before(t),this.onMoveUpField&&this.onMoveUpField(t)}},{key:"_moveDownField",value:function(e){var t=$(e).parents(this.fieldSelector);t.next().after(t),this.onMoveDownField&&this.onMoveDownField(t)}},{key:"_activateFields",value:function(){var e=this,t=$(this.wrapperSelector).find(this.containerSelector);t.append(t.find("script")),$(this.fieldSelector).each((function(t,n){$(n).template(e.placeholderId,e._getUID()),$(n).find("ul.tabs").attr("data-tabs",!0)}))}},{key:"_getUID",value:function(){return this.elementCounter+=1,(new Date).getTime()+this.elementCounter}}],n&&Re(t.prototype,n),r&&Re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function We(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$((function(){[{placeHolderId:"external-domain-id",wrapperSelector:".external-domains",fieldSelector:".external-domain",addFieldSelector:".add-external-domain"}].forEach((function(e){var t,n=e.fieldSelector.replace(".",""),r=new Fe({listSelector:"".concat(e.fieldSelector,":not(.hidden)"),hideOnFirstSelector:".move-up-question",hideOnLastSelector:".move-down-question"}),o=new Be({listSelector:"".concat(e.fieldSelector,":not(.hidden)"),labelSelector:".card-title span:first",onPositionComputed:function(e,t){$(e).find("input[name$=\\[position\\]]").val(t)}}),i=function(){X(".external-domains-list:not(.published)",{handle:".external-domain-divider",placeholder:'<div style="border-style: dashed; border-color: #000"></div>',forcePlaceholderSize:!0,onSortUpdate:function(){o.run(),r.run()}})};t={placeholderId:e.placeHolderId,wrapperSelector:e.wrapperSelector,containerSelector:"".concat(e.wrapperSelector,"-list"),fieldSelector:e.fieldSelector,addFieldButtonSelector:e.addFieldSelector,removeFieldButtonSelector:".remove-".concat(n),moveUpFieldButtonSelector:".move-up-question",moveDownFieldButtonSelector:".move-down-question",onAddField:function(){i(),o.run(),r.run()},onRemoveField:function(e){o.run(),r.run(),$("input",e).removeAttr("required")},onMoveUpField:function(){o.run(),r.run()},onMoveDownField:function(){o.run(),r.run()}},new Ue(t),i(),$(e.fieldSelector).each((function(e,t){!function(e){"true"===e.find("input[name$=\\[deleted\\]]").val()&&(e.addClass("hidden"),e.hide(),$("input",e).removeAttr("required"))}($(t))})),o.run(),r.run()}))})),$((function(){var e=$(".draggable-list"),t=[];e.each((function(e,n){t=[].concat(We(t),[".".concat(n.className.split(" ").filter((function(e){return/js-list.*/.test(e)}))[0])])})),document.addEventListener("drag",(function(t){e.not(t.target.parentElement).addClass("dragging")})),document.addEventListener("dragend",(function(){e.removeClass("dragging")})),X(t.join(", "),{handle:"li",forcePlaceholderSize:!0,acceptFrom:".js-connect"})})),$((function(){var e=".js-sortable";$(e).each((function(t,n){X(n.id?"#".concat(n.id):e,{handle:"li",forcePlaceholderSize:!0,placeholderClass:"sort-placeholder"})}))}));n(74055),n(48404),n(51544);var Ge=n(40873),Ve=n.n(Ge);function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Je(){Je=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),c=new O(r||[]);return o(a,"_invoke",{value:L(e,n,c)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function y(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(P([])));k&&k!==n&&r.call(k,a)&&(w=k);var E=b.prototype=y.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,c){var l=f(e[o],e,i);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Xe(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=d;return function(i,a){if(o===p)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var l=$(c,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?m:h,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function $(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,$(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Xe(t)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(E),u(E,l,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ke(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(u){return void n(u)}c.done?t(l):Promise.resolve(l).then(r,o)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ze(r.key),r)}}function Ze(e){var t=function(e,t){if("object"!=Xe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xe(t)?t:String(t)}var et=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.stickySelectedSpan=null,this.clearStickySelectionSpan=null,this.stickyHiddenInput=null,this.promptDiv=null;var o,i,a=r.threshold||2;this.options=Object.assign({name:null,placeholder:"",mode:null,searchPrompt:!1,searchPromptText:"Type at least ".concat(a," characters to search"),selected:null,threshold:a,maxResults:10,dataMatchKeys:null,dataSource:function(){return[]},dataFilter:null,delay:200,modifyList:null,modifyResult:null},r),this.autocomplete=new(Ve())({selector:function(){return n.element},diacritics:!0,placeHolder:r.placeholder,debounce:200,threshold:this.options.threshold,data:{keys:this.options.dataMatchKeys,src:(o=Je().mark((function e(t){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return new Promise((function(e){n.options.dataSource(t,e)}))},e.prev=1,e.next=4,r();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){Ke(i,n,r,a,c,"next",e)}function c(e){Ke(i,n,r,a,c,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)}),filter:function(e){var t=e.filter((function(e,t,n){return n.findIndex((function(t){return t.value===e.value}))===t}));return n.options.dataFilter?n.options.dataFilter(t):t}},resultsList:{maxResults:this.options.maxResults,element:function(e,t){n.options.modifyList&&n.options.modifyList(e,t)}},resultItem:{element:function(e,t){n.options.modifyResult&&n.options.modifyResult(e,t.value)}},events:{input:{blur:function(){n.promptDiv.style.display="none"}}}}),this.acWrapper=this.element.closest(".autoComplete_wrapper"),this.element.ac=this.autocomplete;var c=function(e){e.stopPropagation()};switch(this.element.addEventListener("close",c),this.element.addEventListener("open",c),this.createPromptDiv(),this.options.mode){case"sticky":this.createStickySelect(this.options.name);break;case"multi":this.createMultiSelect(this.options.name)}}var t,n,r;return t=e,(n=[{key:"setInput",value:function(e){this.autocomplete.input.value=e}},{key:"handleEvent",value:function(e){switch(this.options.mode){case"single":this.setInput(e.detail.selection.value[e.detail.selection.key]);break;case"sticky":this.handleStickyEvents(e);break;case"multi":this.handleMultiEvents(e)}}},{key:"handleMultiEvents",value:function(e){"selection"===e.type&&this.addMultiSelectItem(e.detail.selection)}},{key:"handleStickyEvents",value:function(e){switch(e.type){case"selection":this.addStickySelectItem(e.detail.selection);break;case"click":e.target===this.clearStickySelectionSpan&&this.removeStickySelection();break;case"keyup":""!==this.stickyHiddenInput.value&&e.target===this.element&&(["Escape","Backspace","Delete"].includes(e.key)||/^[a-z0-9]$/i.test(e.key))?this.removeStickySelection():this.options.searchPrompt&&(""===this.stickyHiddenInput.value&&this.element.value.length<this.options.threshold?this.promptDiv.style.display="block":this.promptDiv.style.display="none")}}},{key:"createHiddenInput",value:function(e){var t=document.createElement("input");return t.name=this.options.name,t.type="hidden",e&&(t.value=e),this.acWrapper.prepend(t),t}},{key:"removeStickySelection",value:function(){this.stickyHiddenInput.value="",this.element.placeholder=this.options.placeholder,this.clearStickySelectionSpan.style.display="none",this.stickySelectedSpan.style.display="none"}},{key:"addStickySelectItem",value:function(e){this.stickyHiddenInput.value=e.value.value,this.element.placeholder="",this.stickySelectedSpan.innerHTML=e.value[e.key],this.stickySelectedSpan.style.display="block",this.clearStickySelectionSpan.style.display="block",this.setInput("")}},{key:"addMultiSelectItem",value:function(e){var t=this;this.setInput("");var n=document.createElement("span");n.classList.add("label","primary","autocomplete__selected-item","multi"),n.innerHTML=e.value[e.key];var r=document.createElement("span");r.classList.add("clear-multi-selection"),r.innerHTML="&times;",r.setAttribute("data-remove",e.value.value),r.addEventListener("click",(function(n){var r=t.acWrapper.querySelector("input[type='hidden'][value='".concat(e.value.value,"']"));r&&(r.remove(),n.target.parentElement.remove())})),n.appendChild(r);var o=this.acWrapper.querySelector(".multiselect"),i=o.querySelector("span.input-container");o.insertBefore(n,i),this.createHiddenInput(e.value.value)}},{key:"createStickySelect",value:function(){var e=this;this.stickySelectedSpan=document.createElement("span"),this.stickySelectedSpan.classList.add("autocomplete__selected-item","sticky"),this.stickySelectedSpan.style.display="none",this.stickySelectedSpan.addEventListener("click",(function(){return e.element.focus()})),this.stickyHiddenInput=this.createHiddenInput(),this.clearStickySelectionSpan=document.createElement("span"),this.clearStickySelectionSpan.className="clear-sticky-selection",this.clearStickySelectionSpan.innerHTML="&times;",this.clearStickySelectionSpan.style.display="none",this.clearStickySelectionSpan.addEventListener("click",this),this.element.addEventListener("selection",this),this.element.addEventListener("keyup",this),this.acWrapper.insertBefore(this.clearStickySelectionSpan,this.element),this.acWrapper.insertBefore(this.stickySelectedSpan,this.element),this.options.selected&&this.addStickySelectItem(this.options.selected)}},{key:"createMultiSelect",value:function(){var e=this,t=document.createElement("div");t.classList.add("multiselect");var n=document.createElement("span");n.classList.add("input-container"),t.appendChild(n),this.acWrapper.prepend(t),n.appendChild(this.element),this.element.addEventListener("selection",this),t.addEventListener("click",(function(){e.element.focus()})),this.options.selected&&this.options.selected.forEach((function(t){e.addMultiSelectItem(t)}))}},{key:"createPromptDiv",value:function(){this.promptDiv=document.createElement("div"),this.promptDiv.classList.add("search-prompt"),this.promptDiv.style.display="none",this.promptDiv.innerHTML=this.options.searchPromptText,this.acWrapper.appendChild(this.promptDiv)}}])&&Qe(t.prototype,n),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){var r;return r=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tt(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$((function(){var e=$("[data-autocomplete]");e.length<1||e.each((function(e,t){!function(e){var t=JSON.parse(e.dataset.autocomplete),n=new URL(t.searchURL),r=document.createElement("input");r.type="text",r.className="autocomplete-input",e.appendChild(r);var o=t.mode||"sticky",i=null;if(t.selected)switch(o){case"multi":i=t.selected.map((function(e){return{key:"label",value:{value:e.value,label:e.label}}}));break;case"sticky":i={key:"label",value:t.options[t.options.length-1]};break;default:i=t.selected}new et(r,{name:t.name,placeholder:t.placeholder,selected:i,mode:o,searchPrompt:!0,searchPromptText:t.searchPromptText,threshold:3,dataMatchKeys:["label"],dataSource:function(e,t){var r=new URLSearchParams(rt(rt({},Object.fromEntries(n.searchParams)),{},{term:e}));fetch("".concat(n.origin).concat(n.pathname,"?").concat(r.toString()),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(e)}))}})}(t)}))}));n(57459);function it(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ct=function(e){return new Promise((function(t){fetch("/api",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{ ".concat(e," }")})}).then((function(e){return e.json()})).then((function(e){t(e.data)}))}))},lt=function(){var e=document.documentElement.lang,t='\n    id\n    title { translation(locale: "'.concat(e,'") }\n    manifest {\n      name\n      humanName {\n        plural { translation(locale: "').concat(e,'") }\n      }\n    }\n  ');return new Promise((function(e){var n;(n=function(e){return"LIST"===e.type.kind&&!!(e.type.ofType&&e.type.ofType.ofType&&e.type.ofType.ofType.interfaces)&&!!e.type.ofType.ofType.interfaces.some((function(e){return"ParticipatorySpaceInterface"===e.name}))},new Promise((function(e){ct("\n    __schema {\n      queryType {\n        fields {\n          name\n          type {\n            kind\n            ofType {\n              ofType {\n                interfaces {\n                  name\n                }\n                kind\n              }\n            }\n          }\n        }\n      }\n    }\n  ").then((function(t){var r,o=[],i=it(t.__schema.queryType.fields);try{for(i.s();!(r=i.n()).done;){var a=r.value;n(a)&&o.push(a.name)}}catch(c){i.e(c)}finally{i.f()}e(o)}))}))).then((function(n){var r=n.map((function(e){return"".concat(e," { ").concat(t," }")}));ct(r.join("\n\n")).then((function(t){var r,o=[],i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t[a].length>0&&o.push({type:t[a][0].manifest.name,name:t[a][0].manifest.humanName.plural.translation,list:t[a].map((function(e){return{id:parseInt(e.id,10),title:e.title.translation}}))})}}catch(c){i.e(c)}finally{i.f()}e(o)}))}))}))},ut=function(e,t,n){var r=null,o=function(e){if(!e)return null;var n=e.match(/([a-z_]+)\(([0-9]+)\)/);if(!n)return null;var r,o=n[1],i=parseInt(n[2],10),a=it(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(c.type===o){var l=c.list.find((function(e){return e.id===i}));if(l)return{value:"".concat(c.type,"(").concat(l.id,")"),label:"".concat(c.name," - ").concat(l.title)}}}}catch(u){a.e(u)}finally{a.f()}return null}(e.dataset.selected);o&&(r={key:"label",value:o});var i=new et(e,{name:e.getAttribute("name"),placeholder:e.getAttribute("placeholder"),mode:"sticky",threshold:3,dataMatchKeys:["label"],selected:r,dataSource:function(e,n){var r,o=new RegExp(e,"i"),i=[],a=it(t);try{for(a.s();!(r=a.n()).done;){var c,l=r.value,u=it(l.list);try{for(u.s();!(c=u.n()).done;){var s=c.value;o.test(s.title)&&i.push({value:"".concat(l.type,"(").concat(s.id,")"),label:"".concat(l.name," - ").concat(s.title)})}}catch(f){u.e(f)}finally{u.f()}}}catch(f){a.e(f)}finally{a.f()}n(i)}});return e.name="participatory_space_search_".concat(n),i};document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll("input.participatory-space-search");e.length<1||lt().then((function(t){var n,r=0,o=it(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;ut(i,t,r),r+=1}}catch(a){o.e(a)}finally{o.f()}}))})),window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("select.language-change").forEach((function(e){e.addEventListener("change",(function(){var t=e.value,n=e.parentElement.parentElement.nextElementSibling;n.querySelector(".is-active").classList.remove("is-active"),n.querySelector(t).classList.add("is-active")}))}))}))}()}();
//# sourceMappingURL=decidim_admin-036d1cac9415c861fee8.js.map