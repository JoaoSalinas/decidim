/*! For license information please see decidim_proposals-4d3982099bb3876bb3b2.js.LICENSE.txt */
!function(){var t={3262:function(t,e,n){var i={"./decidim/proposals/participatory_texts/participatory_text.md":4737,"./decidim/proposals/participatory_texts/participatory_text.odt":3157};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=3262},2518:function(t,e,n){var i={"./decidim/gamification/badges/decidim_gamification_badges_accepted_proposals.svg":2355,"./decidim/gamification/badges/decidim_gamification_badges_proposal_votes.svg":8568,"./decidim/gamification/badges/decidim_gamification_badges_proposals.svg":7461,"./decidim/proposals/decidim_proposals.svg":9453};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=2518},8107:function(){$((function(){$("#vote_button").mouseover((function(){$(this).text($(this).data("replace"))})),$("#vote_button").mouseout((function(){$(this).text($(this).data("original"))}))}))},5085:function(t){"use strict";function e(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(){n=function(){return e};var t,e={},i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function d(t,e,n,i){var r=e&&e.prototype instanceof b?e:b,a=Object.create(r.prototype),s=new j(i||[]);return o(a,"_invoke",{value:C(t,n,s)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var f="suspendedStart",h="suspendedYield",g="executing",m="completed",y={};function b(){}function w(){}function O(){}var k={};c(k,s,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(P([])));x&&x!==i&&r.call(x,s)&&(k=x);var I=O.prototype=b.prototype=Object.create(k);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(i,o,a,s){var l=p(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==v(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function C(e,n,i){var r=f;return function(o,a){if(r===g)throw new Error("Generator is already running");if(r===m){if("throw"===o)throw a;return{value:t,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var l=F(s,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var u=p(e,n,i);if("normal"===u.type){if(r=i.done?m:h,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=m,i.method="throw",i.arg=u.arg)}}}function F(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,F(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var o=p(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function P(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(v(e)+" is not iterable")}return w.prototype=O,o(I,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:w,configurable:!0}),w.displayName=c(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,c(t,u,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},S(A.prototype),c(A.prototype,l,(function(){return this})),e.AsyncIterator=A,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new A(d(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(I),c(I,u,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:P(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}var i=n().mark(z);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e,n){return e=d(e),function(t,e){if(e&&("object"===v(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(t,c()?Reflect.construct(e,n||[],d(t).constructor):e.apply(t,n))}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function p(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=v(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:String(e)}function b(t,e){t.split(/\s+/).forEach((function(t){e(t)}))}var w=function(){function t(){h(this,t),this._events=void 0,this._events={}}return m(t,[{key:"on",value:function(t,e){var n=this;b(t,(function(t){var i=n._events[t]||[];i.push(e),n._events[t]=i}))}},{key:"off",value:function(t,e){var n=this,i=arguments.length;0!==i?b(t,(function(t){if(1!==i){var r=n._events[t];void 0!==r&&(r.splice(r.indexOf(e),1),n._events[t]=r)}else delete n._events[t]})):this._events={}}},{key:"trigger",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=this;b(t,(function(t){var e=r._events[t];void 0!==e&&e.forEach((function(t){t.apply(r,n)}))}))}}]),t}();var O,k,_=function(t){return(t=t.filter(Boolean)).length<2?t[0]||"":1==C(t)?"["+t.join("")+"]":"(?:"+t.join("|")+")"},x=function(t){if(!S(t))return t.join("");var e="",n=0,i=function(){n>1&&(e+="{"+n+"}")};return t.forEach((function(r,o){r!==t[o-1]?(i(),e+=r,n=1):n++})),i(),e},I=function(t){var e=E(t);return _(e)},S=function(t){return new Set(t).size!==t.length},A=function(t){return(t+"").replace(/([\$\(-\+\.\?\[-\^\{-\}])/g,"\\$1")},C=function(t){return t.reduce((function(t,e){return Math.max(t,F(e))}),0)},F=function(t){return E(t).length},E=function(t){return Array.from(t)},L=function t(e){if(1===e.length)return[[e]];var n=[];return t(e.substring(1)).forEach((function(t){var i=t.slice(0);i[0]=e.charAt(0)+i[0],n.push(i),(i=t.slice(0)).unshift(e.charAt(0)),n.push(i)})),n},j=[[0,65535]],P=3,$={},T={"/":"\u2044\u2215",0:"\u07c0",a:"\u2c65\u0250\u0251",aa:"\ua733",ae:"\xe6\u01fd\u01e3",ao:"\ua735",au:"\ua737",av:"\ua739\ua73b",ay:"\ua73d",b:"\u0180\u0253\u0183",c:"\ua73f\u0188\u023c\u2184",d:"\u0111\u0257\u0256\u1d05\u018c\uabb7\u0501\u0266",e:"\u025b\u01dd\u1d07\u0247",f:"\ua77c\u0192",g:"\u01e5\u0260\ua7a1\u1d79\ua77f\u0262",h:"\u0127\u2c68\u2c76\u0265",i:"\u0268\u0131",j:"\u0249\u0237",k:"\u0199\u2c6a\ua741\ua743\ua745\ua7a3",l:"\u0142\u019a\u026b\u2c61\ua749\ua747\ua781\u026d",m:"\u0271\u026f\u03fb",n:"\ua7a5\u019e\u0272\ua791\u1d0e\u043b\u0509",o:"\xf8\u01ff\u0254\u0275\ua74b\ua74d\u1d11",oe:"\u0153",oi:"\u01a3",oo:"\ua74f",ou:"\u0223",p:"\u01a5\u1d7d\ua751\ua753\ua755\u03c1",q:"\ua757\ua759\u024b",r:"\u024d\u027d\ua75b\ua7a7\ua783",s:"\xdf\u023f\ua7a9\ua785\u0282",t:"\u0167\u01ad\u0288\u2c66\ua787",th:"\xfe",tz:"\ua729",u:"\u0289",v:"\u028b\ua75f\u028c",vy:"\ua761",w:"\u2c73",y:"\u01b4\u024f\u1eff",z:"\u01b6\u0225\u0240\u2c6c\ua763",hv:"\u0195"};for(var N in T)for(var D=T[N]||"",V=0;V<D.length;V++){var q=D.substring(V,V+1);$[q]=N}var M=new RegExp(Object.keys($).join("|")+"|[\u0300-\u036f\xb7\u02be\u02bc]","gu"),H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NFKD";return t.normalize(e)},R=function(t){return E(t).reduce((function(t,e){return t+B(e)}),"")},B=function(t){return t=H(t).toLowerCase().replace(M,(function(t){return $[t]||""})),H(t,"NFC")};function z(t){var e,a,s,l,u,c,d,p;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=o(t),n.prev=1,e.s();case 3:if((a=e.n()).done){n.next=22;break}s=r(a.value,2),l=s[0],u=s[1],c=l;case 6:if(!(c<=u)){n.next=20;break}if(d=String.fromCharCode(c),(p=R(d))!=d.toLowerCase()){n.next=11;break}return n.abrupt("continue",17);case 11:if(!(p.length>P)){n.next=13;break}return n.abrupt("continue",17);case 13:if(0!=p.length){n.next=15;break}return n.abrupt("continue",17);case 15:return n.next=17,{folded:p,composed:d,code_point:c};case 17:c++,n.next=6;break;case 20:n.next=3;break;case 22:n.next=27;break;case 24:n.prev=24,n.t0=n.catch(1),e.e(n.t0);case 27:return n.prev=27,e.f(),n.finish(27);case 30:case"end":return n.stop()}}),i,null,[[1,24,27,30]])}var G=function(t){var e=function(t){var e,n={},i=function(t,e){var i=n[t]||new Set,r=new RegExp("^"+I(i)+"$","iu");e.match(r)||(i.add(A(e)),n[t]=i)},r=o(z(t));try{for(r.s();!(e=r.n()).done;){var a=e.value;i(a.folded,a.folded),i(a.folded,a.composed)}}catch(s){r.e(s)}finally{r.f()}return n}(t),n={},i=[];for(var r in e){var a=e[r];a&&(n[r]=I(a)),r.length>1&&i.push(A(r))}i.sort((function(t,e){return e.length-t.length}));var s=_(i);return k=new RegExp("^"+s,"u"),n},K=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=Math.max(e,t.length-1),_(L(t).map((function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0;return t=t.map((function(t){return O[t]&&(n+=t.length),O[t]||t})),n>=e?x(t):""}(t,e)})))},Q=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.length>1?1:0;return _(t.map((function(t){for(var i=[],r=e?t.length():t.length()-1,o=0;o<r;o++)i.push(K(t.substrs[o]||"",n));return x(i)})))},U=function(t,e){var n,i=o(e);try{var r,a=function(){var e=n.value;if(e.start!=t.start||e.end!=t.end)return 0;if(e.substrs.join("")!==t.substrs.join(""))return 0;var i=t.parts;return e.parts.filter((function(t){var e,n=o(i);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.start===t.start&&r.substr===t.substr)return!1;if(1!=t.length&&1!=r.length){if(t.start<r.start&&t.end>r.start)return!0;if(r.start<t.start&&r.end>t.start)return!0}}}catch(a){n.e(a)}finally{n.f()}return!1})).length>0?0:{v:!0}};for(i.s();!(n=i.n()).done;)if(0!==(r=a())&&r)return r.v}catch(s){i.e(s)}finally{i.f()}return!1},J=function(){function t(){h(this,t),this.parts=[],this.substrs=[],this.start=0,this.end=0}return m(t,[{key:"add",value:function(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}},{key:"last",value:function(){return this.parts[this.parts.length-1]}},{key:"length",value:function(){return this.parts.length}},{key:"clone",value:function(e,n){var i,r=new t,a=JSON.parse(JSON.stringify(this.parts)),s=a.pop(),l=o(a);try{for(l.s();!(i=l.n()).done;){var u=i.value;r.add(u)}}catch(p){l.e(p)}finally{l.f()}var c=n.substr.substring(0,e-s.start),d=c.length;return r.add({start:s.start,end:s.start+d,length:d,substr:c}),r}}]),t}(),Y=function(t){var e;void 0===O&&(O=G(e||j)),t=R(t);for(var n="",i=[new J],r=0;r<t.length;r++){var a,s=t.substring(r).match(k),l=t.substring(r,r+1),u=s?s[0]:null,c=[],d=new Set,p=o(i);try{for(p.s();!(a=p.n()).done;){var f=a.value,v=f.last();if(!v||1==v.length||v.end<=r)if(u){var h=u.length;f.add({start:r,end:r+h,length:h,substr:u}),d.add("1")}else f.add({start:r,end:r+1,length:1,substr:l}),d.add("2");else if(u){var g=f.clone(r,v),m=u.length;g.add({start:r,end:r+m,length:m,substr:u}),c.push(g)}else d.add("3")}}catch(I){p.e(I)}finally{p.f()}if(c.length>0){var y,b=o(c=c.sort((function(t,e){return t.length()-e.length()})));try{for(b.s();!(y=b.n()).done;){var w=y.value;U(w,i)||i.push(w)}}catch(I){b.e(I)}finally{b.f()}}else if(r>0&&1==d.size&&!d.has("3")){n+=Q(i,!1);var _=new J,x=i[0];x&&_.add(x.last()),i=[_]}}return n+=Q(i,!0)},W=function(t,e){if(t)return t[e]},X=function(t,e){if(t){for(var n,i=e.split(".");(n=i.shift())&&(t=t[n]););return t}},Z=function(t,e,n){var i,r;return t?(t+="",null==e.regex||-1===(r=t.search(e.regex))?0:(i=e.string.length/t.length,0===r&&(i+=.5),i*n)):0},tt=function(t,e){var n=t[e];if("function"==typeof n)return n;n&&!Array.isArray(n)&&(t[e]=[n])},et=function(t,e){if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},nt=function(t,e){return"number"===typeof t&&"number"===typeof e?t>e?1:t<e?-1:0:(t=R(t+"").toLowerCase())>(e=R(e+"").toLowerCase())?1:e>t?-1:0},it=function(){function t(e,n){h(this,t),this.items=void 0,this.settings=void 0,this.items=e,this.settings=n||{diacritics:!0}}return m(t,[{key:"tokenize",value:function(t,e,n){var i=this;if(!t||!t.length)return[];var r,o=[],a=t.split(/\s+/);return n&&(r=new RegExp("^("+Object.keys(n).map(A).join("|")+"):(.*)$")),a.forEach((function(t){var n,a=null,s=null;r&&(n=t.match(r))&&(a=n[1],t=n[2]),t.length>0&&(s=i.settings.diacritics?Y(t)||null:A(t))&&e&&(s="\\b"+s),o.push({string:t,regex:s?new RegExp(s,"iu"):null,field:a})})),o}},{key:"getScoreFunction",value:function(t,e){var n=this.prepareSearch(t,e);return this._getScoreFunction(n)}},{key:"_getScoreFunction",value:function(t){var e=t.tokens,n=e.length;if(!n)return function(){return 0};var i=t.options.fields,r=t.weights,a=i.length,s=t.getAttrFn;if(!a)return function(){return 1};var l=1===a?function(t,e){var n=i[0].field;return Z(s(e,n),t,r[n]||1)}:function(t,e){var n=0;if(t.field){var i=s(e,t.field);!t.regex&&i?n+=1/a:n+=Z(i,t,1)}else et(r,(function(i,r){n+=Z(s(e,r),t,i)}));return n/a};return 1===n?function(t){return l(e[0],t)}:"and"===t.options.conjunction?function(t){var i,r,a=0,s=o(e);try{for(s.s();!(r=s.n()).done;){var u=r.value;if((i=l(u,t))<=0)return 0;a+=i}}catch(c){s.e(c)}finally{s.f()}return a/n}:function(t){var i=0;return et(e,(function(e){i+=l(e,t)})),i/n}}},{key:"getSortFunction",value:function(t,e){var n=this.prepareSearch(t,e);return this._getSortFunction(n)}},{key:"_getSortFunction",value:function(t){var e,n=[],i=this,r=t.options,a=!t.query&&r.sort_empty?r.sort_empty:r.sort;if("function"==typeof a)return a.bind(this);var s=function(e,n){return"$score"===e?n.score:t.getAttrFn(i.items[n.id],e)};if(a){var l,u=o(a);try{for(u.s();!(l=u.n()).done;){var c=l.value;(t.query||"$score"!==c.field)&&n.push(c)}}catch(f){u.e(f)}finally{u.f()}}if(t.query){e=!0;var d,p=o(n);try{for(p.s();!(d=p.n()).done;){if("$score"===d.value.field){e=!1;break}}}catch(f){p.e(f)}finally{p.f()}e&&n.unshift({field:"$score",direction:"desc"})}else n=n.filter((function(t){return"$score"!==t.field}));return n.length?function(t,e){var i,r,a,l=o(n);try{for(l.s();!(a=l.n()).done;){var u=a.value;if(r=u.field,i=("desc"===u.direction?-1:1)*nt(s(r,t),s(r,e)))return i}}catch(f){l.e(f)}finally{l.f()}return 0}:null}},{key:"prepareSearch",value:function(t,e){var n={},i=Object.assign({},e);if(tt(i,"sort"),tt(i,"sort_empty"),i.fields){tt(i,"fields");var r=[];i.fields.forEach((function(t){"string"==typeof t&&(t={field:t,weight:1}),r.push(t),n[t.field]="weight"in t?t.weight:1})),i.fields=r}return{options:i,query:t.toLowerCase().trim(),tokens:this.tokenize(t,i.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:i.nesting?X:W}}},{key:"search",value:function(t,e){var n,i,r=this;i=this.prepareSearch(t,e),e=i.options,t=i.query;var o=e.score||r._getScoreFunction(i);t.length?et(r.items,(function(t,r){n=o(t),(!1===e.filter||n>0)&&i.items.push({score:n,id:r})})):et(r.items,(function(t,e){i.items.push({score:1,id:e})}));var a=r._getSortFunction(i);return a&&i.items.sort(a),i.total=i.items.length,"number"===typeof e.limit&&(i.items=i.items.slice(0,e.limit)),i}}]),t}(),rt=function(t,e){if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},ot=function(t){if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(at(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},at=function(t){return"string"===typeof t&&t.indexOf("<")>-1},st=function(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!1),t.dispatchEvent(n)},lt=function(t,e){Object.assign(t.style,e)},ut=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=dt(n);(t=pt(t)).map((function(t){r.map((function(e){t.classList.add(e)}))}))},ct=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=dt(n);(t=pt(t)).map((function(t){r.map((function(e){t.classList.remove(e)}))}))},dt=function(t){var e=[];return rt(t,(function(t){"string"===typeof t&&(t=t.trim().split(/[\11\12\14\15\40]/)),Array.isArray(t)&&(e=e.concat(t))})),e.filter(Boolean)},pt=function(t){return Array.isArray(t)||(t=[t]),t},ft=function(t,e,n){if(!n||n.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},vt=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)>0?t[t.length-1]:t[0]},ht=function(t,e){if(!t)return-1;e=e||t.nodeName;for(var n=0;t=t.previousElementSibling;)t.matches(e)&&n++;return n},gt=function(t,e){rt(e,(function(e,n){null==e?t.removeAttribute(n):t.setAttribute(n,""+e)}))},mt=function(t,e){t.parentNode&&t.parentNode.replaceChild(e,t)},yt=function(t,e){if(null!==e){if("string"===typeof e){if(!e.length)return;e=new RegExp(e,"i")}var n=function(t){1!==t.nodeType||!t.childNodes||/(script|style)/i.test(t.tagName)||"highlight"===t.className&&"SPAN"===t.tagName||Array.from(t.childNodes).forEach((function(t){i(t)}))},i=function(t){return 3===t.nodeType?function(t){var n=t.data.match(e);if(n&&t.data.length>0){var i=document.createElement("span");i.className="highlight";var r=t.splitText(n.index);r.splitText(n[0].length);var o=r.cloneNode(!0);return i.appendChild(o),mt(r,i),1}return 0}(t):(n(t),0)};i(t)}},bt="undefined"!==typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",wt={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}},Ot=function(t){return"undefined"===typeof t||null===t?null:kt(t)},kt=function(t){return"boolean"===typeof t?t?"1":"0":t+""},_t=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},xt=function(t,e,n){var i,r=t.trigger,a={};t.trigger=function(){var n=arguments[0];if(-1===e.indexOf(n))return r.apply(t,arguments);a[n]=arguments},n.apply(t,[]),t.trigger=r;var s,l=o(e);try{for(l.s();!(s=l.n()).done;)(i=s.value)in a&&r.apply(t,a[i])}catch(u){l.e(u)}finally{l.f()}},It=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(t.preventDefault(),e&&t.stopPropagation())},St=function(t,e,n,i){t.addEventListener(e,n,i)},At=function(t,e){return!!e&&(!!e[t]&&1===(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0))},Ct=function(t,e){var n=t.getAttribute("id");return n||(t.setAttribute("id",e),e)},Ft=function(t){return t.replace(/[\\"']/g,"\\$&")},Et=function(t,e){e&&t.append(e)};function Lt(t,e){var n=Object.assign({},wt,e),i=n.dataAttr,r=n.labelField,o=n.valueField,a=n.disabledField,s=n.optgroupField,l=n.optgroupLabelField,u=n.optgroupValueField,c=t.tagName.toLowerCase(),d=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!d&&!n.allowEmptyOption){var p=t.querySelector('option[value=""]');p&&(d=p.textContent)}var f,v,h,g,m,y,b={placeholder:d,options:[],optgroups:[],items:[],maxItems:null};return"select"===c?(v=b.options,h={},g=1,m=function(t){var e=Object.assign({},t.dataset),n=i&&e[i];return"string"===typeof n&&n.length&&(e=Object.assign(e,JSON.parse(n))),e},y=function(t,e){var i=Ot(t.value);if(null!=i&&(i||n.allowEmptyOption)){if(h.hasOwnProperty(i)){if(e){var l=h[i][s];l?Array.isArray(l)?l.push(e):h[i][s]=[l,e]:h[i][s]=e}}else{var u=m(t);u[r]=u[r]||t.textContent,u[o]=u[o]||i,u[a]=u[a]||t.disabled,u[s]=u[s]||e,u.$option=t,h[i]=u,v.push(u)}t.selected&&b.items.push(i)}},b.maxItems=t.hasAttribute("multiple")?null:1,rt(t.children,(function(t){var e,n,i;"optgroup"===(f=t.tagName.toLowerCase())?((i=m(e=t))[l]=i[l]||e.getAttribute("label")||"",i[u]=i[u]||g++,i[a]=i[a]||e.disabled,b.optgroups.push(i),n=i[u],rt(e.children,(function(t){y(t,n)}))):"option"===f&&y(t)}))):function(){var e=t.getAttribute(i);if(e)b.options=JSON.parse(e),rt(b.options,(function(t){b.items.push(t[o])}));else{var a=t.value.trim()||"";if(!n.allowEmptyOption&&!a.length)return;var s=a.split(n.delimiter);rt(s,(function(t){var e={};e[r]=t,e[o]=t,b.options.push(e)})),b.items=s}}(),Object.assign({},wt,b,e)}var jt,Pt=0,$t=function(t){function n(t,i){var r,o;h(this,n),(r=l(this,n)).control_input=void 0,r.wrapper=void 0,r.dropdown=void 0,r.control=void 0,r.dropdown_content=void 0,r.focus_node=void 0,r.order=0,r.settings=void 0,r.input=void 0,r.tabIndex=void 0,r.is_select_tag=void 0,r.rtl=void 0,r.inputId=void 0,r._destroy=void 0,r.sifter=void 0,r.isOpen=!1,r.isDisabled=!1,r.isRequired=void 0,r.isInvalid=!1,r.isValid=!0,r.isLocked=!1,r.isFocused=!1,r.isInputHidden=!1,r.isSetup=!1,r.ignoreFocus=!1,r.ignoreHover=!1,r.hasOptions=!1,r.currentResults=void 0,r.lastValue="",r.caretPos=0,r.loading=0,r.loadedSearches={},r.activeOption=null,r.activeItems=[],r.optgroups={},r.options={},r.userOptions={},r.items=[],Pt++;var a=ot(t);if(a.tomselect)throw new Error("Tom Select already initialized on this element");a.tomselect=u(r),o=(window.getComputedStyle&&window.getComputedStyle(a,null)).getPropertyValue("direction");var s=Lt(a,i);r.settings=s,r.input=a,r.tabIndex=a.tabIndex||0,r.is_select_tag="select"===a.tagName.toLowerCase(),r.rtl=/rtl/i.test(o),r.inputId=Ct(a,"tomselect-"+Pt),r.isRequired=a.required,r.sifter=new it(r.options,{diacritics:s.diacritics}),s.mode=s.mode||(1===s.maxItems?"single":"multi"),"boolean"!==typeof s.hideSelected&&(s.hideSelected="multi"===s.mode),"boolean"!==typeof s.hidePlaceholder&&(s.hidePlaceholder="multi"!==s.mode);var c=s.createFilter;"function"!==typeof c&&("string"===typeof c&&(c=new RegExp(c)),c instanceof RegExp?s.createFilter=function(t){return c.test(t)}:s.createFilter=function(t){return r.settings.duplicates||!r.options[t]}),r.initializePlugins(s.plugins),r.setupCallbacks(),r.setupTemplates();var d,p=ot("<div>"),f=ot("<div>"),v=r._render("dropdown"),g=ot('<div role="listbox" tabindex="-1">'),m=r.input.getAttribute("class")||"",y=s.mode;if(ut(p,s.wrapperClass,m,y),ut(f,s.controlClass),Et(p,f),ut(v,s.dropdownClass,y),s.copyClassesToDropdown&&ut(v,m),ut(g,s.dropdownContentClass),Et(v,g),ot(s.dropdownParent||p).appendChild(v),at(s.controlInput)){d=ot(s.controlInput);et(["autocorrect","autocapitalize","autocomplete"],(function(t){a.getAttribute(t)&&gt(d,e({},t,a.getAttribute(t)))})),d.tabIndex=-1,f.appendChild(d),r.focus_node=d}else s.controlInput?(d=ot(s.controlInput),r.focus_node=d):(d=ot("<input/>"),r.focus_node=f);return r.wrapper=p,r.dropdown=v,r.dropdown_content=g,r.control=f,r.control_input=d,r.setup(),r}return p(n,t),m(n,[{key:"setup",value:function(){var t=this,e=t.settings,n=t.control_input,i=t.dropdown,r=t.dropdown_content,o=t.wrapper,a=t.control,s=t.input,l=t.focus_node,u={passive:!0},c=t.inputId+"-ts-dropdown";gt(r,{id:c}),gt(l,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":c});var d,p,f,v=Ct(l,t.inputId+"-ts-control"),h="label[for='"+function(t){return t.replace(/['"\\]/g,"\\$&")}(t.inputId)+"']",g=document.querySelector(h),m=t.focus.bind(t);if(g){St(g,"click",m),gt(g,{for:v});var y=Ct(g,t.inputId+"-ts-label");gt(l,{"aria-labelledby":y}),gt(r,{"aria-labelledby":y})}if(o.style.width=s.style.width,t.plugins.names.length){var b="plugin-"+t.plugins.names.join(" plugin-");ut([o,i],b)}(null===e.maxItems||e.maxItems>1)&&t.is_select_tag&&gt(s,{multiple:"multiple"}),e.placeholder&&gt(n,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+A(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=(d=e.load,p=e.loadThrottle,function(t,e){var n=this;f&&(n.loading=Math.max(n.loading-1,0),clearTimeout(f)),f=setTimeout((function(){f=null,n.loadedSearches[t]=!0,d.call(n,t,e)}),p)})),t.control_input.type=s.type,St(i,"mousemove",(function(){t.ignoreHover=!1})),St(i,"mouseenter",(function(e){var n=ft(e.target,"[data-selectable]",i);n&&t.onOptionHover(e,n)}),{capture:!0}),St(i,"click",(function(e){var n=ft(e.target,"[data-selectable]");n&&(t.onOptionSelect(e,n),It(e,!0))})),St(a,"click",(function(e){var i=ft(e.target,"[data-ts-item]",a);i&&t.onItemSelect(e,i)?It(e,!0):""==n.value&&(t.onClick(),It(e,!0))})),St(l,"keydown",(function(e){return t.onKeyDown(e)})),St(n,"keypress",(function(e){return t.onKeyPress(e)})),St(n,"input",(function(e){return t.onInput(e)})),St(l,"blur",(function(e){return t.onBlur(e)})),St(l,"focus",(function(e){return t.onFocus(e)})),St(n,"paste",(function(e){return t.onPaste(e)}));var w=function(e){var r=e.composedPath()[0];if(!o.contains(r)&&!i.contains(r))return t.isFocused&&t.blur(),void t.inputState();r==n&&t.isOpen?e.stopPropagation():It(e,!0)},O=function(){t.isOpen&&t.positionDropdown()};St(document,"mousedown",w),St(window,"scroll",O,u),St(window,"resize",O,u),this._destroy=function(){document.removeEventListener("mousedown",w),window.removeEventListener("scroll",O),window.removeEventListener("resize",O),g&&g.removeEventListener("click",m)},this.revertSettings={innerHTML:s.innerHTML,tabIndex:s.tabIndex},s.tabIndex=-1,s.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,St(s,"invalid",(function(){t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())})),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,s.disabled?t.disable():t.enable(),t.on("change",this.onChange),ut(s,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),!0===e.preload&&t.preload()}},{key:"setupOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.addOptions(e),et(n,(function(e){t.registerOptionGroup(e)}))}},{key:"setupTemplates",value:function(){var t=this,e=t.settings.labelField,n=t.settings.optgroupLabelField,i={optgroup:function(t){var e=document.createElement("div");return e.className="optgroup",e.appendChild(t.options),e},optgroup_header:function(t,e){return'<div class="optgroup-header">'+e(t[n])+"</div>"},option:function(t,n){return"<div>"+n(t[e])+"</div>"},item:function(t,n){return"<div>"+n(t[e])+"</div>"},option_create:function(t,e){return'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"},no_results:function(){return'<div class="no-results">No results found</div>'},loading:function(){return'<div class="spinner"></div>'},not_loading:function(){},dropdown:function(){return"<div></div>"}};t.settings.render=Object.assign({},i,t.settings.render)}},{key:"setupCallbacks",value:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)(e=this.settings[n[t]])&&this.on(t,e)}},{key:"sync",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?Lt(t.input,{delimiter:t.settings.delimiter}):t.settings;t.setupOptions(e.options,e.optgroups),t.setValue(e.items||[],!0),t.lastQuery=null}},{key:"onClick",value:function(){var t=this;if(t.activeItems.length>0)return t.clearActiveItems(),void t.focus();t.isFocused&&t.isOpen?t.blur():t.focus()}},{key:"onMouseDown",value:function(){}},{key:"onChange",value:function(){st(this.input,"input"),st(this.input,"change")}},{key:"onPaste",value:function(t){var e=this,n=this;n.isInputHidden||n.isLocked?It(t):n.settings.splitOn&&setTimeout((function(){var t=n.inputValue();if(t.match(n.settings.splitOn)){var i=t.trim().split(n.settings.splitOn);et(i,(function(t){Ot(t)&&(e.options[t]?n.addItem(t):n.createItem(t))}))}}),0)}},{key:"onKeyPress",value:function(t){var e=this;if(!e.isLocked){var n=String.fromCharCode(t.keyCode||t.which);return e.settings.create&&"multi"===e.settings.mode&&n===e.settings.delimiter?(e.createItem(),void It(t)):void 0}It(t)}},{key:"onKeyDown",value:function(t){var e=this;if(e.ignoreHover=!0,e.isLocked)9!==t.keyCode&&It(t);else{switch(t.keyCode){case 65:if(At(bt,t)&&""==e.control_input.value)return It(t),void e.selectAll();break;case 27:return e.isOpen&&(It(t,!0),e.close()),void e.clearActiveItems();case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){var n=e.getAdjacent(e.activeOption,1);n&&e.setActiveOption(n)}return void It(t);case 38:if(e.activeOption){var i=e.getAdjacent(e.activeOption,-1);i&&e.setActiveOption(i)}return void It(t);case 13:return void(e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),It(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&It(t));case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return void(e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),It(t)),e.settings.create&&e.createItem()&&It(t)));case 8:case 46:return void e.deleteSelection(t)}e.isInputHidden&&!At(bt,t)&&It(t)}}},{key:"onInput",value:function(t){var e=this;if(!e.isLocked){var n=e.inputValue();e.lastValue!==n&&(e.lastValue=n,e.settings.shouldLoad.call(e,n)&&e.load(n),e.refreshOptions(),e.trigger("type",n))}}},{key:"onOptionHover",value:function(t,e){this.ignoreHover||this.setActiveOption(e,!1)}},{key:"onFocus",value:function(t){var e=this,n=e.isFocused;if(e.isDisabled)return e.blur(),void It(t);e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.preload(),n||e.trigger("focus"),e.activeItems.length||(e.showInput(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}},{key:"onBlur",value:function(t){if(!1!==document.hasFocus()){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var n=function(){e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,n):n()}}}},{key:"onOptionSelect",value:function(t,e){var n,i=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?i.createItem(null,(function(){i.settings.closeAfterSelect&&i.close()})):"undefined"!==typeof(n=e.dataset.value)&&(i.lastQuery=null,i.addItem(n),i.settings.closeAfterSelect&&i.close(),!i.settings.hideSelected&&t.type&&/click/.test(t.type)&&i.setActiveOption(e)))}},{key:"canSelect",value:function(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}},{key:"onItemSelect",value:function(t,e){var n=this;return!n.isLocked&&"multi"===n.settings.mode&&(It(t),n.setActiveItem(e,t),!0)}},{key:"canLoad",value:function(t){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(t)}},{key:"load",value:function(t){var e=this;if(e.canLoad(t)){ut(e.wrapper,e.settings.loadingClass),e.loading++;var n=e.loadCallback.bind(e);e.settings.load.call(e,t,n)}}},{key:"loadCallback",value:function(t,e){var n=this;n.loading=Math.max(n.loading-1,0),n.lastQuery=null,n.clearActiveOption(),n.setupOptions(t,e),n.refreshOptions(n.isFocused&&!n.isInputHidden),n.loading||ct(n.wrapper,n.settings.loadingClass),n.trigger("load",t,e)}},{key:"preload",value:function(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}},{key:"setTextboxValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.control_input;e.value!==t&&(e.value=t,st(e,"update"),this.lastValue=t)}},{key:"getValue",value:function(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}},{key:"setValue",value:function(t,e){var n=this;xt(this,e?[]:["change"],(function(){n.clear(e),n.addItems(t,e)}))}},{key:"setMaxItems",value:function(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}},{key:"setActiveItem",value:function(t,e){var n,i,r,o,a,s,l=this;if("single"!==l.settings.mode){if(!t)return l.clearActiveItems(),void(l.isFocused&&l.showInput());if("click"===(n=e&&e.type.toLowerCase())&&At("shiftKey",e)&&l.activeItems.length){for(s=l.getLastActive(),(r=Array.prototype.indexOf.call(l.control.children,s))>(o=Array.prototype.indexOf.call(l.control.children,t))&&(a=r,r=o,o=a),i=r;i<=o;i++)t=l.control.children[i],-1===l.activeItems.indexOf(t)&&l.setActiveItemClass(t);It(e)}else"click"===n&&At(bt,e)||"keydown"===n&&At("shiftKey",e)?t.classList.contains("active")?l.removeActiveItem(t):l.setActiveItemClass(t):(l.clearActiveItems(),l.setActiveItemClass(t));l.hideInput(),l.isFocused||l.focus()}}},{key:"setActiveItemClass",value:function(t){var e=this,n=e.control.querySelector(".last-active");n&&ct(n,"last-active"),ut(t,"active last-active"),e.trigger("item_select",t),-1==e.activeItems.indexOf(t)&&e.activeItems.push(t)}},{key:"removeActiveItem",value:function(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),ct(t,"active")}},{key:"clearActiveItems",value:function(){ct(this.activeItems,"active"),this.activeItems=[]}},{key:"setActiveOption",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,gt(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),gt(t,{"aria-selected":"true"}),ut(t,"active"),e&&this.scrollToOption(t)))}},{key:"scrollToOption",value:function(t,e){if(t){var n=this.dropdown_content,i=n.clientHeight,r=n.scrollTop||0,o=t.offsetHeight,a=t.getBoundingClientRect().top-n.getBoundingClientRect().top+r;a+o>i+r?this.scroll(a-i+o,e):a<r&&this.scroll(a,e)}}},{key:"scroll",value:function(t,e){var n=this.dropdown_content;e&&(n.style.scrollBehavior=e),n.scrollTop=t,n.style.scrollBehavior=""}},{key:"clearActiveOption",value:function(){this.activeOption&&(ct(this.activeOption,"active"),gt(this.activeOption,{"aria-selected":null})),this.activeOption=null,gt(this.focus_node,{"aria-activedescendant":null})}},{key:"selectAll",value:function(){var t=this;if("single"!==t.settings.mode){var e=t.controlChildren();e.length&&(t.hideInput(),t.close(),t.activeItems=e,et(e,(function(e){t.setActiveItemClass(e)})))}}},{key:"inputState",value:function(){var t=this;t.control.contains(t.control_input)&&(gt(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&gt(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}},{key:"hideInput",value:function(){this.inputState()}},{key:"showInput",value:function(){this.inputState()}},{key:"inputValue",value:function(){return this.control_input.value.trim()}},{key:"focus",value:function(){var t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout((function(){t.ignoreFocus=!1,t.onFocus()}),0))}},{key:"blur",value:function(){this.focus_node.blur(),this.onBlur()}},{key:"getScoreFunction",value:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}},{key:"getSearchOptions",value:function(){var t=this.settings,e=t.sortField;return"string"===typeof t.sortField&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}},{key:"search",value:function(t){var e,n,i=this,r=this.getSearchOptions();if(i.settings.score&&"function"!==typeof(n=i.settings.score.call(i,t)))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==i.lastQuery?(i.lastQuery=t,e=i.sifter.search(t,Object.assign(r,{score:n})),i.currentResults=e):e=Object.assign({},i.currentResults),i.settings.hideSelected&&(e.items=e.items.filter((function(t){var e=Ot(t.id);return!(e&&-1!==i.items.indexOf(e))}))),e}},{key:"refreshOptions",value:function(){var t,e,n,i,r,o,a,s,l,u,c,d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p={},f=[],v=this,h=v.inputValue(),g=h===v.lastQuery||""==h&&null==v.lastQuery,m=v.search(h),y=null,b=v.settings.shouldOpen||!1,w=v.dropdown_content;for(g&&(y=v.activeOption)&&(l=y.closest("[data-group]")),i=m.items.length,"number"===typeof v.settings.maxOptions&&(i=Math.min(i,v.settings.maxOptions)),i>0&&(b=!0),t=0;t<i;t++){var O=m.items[t];if(O){var k=O.id,_=v.options[k];if(void 0!==_){var x=kt(k),I=v.getOption(x,!0);for(v.settings.hideSelected||I.classList.toggle("selected",v.items.includes(x)),r=_[v.settings.optgroupField]||"",e=0,n=(o=Array.isArray(r)?r:[r])&&o.length;e<n;e++){r=o[e],v.optgroups.hasOwnProperty(r)||(r="");var S=p[r];void 0===S&&(S=document.createDocumentFragment(),f.push(r)),e>0&&(I=I.cloneNode(!0),gt(I,{id:_.$id+"-clone-"+e,"aria-selected":null}),I.classList.add("ts-cloned"),ct(I,"active"),v.activeOption&&v.activeOption.dataset.value==k&&l&&l.dataset.group===r.toString()&&(y=I)),S.appendChild(I),p[r]=S}}}}v.settings.lockOptgroupOrder&&f.sort((function(t,e){var n=v.optgroups[t],i=v.optgroups[e];return(n&&n.$order||0)-(i&&i.$order||0)})),a=document.createDocumentFragment(),et(f,(function(t){var e=p[t];if(e&&e.children.length){var n=v.optgroups[t];if(void 0!==n){var i=document.createDocumentFragment(),r=v.render("optgroup_header",n);Et(i,r),Et(i,e);var o=v.render("optgroup",{group:n,options:i});Et(a,o)}else Et(a,e)}})),w.innerHTML="",Et(w,a),v.settings.highlight&&(c=w.querySelectorAll("span.highlight"),Array.prototype.forEach.call(c,(function(t){var e=t.parentNode;e.replaceChild(t.firstChild,t),e.normalize()})),m.query.length&&m.tokens.length&&et(m.tokens,(function(t){yt(w,t.regex)})));var A=function(t){var e=v.render(t,{input:h});return e&&(b=!0,w.insertBefore(e,w.firstChild)),e};if(v.loading?A("loading"):v.settings.shouldLoad.call(v,h)?0===m.items.length&&A("no_results"):A("not_loading"),(s=v.canCreate(h))&&(u=A("option_create")),v.hasOptions=m.items.length>0||s,b){if(m.items.length>0){if(y||"single"!==v.settings.mode||void 0==v.items[0]||(y=v.getOption(v.items[0])),!w.contains(y)){var C=0;u&&!v.settings.addPrecedence&&(C=1),y=v.selectable()[C]}}else u&&(y=u);d&&!v.isOpen&&(v.open(),v.scrollToOption(y,"auto")),v.setActiveOption(y)}else v.clearActiveOption(),d&&v.isOpen&&v.close(!1)}},{key:"selectable",value:function(){return this.dropdown_content.querySelectorAll("[data-selectable]")}},{key:"addOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;if(Array.isArray(t))return n.addOptions(t,e),!1;var i=Ot(t[n.settings.valueField]);return null!==i&&!n.options.hasOwnProperty(i)&&(t.$order=t.$order||++n.order,t.$id=n.inputId+"-opt-"+t.$order,n.options[i]=t,n.lastQuery=null,e&&(n.userOptions[i]=e,n.trigger("option_add",i,t)),i)}},{key:"addOptions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];et(t,(function(t){e.addOption(t,n)}))}},{key:"registerOption",value:function(t){return this.addOption(t)}},{key:"registerOptionGroup",value:function(t){var e=Ot(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}},{key:"addOptionGroup",value:function(t,e){var n;e[this.settings.optgroupValueField]=t,(n=this.registerOptionGroup(e))&&this.trigger("optgroup_add",n,e)}},{key:"removeOptionGroup",value:function(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}},{key:"clearOptionGroups",value:function(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}},{key:"updateOption",value:function(t,e){var n,i,r=this,o=Ot(t),a=Ot(e[r.settings.valueField]);if(null!==o){var s=r.options[o];if(void 0!=s){if("string"!==typeof a)throw new Error("Value must be set in option data");var l=r.getOption(o),u=r.getItem(o);if(e.$order=e.$order||s.$order,delete r.options[o],r.uncacheValue(a),r.options[a]=e,l){if(r.dropdown_content.contains(l)){var c=r._render("option",e);mt(l,c),r.activeOption===l&&r.setActiveOption(c)}l.remove()}u&&(-1!==(i=r.items.indexOf(o))&&r.items.splice(i,1,a),n=r._render("item",e),u.classList.contains("active")&&ut(n,"active"),mt(u,n)),r.lastQuery=null}}}},{key:"removeOption",value:function(t,e){var n=this;t=kt(t),n.uncacheValue(t),delete n.userOptions[t],delete n.options[t],n.lastQuery=null,n.trigger("option_remove",t),n.removeItem(t,e)}},{key:"clearOptions",value:function(t){var e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();var n={};et(this.options,(function(t,i){e(t,i)&&(n[i]=t)})),this.options=this.sifter.items=n,this.lastQuery=null,this.trigger("option_clear")}},{key:"clearFilter",value:function(t,e){return this.items.indexOf(e)>=0}},{key:"getOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ot(t);if(null===n)return null;var i=this.options[n];if(void 0!=i){if(i.$div)return i.$div;if(e)return this._render("option",i)}return null}},{key:"getAdjacent",value:function(t,e){var n;if(!t)return null;n="item"==(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"option")?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(var i=0;i<n.length;i++)if(n[i]==t)return e>0?n[i+1]:n[i-1];return null}},{key:"getItem",value:function(t){if("object"==v(t))return t;var e=Ot(t);return null!==e?this.control.querySelector('[data-value="'.concat(Ft(e),'"]')):null}},{key:"addItems",value:function(t,e){var n=this,i=Array.isArray(t)?t:[t],r=(i=i.filter((function(t){return-1===n.items.indexOf(t)})))[i.length-1];i.forEach((function(t){n.isPending=t!==r,n.addItem(t,e)}))}},{key:"addItem",value:function(t,e){var n=this;xt(this,e?[]:["change","dropdown_close"],(function(){var i,r,o=n,a=o.settings.mode,s=Ot(t);if((!s||-1===o.items.indexOf(s)||("single"===a&&o.close(),"single"!==a&&o.settings.duplicates))&&null!==s&&o.options.hasOwnProperty(s)&&("single"===a&&o.clear(e),"multi"!==a||!o.isFull())){if(i=o._render("item",o.options[s]),o.control.contains(i)&&(i=i.cloneNode(!0)),r=o.isFull(),o.items.splice(o.caretPos,0,s),o.insertAtCaret(i),o.isSetup){if(!o.isPending&&o.settings.hideSelected){var l=o.getOption(s),u=o.getAdjacent(l,1);u&&o.setActiveOption(u)}o.isPending||o.settings.closeAfterSelect||o.refreshOptions(o.isFocused&&"single"!==a),0!=o.settings.closeAfterSelect&&o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",s,i),o.isPending||o.updateOriginalInput({silent:e})}(!o.isPending||!r&&o.isFull())&&(o.inputState(),o.refreshState())}}))}},{key:"removeItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=this;if(t=n.getItem(t)){var i,r,o=t.dataset.value;i=ht(t),t.remove(),t.classList.contains("active")&&(r=n.activeItems.indexOf(t),n.activeItems.splice(r,1),ct(t,"active")),n.items.splice(i,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(o)&&n.removeOption(o,e),i<n.caretPos&&n.setCaret(n.caretPos-1),n.updateOriginalInput({silent:e}),n.refreshState(),n.positionDropdown(),n.trigger("item_remove",o,t)}}},{key:"createItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};3===arguments.length&&(n=arguments[2]),"function"!=typeof n&&(n=function(){});var i,r=this,o=r.caretPos;if(t=t||r.inputValue(),!r.canCreate(t))return n(),!1;r.lock();var a=!1,s=function(t){if(r.unlock(),!t||"object"!==v(t))return n();var e=Ot(t[r.settings.valueField]);if("string"!==typeof e)return n();r.setTextboxValue(),r.addOption(t,!0),r.setCaret(o),r.addItem(e),n(t),a=!0};return i="function"===typeof r.settings.create?r.settings.create.call(this,t,s):e(e({},r.settings.labelField,t),r.settings.valueField,t),a||s(i),!0}},{key:"refreshItems",value:function(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}},{key:"refreshState",value:function(){var t=this;t.refreshValidityState();var e=t.isFull(),n=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);var i,r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",n),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",(i=t.options,0===Object.keys(i).length)),r.toggle("has-items",t.items.length>0)}},{key:"refreshValidityState",value:function(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}},{key:"isFull",value:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}},{key:"updateOriginalInput",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,r=i.input.querySelector('option[value=""]');if(i.is_select_tag){var o=function(t,e,n){return t||(t=ot('<option value="'+_t(e)+'">'+_t(n)+"</option>")),t!=r&&i.input.append(t),a.push(t),(t!=r||s>0)&&(t.selected=!0),t},a=[],s=i.input.querySelectorAll("option:checked").length;i.input.querySelectorAll("option:checked").forEach((function(t){t.selected=!1})),0==i.items.length&&"single"==i.settings.mode?o(r,"",""):i.items.forEach((function(n){if(t=i.options[n],e=t[i.settings.labelField]||"",a.includes(t.$option)){var r=i.input.querySelector('option[value="'.concat(Ft(n),'"]:not(:checked)'));o(r,n,e)}else t.$option=o(t.$option,n,e)}))}else i.input.value=i.getValue();i.isSetup&&(n.silent||i.trigger("change",i.getValue()))}},{key:"open",value:function(){var t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.isOpen=!0,gt(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),lt(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),lt(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}},{key:"close",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this,n=e.isOpen;t&&(e.setTextboxValue(),"single"===e.settings.mode&&e.items.length&&e.hideInput()),e.isOpen=!1,gt(e.focus_node,{"aria-expanded":"false"}),lt(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),n&&e.trigger("dropdown_close",e.dropdown)}},{key:"positionDropdown",value:function(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),n=t.offsetHeight+e.top+window.scrollY,i=e.left+window.scrollX;lt(this.dropdown,{width:e.width+"px",top:n+"px",left:i+"px"})}}},{key:"clear",value:function(t){var e=this;if(e.items.length){var n=e.controlChildren();et(n,(function(t){e.removeItem(t,!0)})),e.showInput(),t||e.updateOriginalInput(),e.trigger("clear")}}},{key:"insertAtCaret",value:function(t){var e=this,n=e.caretPos,i=e.control;i.insertBefore(t,i.children[n]||null),e.setCaret(n+1)}},{key:"deleteSelection",value:function(t){var e,n,i,r,o,a=this;e=t&&8===t.keyCode?-1:1,n={start:(o=a.control_input).selectionStart||0,length:(o.selectionEnd||0)-(o.selectionStart||0)};var s=[];if(a.activeItems.length)r=vt(a.activeItems,e),i=ht(r),e>0&&i++,et(a.activeItems,(function(t){return s.push(t)}));else if((a.isFocused||"single"===a.settings.mode)&&a.items.length){var l,u=a.controlChildren();e<0&&0===n.start&&0===n.length?l=u[a.caretPos-1]:e>0&&n.start===a.inputValue().length&&(l=u[a.caretPos]),void 0!==l&&s.push(l)}if(!a.shouldDelete(s,t))return!1;for(It(t,!0),"undefined"!==typeof i&&a.setCaret(i);s.length;)a.removeItem(s.pop());return a.showInput(),a.positionDropdown(),a.refreshOptions(!1),!0}},{key:"shouldDelete",value:function(t,e){var n=t.map((function(t){return t.dataset.value}));return!(!n.length||"function"===typeof this.settings.onDelete&&!1===this.settings.onDelete(n,e))}},{key:"advanceSelection",value:function(t,e){var n,i,r=this;r.rtl&&(t*=-1),r.inputValue().length||(At(bt,e)||At("shiftKey",e)?(i=(n=r.getLastActive(t))?n.classList.contains("active")?r.getAdjacent(n,t,"item"):n:t>0?r.control_input.nextElementSibling:r.control_input.previousElementSibling)&&(i.classList.contains("active")&&r.removeActiveItem(n),r.setActiveItemClass(i)):r.moveCaret(t))}},{key:"moveCaret",value:function(t){}},{key:"getLastActive",value:function(t){var e=this.control.querySelector(".last-active");if(e)return e;var n=this.control.querySelectorAll(".active");return n?vt(n,t):void 0}},{key:"setCaret",value:function(t){this.caretPos=this.items.length}},{key:"controlChildren",value:function(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}},{key:"lock",value:function(){this.isLocked=!0,this.refreshState()}},{key:"unlock",value:function(){this.isLocked=!1,this.refreshState()}},{key:"disable",value:function(){var t=this;t.input.disabled=!0,t.control_input.disabled=!0,t.focus_node.tabIndex=-1,t.isDisabled=!0,this.close(),t.lock()}},{key:"enable",value:function(){var t=this;t.input.disabled=!1,t.control_input.disabled=!1,t.focus_node.tabIndex=t.tabIndex,t.isDisabled=!1,t.unlock()}},{key:"destroy",value:function(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,ct(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}},{key:"render",value:function(t,e){var n,i,r=this;if("function"!==typeof this.settings.render[t])return null;if(!(i=r.settings.render[t].call(this,e,_t)))return null;if(i=ot(i),"option"===t||"option_create"===t?e[r.settings.disabledField]?gt(i,{"aria-disabled":"true"}):gt(i,{"data-selectable":""}):"optgroup"===t&&(n=e.group[r.settings.optgroupValueField],gt(i,{"data-group":n}),e.group[r.settings.disabledField]&&gt(i,{"data-disabled":""})),"option"===t||"item"===t){var o=kt(e[r.settings.valueField]);gt(i,{"data-value":o}),"item"===t?(ut(i,r.settings.itemClass),gt(i,{"data-ts-item":""})):(ut(i,r.settings.optionClass),gt(i,{role:"option",id:e.$id}),e.$div=i,r.options[o]=e)}return i}},{key:"_render",value:function(t,e){var n=this.render(t,e);if(null==n)throw"HTMLElement expected";return n}},{key:"clearCache",value:function(){et(this.options,(function(t){t.$div&&(t.$div.remove(),delete t.$div)}))}},{key:"uncacheValue",value:function(t){var e=this.getOption(t);e&&e.remove()}},{key:"canCreate",value:function(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}},{key:"hook",value:function(t,e,n){var i=this,r=i[e];i[e]=function(){var e,o;return"after"===t&&(e=r.apply(i,arguments)),o=n.apply(i,arguments),"instead"===t?o:("before"===t&&(e=r.apply(i,arguments)),e)}}}]),n}(((jt=w).plugins={},function(t){function e(){var t;h(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=l(this,e,[].concat(i))).plugins={names:[],settings:{},requested:{},loaded:{}},t}return p(e,t),m(e,[{key:"initializePlugins",value:function(t){var e,n,i=this,r=[];if(Array.isArray(t))t.forEach((function(t){"string"===typeof t?r.push(t):(i.plugins.settings[t.name]=t.options,r.push(t.name))}));else if(t)for(e in t)t.hasOwnProperty(e)&&(i.plugins.settings[e]=t[e],r.push(e));for(;n=r.shift();)i.require(n)}},{key:"loadPlugin",value:function(t){var e=this,n=e.plugins,i=jt.plugins[t];if(!jt.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=i.fn.apply(e,[e.plugins.settings[t]||{}]),n.names.push(t)}},{key:"require",value:function(t){var e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]}}],[{key:"define",value:function(t,e){jt.plugins[t]={name:t,fn:e}}}]),e}(jt)));$t.define("caret_position",(function(){var t=this;t.hook("instead","setCaret",(function(e){"single"!==t.settings.mode&&t.control.contains(t.control_input)?(e=Math.max(0,Math.min(t.items.length,e)))==t.caretPos||t.isPending||t.controlChildren().forEach((function(n,i){i<e?t.control_input.insertAdjacentElement("beforebegin",n):t.control.appendChild(n)})):e=t.items.length,t.caretPos=e})),t.hook("instead","moveCaret",(function(e){if(t.isFocused){var n=t.getLastActive(e);if(n){var i=ht(n);t.setCaret(e>0?i+1:i),t.setActiveItem(),ct(n,"last-active")}else t.setCaret(t.caretPos+e)}}))})),$t.define("dropdown_input",(function(){var t=this;t.settings.shouldOpen=!0,t.hook("before","setup",(function(){t.focus_node=t.control,ut(t.control_input,"dropdown-input");var e=ot('<div class="dropdown-input-wrap">');e.append(t.control_input),t.dropdown.insertBefore(e,t.dropdown.firstChild);var n=ot('<input class="items-placeholder" tabindex="-1" />');n.placeholder=t.settings.placeholder||"",t.control.append(n)})),t.on("initialize",(function(){t.control_input.addEventListener("keydown",(function(e){switch(e.keyCode){case 27:return t.isOpen&&(It(e,!0),t.close()),void t.clearActiveItems();case 9:t.focus_node.tabIndex=-1}return t.onKeyDown.call(t,e)})),t.on("blur",(function(){t.focus_node.tabIndex=t.isDisabled?-1:t.tabIndex})),t.on("dropdown_open",(function(){t.control_input.focus()}));var e=t.onBlur;t.hook("instead","onBlur",(function(n){if(!n||n.relatedTarget!=t.control_input)return e.call(t)})),St(t.control_input,"blur",(function(){return t.onBlur()})),t.hook("before","close",(function(){t.isOpen&&t.focus_node.focus({preventScroll:!0})}))}))})),$t.define("no_backspace_delete",(function(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",(function(n){return!!t.activeItems.length&&e.call(t,n)}))})),$t.define("remove_button",(function(t){var e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t),n=this;if(e.append){var i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+_t(e.title)+'">'+e.label+"</a>";n.hook("after","setupTemplates",(function(){var t=n.settings.render.item;n.settings.render.item=function(e,r){var o=ot(t.call(n,e,r)),a=ot(i);return o.appendChild(a),St(a,"mousedown",(function(t){It(t,!0)})),St(a,"click",(function(t){It(t,!0),n.isLocked||n.shouldDelete([o],t)&&(n.removeItem(o),n.refreshOptions(!1),n.inputState())})),o}}))}})),$t.define("restore_on_backspace",(function(t){var e=this,n=Object.assign({text:function(t){return t[e.settings.labelField]}},t);e.on("item_remove",(function(t){if(e.isFocused&&""===e.control_input.value.trim()){var i=e.options[t];i&&e.setTextboxValue(n.text.call(e,i))}}))})),t.exports=$t},4737:function(t,e,n){"use strict";t.exports=n.p+"media/documents/37364f317e5732cb655a.md"},3157:function(t,e,n){"use strict";t.exports=n.p+"media/documents/057f608bdff3d77526ff.odt"},2355:function(t,e,n){"use strict";t.exports=n.p+"media/images/decidim_gamification_badges_accepted_proposals-8b0f9473774f7761cab5.svg"},8568:function(t,e,n){"use strict";t.exports=n.p+"media/images/decidim_gamification_badges_proposal_votes-80a97598a4719e1eedfb.svg"},7461:function(t,e,n){"use strict";t.exports=n.p+"media/images/decidim_gamification_badges_proposals-cdb21571f327000c14da.svg"},9453:function(t,e,n){"use strict";t.exports=n.p+"media/images/decidim_proposals-15e5583a7f2834cd644e.svg"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/decidim-packs/",function(){"use strict";n(8107);function t(t,e,n){var i="".concat(t,"Name");if(n[i])return n[i];var r=e.attr("name"),o=/\[[^\]]+\]$/;return r.match(o)?r.replace(o,"[".concat(t,"]")):t}function e(e,n,i){var r=$.extend({},n),o=e.attr("id").split("_");o.pop();var a="".concat(o.join("_")),s="latitude",l="longitude";e.length>0&&(s=t("latitude",e,r),l=t("longitude",e,r));var u=$.extend({latitudeId:"".concat(a,"_latitude"),longitudeId:"".concat(a,"_longitude"),latitudeName:s,longitudeName:l},n),c=!1,d=function(t){!function(){var t=$("#".concat(u.latitudeId));t.length<1&&(t=$('<input type="hidden" name="'.concat(u.latitudeName,'" id="').concat(u.latitudeId,'" />')),e.after(t));var n=$("#".concat(u.longitudeId));n.length<1&&(n=$('<input type="hidden" name="'.concat(u.longitudeName,'" id="').concat(u.longitudeId,'" />')),e.after(n))}(),$("#".concat(u.latitudeId)).val(t[0]).attr("value",t[0]),$("#".concat(u.longitudeId)).val(t[1]).attr("value",t[1])};e.on("change.decidim",(function(){c||($("#".concat(u.latitudeId)).val("").removeAttr("value"),$("#".concat(u.longitudeId)).val("").removeAttr("value"))})),e.on("geocoder-suggest-coordinates.decidim",(function(t,e){d(e),c=!0,"function"!==typeof i||i(e)}));var p="".concat(e.data("coordinates")).split(",").map(parseFloat);Array.isArray(p)&&2===p.length&&d(p)}$((function(){var n=$("#address_map"),i=$("[data-decidim-geocoding]");if(n.length){i.data("coordinates")||n.hide(),i.on("geocoder-suggest-coordinates.decidim",(function(){return n.show()}));var r="latitude",o="longitude";i.length>0&&(r=t("latitude",i,{}),o=t("longitude",i,{})),$("[data-decidim-map]").on("ready.decidim",(function(t){var n=$(t.target).data("map-controller");n.setEventHandler("coordinates",(function(t){$("input[name='".concat(r,"']")).val(t.lat),$("input[name='".concat(o,"']")).val(t.lng)})),e(i,null,(function(t){n.removeMarker(),n.addMarker({latitude:t[0],longitude:t[1],address:i.val()})}))}))}}));var i=n(5085),r=n.n(i);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){var i;return i=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==o(i)?i:String(i))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("#proposals_list").forEach((function(t){var e=t.dataset,n=e.tmName,i=e.tmItems,o=e.tmNoResults,a={plugins:["remove_button","dropdown_input"],allowEmptyOption:!0,items:JSON.parse(i),render:s({item:function(t,e){return"<div>".concat(e(t.text),'<input type="hidden" name="').concat(n,'[]" value="').concat(t.value,'" /></div>')}},o&&{no_results:function(){return'<div class="no-results">'.concat(o,"</div>")}})};return new(r())(t,a)}))})),n(2518),n(3262)}()}();
//# sourceMappingURL=decidim_proposals-4d3982099bb3876bb3b2.js.map